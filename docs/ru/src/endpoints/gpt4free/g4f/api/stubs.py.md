# Модуль stubs

## Обзор

Модуль содержит структуры данных (классы) для работы с API g4f. Он определяет конфигурации для чат-запросов, генерации изображений, а также модели ответов от провайдеров и моделей. Модуль использует библиотеку `pydantic` для определения схем данных и аннотации типов для обеспечения надежности и понятности кода.

## Подробнее

Этот модуль предназначен для стандартизации данных, передаваемых между различными компонентами системы g4f. Он определяет форматы запросов и ответов, что упрощает интеграцию и поддержку различных провайдеров и моделей.

## Классы

### `ChatCompletionsConfig`

**Описание**: Класс конфигурации для запросов на завершение чата. Он содержит все необходимые параметры для отправки запроса к API, такие как сообщения, модель, провайдер и другие настройки.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `messages` (Messages): Список сообщений для чата. Пример: `[[{"role": "system", "content": ""}, {"role": "user", "content": ""}]]`.
- `model` (str): Имя модели для использования. По умолчанию "".
- `provider` (Optional[str]): Имя провайдера. По умолчанию `None`.
- `stream` (bool): Флаг для включения потоковой передачи. По умолчанию `False`.
- `image` (Optional[str]): URL изображения. По умолчанию `None`.
- `image_name` (Optional[str]): Имя изображения. По умолчанию `None`.
- `images` (Optional[list[tuple[str, str]]]): Список кортежей изображений (URL, имя). По умолчанию `None`.
- `media` (Optional[list[tuple[str, str]]]): Список кортежей медиа (URL, имя). По умолчанию `None`.
- `modalities` (Optional[list[str]]): Список модальностей. По умолчанию `["text", "audio"]`.
- `temperature` (Optional[float]): Температура модели. По умолчанию `None`.
- `presence_penalty` (Optional[float]): Штраф за присутствие. По умолчанию `None`.
- `frequency_penalty` (Optional[float]): Штраф за частоту. По умолчанию `None`.
- `top_p` (Optional[float]): Top P. По умолчанию `None`.
- `max_tokens` (Optional[int]): Максимальное количество токенов. По умолчанию `None`.
- `stop` (Union[list[str], str, None]): Условие остановки. По умолчанию `None`.
- `api_key` (Optional[str]): Ключ API. По умолчанию `None`.
- `api_base` (str): Базовый URL API. По умолчанию `None`.
- `web_search` (Optional[bool]): Флаг для включения веб-поиска. По умолчанию `None`.
- `proxy` (Optional[str]): Прокси. По умолчанию `None`.
- `conversation_id` (Optional[str]): ID разговора. По умолчанию `None`.
- `conversation` (Optional[dict]): Данные разговора. По умолчанию `None`.
- `return_conversation` (Optional[bool]): Флаг для возврата разговора. По умолчанию `None`.
- `history_disabled` (Optional[bool]): Флаг для отключения истории. По умолчанию `None`.
- `timeout` (Optional[int]): Время ожидания. По умолчанию `None`.
- `tool_calls` (list): Список вызовов инструментов. Пример: `[[{"function": {"arguments": {"query":"search query", "max_results":5, "max_words": 2500, "backend": "auto", "add_text": True, "timeout": 5},"name": "search_tool"},"type": "function"}]]`. По умолчанию `[]`.
- `tools` (list): Список инструментов. По умолчанию `None`.
- `parallel_tool_calls` (bool): Флаг для параллельных вызовов инструментов. По умолчанию `None`.
- `tool_choice` (Optional[str]): Выбор инструмента. По умолчанию `None`.
- `reasoning_effort` (Optional[str]): Уровень рассуждения. По умолчанию `None`.
- `logit_bias` (Optional[dict]): Смещение логитов. По умолчанию `None`.
- `modalities` (Optional[list[str]]): Список модальностей. По умолчанию `None`.
- `audio` (Optional[dict]): Аудио. По умолчанию `None`.
- `response_format` (Optional[dict]): Формат ответа. По умолчанию `None`.
- `extra_data` (Optional[dict]): Дополнительные данные. По умолчанию `None`.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для конфигурации запросов к моделям чата. Он использует `pydantic` для валидации данных и аннотации типов, что обеспечивает надежность и понятность конфигурации.

### `ImageGenerationConfig`

**Описание**: Класс конфигурации для запросов на генерацию изображений. Он содержит параметры, такие как prompt, модель, провайдер и другие настройки.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `prompt` (str): Текст запроса.
- `model` (Optional[str]): Имя модели. По умолчанию `None`.
- `provider` (Optional[str]): Имя провайдера. По умолчанию `None`.
- `response_format` (Optional[str]): Формат ответа. По умолчанию `None`.
- `api_key` (Optional[str]): Ключ API. По умолчанию `None`.
- `proxy` (Optional[str]): Прокси. По умолчанию `None`.
- `width` (Optional[int]): Ширина изображения. По умолчанию `None`.
- `height` (Optional[int]): Высота изображения. По умолчанию `None`.
- `num_inference_steps` (Optional[int]): Количество шагов инференса. По умолчанию `None`.
- `seed` (Optional[int]): Зерно. По умолчанию `None`.
- `guidance_scale` (Optional[int]): Масштаб руководства. По умолчанию `None`.
- `aspect_ratio` (Optional[str]): Соотношение сторон. По умолчанию `None`.
- `n` (Optional[int]): Количество изображений. По умолчанию `None`.
- `negative_prompt` (Optional[str]): Негативный запрос. По умолчанию `None`.
- `resolution` (Optional[str]): Разрешение. По умолчанию `None`.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для конфигурации запросов к моделям генерации изображений. Он использует `pydantic` для валидации данных и аннотации типов, что обеспечивает надежность и понятность конфигурации.

### `ProviderResponseModel`

**Описание**: Класс для представления ответа от провайдера.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `id` (str): Уникальный идентификатор провайдера.
- `object` (str): Тип объекта. Всегда "provider".
- `created` (int): Время создания.
- `url` (Optional[str]): URL. По умолчанию `None`.
- `label` (Optional[str]): Метка. По умолчанию `None`.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления ответа от провайдера. Он используется для стандартизации ответов от различных провайдеров.

### `ProviderResponseDetailModel`

**Описание**: Класс для представления детальной информации об ответе от провайдера.

**Наследует**: `ProviderResponseModel`.

**Атрибуты**:
- `models` (list[str]): Список моделей.
- `image_models` (list[str]): Список моделей изображений.
- `vision_models` (list[str]): Список моделей для работы с vision.
- `params` (list[str]): Список параметров.

**Методы**: Нет.

**Принцип работы**:
Этот класс расширяет `ProviderResponseModel` и добавляет детальную информацию о моделях, поддерживаемых провайдером.

### `ModelResponseModel`

**Описание**: Класс для представления ответа о модели.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `id` (str): Уникальный идентификатор модели.
- `object` (str): Тип объекта. Всегда "model".
- `created` (int): Время создания.
- `owned_by` (Optional[str]): Владелец. По умолчанию `None`.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления информации о модели.

### `UploadResponseModel`

**Описание**: Класс для представления ответа об загрузке.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `bucket_id` (str): ID бакета.
- `url` (str): URL.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления информации об загрузке.

### `ErrorResponseModel`

**Описание**: Класс для представления ответа об ошибке.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `error` (ErrorResponseMessageModel): Модель сообщения об ошибке.
- `model` (Optional[str]): Имя модели. По умолчанию `None`.
- `provider` (Optional[str]): Имя провайдера. По умолчанию `None`.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления информации об ошибке.

### `ErrorResponseMessageModel`

**Описание**: Класс для представления сообщения об ошибке.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `message` (str): Сообщение об ошибке.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления сообщения об ошибке.

### `FileResponseModel`

**Описание**: Класс для представления ответа о файле.

**Наследует**: `BaseModel` из библиотеки `pydantic`.

**Атрибуты**:
- `filename` (str): Имя файла.

**Методы**: Нет.

**Принцип работы**:
Этот класс определяет структуру данных для представления информации о файле.