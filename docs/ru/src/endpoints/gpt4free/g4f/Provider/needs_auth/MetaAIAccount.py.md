# Модуль MetaAIAccount

## Обзор

Модуль `MetaAIAccount` является расширением класса `MetaAI` и предназначен для работы с аккаунтами Meta AI, требующими авторизации. Он предоставляет функциональность для генерации ответов от Meta AI с использованием асинхронных генераторов.

## Подробнее

Этот модуль специфичен для случаев, когда требуется аутентификация для доступа к Meta AI. Он использует cookies для поддержания сессии и прокси для обеспечения анонимности.

## Классы

### `MetaAIAccount`

**Описание**: Класс `MetaAIAccount` наследуется от `MetaAI` и реализует функциональность для работы с аккаунтами Meta AI, требующими авторизации.

**Наследует**:

- `MetaAI`: Предоставляет базовую функциональность для взаимодействия с Meta AI.

**Атрибуты**:

- `needs_auth` (bool): Указывает, требуется ли аутентификация для использования этого класса. Всегда `True`.
- `parent` (str): Указывает родительский класс. Всегда `"MetaAI"`.
- `image_models` (List[str]): Список поддерживаемых моделей изображений. Всегда `["meta"]`.

**Методы**:

- `create_async_generator`: Создает асинхронный генератор для получения ответов от Meta AI.

## Функции

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    proxy: str = None,
    cookies: Cookies = None,
    **kwargs
) -> AsyncResult:
    """
    Создает асинхронный генератор для получения ответов от Meta AI.

    Args:
        cls (MetaAIAccount): Ссылка на класс.
        model (str): Имя модели для использования.
        messages (Messages): Список сообщений для отправки в Meta AI.
        proxy (str, optional): Адрес прокси-сервера для использования. По умолчанию `None`.
        cookies (Cookies, optional): Cookies для аутентификации. По умолчанию `None`.
        **kwargs: Дополнительные параметры.

    Returns:
        AsyncResult: Асинхронный генератор, возвращающий чанки ответов от Meta AI.

    Как работает функция:
    1. Функция определяет, переданы ли cookies. Если cookies не переданы, то пытается получить их для домена ".meta.ai".
    2. Создает экземпляр класса `MetaAIAccount` с использованием прокси.
    3. Вызывает метод `prompt` для получения асинхронного генератора ответов от Meta AI.
    4. Возвращает асинхронный генератор, который выдает чанки ответов.

    Внутренние функции:
    - Отсутствуют

    """
    ...
```

**Назначение**: Создает асинхронный генератор для получения ответов от Meta AI.

**Параметры**:

- `cls` (MetaAIAccount): Ссылка на класс.
- `model` (str): Имя модели для использования.
- `messages` (Messages): Список сообщений для отправки в Meta AI.
- `proxy` (str, optional): Адрес прокси-сервера для использования. По умолчанию `None`.
- `cookies` (Cookies, optional): Cookies для аутентификации. По умолчанию `None`.
- `**kwargs`: Дополнительные параметры.

**Возвращает**:

- `AsyncResult`: Асинхронный генератор, возвращающий чанки ответов от Meta AI.

**Как работает функция**:

```ascii
      Получение Cookies
      │
      │ Cookies переданы?
      ├─No───────────────────────────────Yes─┤
      │                                     │
      │ Получение cookies для .meta.ai       │
      │                                     │
      Создание экземпляра MetaAIAccount
      │
      Вызов метода prompt
      │
      Возврат асинхронного генератора
```

1.  Функция проверяет, были ли переданы cookies. Если cookies не предоставлены, функция пытается получить их для домена `.meta.ai`. Это необходимо для аутентификации при взаимодействии с Meta AI.

2.  Создается экземпляр класса `MetaAIAccount`, который использует прокси-сервер, если он указан. Это позволяет обеспечить анонимность и избежать блокировок.

3.  Вызывается метод `prompt` для получения асинхронного генератора ответов от Meta AI. Этот генератор возвращает чанки (фрагменты) ответа, что позволяет обрабатывать большие объемы данных асинхронно.

4.  Функция возвращает асинхронный генератор, который выдает чанки ответов.

**Примеры**:

```python
# Пример вызова функции с cookies
cookies = {"cookie1": "value1", "cookie2": "value2"}
async_generator = MetaAIAccount.create_async_generator(
    model="default", messages=[{"role": "user", "content": "Hello"}], cookies=cookies
)

# Пример вызова функции с прокси
async_generator = MetaAIAccount.create_async_generator(
    model="default", messages=[{"role": "user", "content": "Hello"}], proxy="http://proxy:8080"
)

# Пример вызова без cookies и прокси
async_generator = MetaAIAccount.create_async_generator(
    model="default", messages=[{"role": "user", "content": "Hello"}]
)