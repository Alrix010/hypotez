# Модуль Raycast

## Обзор

Модуль `Raycast` предоставляет класс `Raycast`, который является провайдером для взаимодействия с моделями GPT через API Raycast. Этот модуль позволяет отправлять запросы к моделям, таким как "gpt-3.5-turbo" и "gpt-4", с использованием токена аутентификации. Модуль поддерживает потоковую передачу данных и требует наличия аутентификации.

## Подробней

Модуль предназначен для интеграции с API Raycast для получения ответов от AI моделей. Он использует библиотеку `requests` для отправки HTTP запросов и обрабатывает потоковые ответы. Этот модуль является частью системы, где требуется взаимодействие с различными AI провайдерами, и Raycast выступает в качестве одного из таких провайдеров.

## Классы

### `Raycast`

**Описание**: Класс `Raycast` предоставляет интерфейс для взаимодействия с API Raycast для генерации текста с использованием моделей GPT.

**Наследует**:
- `AbstractProvider`: Абстрактный класс, определяющий базовый интерфейс для всех провайдеров.

**Атрибуты**:
- `url` (str): URL адрес сервиса Raycast.
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных (значение `True`).
- `needs_auth` (bool): Указывает, требуется ли аутентификация для использования провайдера (значение `True`).
- `working` (bool): Указывает, находится ли провайдер в рабочем состоянии (значение `False`).
- `models` (List[str]): Список поддерживаемых моделей (`"gpt-3.5-turbo"`, `"gpt-4"`).

**Методы**:
- `create_completion`: Метод для создания запроса на завершение текста к API Raycast.

## Методы класса

### `create_completion`

```python
    @staticmethod
    def create_completion(
        model: str,
        messages: Messages,
        stream: bool,
        proxy: str = None,
        **kwargs,
    ) -> CreateResult:
        """ Функция создает запрос на завершение текста к API Raycast.

        Args:
            model (str): Имя используемой модели.
            messages (Messages): Список сообщений для отправки в запросе.
            stream (bool): Определяет, использовать ли потоковую передачу данных.
            proxy (str, optional): Прокси-сервер для использования при отправке запроса. По умолчанию `None`.
            **kwargs: Дополнительные аргументы, включающие `auth` токен.

        Returns:
            CreateResult: Генератор токенов завершения, возвращаемых API.

        Raises:
            ValueError: Если не предоставлен токен аутентификации (`auth`).

        
        - Функция принимает параметры модели, сообщения, потоковую передачу и прокси.
        - Извлекает токен аутентификации из `kwargs`.
        - Формирует заголовки запроса, включая токен аутентификации.
        - Преобразует сообщения в формат, требуемый API Raycast.
        - Формирует данные запроса в формате JSON.
        - Отправляет POST запрос к API Raycast с использованием библиотеки `requests`.
        - Итерируется по строкам ответа, извлекая и декодируя полезные данные.
        - Извлекает токены завершения из данных и генерирует их.
        """
```

## Параметры класса

- `model` (str): Имя модели, используемой для генерации текста.
- `messages` (Messages): Список сообщений, отправляемых в запросе. Каждое сообщение содержит роль (`role`) и содержимое (`content`).
- `stream` (bool): Флаг, указывающий, использовать ли потоковую передачу данных. Если `True`, ответ будет возвращаться по частям в виде генератора.
- `proxy` (str, optional): URL прокси-сервера для использования при отправке запроса. По умолчанию `None`.
- `**kwargs`: Дополнительные параметры, передаваемые в функцию. Обязательно включает параметр `auth` с токеном аутентификации.

## Примеры

Пример вызова функции `create_completion`:

```python
# Для корректной работы необходимо предоставить auth token
auth_token = "your_auth_token_here"
messages = [{"role": "user", "content": "Напиши короткий рассказ о космосе."}]
model = "gpt-3.5-turbo"

try:
    result = Raycast.create_completion(model=model, messages=messages, stream=True, auth=auth_token)
    if result:
        for token in result:
            print(token, end="")
    else:
        print("Ошибка при получении ответа.")
except ValueError as ex:
    print(f"Ошибка аутентификации: {ex}")