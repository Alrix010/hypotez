# Модуль `TypeGPT`

## Обзор

Модуль `TypeGPT` предоставляет класс `TypeGPT`, который является наследником класса `OpenaiTemplate`. Этот модуль предназначен для взаимодействия с сервисом `chat.typegpt.net` и предоставляет методы для получения списка доступных моделей и выполнения запросов к API. Класс содержит настройки для работы с API, такие как URL, заголовки и список поддерживаемых моделей.

## Подробнее

Модуль `TypeGPT` является частью проекта `hypotez` и предназначен для интеграции с сервисом `chat.typegpt.net`. Он использует класс `OpenaiTemplate` в качестве базового класса и предоставляет методы для получения списка доступных моделей и выполнения запросов к API. Этот модуль важен для обеспечения работы с различными AI-моделями, предоставляемыми сервисом `chat.typegpt.net`.

## Классы

### `TypeGPT`

**Описание**: Класс `TypeGPT` является наследником класса `OpenaiTemplate` и предназначен для взаимодействия с сервисом `chat.typegpt.net`.

**Наследует**:
- `OpenaiTemplate`: Класс, предоставляющий общую структуру для взаимодействия с API OpenAI.

**Атрибуты**:
- `label` (str): Метка провайдера, значение `"TypeGpt"`.
- `url` (str): URL сервиса `chat.typegpt.net`, значение `"https://chat.typegpt.net"`.
- `api_base` (str): Базовый URL API, значение `"https://chat.typegpt.net/api/openai/v1"`.
- `working` (bool): Флаг, указывающий на работоспособность провайдера, значение `True`.
- `headers` (dict): Заголовки HTTP-запросов, необходимые для взаимодействия с API.
- `default_model` (str): Модель, используемая по умолчанию, значение `'gpt-4o-mini-2024-07-18'`.
- `default_vision_model` (str): Модель для работы с изображениями, значение совпадает с `default_model`.
- `vision_models` (list): Список моделей, поддерживающих работу с изображениями.
- `fallback_models` (list): Список моделей для переключения в случае проблем с основной моделью.
- `image_models` (list): Список моделей для генерации изображений.
- `model_aliases` (dict): Словарь псевдонимов моделей.

**Методы**:
- `get_models(**kwargs)`: Получает список доступных моделей.

## Функции

### `get_models`

```python
@classmethod
def get_models(cls, **kwargs):
    """Получает список доступных моделей.

    Args:
        **kwargs: Дополнительные аргументы.

    Returns:
        list: Список доступных моделей.
    """
```

**Назначение**: Получение списка доступных моделей из API сервиса `chat.typegpt.net`.

**Параметры**:
- `cls`: Ссылка на класс `TypeGPT`.
- `**kwargs`: Дополнительные аргументы (не используются).

**Возвращает**:
- `list`: Список доступных моделей.

**Как работает функция**:
1. **Проверка наличия моделей в кэше**: Функция сначала проверяет, был ли уже получен список моделей и сохранен в атрибуте `cls.models`.
2. **Получение моделей из API**: Если список моделей отсутствует в кэше, функция выполняет GET-запрос к адресу `{cls.url}/api/config` для получения конфигурации сервиса.
3. **Обработка полученных данных**: Из полученного JSON-ответа извлекается строка `customModels`, которая разделяется на список моделей.
4. **Фильтрация и форматирование моделей**: Список моделей фильтруется, чтобы оставить только те, которые начинаются с `"+"` и не входят в список `image_models`. Затем из каждой модели удаляется префикс `"+"` и все символы после символа `@`.
5. **Кэширование моделей**: Полученный список моделей сохраняется в атрибуте `cls.models` для последующего использования.
6. **Возврат списка моделей**: Функция возвращает список доступных моделей.

```
 A: Проверка наличия моделей в кэше (cls.models)
 |
 -- B: Получение конфигурации сервиса (GET-запрос к API)
 |
 C: Извлечение списка моделей из JSON-ответа
 |
 D: Фильтрация и форматирование списка моделей
 |
 E: Кэширование списка моделей (cls.models)
 |
 F: Возврат списка моделей
```

**Примеры**:

```python
# Пример вызова функции get_models
models = TypeGPT.get_models()
print(models)