# Документация для модуля `Aibn.py`

## Обзор

Модуль предоставляет асинхронный генератор для взаимодействия с сервисом Aibn (https://aibn.cc), который предоставляет доступ к моделям GPT.
Он включает в себя функциональность для создания асинхронных запросов, генерации подписей для запросов и обработки потоковых ответов.

## Подробнее

Модуль предназначен для интеграции с сервисом Aibn для генерации текста на основе предоставленных сообщений.
Он использует асинхронные запросы для получения ответов от сервиса и предоставляет возможность использования прокси.

## Классы

### `Aibn`

**Описание**: Класс `Aibn` является провайдером асинхронного генератора, который взаимодействует с сервисом Aibn.cc для генерации ответов на основе модели GPT.

**Наследует**: `AsyncGeneratorProvider`

**Атрибуты**:
- `url` (str): URL сервиса Aibn.
- `working` (bool): Указывает, работает ли сервис.
- `supports_message_history` (bool): Указывает, поддерживает ли сервис историю сообщений.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли сервис модель GPT-3.5 Turbo.

**Методы**:
- `create_async_generator`: Создает асинхронный генератор для получения ответов от сервиса Aibn.

## Методы класса

### `create_async_generator`

```python
    @classmethod
    async def create_async_generator(
        cls,
        model: str,
        messages: Messages,
        proxy: str = None,
        timeout: int = 120,
        **kwargs
    ) -> AsyncResult:
        """ Создает асинхронный генератор для получения ответов от сервиса Aibn.

        Args:
            model (str): Название используемой модели.
            messages (Messages): Список сообщений для отправки в запросе.
            proxy (str, optional): URL прокси-сервера для использования. По умолчанию `None`.
            timeout (int, optional): Максимальное время ожидания ответа в секундах. По умолчанию 120.
            **kwargs: Дополнительные аргументы.

        Returns:
            AsyncResult: Асинхронный генератор, который выдает ответы от сервиса Aibn.

        Raises:
            Exception: В случае ошибки при выполнении запроса.

        
        - Функция принимает параметры модели, список сообщений, прокси и время ожидания.
        - Создается асинхронная сессия с использованием `StreamSession` для выполнения запросов.
        - Формируются данные для отправки в запросе, включая сообщения, подпись и временную метку.
        - Выполняется POST-запрос к API сервиса Aibn.
        - Функция итерируется по чанкам ответа и декодирует их для выдачи через генератор.

        Внутренние функции:
        - Отсутствуют

        """
```

## Функции

### `generate_signature`

```python
def generate_signature(timestamp: int, message: str, secret: str = "undefined"):
    """ Генерирует подпись для запроса к сервису Aibn.

    Args:
        timestamp (int): Временная метка запроса.
        message (str): Сообщение для подписи.
        secret (str, optional): Секретный ключ для подписи. По умолчанию "undefined".

    Returns:
        str: SHA256 хеш подписи.

    
    - Функция принимает временную метку, сообщение и секретный ключ.
    - Формирует строку данных для подписи, объединяя временную метку, сообщение и секретный ключ через двоеточие.
    - Вычисляет SHA256 хеш от строки данных и возвращает его в шестнадцатеричном формате.

    Внутренние функции:
    - Отсутствуют

    Примеры:
        >>> generate_signature(1678886400, "Hello", "secret")
        'e5e9fa1ba31ecd1ae84f75caaa474f3a663f05f416455096699a9c5489a2a9e1'
    """