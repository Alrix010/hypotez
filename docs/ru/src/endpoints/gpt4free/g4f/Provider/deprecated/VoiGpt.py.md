# Модуль `VoiGpt.py`

## Обзор

Модуль `VoiGpt.py` предоставляет класс `VoiGpt`, который является провайдером для взаимодействия с VoiGpt.com. VoiGpt.com предоставляет доступ к моделям, аналогичным GPT, через свой API. Этот модуль позволяет отправлять сообщения и получать ответы от этих моделей.

## Подробнее

Модуль предназначен для интеграции с VoiGpt.com и требует наличия `csrf token/cookie` для аутентификации.
Он поддерживает модель "gpt-3.5-turbo", имеет возможность работы с историей сообщений, но не поддерживает потоковую передачу данных.

## Классы

### `VoiGpt`

**Описание**:
Класс `VoiGpt` является провайдером для VoiGpt.com. Он реализует метод `create_completion` для отправки запросов к API VoiGpt.

**Наследует**:
`AbstractProvider` - абстрактный класс, определяющий интерфейс для всех провайдеров в проекте.

**Атрибуты**:
- `url` (str): URL для доступа к VoiGpt.com.
- `working` (bool): Статус работоспособности провайдера (в данном случае `False`).
- `supports_gpt_35_turbo` (bool): Поддержка модели `gpt-3.5-turbo` (в данном случае `True`).
- `supports_message_history` (bool): Поддержка истории сообщений (в данном случае `True`).
- `supports_stream` (bool): Поддержка потоковой передачи данных (в данном случае `False`).
- `_access_token` (str): Приватный атрибут для хранения токена доступа.

**Методы**:
- `create_completion()`: Метод для отправки запроса на генерацию ответа.

## Методы класса

### `create_completion`

```python
@classmethod
def create_completion(
    cls,
    model: str,
    messages: Messages,
    stream: bool,
    proxy: str = None,
    access_token: str = None,
    **kwargs
) -> CreateResult:
    """
    Функция отправляет запрос к VoiGpt.com для генерации ответа на основе предоставленных сообщений.

    Args:
        cls (type): Ссылка на класс.
        model (str): Модель для использования. Если не указана, используется `gpt-3.5-turbo`.
        messages (Messages): Список сообщений для отправки.
        stream (bool): Флаг, указывающий на необходимость потоковой передачи (в данном случае не поддерживается).
        proxy (str, optional): Прокси-сервер для использования. По умолчанию `None`.
        access_token (str, optional): Токен доступа. Если не указан, пытается получить из cookies. По умолчанию `None`.
        **kwargs: Дополнительные именованные аргументы.

    Returns:
        CreateResult: Объект, содержащий результат запроса. В данном случае, генератор, возвращающий ответ.

    Raises:
        RuntimeError: Если получен неожиданный ответ от сервера.

    
    - Если `model` не указана, устанавливает значение по умолчанию `gpt-3.5-turbo`.
    - Если `access_token` не предоставлен, пытается использовать сохраненный `cls._access_token`.
    - Если `access_token` все еще отсутствует, функция отправляет GET-запрос на главную страницу VoiGpt.com, чтобы получить CSRF-токен из cookies.
    - Формирует заголовки (`headers`) для POST-запроса, включая CSRF-токен.
    - Создает полезную нагрузку (`payload`) с сообщениями для отправки.
    - Отправляет POST-запрос на URL `/generate_response/`.
    - Извлекает JSON-ответ и возвращает сгенерированный ответ.
    - Обрабатывает возможные ошибки, связанные с неожиданным форматом ответа от сервера, и генерирует исключение `RuntimeError`.

    Внутренние функции:
        - Отсутствуют.

    Примеры:
        >>> # Пример использования (требуется действительный access_token)
        >>> # result = VoiGpt.create_completion(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Hello"}], stream=False, access_token="your_access_token")
        >>> # for item in result:
        >>> #     print(item)
    """