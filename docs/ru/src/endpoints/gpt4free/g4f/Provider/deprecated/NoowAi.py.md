# Документация для модуля `NoowAi`

## Обзор

Модуль `NoowAi` представляет собой асинхронтный провайдер для взаимодействия с сервисом `noowai.com`. Он поддерживает обмен сообщениями с использованием GPT-3.5 Turbo и предоставляет возможность работы через прокси. Модуль предназначен для генерации текста на основе предоставленных сообщений.

## Подробней

Модуль использует `aiohttp` для асинхронных HTTP-запросов к API `noowai.com`. Он формирует специфические заголовки и данные запроса, необходимые для взаимодействия с сервисом. Полученные данные обрабатываются построчно, извлекаются полезные фрагменты JSON и передаются в виде асинхронного генератора.

## Классы

### `NoowAi`

**Описание**: Класс `NoowAi` является асинхронным провайдером, который взаимодействует с API `noowai.com` для генерации текста на основе предоставленных сообщений.

**Наследует**: `AsyncGeneratorProvider`

**Атрибуты**:
- `url` (str): URL сервиса `noowai.com`.
- `supports_message_history` (bool): Поддержка истории сообщений (значение `True`).
- `supports_gpt_35_turbo` (bool): Поддержка модели GPT-3.5 Turbo (значение `True`).
- `working` (bool): Указывает, работает ли провайдер в данный момент (значение `False`).

**Методы**:
- `create_async_generator`: Создает асинхронный генератор для получения ответов от API.

## Методы класса

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    proxy: str = None,
    **kwargs
) -> AsyncResult:
    """Создает асинхронный генератор для получения ответов от API noowai.com.

    Args:
        cls (NoowAi): Ссылка на класс `NoowAi`.
        model (str): Используемая модель (например, GPT-3.5 Turbo).
        messages (Messages): Список сообщений для отправки в API.
        proxy (str, optional): URL прокси-сервера. По умолчанию `None`.
        **kwargs: Дополнительные параметры.

    Returns:
        AsyncResult: Асинхронный генератор, выдающий ответы от API.

    Raises:
        RuntimeError: Если получен некорректный JSON или произошла ошибка при обработке ответа от API.

    
    1. Функция формирует заголовки (`headers`) для HTTP-запроса, включая User-Agent, Accept и другие необходимые параметры.
    2. Создается асинхронная сессия (`ClientSession`) с заданными заголовками. Если указан `proxy`, он также используется.
    3. Формируются данные (`data`) для отправки в теле запроса, включая ID бота, ID сессии, сообщения и другие параметры.
    4. Выполняется POST-запрос к API `noowai.com` с использованием асинхронной сессии.
    5. Функция асинхронно перебирает строки в ответе от API.
    6. Если строка начинается с `data: `, она пытается извлечь и распарсить JSON из этой строки.
    7. Проверяется наличие ключа `"type"` в распарсенном JSON.
    8. В зависимости от значения `"type"` выполняются разные действия:
        - `"live"`: Значение `"data"` извлекается и возвращается через генератор.
        - `"end"`: Генератор завершает свою работу.
        - `"error"`: Вызывается исключение `RuntimeError` с сообщением об ошибке.

    Внутренние функции:
        Внутри данной функции нет внутренних функций.

    """
```

## Параметры класса

- `url`: URL сервиса `noowai.com`.
- `supports_message_history`: Поддержка истории сообщений.
- `supports_gpt_35_turbo`: Поддержка модели GPT-3.5 Turbo.
- `working`: Указывает, работает ли провайдер в данный момент.

## Примеры

Пример использования `create_async_generator`:

```python
import asyncio
from src.endpoints.gpt4free.g4f.Provider.deprecated.NoowAi import NoowAi

async def main():
    messages = [
        {"role": "user", "content": "Привет, как дела?"}
    ]
    async for response in NoowAi.create_async_generator("gpt-3.5-turbo", messages):
        print(response)

if __name__ == "__main__":
    asyncio.run(main())