# Документация для модуля `CodeLinkAva.py`

## Обзор

Модуль `CodeLinkAva.py` предоставляет асинхронный генератор для взаимодействия с API CodeLinkAva. Он позволяет отправлять сообщения и получать ответы в режиме реального времени, используя асинхронные запросы. Модуль поддерживает модель `gpt-3.5-turbo`.

## Подробнее

Этот модуль предназначен для интеграции с сервисом CodeLinkAva, предоставляющим API для обмена сообщениями. Он использует `aiohttp` для асинхронных HTTP-запросов и предоставляет класс `CodeLinkAva`, который является асинхронным генератором. Это позволяет обрабатывать ответы от API CodeLinkAva по частям, что особенно полезно для больших объемов данных или потоковой передачи.

## Классы

### `CodeLinkAva`

**Описание**: Класс `CodeLinkAva` является провайдером асинхронного генератора. Он наследуется от `AsyncGeneratorProvider` и предназначен для взаимодействия с API CodeLinkAva.

**Наследует**:

- `AsyncGeneratorProvider`: Базовый класс для асинхронных провайдеров генераторов.

**Атрибуты**:

- `url` (str): URL API CodeLinkAva.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель `gpt-3.5-turbo`.
- `working` (bool): Указывает, работает ли провайдер в данный момент.

## Методы класса

### `create_async_generator`

```python
    @classmethod
    async def create_async_generator(
        cls,
        model: str,
        messages: list[dict[str, str]],
        **kwargs
    ) -> AsyncGenerator:
        """ Создает асинхронный генератор для взаимодействия с API CodeLinkAva.

        Args:
            cls: Ссылка на класс.
            model (str): Название используемой модели.
            messages (list[dict[str, str]]): Список сообщений для отправки в API.
            **kwargs: Дополнительные аргументы, которые будут переданы в API.

        Returns:
            AsyncGenerator: Асинхронный генератор, выдающий ответы от API CodeLinkAva.

        Raises:
            aiohttp.ClientResponseError: Если HTTP-запрос завершается с ошибкой.
            json.JSONDecodeError: Если не удается декодировать JSON-ответ.

        Принцип работы:
            Функция создает HTTP-сессию с необходимыми заголовками, отправляет POST-запрос к API CodeLinkAva
            с переданными сообщениями и параметрами. Затем она итерируется по содержимому ответа, декодирует
            каждую строку и извлекает контент из JSON-ответа, если строка начинается с "data: ".
            Если строка начинается с "data: [DONE]", генератор завершается.

        Как работает функция:
        1. **Определение заголовков**: Задаются HTTP-заголовки, включая `User-Agent`, `Accept`, `Origin`, `Referer` и другие.
        2. **Создание асинхронной сессии**: Создается асинхронная сессия `aiohttp.ClientSession` с заданными заголовками.
        3. **Подготовка данных**: Формируются данные для POST-запроса, включая сообщения, температуру и дополнительные аргументы.
        4. **Отправка POST-запроса**: Отправляется асинхронный POST-запрос к API CodeLinkAva.
        5. **Обработка ответа**: Функция асинхронно итерируется по строкам ответа, декодирует их и извлекает контент из JSON.
        6. **Генерация контента**: Извлеченный контент передается через `yield`, что позволяет получать ответы частями.
        7. **Завершение генератора**: Если строка начинается с `data: [DONE]`, генератор завершается.

        """
```

**Примеры**:

Пример создания и использования асинхронного генератора:

```python
async def example():
    messages = [{"role": "user", "content": "Hello, CodeLinkAva!"}]
    async for content in CodeLinkAva.create_async_generator(model="gpt-3.5-turbo", messages=messages):
        print(content)