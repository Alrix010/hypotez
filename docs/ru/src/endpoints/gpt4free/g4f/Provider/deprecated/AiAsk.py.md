# Модуль `AiAsk.py`

## Обзор

Модуль предоставляет асинхронный генератор для взаимодействия с сервисом AiAsk.me. Он поддерживает отправку запросов к моделям GPT-3.5 Turbo с использованием асинхронных запросов. Модуль предназначен для работы с историей сообщений и предоставляет возможность настройки параметров, таких как температура.

## Подробнее

Модуль `AiAsk` является частью набора провайдеров для работы с различными AI-моделями. Он использует библиотеку `aiohttp` для асинхронных HTTP-запросов. Основная задача модуля - предоставить удобный интерфейс для отправки запросов к AiAsk.me и получения ответов в виде асинхронного генератора.

## Классы

### `AiAsk`

**Описание**: Класс `AiAsk` предоставляет асинхронный генератор для взаимодействия с сервисом AiAsk.me.

**Наследует**:
- `AsyncGeneratorProvider`: Наследует от базового класса `AsyncGeneratorProvider`, который определяет интерфейс для асинхронных провайдеров генераторов.

**Атрибуты**:
- `url` (str): URL-адрес сервиса AiAsk.me.
- `supports_message_history` (bool): Указывает, поддерживает ли провайдер историю сообщений.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5 Turbo.
- `working` (bool): Указывает, находится ли провайдер в рабочем состоянии.

**Методы**:
- `create_async_generator`: Создает асинхронный генератор для отправки запросов к AiAsk.me.

## Методы класса

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    proxy: str = None,
    **kwargs
) -> AsyncResult:
    """Создает асинхронный генератор для отправки запросов к AiAsk.me.

    Args:
        cls (AiAsk): Класс `AiAsk`.
        model (str): Название модели для запроса.
        messages (Messages): Список сообщений для отправки.
        proxy (str, optional): URL-адрес прокси-сервера. По умолчанию `None`.
        **kwargs: Дополнительные параметры запроса, такие как температура.

    Returns:
        AsyncResult: Асинхронный генератор, который выдает ответы от AiAsk.me.

    Raises:
        RuntimeError: Если достигнут лимит запросов.

    Как работает функция:
        1. Функция устанавливает заголовки для HTTP-запроса, включая `accept`, `origin` и `referer`.
        2. Создается асинхронная сессия `ClientSession` с установленными заголовками.
        3. Формируются данные для отправки в теле запроса, включая историю сообщений, параметры модели и температуру.
        4. Отправляется POST-запрос к сервису AiAsk.me с использованием асинхронной сессии.
        5. Функция итерируется по чанкам ответа, декодирует их и выдает как часть асинхронного генератора.
        6. Если достигнут лимит запросов, поднимается исключение `RuntimeError`.

    Внутренние функции:
        - Отсутствуют.

    Примеры:
        ```python
        messages = [{"role": "user", "content": "Hello, world!"}]
        async for chunk in AiAsk.create_async_generator(model="gpt-3.5-turbo", messages=messages):
            print(chunk)
        ```
    """
    ...
```

## Параметры класса

- `url` (str): URL-адрес сервиса AiAsk.me.
- `supports_message_history` (bool): Указывает, поддерживает ли провайдер историю сообщений.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5 Turbo.
- `working` (bool): Указывает, находится ли провайдер в рабочем состоянии.

## Примеры

Пример использования класса `AiAsk` для создания асинхронного генератора и получения ответов от сервиса AiAsk.me:

```python
messages = [{"role": "user", "content": "Hello, world!"}]
async for chunk in AiAsk.create_async_generator(model="gpt-3.5-turbo", messages=messages):
    print(chunk)