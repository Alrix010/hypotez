# Модуль для запуска веб-интерфейса g4f

## Обзор

Модуль `webview.py` отвечает за запуск веб-интерфейса приложения `g4f`. Он использует библиотеку `webview` для создания окон и отображения веб-контента, а также предоставляет API для взаимодействия JavaScript-кода в веб-интерфейсе с Python-кодом.

## Подробней

Этот модуль играет важную роль в проекте, так как предоставляет графический интерфейс для взаимодействия с приложением `g4f`. Он включает в себя функциональность для настройки и запуска веб-сервера, обработки аргументов командной строки и интеграции с API JavaScript.

## Функции

### `run_webview`

```python
def run_webview(
    debug: bool = False,
    http_port: int = None,
    ssl: bool = True,
    storage_path: str = None,
    gui: str = None
):
    """
    Запускает веб-интерфейс g4f, используя библиотеку webview.

    Args:
        debug (bool, optional): Включает режим отладки. По умолчанию `False`.
        http_port (int, optional): Порт для запуска HTTP-сервера. По умолчанию `None`.
        ssl (bool, optional): Использовать SSL. По умолчанию `True`.
        storage_path (str, optional): Путь для хранения данных веб-интерфейса. По умолчанию `None`.
        gui (str, optional): Указывает, какой графический интерфейс использовать. По умолчанию `None`.

    Raises:
        ImportError: Если не установлен модуль `platformdirs`.

    Как работает функция:
    1. Определяет путь к каталогу с файлами веб-интерфейса.
    2. Устанавливает настройки webview, разрешая открытие внешних ссылок в браузере и загрузку файлов.
    3. Создает окно webview с указанным заголовком и загружает HTML-файл.
    4. Создает экземпляр API JavaScript (JsApi) для взаимодействия с Python-кодом.
    5. Запускает веб-интерфейс с указанными параметрами.
    6. Если не указан путь для хранения, пытается получить его с помощью `platformdirs`.
    """

```

**Как работает функция**:

```
Определение каталога установки -> Установка настроек webview -> Создание окна webview с HTML -> 
Создание экземпляра JsApi -> Запуск webview
```

**Примеры**:

```python
run_webview(debug=True, http_port=8080, ssl=False)
run_webview(storage_path="/tmp/g4f-webview")
```
## Главная секция (`if __name__ == "__main__":`)

```python
if __name__ == "__main__":
    parser = gui_parser()
    args = parser.parse_args()
    if args.debug:
        g4f.debug.logging = True
    run_webview(args.debug, args.port, not args.debug)
```

**Назначение**:

Данная секция кода выполняется только при непосредственном запуске скрипта. Она отвечает за:

1.  **Инициализацию парсера аргументов командной строки**: Создается экземпляр парсера, определенного в `gui_parser()` (предположительно, из модуля `g4f.gui.gui_parser`).
2.  **Обработку аргументов командной строки**: Аргументы, переданные при запуске скрипта, анализируются и сохраняются в объекте `args`.
3.  **Включение отладочного режима**: Если указан аргумент `--debug`, включается логирование отладочной информации через `g4f.debug.logging`.
4.  **Запуск веб-интерфейса**: Вызывается функция `run_webview()` с параметрами, полученными из аргументов командной строки, определяя, включать ли режим отладки, какой порт использовать и использовать ли SSL (в зависимости от режима отладки).