# Модуль mocks.py

## Обзор

Модуль содержит моки (имитации) различных провайдеров для тестирования асинхронных генераторов и обработки исключений в проекте `hypotez`. Эти моки используются для имитации поведения различных API и сервисов, что позволяет тестировать код без необходимости реального взаимодействия с внешними ресурсами.

## Подробней

Этот модуль предоставляет набор классов, имитирующих различных провайдеров, используемых в проекте. Он позволяет тестировать асинхронные генераторы и механизмы обработки исключений, не полагаясь на реальные внешние API или сервисы. Использование моков делает тесты более надежными и быстрыми, а также позволяет изолировать код от внешних зависимостей.

## Классы

### `ProviderMock`

**Описание**: Простейший мок провайдера, который всегда возвращает "Mock".

**Принцип работы**:
Этот класс имитирует базового провайдера, возвращая строку "Mock" при каждом вызове метода `create_completion`.

**Методы**:
- `create_completion`:
    - **Описание**: Статический метод, имитирующий создание завершения.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `Generator[str, None, None]`: Генератор, выдающий строку "Mock".
    - **Как работает функция**:
        Функция просто возвращает генератор, который выдаёт строку "Mock".
        ```
        Начало --> Возвращает "Mock"
        ```
    - **Примеры**:
        ```python
        for chunk in ProviderMock.create_completion(model='test', messages=[], stream=True):
            print(chunk)  # Вывод: Mock
        ```

### `AsyncProviderMock`

**Описание**: Асинхронный мок провайдера, который асинхронно возвращает "Mock".

**Принцип работы**:
Этот класс имитирует асинхронного провайдера, возвращая строку "Mock" при каждом асинхронном вызове метода `create_async`.

**Методы**:
- `create_async`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронное создание.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `str`: Строка "Mock".
    - **Как работает функция**:
        Функция просто возвращает строку "Mock" асинхронно.
        ```
        Начало --> Возвращает "Mock"
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            result = await AsyncProviderMock.create_async(model='test', messages=[])
            print(result)  # Вывод: Mock
        asyncio.run(main())
        ```

### `AsyncGeneratorProviderMock`

**Описание**: Асинхронный мок провайдера-генератора, который асинхронно генерирует "Mock".

**Принцип работы**:
Этот класс имитирует асинхронного провайдера-генератора, генерируя строку "Mock" при каждом асинхронном вызове метода `create_async_generator`.

**Методы**:
- `create_async_generator`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронную генерацию.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `AsyncGenerator[str, None]`: Асинхронный генератор, выдающий строку "Mock".
    - **Как работает функция**:
        Функция просто возвращает асинхронный генератор, который выдаёт строку "Mock".
        ```
        Начало --> Возвращает "Mock"
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            async for chunk in AsyncGeneratorProviderMock.create_async_generator(model='test', messages=[], stream=True):
                print(chunk)  # Вывод: Mock
        asyncio.run(main())
        ```

### `ModelProviderMock`

**Описание**: Мок провайдера, возвращающий идентификатор модели.

**Принцип работы**:
Этот класс имитирует провайдера, возвращая идентификатор модели, переданный в метод `create_completion`.

**Методы**:
- `create_completion`:
    - **Описание**: Статический метод, имитирующий создание завершения и возвращающий модель.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `Generator[str, None, None]`: Генератор, выдающий идентификатор модели.
    - **Как работает функция**:
        Функция возвращает генератор, который выдаёт идентификатор модели.
        ```
        Начало --> Возвращает model
        ```
    - **Примеры**:
        ```python
        for chunk in ModelProviderMock.create_completion(model='test_model', messages=[], stream=True):
            print(chunk)  # Вывод: test_model
        ```

### `YieldProviderMock`

**Описание**: Асинхронный мок провайдера-генератора, генерирующий содержимое сообщений.

**Принцип работы**:
Этот класс имитирует асинхронного провайдера-генератора, генерируя содержимое каждого сообщения из списка сообщений.

**Методы**:
- `create_async_generator`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронную генерацию содержимого сообщений.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений, где каждое сообщение содержит ключ "content".
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `AsyncGenerator[str, None]`: Асинхронный генератор, выдающий содержимое каждого сообщения.
    - **Как работает функция**:
        Функция проходит по списку сообщений и возвращает содержимое каждого сообщения через асинхронный генератор.
        ```
        Начало --> Перебор сообщений --> Возвращает message["content"]
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            messages = [{"content": "Первое сообщение"}, {"content": "Второе сообщение"}]
            async for chunk in YieldProviderMock.create_async_generator(model='test', messages=messages, stream=True):
                print(chunk)  # Вывод: Первое сообщение, Второе сообщение
        asyncio.run(main())
        ```

### `YieldImageResponseProviderMock`

**Описание**: Асинхронный мок провайдера-генератора, генерирующий `ImageResponse`.

**Принцип работы**:
Этот класс имитирует асинхронного провайдера-генератора, генерируя объект `ImageResponse` с заданным запросом и пустой строкой.

**Методы**:
- `create_async_generator`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронную генерацию ответа изображения.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `prompt` (str): Запрос изображения.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `AsyncGenerator[ImageResponse, None]`: Асинхронный генератор, выдающий объект `ImageResponse`.
    - **Как работает функция**:
        Функция возвращает асинхронный генератор, который выдает объект `ImageResponse` с заданным запросом и пустой строкой.
        ```
        Начало --> Возвращает ImageResponse(prompt, "")
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            async for response in YieldImageResponseProviderMock.create_async_generator(model='test', messages=[], stream=True, prompt='test_prompt'):
                print(response)  # Вывод: ImageResponse object
        asyncio.run(main())
        ```

### `MissingAuthProviderMock`

**Описание**: Мок провайдера, вызывающий исключение `MissingAuthError`.

**Принцип работы**:
Этот класс имитирует провайдера, который вызывает исключение `MissingAuthError` при каждом вызове метода `create_completion`.

**Методы**:
- `create_completion`:
    - **Описание**: Статический метод, имитирующий создание завершения и вызывающий исключение `MissingAuthError`.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Вызывает исключения**:
        - `MissingAuthError`: Всегда.
    - **Как работает функция**:
        Функция всегда вызывает исключение `MissingAuthError`.
        ```
        Начало --> Вызывает MissingAuthError
        ```
    - **Примеры**:
        ```python
        try:
            for chunk in MissingAuthProviderMock.create_completion(model='test', messages=[], stream=True):
                print(chunk)
        except MissingAuthError as ex:
            print(f"Ошибка: {ex}")  # Вывод: Ошибка: MissingAuthProviderMock
        ```

### `RaiseExceptionProviderMock`

**Описание**: Мок провайдера, вызывающий исключение `RuntimeError`.

**Принцип работы**:
Этот класс имитирует провайдера, который вызывает исключение `RuntimeError` при каждом вызове метода `create_completion`.

**Методы**:
- `create_completion`:
    - **Описание**: Статический метод, имитирующий создание завершения и вызывающий исключение `RuntimeError`.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Вызывает исключения**:
        - `RuntimeError`: Всегда.
    - **Как работает функция**:
        Функция всегда вызывает исключение `RuntimeError`.
        ```
        Начало --> Вызывает RuntimeError
        ```
    - **Примеры**:
        ```python
        try:
            for chunk in RaiseExceptionProviderMock.create_completion(model='test', messages=[], stream=True):
                print(chunk)
        except RuntimeError as ex:
            print(f"Ошибка: {ex}")  # Вывод: Ошибка: RaiseExceptionProviderMock
        ```

### `AsyncRaiseExceptionProviderMock`

**Описание**: Асинхронный мок провайдера-генератора, вызывающий исключение `RuntimeError`.

**Принцип работы**:
Этот класс имитирует асинхронного провайдера-генератора, который вызывает исключение `RuntimeError` при каждом асинхронном вызове метода `create_async_generator`.

**Методы**:
- `create_async_generator`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронную генерацию и вызывающий исключение `RuntimeError`.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Вызывает исключения**:
        - `RuntimeError`: Всегда.
    - **Как работает функция**:
        Функция всегда вызывает исключение `RuntimeError`.
        ```
        Начало --> Вызывает RuntimeError
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            try:
                async for chunk in AsyncRaiseExceptionProviderMock.create_async_generator(model='test', messages=[], stream=True):
                    print(chunk)
            except RuntimeError as ex:
                print(f"Ошибка: {ex}")  # Вывод: Ошибка: AsyncRaiseExceptionProviderMock
        asyncio.run(main())
        ```

### `YieldNoneProviderMock`

**Описание**: Асинхронный мок провайдера-генератора, генерирующий `None`.

**Принцип работы**:
Этот класс имитирует асинхронного провайдера-генератора, генерируя значение `None`.

**Методы**:
- `create_async_generator`:
    - **Описание**: Асинхронный статический метод, имитирующий асинхронную генерацию значения `None`.
    - **Параметры**:
        - `model` (str): Идентификатор модели.
        - `messages` (list): Список сообщений.
        - `stream` (bool): Флаг потоковой передачи.
        - `**kwargs`: Дополнительные аргументы.
    - **Возвращает**:
        - `AsyncGenerator[None, None]`: Асинхронный генератор, выдающий значение `None`.
    - **Как работает функция**:
        Функция возвращает асинхронный генератор, который выдает значение `None`.
        ```
        Начало --> Возвращает None
        ```
    - **Примеры**:
        ```python
        import asyncio
        async def main():
            async for chunk in YieldNoneProviderMock.create_async_generator(model='test', messages=[], stream=True):
                print(chunk)  # Вывод: None
        asyncio.run(main())
        ```