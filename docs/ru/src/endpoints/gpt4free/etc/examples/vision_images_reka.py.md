# Модуль для работы с Image Chat с Reca

## Обзор

Данный модуль демонстрирует взаимодействие с моделью Reka для анализа изображений. Он позволяет отправлять изображения в модель и получать описание содержимого изображения. Для работы требуется быть залогиненым в `chat.reka.ai` и иметь сохраненные cookie.

## Подробнее

Этот код использует библиотеку `g4f` для взаимодействия с моделью `reka-core`. Он загружает изображение и отправляет его вместе с текстовым запросом в модель, после чего выводит полученный ответ. Расположение файла в структуре проекта указывает на то, что это пример использования функциональности `gpt4free` для работы с изображениями через провайдера Reka.

## Функции

### `chat.completions.create`

Функция для создания запроса к модели Reka и получения ответа.

**Параметры**:

- `model` (str): Название модели, используемой для анализа изображений (в данном случае `"reka-core"`).
- `messages` (list): Список сообщений, содержащих запрос пользователя.
  - `role` (str): Роль сообщения (в данном случае `"user"`).
  - `content` (str): Текст запроса (`"What can you see in the image ?"`).
- `stream` (bool): Определяет, будет ли ответ получен потоково.
- `image` (file object): Открытый файл изображения в бинарном режиме.

**Возвращает**:

- `completion` (Generator): Генератор, выдающий части ответа модели.

**Как работает функция**:

1.  Инициализируется клиент `Client` с указанием провайдера `Reka`.
2.  Формируется запрос к модели с указанием текста запроса и файла изображения.
3.  Отправляется запрос к модели с использованием метода `client.chat.completions.create`.
4.  Полученный ответ обрабатывается потоково, и каждая часть ответа выводится в консоль.

```
A --> B --> C --> D
```

Где:

*   A: Инициализация клиента `Client` с провайдером `Reka`.
*   B: Формирование запроса к модели с указанием текста запроса и файла изображения.
*   C: Отправка запроса к модели с использованием `client.chat.completions.create`.
*   D: Получение потокового ответа и вывод каждой его части в консоль.

**Примеры**:

```python
from g4f.client import Client
from g4f.Provider import Reka

client = Client(
    provider = Reka # Optional if you set model name to reka-core
)

completion = client.chat.completions.create(
    model = "reka-core",
    messages = [
        {
            "role": "user",
            "content": "What can you see in the image ?"
        }
    ],
    stream = True,
    image = open("docs/images/cat.jpeg", "rb") # open("path", "rb"), do not use .read(), etc. it must be a file object
)

for message in completion:
    print(message.choices[0].delta.content or "")