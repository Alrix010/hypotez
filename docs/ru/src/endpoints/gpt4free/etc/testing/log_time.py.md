# Модуль для логирования времени выполнения

## Обзор

Модуль `log_time.py` содержит функции для измерения и логирования времени выполнения различных методов. Он предоставляет три функции: `log_time_async`, `log_time_yield` и `log_time`, которые могут быть использованы для измерения времени выполнения асинхронных, генераторных и обычных функций соответственно.
Расположение файла: `hypotez/src/endpoints/gpt4free/etc/testing/log_time.py`

## Функции

### `log_time_async`

**Назначение**: Измеряет время выполнения асинхронного метода и возвращает результат вместе с временем выполнения.

```python
async def log_time_async(method: callable, **kwargs):
    """Измеряет время выполнения асинхронного метода и возвращает результат вместе с временем выполнения.

    Args:
        method (callable): Асинхронный метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный с временем выполнения в секундах.

    """
```

**Параметры**:

-   `method` (callable): Асинхронный метод, время выполнения которого необходимо измерить.
-   `**kwargs`: Произвольные аргументы, передаваемые в метод.

**Возвращает**:

-   `str`: Результат выполнения метода, объединенный с временем выполнения в секундах. Если результат выполнения метода равен `None`, возвращается только время выполнения.

**Как работает функция**:

1.  Записывает текущее время в переменную `start`.
2.  Вызывает асинхронный метод `method` с переданными аргументами `kwargs` и записывает результат в переменную `result`.
3.  Вычисляет время выполнения, вычитая `start` из текущего времени, округляет до двух знаков после запятой и форматирует в строку `secs`.
4.  Если `result` не равен `None`, возвращает строку, объединяющую `result` и `secs` через пробел. В противном случае возвращает только `secs`.

**Примеры**:

```python
async def my_async_function(arg1: str) -> str:
    """Простая асинхронная функция для примера."""
    await asyncio.sleep(1)  # Имитация асинхронной операции
    return f"Result: {arg1}"

# Пример вызова
result = await log_time_async(my_async_function, arg1="test")
print(result)  #  'Result: test 1.01 secs'

async def my_async_function_none(arg1: str) -> None:
    """Простая асинхронная функция, возвращающая None."""
    await asyncio.sleep(1)  # Имитация асинхронной операции
    print(f"Result: {arg1}")

# Пример вызова
result = await log_time_async(my_async_function_none, arg1="test")
print(result)  #  1.01 secs
```

### `log_time_yield`

**Назначение**: Измеряет время выполнения метода-генератора и возвращает генератор с временем выполнения.

```python
def log_time_yield(method: callable, **kwargs):
    """Измеряет время выполнения метода-генератора и возвращает генератор с временем выполнения.

    Args:
        method (callable): Метод-генератор, время выполнения которого необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в метод-генератор.

    Yields:
        str: Результаты, генерируемые методом, и время выполнения в секундах.
    """
```

**Параметры**:

-   `method` (callable): Метод-генератор, время выполнения которого необходимо измерить.
-   `**kwargs`: Произвольные аргументы, передаваемые в метод-генератор.

**Yields**:

-   `str`: Результаты, генерируемые методом, и время выполнения в секундах.

**Как работает функция**:

1.  Записывает текущее время в переменную `start`.
2.  Передает управление методу-генератору `method` с переданными аргументами `kwargs` с помощью `yield from`.
3.  После завершения работы генератора вычисляет время выполнения, вычитая `start` из текущего времени, округляет до двух знаков после запятой и форматирует в строку с добавлением " secs".
4.  Генерирует строку со временем выполнения.

**Примеры**:

```python
def my_generator_function(arg1: str):
    """Простая функция-генератор для примера."""
    yield f"First: {arg1}"
    yield f"Second: {arg1}"

# Пример вызова
generator = log_time_yield(my_generator_function, arg1="test")
for result in generator:
    print(result)
# First: test
# Second: test
# 0.0 secs
```

### `log_time`

**Назначение**: Измеряет время выполнения метода и возвращает результат вместе с временем выполнения.

```python
def log_time(method: callable, **kwargs):
    """Измеряет время выполнения метода и возвращает результат вместе с временем выполнения.

    Args:
        method (callable): Метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные аргументы, передаваемые в метод.

    Returns:
        str: Результат выполнения метода, объединенный с временем выполнения в секундах.
    """
```

**Параметры**:

-   `method` (callable): Метод, время выполнения которого необходимо измерить.
-   `**kwargs`: Произвольные аргументы, передаваемые в метод.

**Возвращает**:

-   `str`: Результат выполнения метода, объединенный с временем выполнения в секундах. Если результат выполнения метода равен `None`, возвращается только время выполнения.

**Как работает функция**:

1.  Записывает текущее время в переменную `start`.
2.  Вызывает метод `method` с переданными аргументами `kwargs` и записывает результат в переменную `result`.
3.  Вычисляет время выполнения, вычитая `start` из текущего времени, округляет до двух знаков после запятой и форматирует в строку `secs`.
4.  Если `result` не равен `None`, возвращает строку, объединяющую `result` и `secs` через пробел. В противном случае возвращает только `secs`.

**Примеры**:

```python
def my_function(arg1: str) -> str:
    """Простая функция для примера."""
    return f"Result: {arg1}"

# Пример вызова
result = log_time(my_function, arg1="test")
print(result)  #  'Result: test 0.0 secs'

def my_function_none(arg1: str) -> None:
    """Простая функция, возвращающая None."""
    print(f"Result: {arg1}")

# Пример вызова
result = log_time(my_function_none, arg1="test")
print(result)  #  0.0 secs