# Модуль для работы с языками в PrestaShop

## Обзор

Модуль `language.py` предоставляет интерфейс для взаимодействия с сущностью `language` в CMS PrestaShop через API Prestashop. Он позволяет добавлять, удалять, обновлять и получать информацию о языках магазина PrestaShop.

## Подробнее

Этот модуль предоставляет класс `PrestaLanguage`, который наследуется от класса `PrestaShop` и реализует методы для работы с языками. Он использует API PrestaShop для выполнения операций над языками, таких как добавление нового языка, удаление существующего языка, обновление информации о языке и получение детальной информации о конкретном языке.

## Классы

### `PrestaLanguage(PrestaShop)`

**Описание**: Класс `PrestaLanguage` предназначен для управления языками в магазине PrestaShop.

**Наследует**: `PrestaShop`

**Атрибуты**:
- Нет специфических атрибутов, наследует атрибуты от класса `PrestaShop`.

**Методы**:
- `__init__(*args, **kwards)`: Конструктор класса.
- `get_lang_name_by_index(lang_index: int | str) -> str`: Получает ISO код языка из магазина PrestaShop по его индексу.
- `get_languages_schema() -> Optional[dict]`: Получает словарь актуальных языков для данного магазина.

### `__init__(*args, **kwards)`

**Назначение**: Инициализирует объект класса `PrestaLanguage`.

**Параметры**:
- `*args`: Произвольные аргументы.
- `**kwards`: Произвольные именованные аргументы.

**Как работает функция**:
- Функция является конструктором класса `PrestaLanguage`.
- Она принимает произвольные аргументы и именованные аргументы, которые могут быть использованы для инициализации объекта.
- Важно помнить, что у каждого магазина своя нумерация языков.

### `get_lang_name_by_index(lang_index: int | str) -> str`

**Назначение**: Извлекает ISO код языка из магазина PrestaShop по его индексу.

**Параметры**:
- `lang_index` (int | str): Индекс языка в таблице PrestaShop.

**Возвращает**:
- `str`: Имя языка ISO по его индексу в таблице PrestaShop.

**Вызывает исключения**:
- `Exception`: Если возникает ошибка при получении языка по индексу.

**Как работает функция**:
- Функция `get_lang_name_by_index` пытается получить имя языка по его индексу, используя метод `get` суперкласса (`PrestaShop`).
- В случае успеха возвращает полученное имя языка.
- Если происходит ошибка, логирует её и возвращает пустую строку.

**Примеры**:
```python
prestalanguage = PrestaLanguage(API_DOMAIN='your_api_domain', API_KEY='your_api_key')
lang_name = prestalanguage.get_lang_name_by_index(1)
print(lang_name) #  Вернет название языка с id=1
```

### `get_languages_schema() -> Optional[dict]`

**Назначение**: Извлекает словарь актуальных языков для данного магазина.

**Возвращает**:
- `Optional[dict]`: Language schema или `None` в случае ошибки.

**Вызывает исключения**:
- `Exception`: Если происходит ошибка при выполнении запроса к API PrestaShop.

**Как работает функция**:
- Функция `get_languages_schema` вызывает метод `_exec` для получения схемы языков из API PrestaShop.
- В случае успеха возвращает полученную схему.
- Если происходит ошибка, логирует её и возвращает `None`.

**Примеры**:

```python
prestalanguage = PrestaLanguage(API_DOMAIN='your_api_domain', API_KEY='your_api_key')
languages_schema = prestalanguage.get_languages_schema()
print(languages_schema)
#  Вернет словарь
#             {
#                 "languages": {
#                         "language": [
#                                         {
#                                         "attrs": {
#                                             "id": "1"
#                                         },
#                                         "value": ""
#                                         },
#                                         {
#                                         "attrs": {
#                                             "id": "2"
#                                         },
#                                         "value": ""
#                                         },
#                                         {
#                                         "attrs": {
#                                             "id": "3"
#                                         },
#                                         "value": ""
#                                         }
#                                     ]
#                 }
#             }
```

## Асинхронные функции

### `main()`

**Назначение**: Пример асинхронной функции для демонстрации использования класса `PrestaLanguage`.

**Как работает функция**:

- Функция создает экземпляр класса `PrestaLanguage`.
- Затем вызывает метод `get_languages_schema` для получения схемы языков.
- Выводит полученную схему в консоль.

**Примеры**:

```python
asyncio.run(main())
```