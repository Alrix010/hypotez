# Модуль `category`

## Обзор

Модуль предназначен для управления категориями товаров в PrestaShop. Он содержит класс `PrestaCategory`, который позволяет получать информацию о родительских категориях. Модуль использует API PrestaShop для взаимодействия с магазином.

## Подробнее

Модуль предоставляет функциональность для получения списка родительских категорий для заданной категории в PrestaShop. Он использует API PrestaShop для запроса информации о категориях и рекурсивно обходит дерево категорий, чтобы построить список всех родительских категорий.

## Классы

### `PrestaCategory`

**Описание**: Класс для управления категориями в PrestaShop. Позволяет получать информацию о родительских категориях.

**Наследует**: `PrestaShop`

**Атрибуты**:
- Нет дополнительных атрибутов, кроме тех, что наследуются от `PrestaShop`.

**Методы**:
- `get_parent_categories_list()`: Получает список родительских категорий для заданной категории.

#### `__init__`

```python
def __init__(self, api_key: str, api_domain: str, *args, **kwargs) -> None
```

**Назначение**: Инициализирует объект `PrestaCategory`.

**Параметры**:
- `api_key` (str): Ключ API для доступа к PrestaShop.
- `api_domain` (str): Доменное имя PrestaShop.
- `*args`: Произвольные позиционные аргументы, передаваемые в конструктор родительского класса.
- `**kwargs`: Произвольные именованные аргументы, передаваемые в конструктор родительского класса.

**Возвращает**:
- `None`

**Пример**:

```python
category = PrestaCategory(api_key='your_api_key', api_domain='your_domain')
```

**Как работает функция**:

1. Вызывает конструктор родительского класса `PrestaShop` с переданными аргументами `api_key` и `api_domain`.
2. Инициализирует объект `PrestaCategory`, подготавливая его к работе с API PrestaShop для управления категориями.

#### `get_parent_categories_list`

```python
def get_parent_categories_list(
    self, id_category: str | int, parent_categories_list: Optional[List[int | str]] = None
) -> List[int | str]:
```

**Назначение**: Получает список родительских категорий для заданной категории.

**Параметры**:
- `id_category` (str | int): ID категории, для которой нужно получить родительские категории.
- `parent_categories_list` (Optional[List[int  |  str]], optional): Список родительских категорий. Используется для рекурсивного построения списка. По умолчанию `None`.

**Возвращает**:
- `List[int  |  str]`: Список ID родительских категорий.

**Вызывает исключения**:
- `ValueError`: Если отсутствует ID категории.
- `Exception`: Если возникает ошибка при получении данных о категории.

**Как работает функция**:

1. **Проверка наличия ID категории**:
   - Если `id_category` не указан, функция логирует ошибку и возвращает текущий список родительских категорий (если он есть) или пустой список.

2. **Получение информации о категории**:
   - Вызывает метод `get` родительского класса (`PrestaShop`) для получения информации о категории из PrestaShop API. Использует параметры `categories`, `resource_id` (ID категории), `display='full'` и `io_format='JSON'`.

3. **Обработка ошибки получения категории**:
   - Если категория не найдена (ответ API пустой), функция логирует ошибку и возвращает текущий список родительских категорий (если он есть) или пустой список.

4. **Извлечение ID родительской категории**:
   - Извлекает ID родительской категории (`id_parent`) из полученных данных о категории и преобразует его в целое число.

5. **Добавление родительской категории в список**:
   - Инициализирует `parent_categories_list`, если он `None`.
   - Добавляет ID родительской категории в список `parent_categories_list`.

6. **Рекурсивный вызов для получения следующих родительских категорий**:
   - Если ID родительской категории больше 2, функция рекурсивно вызывает саму себя (`get_parent_categories_list`) с ID родительской категории и обновленным списком `parent_categories_list`.
   - Если ID родительской категории меньше или равен 2, функция возвращает текущий список `parent_categories_list` (достигнута корневая категория).

**Пример**:

```python
category = PrestaCategory(api_key='your_api_key', api_domain='your_domain')
parent_categories = category.get_parent_categories_list(id_category='10')
print(parent_categories)
# Ожидаемый вывод: [2, 10]