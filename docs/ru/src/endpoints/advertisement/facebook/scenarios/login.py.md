# Модуль для выполнения сценария входа в Facebook

## Обзор

Модуль `login.py` предназначен для автоматизации процесса входа в учетную запись Facebook с использованием веб-драйвера. Он содержит функцию `login`, которая принимает экземпляр драйвера и использует его для заполнения учетных данных и нажатия кнопки входа. Модуль также включает функциональность для обработки исключений, которые могут возникнуть во время процесса входа, и регистрирует любые ошибки для отладки.

## Подробней

Этот модуль является частью проекта `hypotez` и используется для автоматизации входа в Facebook в контексте задач, связанных с рекламой. Он использует локаторы, определенные в файле `login.json`, для поиска элементов веб-страницы, таких как поля ввода электронной почты, пароля и кнопки входа.

## Функции

### `login`

```python
def login(d: Driver) -> bool:
    """ Выполняет вход на Facebook.

    Функция использует переданный `Driver` для выполнения авторизации на Facebook, заполняя
    логин и пароль, а затем нажимает кнопку входа.

    Args:
        d (Driver): Экземпляр драйвера для взаимодействия с веб-элементами.

    Returns:
        bool: `True`, если авторизация прошла успешно, иначе `False`.

    Raises:
        Exception: Если возникает ошибка при вводе логина, пароля или нажатии кнопки.
    """
    ...
```

**Назначение**: Выполняет вход в Facebook, используя предоставленный экземпляр драйвера.

**Параметры**:

*   `d` (Driver): Экземпляр драйвера для взаимодействия с веб-элементами.

**Возвращает**:

*   `bool`: `True`, если вход выполнен успешно, иначе `False`.

**Вызывает исключения**:

*   `Exception`: Если происходит ошибка при вводе логина, пароля или нажатии кнопки входа.

**Как работает функция**:

1.  Извлекает учетные данные Facebook (имя пользователя и пароль) из `gs.facebook_credentials[0]`.
2.  Использует `d.send_key_to_webelement` для ввода имени пользователя в поле электронной почты, используя локатор `locators.email`.
3.  Ждет 1.3 секунды.
4.  Использует `d.send_key_to_webelement` для ввода пароля в поле пароля, используя локатор `locators['password']`.
5.  Ждет 0.5 секунды.
6.  Использует `d.execute_locator` для нажатия кнопки входа, используя локатор `locators['button']`.
7.  В случае возникновения каких-либо исключений, они перехватываются, регистрируются с помощью `logger.error`, и возвращается `False`.
8.  Если все шаги выполнены успешно, возвращает `True`.

**ASCII flowchart**:

```
Начало
  ↓
Извлечение учетных данных  (credentials)
  ↓
Ввод логина  (email)
  ↓
Ожидание (1.3 сек)
  ↓
Ввод пароля (password)
  ↓
Ожидание (0.5 сек)
  ↓
Нажатие кнопки входа (button)
  ↓
Конец (Успех или Ошибка)
```

**Примеры**:

```python
from src.webdriver.driver import Driver
from src.webdriver import Firefox

# Предположим, что у вас уже есть настроенный драйвер Firefox
driver = Driver(Firefox)
# Вызов функции login с экземпляром драйвера
success = login(driver)
if success:
    print("Вход выполнен успешно!")
else:
    print("Ошибка при входе.")
```

```python
from src.webdriver.driver import Driver
from src.webdriver import Chrome

# Предположим, что у вас уже есть настроенный драйвер Chrome
driver = Driver(Chrome)
# Вызов функции login с экземпляром драйвера
success = login(driver)
if success:
    print("Вход выполнен успешно!")
else:
    print("Ошибка при входе.")