# Модуль `post_event.py`

## Обзор

Модуль предназначен для автоматизации процесса публикации информации о мероприятиях в Facebook. Он включает функции для загрузки данных о мероприятиях из JSON-файлов, а также для их последующей публикации в группах Facebook с использованием веб-драйвера.

## Подробнее

Этот модуль является частью системы управления рекламными кампаниями в Facebook. Он автоматизирует процесс публикации информации о мероприятиях, таких как распродажи и акции, в группах Facebook, чтобы привлечь внимание целевой аудитории. Модуль использует данные, хранящиеся в JSON-файлах, для создания и публикации сообщений.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
```

**Назначение**: Обрабатывает и публикует информацию о мероприятиях в группах Facebook.

**Как работает функция**:

1.  Инициализирует веб-драйвер (`Chrome`).
2.  Получает список директорий с мероприятиями из папки `facebook/events` в Google Drive.
3.  Получает список JSON-файлов с информацией о группах Facebook, в которых нужно публиковать мероприятия.
4.  Создает экземпляр класса `FacebookPromoter` для управления процессом публикации.
5.  Для каждого файла мероприятия загружает данные из JSON-файла.
6.  Вызывает метод `process_groups` класса `FacebookPromoter` для публикации мероприятия в соответствующих группах.

**ASCII flowchart**:

```
Начало
   ↓
Инициализация веб-драйвера (Chrome)
   ↓
Получение списка директорий мероприятий
   ↓
Получение списка файлов групп Facebook
   ↓
Создание экземпляра FacebookPromoter
   ↓
Для каждого файла мероприятия:
   ├── Загрузка данных из JSON-файла
   └── Публикация мероприятия в группах Facebook (process_groups)
   ↓
Конец
```

**Пример**:

```python
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
```

**Назначение**:  Публикует мероприятие в указанной группе Facebook.

**Параметры**:

*   `event`: Данные о мероприятии в формате, который может быть обработан для публикации.

**Как работает функция**:

1.  Загружает данные о группах Facebook из JSON-файла `my_managed_groups.json`.
2.  Инициализирует веб-драйвер (`Chrome`).
3.  Перебирает группы и извлекает URL каждой группы.
4.  Переходит по URL группы, используя веб-драйвер.
5.  Вызывает функцию `post_event` для фактической публикации мероприятия в группе.

**ASCII flowchart**:

```
Начало
   ↓
Загрузка данных о группах Facebook
   ↓
Инициализация веб-драйвера (Chrome)
   ↓
Для каждой группы:
   ├── Извлечение URL группы
   ├── Переход по URL группы
   └── Публикация мероприятия в группе (post_event)
   ↓
Конец
```

**Пример**:

```python
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)
```

## Запуск модуля

В блоке `if __name__ == "__main__":` выполняется следующий код:

1.  Загрузка данных о мероприятии из JSON-файла.
2.  Вызов функции `post_events()` для публикации мероприятий.