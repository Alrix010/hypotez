# Модуль `start_event`

## Обзор

Модуль `start_event.py` предназначен для автоматической отправки мероприятий в группы Facebook. Он использует веб-драйвер для доступа к Facebook и модуль `FacebookPromoter` для публикации событий. Модуль выполняет бесконечный цикл, в котором он периодически запускает продвижение событий, а затем засыпает на определенное время.

## Подробней

Этот модуль является частью системы автоматизированного продвижения контента в Facebook. Он использует список файлов с данными о группах и названия событий для публикации. Весь процесс логируется для отслеживания и отладки.

## Классы

### `FacebookPromoter`

**Описание**: Класс `FacebookPromoter` отвечает за продвижение событий в Facebook.

**Принцип работы**:
Класс инициализируется веб-драйвером и путями к файлам с информацией о группах. Он предоставляет методы для запуска событий и взаимодействия с Facebook.

**Методы**:
- `run_events`: Запускает процесс продвижения событий, используя предоставленные имена событий и пути к файлам групп.

## Функции

### Отсутствуют

В этом модуле нет отдельных функций, только код, выполняемый в глобальной области видимости.

## Глобальный код

В модуле выполняется следующий код:

1.  **Инициализация веб-драйвера**:
    ```python
    d = Driver(Chrome)
    d.get_url(r"https://facebook.com")
    ```

    Создается экземпляр веб-драйвера Chrome и открывается сайт Facebook.

2.  **Определение списков файлов и событий**:
    ```python
    filenames: list[str] = [
        "my_managed_groups.json",
        "usa.json",
        "he_il.json",
        "ru_il.json",
        "katia_homepage.json",
        "ru_usd.json",
        "ger_en_eur.json",
    ]
    excluded_filenames: list[str] = ["my_managed_groups.json"]
    events_names: list = ["choice_day_01_10"]
    ```

    Определяются списки имен файлов, содержащих информацию о группах, которые будут использоваться для продвижения, а также список исключенных файлов и список названий событий.

3.  **Инициализация промоутера**:
    ```python
    promoter: FacebookPromoter = FacebookPromoter(d, group_file_paths=filenames, no_video=True)
    ```

    Создается экземпляр класса `FacebookPromoter`, который будет использоваться для запуска событий.

4.  **Бесконечный цикл продвижения**:
    ```python
    try:
        while True:
            logger.debug(f"waikig up {time.strftime('%H:%M:%S')}", None, False)
            promoter.run_events(events_names=events_names, group_file_paths=filenames)
            logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}", None, False)
            time.sleep(7200)

    except KeyboardInterrupt:
        logger.info("Campaign promotion interrupted.")
    ```

    В бесконечном цикле запускается продвижение событий, логируется время начала и окончания, и поток засыпает на 7200 секунд (2 часа). Если происходит прерывание с клавиатуры, цикл завершается и выводится сообщение о прерывании.

**Как работает модуль**:

1.  Инициализируется веб-драйвер и открывается Facebook.
2.  Определяются списки файлов с информацией о группах и названия событий.
3.  Создается экземпляр `FacebookPromoter`.
4.  Запускается бесконечный цикл, в котором происходит продвижение событий и логирование.
5.  При прерывании с клавиатуры цикл завершается.

```
Инициализация веб-драйвера и открытие Facebook
↓
Определение списков файлов и событий
↓
Инициализация FacebookPromoter
↓
Бесконечный цикл:
    │
    ├──> Логирование времени начала
    │
    ├──> Запуск продвижения событий (promoter.run_events)
    │
    ├──> Логирование времени окончания
    │
    └──> Засыпание на 2 часа (time.sleep(7200))
    │
Если прерывание с клавиатуры:
    │
    └──> Логирование сообщения о прерывании
```

**Примеры**:

Пример запуска модуля:

```shell
python src/endpoints/advertisement/facebook/start_event.py