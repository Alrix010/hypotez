# Модуль миграции базы данных: Обновление таблицы `purchases`

## Обзор

Модуль содержит скрипт миграции базы данных, использующий Alembic для обновления таблицы `purchases`. В частности, он добавляет столбец `payment_type` и уникальное ограничение для столбца `payment_id`.

## Подробней

Этот скрипт миграции предназначен для внесения изменений в схему базы данных. Он использует библиотеку Alembic для определения операций обновления (`upgrade`) и отката (`downgrade`), что позволяет безопасно применять и отменять изменения в структуре базы данных.

## Функции

### `upgrade`

**Назначение**: Обновляет структуру таблицы `purchases`, добавляя столбец `payment_type` и уникальное ограничение для `payment_id`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют.

**Как работает функция**:
- Функция использует `op.add_column` для добавления нового столбца `payment_type` типа `String` в таблицу `purchases`. Параметр `nullable=False` указывает, что столбец не может содержать `NULL` значения.
- Функция использует `op.create_unique_constraint` для создания уникального ограничения на столбец `payment_id` в таблице `purchases`.

**Примеры**:
```python
upgrade()
```

### `downgrade`

**Назначение**: Откатывает изменения, внесенные функцией `upgrade`, удаляя столбец `payment_type` и уникальное ограничение для `payment_id`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют.

**Как работает функция**:
- Функция использует `op.drop_constraint` для удаления уникального ограничения с таблицы `purchases`.
- Функция использует `op.drop_column` для удаления столбца `payment_type` из таблицы `purchases`.

**Примеры**:
```python
downgrade()