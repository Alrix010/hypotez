# Модуль утилит для администрирования Telegram-бота

## Обзор

Модуль содержит утилиты для выполнения административных задач в Telegram-боте, таких как удаление сообщений.
В частности, он содержит функцию `process_dell_text_msg`, которая удаляет последнее сообщение пользователя и сообщение пользователя, вызвавшего функцию.

## Подробней

Этот модуль предназначен для использования администраторами Telegram-бота для управления контентом в чате.
Функция `process_dell_text_msg` используется для удаления сообщений, отправленных пользователями, чтобы поддерживать порядок в чате.

## Функции

### `process_dell_text_msg`

**Назначение**: Обрабатывает текстовое сообщение для удаления последнего сообщения пользователя и самого сообщения пользователя.

**Параметры**:

-   `message` (Message): Объект сообщения, представляющий сообщение пользователя.
-   `state` (FSMContext): Объект состояния, используемый для хранения и извлечения данных о состоянии пользователя.

**Возвращает**:

-   `None`: Функция ничего не возвращает.

**Вызывает исключения**:

-   `Exception`: В случае возникновения ошибки при удалении сообщения.

**Как работает функция**:

1.  Извлекает данные из состояния пользователя, используя `await state.get_data()`.
2.  Получает идентификатор последнего сообщения из данных состояния, используя `data.get('last_msg_id')`.
3.  Если идентификатор последнего сообщения существует, пытается удалить сообщение с этим идентификатором из чата пользователя, используя `await bot.delete_message(chat_id=message.from_user.id, message_id=last_msg_id)`.
4.  Если идентификатор последнего сообщения не найден, записывает предупреждение в лог, используя `logger.warning("Ошибка: Не удалось найти идентификатор последнего сообщения для удаления.")`.
5.  Пытается удалить сообщение пользователя, вызвавшего функцию, используя `await message.delete()`.
6.  В случае возникновения исключения при удалении сообщения, записывает ошибку в лог, используя `logger.error(f"Произошла ошибка при удалении сообщения: {str(e)}")`.

**Примеры**:

```python
from aiogram.types import Message
from aiogram.fsm.context import FSMContext

# Пример вызова функции process_dell_text_msg
async def example_usage(message: Message, state: FSMContext):
    await process_dell_text_msg(message, state)