# Модуль `Theb`

## Обзор

Модуль `Theb` предоставляет интерфейс для взаимодействия с моделью `gpt-3.5-turbo` через API сервиса `theb.ai`. Он использует подпроцесс для выполнения Python-скрипта `theb.py`, который отправляет запросы к API и возвращает результаты. Модуль поддерживает потоковую передачу данных.

## Подробней

Этот модуль предназначен для интеграции с другими частями проекта, требующими доступа к модели `gpt-3.5-turbo`. Он обеспечивает абстракцию от деталей реализации API `theb.ai`, позволяя использовать его как один из провайдеров для генерации текста.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """
    Создает запрос к API theb.ai и возвращает ответ.

    Args:
        model (str): Имя модели для использования.
        messages (list): Список сообщений для отправки в API.
        stream (bool): Флаг, указывающий, использовать ли потоковую передачу данных.
        **kwargs: Дополнительные аргументы.

    Returns:
        Generator[str, None, None]: Генератор строк, содержащих ответ от API theb.ai.

    Raises:
        Exception: Если возникает ошибка при выполнении подпроцесса или обработке ответа.

    Example:
        >>> messages = [{"role": "user", "content": "Hello, world!"}]
        >>> for chunk in _create_completion(model="gpt-3.5-turbo", messages=messages, stream=True):
        ...     print(chunk, end="")
        Hello, world!
    """
```

**Назначение**: Функция создает запрос к API `theb.ai` через подпроцесс и возвращает ответ в виде генератора строк.

**Параметры**:
- `model` (str): Имя модели, которую нужно использовать для генерации ответа.
- `messages` (list): Список сообщений, которые будут отправлены в API для получения ответа.
- `stream` (bool): Флаг, указывающий, следует ли использовать потоковую передачу данных.
- `**kwargs`: Дополнительные аргументы, которые могут быть переданы в API.

**Возвращает**:
- `Generator[str, None, None]`: Генератор строк, содержащих ответ от API `theb.ai`.

**Как работает функция**:
1. Функция получает путь к директории, в которой находится текущий файл.
2. Формирует JSON-конфигурацию, содержащую сообщения и имя модели.
3. Создает команду для запуска Python-скрипта `theb.py` в качестве подпроцесса, передавая конфигурацию в качестве аргумента.
4. Запускает подпроцесс и читает его вывод построчно.
5. Для каждой строки вывода возвращает её как часть генератора.

**Примеры**:

```python
messages = [{"role": "user", "content": "Hello, world!"}]
for chunk in _create_completion(model="gpt-3.5-turbo", messages=messages, stream=True):
    print(chunk, end="")
```

## Параметры модуля

- `url` (str): URL API `theb.ai`. Значение: `'https://theb.ai'`.
- `model` (list): Список поддерживаемых моделей. Значение: `['gpt-3.5-turbo']`.
- `supports_stream` (bool): Флаг, указывающий, поддерживает ли модуль потоковую передачу данных. Значение: `True`.
- `needs_auth` (bool): Флаг, указывающий, требуется ли аутентификация для использования API. Значение: `False`.
- `params` (str): Строка с информацией о поддерживаемых типах параметров для функции `_create_completion`.