# Модуль Gravityengine.py

## Обзор

Модуль `Gravityengine.py` предоставляет интерфейс для взаимодействия с API Gravityengine для получения ответов от моделей GPT. Он определяет функцию `_create_completion`, которая отправляет запросы к API и возвращает сгенерированный контент.

## Подробней

Модуль предназначен для использования в проекте `hypotez` в качестве одного из провайдеров для работы с большими языковыми моделями (LLM). Он позволяет отправлять запросы к моделям GPT через API Gravityengine и получать ответы в режиме реального времени (стриминг).

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """ Функция отправляет запрос к API Gravityengine и возвращает сгенерированный контент.

    Args:
        model (str): Имя модели, используемой для генерации ответа.
        messages (list): Список сообщений, формирующих контекст запроса.
        stream (bool): Флаг, указывающий, использовать ли потоковый режим.
        **kwargs: Дополнительные параметры запроса.

    Returns:
        Generator[str, None, None]: Генератор, выдающий сгенерированный контент.

    Raises:
        Exception: Если происходит ошибка при отправке запроса или обработке ответа.

    Example:
        Примеры вызовов со всем спектром параметров. которы можно передать в функцию
    """
```

**Параметры**:

- `model` (str): Имя модели, используемой для генерации ответа.
- `messages` (list): Список сообщений, формирующих контекст запроса.
- `stream` (bool): Флаг, указывающий, использовать ли потоковый режим.
- `**kwargs`: Дополнительные параметры запроса.

**Возвращает**:

- `Generator[str, None, None]`: Генератор, выдающий сгенерированный контент.

**Вызывает исключения**:

- `Exception`: Если происходит ошибка при отправке запроса или обработке ответа.

**Как работает функция**:

1.  Функция `_create_completion` принимает параметры `model`, `messages`, `stream` и `kwargs`.
2.  Формирует HTTP-заголовки, указывая тип контента как `application/json`.
3.  Создает словарь `data`, содержащий параметры запроса, такие как имя модели, температуру, штраф за повторение и сообщения.
4.  Отправляет POST-запрос к API Gravityengine по адресу `url + '/api/openai/v1/chat/completions'` с указанными заголовками и данными.
5.  Включает потоковый режим (`stream=True`) для получения ответа частями.
6.  Извлекает сгенерированный контент из ответа JSON и возвращает его в виде генератора.

**ASCII flowchart**:

```
    Начало
     ↓
    Формирование HTTP-заголовков
     ↓
    Создание словаря `data` с параметрами запроса
     ↓
    Отправка POST-запроса к API Gravityengine
     ↓
    Извлечение сгенерированного контента из ответа JSON
     ↓
    Возврат контента в виде генератора
     ↓
    Конец
```

**Примеры**:

Так как код функции не предоставлен, примеры вызова не могут быть сгенерированы.

## Переменные

- `url` (str): URL-адрес API Gravityengine.
- `model` (list): Список поддерживаемых моделей.
- `supports_stream` (bool): Флаг, указывающий, поддерживается ли потоковый режим.
- `needs_auth` (bool): Флаг, указывающий, требуется ли аутентификация.
- `params` (str): Строка, содержащая информацию о поддерживаемых типах параметров функции `_create_completion`.