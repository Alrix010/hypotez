# TinyTroupe: LLM-powered multiagent persona simulation

## Обзор

`TinyTroupe` - это экспериментальная Python-библиотека, предназначенная для **моделирования** людей с определенными личностями, интересами и целями. Эти искусственные агенты, называемые `TinyPerson`, могут слушать нас и друг друга, отвечать и жить своей жизнью в смоделированных средах `TinyWorld`. Это достигается за счет использования больших языковых моделей (LLM), таких как GPT-4, для генерации реалистичного поведения. `TinyTroupe` позволяет исследовать широкий спектр **убедительных взаимодействий** и **типов потребителей** с **широко настраиваемыми личностями** в **выбранных условиях**.

## Подробней

`TinyTroupe` нацелен на понимание человеческого поведения, а не на его непосредственную поддержку. Это приводит к специализированным механизмам, которые имеют смысл только в среде моделирования. В отличие от других игровых подходов к моделированию на основе LLM, `TinyTroupe` стремится к повышению продуктивности и бизнес-сценариев, способствуя тем самым более успешным проектам и продуктам.
Библиотека может быть использована для улучшения человеческого воображения в различных областях, таких как реклама, тестирование программного обеспечения, генерация данных, управление продуктами и проектами, а также мозговые штурмы. Она позволяет получать ценные сведения и принимать обоснованные решения.

## Содержание

- [Последние новости](#latest-news)
- [Примеры](#examples)
- [Необходимые условия](#pre-requisites)
- [Установка](#installation)
- [Принципы](#principles)
- [Структура проекта](#project-structure)
- [Использование библиотеки](#using-the-library)
- [Вклад](#contributing)
- [Благодарности](#acknowledgements)
- [Цитирование TinyTroupe](#how-to-cite-tinytroupe)
- [Отказ от ответственности](#legal-disclaimer)
- [Товарные знаки](#trademarks)

## Последние новости

**[2025-01-29] Выпуск 0.4.0 с различными улучшениями:**

- Углубленные спецификации личностей, включающие черты характера, предпочтения, убеждения и многое другое.
- `TinyPerson` теперь могут быть определены как JSON-файлы и загружены с помощью `TinyPerson.load_specification()`.
- Введено понятие *фрагментов* для повторного использования элементов личности в разных агентах.
- Представлены логические `Proposition` на основе LLM для облегчения мониторинга поведения агентов.
- Введены `Intervention` для указания изменений в моделировании на основе событий.
- Подмодули теперь имеют собственные папки для лучшей организации и роста.

## Примеры

### Пример 1 (из [interview_with_customer.ipynb](./examples/interview_with_customer.ipynb))

Сценарий простого интервью с клиентом, где бизнес-консультант обращается к банкиру.

### Пример 2 (из [advertisement_for_tv.ipynb](./examples/advertisement_for_tv.ipynb))

Оценка вариантов онлайн-рекламы для выбора лучшего.

### Пример 3 (из [product_brainstorming.ipynb](./examples/product_brainstorming.ipynb))

Фокус-группа начинает мозговой штурм о новых функциях AI для Microsoft Word.

## Необходимые условия

Для запуска библиотеки необходимы:

- Python 3.10 или выше.
- Доступ к Azure OpenAI Service или Open AI GPT-4 APIs.
- Настройка переменных среды `AZURE_OPENAI_KEY`, `AZURE_OPENAI_ENDPOINT` или `OPENAI_API_KEY`.
- Наличие `config.ini` файла с параметрами API и модели.

## Установка

1. Установите Conda (если еще не установлен).
2. Создайте новую среду Python: `conda create -n tinytroupe python=3.10`.
3. Активируйте среду: `conda activate tinytroupe`.
4. Установите API-ключи Azure OpenAI или OpenAI как переменные среды.
5. Установите библиотеку непосредственно из этого репозитория: `pip install git+https://github.com/microsoft/TinyTroupe.git@main`.

## Принципы

`TinyTroupe` следует следующим принципам:

1. **Программный**: агенты и среды определяются программно (на Python и JSON), что обеспечивает гибкость использования.
2. **Аналитический**: предназначен для улучшения понимания людей, пользователей и общества.
3. **На основе личностей**: агенты являются архетипическими представлениями людей; приветствуется подробная спецификация таких личностей: возраст, род занятий, навыки, вкусы, мнения и т. д.
4. **Многоагентный**: позволяет многоагентное взаимодействие в четко определенных экологических ограничениях.
5. **Тяжелый на утилиты**: предоставляет множество механизмов для облегчения спецификаций, моделирования, извлечений, отчетов, проверок и т. д.
6. **Ориентированный на эксперименты**: моделирование определяется, запускается, анализируется и уточняется *экспериментатором* итеративно; предоставляются подходящие инструменты для экспериментов.

### Ассистенты vs. Симуляторы

`TinyTroupe` предназначен для моделирования и понимания людей, а не для оказания им помощи.

## Структура проекта

Проект имеет следующую структуру:

- `/tinytroupe`: содержит саму Python-библиотеку.
    - Каждый подмодуль может содержать папку `prompts/` с подсказками, используемыми для вызова LLM.
- `/tests`: содержит модульные тесты для библиотеки.
- `/examples`: содержит примеры, демонстрирующие использование библиотеки, в основном с использованием Jupyter Notebooks, а также в виде чистых скриптов Python.
- `/data`: любые данные, используемые примерами или библиотекой.
- `/docs`: документация для проекта.

## Использование библиотеки

`TinyTroupe` предоставляет две ключевые абстракции:

- `TinyPerson`: *агенты*, обладающие личностью, получающие стимулы и действующие на их основе.
- `TinyWorld`: *среда*, в которой существуют и взаимодействуют агенты.

### TinyPerson

`TinyPerson` — это смоделированный человек с определенными чертами личности, интересами и целями.

#### Фрагменты

`TinyPerson` может быть дополнительно обогащен с помощью **фрагментов**, которые являются под-спецификациями, которые можно добавить к основной спецификации.

#### TinyPersonFactory

`TinyTroupe` также предоставляет способ получения новых агентов, используя LLM для создания их спецификации.

### TinyWorld

`TinyWorld` — это базовый класс для сред.

### Утилиты

`TinyTroupe` предоставляет ряд утилит и удобств для создания симуляций и извлечения из них ценности.

### Кэширование

`TinyTroupe` поставляется с двумя механизмами: один для состояния симуляции, другой для самих вызовов LLM.

#### Кэширование состояния симуляции

`tinytroupe.control` предоставляет методы управления симуляцией:

- `control.begin("<CACHE_FILE_NAME>.cache.json")`: начинает запись изменений состояния симуляции.
- `control.checkpoint()`: сохраняет состояние симуляции в этот момент.
- `control.end()`: завершает область записи симуляции.

#### Кэширование LLM API Calls

Кэширование LLM API работает на более низком и простом уровне, чем кэширование состояния симуляции. Каждый вызов LLM сохраняется в карте от ввода к сгенерированному выводу; когда поступает новый вызов, идентичный предыдущему, возвращается кэшированное значение.

### Config.ini

Файл `config.ini` содержит различные параметры, которые можно использовать для настройки поведения библиотеки, такие как параметры модели и уровень ведения журнала.

## Вклад

Этот проект приветствует вклады и предложения.

## Благодарности

`TinyTroupe` началась как внутренний проект хакатона Microsoft и со временем расширилась.

## Цитирование TinyTroupe

Мы работаем над вводной статьей, которая станет официальной академической ссылкой для TinyTroupe.

## Отказ от ответственности

TinyTroupe предназначена только для исследований и моделирования.

## Товарные знаки

Этот проект может содержать товарные знаки или логотипы для проектов, продуктов или услуг.