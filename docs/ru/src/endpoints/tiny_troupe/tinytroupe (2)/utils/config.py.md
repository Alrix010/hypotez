# Модуль для работы с конфигурацией TinyTroupe
=================================================

Модуль содержит функции для чтения, обработки и логирования конфигурации приложения TinyTroupe.
Он предоставляет механизмы для загрузки значений конфигурации из файлов `config.ini`,
а также для инициализации системы логирования на основе этих конфигурационных данных.

## Обзор

Модуль `config` предназначен для управления конфигурацией приложения TinyTroupe. Он обеспечивает чтение параметров конфигурации из файлов `config.ini`, расположенных как в директории модуля, так и в текущей рабочей директории. Кроме того, модуль предоставляет функции для логирования конфигурации и запуска системы логирования на основе параметров конфигурации.

## Подробней

Этот модуль играет важную роль в инициализации и настройке приложения TinyTroupe. Он позволяет гибко настраивать параметры приложения через файлы конфигурации, а также обеспечивает централизованное управление логированием.
Модуль определяет порядок загрузки конфигурации, сначала загружая значения по умолчанию из файла в директории модуля, а затем переопределяя их значениями из файла в текущей рабочей директории (если такой файл существует).

## Функции

### `read_config_file`

```python
def read_config_file(use_cache: bool = True, verbose: bool = True) -> configparser.ConfigParser:
    """
    Читает файл конфигурации.

    Args:
        use_cache (bool, optional): Использовать ли кешированную конфигурацию. По умолчанию True.
        verbose (bool, optional): Выводить ли отладочные сообщения. По умолчанию True.

    Returns:
        configparser.ConfigParser: Объект конфигурации.

    Raises:
        ValueError: Если не удается найти файл конфигурации по умолчанию.
    """
```

**Назначение**: Чтение файла конфигурации `config.ini` и возвращение объекта `ConfigParser` с параметрами конфигурации.

**Параметры**:
- `use_cache` (bool): Определяет, следует ли использовать кэшированную конфигурацию, если она доступна. Если `True` и конфигурация уже была загружена, функция вернет кэшированную версию. По умолчанию `True`.
- `verbose` (bool): Определяет, следует ли выводить отладочные сообщения в консоль. Если `True`, функция будет выводить сообщения о поиске и загрузке файлов конфигурации. По умолчанию `True`.

**Возвращает**:
- `configparser.ConfigParser`: Объект `ConfigParser`, содержащий параметры конфигурации, прочитанные из файла(ов) `config.ini`.

**Вызывает исключения**:
- `ValueError`: Возникает, если не удается найти файл конфигурации по умолчанию (`config.ini`) в директории модуля.

**Как работает функция**:
1. Проверяет, нужно ли использовать кэшированную конфигурацию и существует ли она. Если да, возвращает кэшированную конфигурацию.
2. Инициализирует объект `configparser.ConfigParser`.
3. Определяет путь к файлу конфигурации по умолчанию в директории модуля.
4. Пытается прочитать файл конфигурации по умолчанию. Если файл не найден, выбрасывает исключение `ValueError`.
5. Определяет путь к пользовательскому файлу конфигурации в текущей рабочей директории.
6. Если пользовательский файл конфигурации существует, считывает его, переопределяя значения по умолчанию.
7. Возвращает объект `configparser.ConfigParser`.

**Примеры**:

```python
# Чтение конфигурации с использованием кэша и выводом отладочных сообщений
config = read_config_file(use_cache=True, verbose=True)

# Чтение конфигурации без использования кэша и без вывода отладочных сообщений
config = read_config_file(use_cache=False, verbose=False)
```

### `pretty_print_config`

```python
def pretty_print_config(config: configparser.ConfigParser) -> None:
    """
    Выводит текущую конфигурацию TinyTroupe в консоль в удобочитаемом формате.

    Args:
        config (configparser.ConfigParser): Объект конфигурации для печати.
    """
```

**Назначение**: Вывод текущей конфигурации TinyTroupe в консоль в удобочитаемом формате.

**Параметры**:
- `config` (configparser.ConfigParser): Объект конфигурации, который нужно вывести.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Как работает функция**:
1. Выводит заголовок "Current TinyTroupe configuration".
2. Перебирает все секции в объекте конфигурации.
3. Для каждой секции выводит ее имя.
4. Перебирает все элементы в секции и выводит их в формате "ключ = значение".

**Примеры**:

```python
# Чтение конфигурации
config = read_config_file()

# Вывод конфигурации в консоль
pretty_print_config(config)
```

### `start_logger`

```python
def start_logger(config: configparser.ConfigParser) -> None:
    """
    Инициализирует систему логирования на основе параметров конфигурации.

    Args:
        config (configparser.ConfigParser): Объект конфигурации.
    """
```

**Назначение**: Инициализация системы логирования на основе параметров конфигурации.

**Параметры**:
- `config` (configparser.ConfigParser): Объект конфигурации, содержащий параметры логирования.

**Как работает функция**:
1. Получает объект логгера с именем "tinytroupe".
2. Получает уровень логирования из конфигурации (секция `Logging`, ключ `LOGLEVEL`). Если уровень не указан, используется `INFO`.
3. Устанавливает уровень логирования для логгера.
4. Создает обработчик консоли (`logging.StreamHandler`) и устанавливает для него уровень логирования.
5. Создает форматтер (`logging.Formatter`) для сообщений лога.
6. Устанавливает форматтер для обработчика консоли.
7. Добавляет обработчик консоли к логгеру.

**Примеры**:

```python
# Чтение конфигурации
config = read_config_file()

# Запуск системы логирования
start_logger(config)

# Логирование сообщений
logger = logging.getLogger("tinytroupe")
logger.info("This is an info message")
logger.error("This is an error message")
```