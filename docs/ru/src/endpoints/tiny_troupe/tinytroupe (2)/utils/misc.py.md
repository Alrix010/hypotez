# Модуль `misc`

## Обзор

Модуль содержит вспомогательные функции, используемые в проекте `hypotez` для различных целей, включая обработку имен, генерацию уникальных идентификаторов и создание хешей.

## Подробней

Этот модуль предоставляет набор инструментов для упрощения общих задач, таких как получение имени объекта, создание уникальных идентификаторов и хеширование данных. Эти функции используются в различных частях проекта `hypotez` для обеспечения консистентности и уникальности данных.

## Функции

### `name_or_empty`

```python
def name_or_empty(named_entity: AgentOrWorld):
    """
    Возвращает имя указанного агента или окружения, или пустую строку, если агент равен None.

    Args:
        named_entity (AgentOrWorld): Агент или окружение, имя которого нужно получить.

    Returns:
        str: Имя агента или окружения, или пустая строка, если агент равен None.
    """
```

**Назначение**: Функция возвращает имя указанного агента или окружения. Если переданный объект равен `None`, функция возвращает пустую строку.

**Параметры**:
- `named_entity` (AgentOrWorld): Агент или окружение, имя которого необходимо получить. Тип `AgentOrWorld` представляет собой объединение типов `"TinyPerson"` и `"TinyWorld"`.

**Возвращает**:
- `str`: Имя агента или окружения, или пустая строка, если `named_entity` равен `None`.

**Как работает функция**:
Функция проверяет, является ли переданный объект `named_entity` равным `None`. Если да, функция возвращает пустую строку. В противном случае функция возвращает атрибут `name` переданного объекта.

**Примеры**:

```python
class MockAgent:
    def __init__(self, name):
        self.name = name

agent = MockAgent("Agent Smith")
empty_agent = None

print(name_or_empty(agent))  # Вывод: Agent Smith
print(name_or_empty(empty_agent))  # Вывод: 
```

### `custom_hash`

```python
def custom_hash(obj):
    """
    Возвращает хеш для указанного объекта. Объект сначала преобразуется
    в строку, чтобы сделать его хешируемым. Этот метод является детерминированным,
    в отличие от встроенной функции hash().
    """
```

**Назначение**: Функция возвращает хеш для указанного объекта. В отличие от встроенной функции `hash()`, эта функция является детерминированной, что означает, что она всегда возвращает один и тот же хеш для одного и того же объекта.

**Параметры**:
- `obj` (Any): Объект, для которого необходимо вычислить хеш.

**Возвращает**:
- `str`: Хеш объекта в виде шестнадцатеричной строки.

**Как работает функция**:
Функция сначала преобразует переданный объект `obj` в строку с помощью функции `str()`. Затем функция кодирует строку в байты с помощью метода `encode()` и вычисляет SHA-256 хеш байтов с помощью функции `hashlib.sha256()`. Наконец, функция возвращает хеш в виде шестнадцатеричной строки с помощью метода `hexdigest()`.

**Примеры**:

```python
obj1 = "example string"
obj2 = 123
obj3 = {"key": "value"}

print(custom_hash(obj1))  # Вывод: 51b9...
print(custom_hash(obj2))  # Вывод: d425...
print(custom_hash(obj3))  # Вывод: d072...
```

### `fresh_id`

```python
def fresh_id():
    """
    Возвращает свежий ID для нового объекта. Это полезно для генерации уникальных ID для объектов.
    """
```

**Назначение**: Функция возвращает уникальный идентификатор (ID) для нового объекта. Каждый вызов функции увеличивает внутренний счетчик и возвращает новое значение.

**Параметры**:
- Нет

**Возвращает**:
- `int`: Уникальный идентификатор.

**Как работает функция**:
Функция использует глобальную переменную `_fresh_id_counter` для хранения текущего значения счетчика. При каждом вызове функция увеличивает значение счетчика на 1 и возвращает новое значение.

**Примеры**:

```python
print(fresh_id())  # Вывод: 1
print(fresh_id())  # Вывод: 2
print(fresh_id())  # Вывод: 3
```

### `reset_fresh_id`

```python
def reset_fresh_id():
    """
    Сбрасывает счетчик свежих ID. Это полезно для целей тестирования.
    """
```

**Назначение**: Функция сбрасывает счетчик уникальных идентификаторов `_fresh_id_counter` в 0.

**Параметры**:
- Нет

**Возвращает**:
- None

**Как работает функция**:
Функция устанавливает значение глобальной переменной `_fresh_id_counter` в 0.

**Примеры**:

```python
print(fresh_id())  # Вывод: 1
print(fresh_id())  # Вывод: 2
reset_fresh_id()
print(fresh_id())  # Вывод: 1 (после сброса)