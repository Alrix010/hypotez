# –ú–æ–¥—É–ª—å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–æ–ª–µ–π –≤ —Å–ª–æ–≤–∞—Ä—è—Ö –∏ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–æ–∫ –æ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## –ü–æ–¥—Ä–æ–±–Ω–µ–π

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–∞–∂–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∏–ª–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏.

## –§—É–Ω–∫—Ü–∏–∏

### `check_valid_fields`

```python
def check_valid_fields(obj: dict, valid_fields: list) -> None:
    """
    Checks whether the fields in the specified dict are valid, according to the list of valid fields. If not, raises a ValueError.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å–µ –ª–∏ –ø–æ–ª—è –≤ —Å–ª–æ–≤–∞—Ä–µ `obj` –¥–æ–ø—É—Å—Ç–∏–º—ã, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –∏—Ö —Å –ø–µ—Ä–µ—á–Ω–µ–º –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π `valid_fields`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `obj` (dict): –°–ª–æ–≤–∞—Ä—å, –ø–æ–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.
- `valid_fields` (list): –°–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `None`: –§—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç. –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –ø–æ–ª–µ, –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ValueError`.

**–í—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è**:
- `ValueError`: –í—ã–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ `obj` –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ø–æ–ª–µ, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–µ –≤ —Å–ø–∏—Å–∫–µ `valid_fields`.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ `obj` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ –∫–∞–∂–¥—ã–π –∫–ª—é—á –≤ —Å–ø–∏—Å–∫–µ `valid_fields`. –ï—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–ª—é—á –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ø–∏—Å–∫–µ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π, —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ValueError` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ.

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
valid_fields = ['name', 'age', 'city']
obj1 = {'name': 'John', 'age': 30, 'city': 'New York'}
check_valid_fields(obj1, valid_fields)  # –ù–µ –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

obj2 = {'name': 'John', 'age': 30, 'country': 'USA'}
# check_valid_fields(obj2, valid_fields)  # –í—ã–∑–æ–≤–µ—Ç ValueError: Invalid key country in dictionary. Valid keys are: ['name', 'age', 'city']
```

### `sanitize_raw_string`

```python
def sanitize_raw_string(value: str) -> str:
    """
    Sanitizes the specified string by: 
      - removing any invalid characters.
      - ensuring it is not longer than the maximum Python string length.
    
    This is for an abundance of caution with security, to avoid any potential issues with the string.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—á–∏—â–∞–µ—Ç –≤—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É `value`, —É–¥–∞–ª—è—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ –æ–±—Ä–µ–∑–∞—è –µ–µ –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã, –¥–æ–ø—É—Å—Ç–∏–º–æ–π –≤ Python.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `value` (str): –°—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `str`: –û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤**: –°—Ç—Ä–æ–∫–∞ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç UTF-8 —Å –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫, –∞ –∑–∞—Ç–µ–º –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.
2. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Unicode**: –°—Ç—Ä–æ–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º—ã NFC, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ Unicode.
3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã**: –°—Ç—Ä–æ–∫–∞ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã, –¥–æ–ø—É—Å—Ç–∏–º–æ–π –≤ Python (`sys.maxsize`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫.

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
string_to_sanitize = "H√´llo, w√∏rld! üòä"
sanitized_string = sanitize_raw_string(string_to_sanitize)
print(sanitized_string)  # –í—ã–≤–æ–¥: Hello, world! üòä

long_string = "A" * (sys.maxsize + 100)
sanitized_long_string = sanitize_raw_string(long_string)
print(len(sanitized_long_string))  # –í—ã–≤–æ–¥: 9223372036854775807 (–∏–ª–∏ –¥—Ä—É–≥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ sys.maxsize)
```

### `sanitize_dict`

```python
def sanitize_dict(value: dict) -> dict:
    """
    Sanitizes the specified dictionary by:
      - removing any invalid characters.
      - ensuring that the dictionary is not too deeply nested.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—á–∏—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å–ª–æ–≤–∞—Ä–µ `value`, –ø—Ä–∏–º–µ–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—é `sanitize_raw_string` –∫–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `value` (dict): –°–ª–æ–≤–∞—Ä—å, –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict`: –û—á–∏—â–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä–µ `value`. –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π, –∫ –Ω–µ–º—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `sanitize_raw_string` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã.

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
dict_to_sanitize = {
    "name": "J√∂hn D√∂e",
    "city": "N√´w Y√∏rk",
    "age": 30
}
sanitized_dict = sanitize_dict(dict_to_sanitize)
print(sanitized_dict)  # –í—ã–≤–æ–¥: {'name': 'John Doe', 'city': 'New York', 'age': 30}