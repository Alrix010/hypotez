# Модуль для проверки валидности ответов от модели

## Обзор

Модуль предназначен для взаимодействия с AI-моделью (в частности, Google Gemini) и проверки валидности ответов, которые она предоставляет. Он включает в себя загрузку инструкций, подготовку запросов на разных языках и обработку ответов модели.

## Подробней

Модуль используется для экспериментов с AI-моделями, в частности, для получения ответов на запросы, связанные с данными о товарах. Основной функционал включает:

- Загрузку данных о товарах из файлов.
- Формирование запросов на разных языках (русский и иврит) с использованием загруженных данных и инструкций.
- Взаимодействие с AI-моделью Google Gemini для получения ответов на запросы.
- Проверку и обработку полученных ответов.
- Сохранение ответов в файлы.

## Функции

### `model_ask`

```python
def model_ask(lang: str, attempts: int = 3) -> dict:
    """ Функция отправляет запрос в модель Google Gemini и возвращает ответ в виде словаря.

    Args:
        lang (str): Язык запроса ('ru' для русского, 'he' для иврита).
        attempts (int, optional): Количество попыток отправки запроса в случае неудачи. По умолчанию 3.

    Returns:
        dict: Ответ от модели в виде словаря. Возвращает пустой словарь в случае ошибки или отсутствия ответа.

    Raises:
        Exception: Возникает, если не удается получить или обработать ответ от модели после нескольких попыток.

    Как работает функция:
    - Функция использует глобальные переменные model, q_ru и q_he, которые содержат экземпляр модели Google Gemini и тексты запросов на русском и иврите соответственно.
    - В зависимости от языка, указанного в аргументе lang, выбирается соответствующий текст запроса (q_ru или q_he).
    - Функция отправляет запрос в модель с помощью метода model.ask().
    - Если ответ от модели отсутствует, функция логирует ошибку и возвращает пустой словарь.
    - Если ответ получен, функция пытается распарсить его как JSON.
    - В случае ошибки парсинга JSON функция логирует ошибку и, если количество попыток attempts больше 1, рекурсивно вызывает саму себя с уменьшенным количеством попыток.
    - Если распарсить JSON удалось, функция возвращает полученный словарь.

    Внутренние функции:
        В данной функции внутренних функций нет.

    Примеры:
        >>> model_ask('ru')
        {'ключ1': 'значение1', 'ключ2': 'значение2'}

        >>> model_ask('he', attempts=2)
        {'key1': 'value1', 'key2': 'value2'}
    """
    ...