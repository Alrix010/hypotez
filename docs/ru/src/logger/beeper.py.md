# Модуль `beeper`

## Обзор

Модуль `beeper` предназначен для воспроизведения звуковых сигналов различных уровней важности, чтобы визуально и аудиально информировать пользователя о происходящих событиях в системе. Он использует библиотеку `winsound` для воспроизведения звуков на платформе Windows и предоставляет функциональность для управления режимом "беззвучия".

## Подробней

Модуль позволяет воспроизводить звуки разной частоты и длительности, соответствующие различным уровням событий, таким как успех, информация, внимание, предупреждение, отладка, ошибка, критическая ошибка и звонок.

## Содержание

- [Классы](#Классы)
  - [`BeepLevel`](#BeepLevel)
  - [`BeepHandler`](#BeepHandler)
  - [`Beeper`](#Beeper)
- [Функции](#Функции)
  - [`silent_mode`](#silent_mode)

## Классы

### `BeepLevel`

#### Описание
Класс `BeepLevel` представляет собой перечисление (Enum) различных уровней событий, каждому из которых соответствует определенная мелодия.

#### Атрибуты:
- `SUCCESS`: Мелодия для успешных событий.
- `INFO`: Мелодия для информационных сообщений.
- `INFO_LONG`: Длинная мелодия для информационных сообщений.
- `ATTENTION`: Мелодия для привлечения внимания.
- `WARNING`: Мелодия для предупреждений.
- `DEBUG`: Мелодия для отладочных сообщений.
- `ERROR`: Мелодия для ошибок.
- `LONG_ERROR`: Длинная мелодия для ошибок.
- `CRITICAL`: Мелодия для критических ошибок.
- `BELL`: Мелодия звонка.

#### Принцип работы:
Каждому уровню соответствует список кортежей, где каждый кортеж содержит ноту и длительность звука. Ноты определены в словаре `note_freq`, который содержит частоты для каждой ноты.

### `BeepHandler`

#### Описание
Класс `BeepHandler` предназначен для обработки записей логов и воспроизведения соответствующих звуковых сигналов в зависимости от уровня логирования.

#### Методы:

- `emit(record)`: Метод, который вызывается при каждой записи в лог.
    - **Назначение**: Определяет уровень логирования из записи и вызывает соответствующий метод для воспроизведения звука.
    - **Параметры**:
        - `record` (dict): Запись лога, содержащая информацию об уровне логирования.
    - **Возвращает**: `None`
    - **Вызывает исключения**: `Exception`, если возникает ошибка при воспроизведении звука.

- `beep(level: BeepLevel | str = BeepLevel.INFO, frequency: int = 400, duration: int = 1000)`: Воспроизводит звуковой сигнал.
    - **Назначение**: Вызывает статический метод `Beeper.beep` для воспроизведения звукового сигнала.
    - **Параметры**:
        - `level` (BeepLevel | str, optional): Уровень сигнала или строка, представляющая уровень. По умолчанию `BeepLevel.INFO`.
        - `frequency` (int, optional): Частота сигнала. По умолчанию 400.
        - `duration` (int, optional): Длительность сигнала. По умолчанию 1000.
    - **Возвращает**: `None`

### `Beeper`

#### Описание
Класс `Beeper` предоставляет статический метод для воспроизведения звуковых сигналов и управляет режимом "беззвучия".

#### Атрибуты:
- `silent` (bool): Флаг, указывающий, включен ли режим "беззвучия". По умолчанию `False`.

#### Методы:

- `beep(level: BeepLevel | str = BeepLevel.INFO, frequency: int = 400, duration: int = 1000)`: Воспроизводит звуковой сигнал.
    - **Назначение**: Воспроизводит звуковой сигнал в соответствии с заданным уровнем, частотой и длительностью.
    - **Параметры**:
        - `level` (BeepLevel | str, optional): Уровень сигнала или строка, представляющая уровень. По умолчанию `BeepLevel.INFO`.
        - `frequency` (int, optional): Частота сигнала. По умолчанию 400.
        - `duration` (int, optional): Длительность сигнала. По умолчанию 1000.
    - **Возвращает**: `None`
    - **Как работает функция**:
        1. Проверяет тип параметра `level`. Если это строка, то преобразует ее в соответствующий элемент перечисления `BeepLevel`.
        2. Извлекает мелодию, соответствующую уровню сигнала.
        3. Для каждой ноты в мелодии воспроизводит звук с заданной частотой и длительностью, используя функцию `winsound.Beep`.
        4. В случае возникновения ошибки при воспроизведении звука, выводит сообщение об ошибке.

    - **Примеры**:
        ```python
        # Воспроизведение звукового сигнала уровня INFO
        Beeper.beep(level=BeepLevel.INFO)

        # Воспроизведение звукового сигнала уровня WARNING
        Beeper.beep(level="warning")

        # Воспроизведение звукового сигнала с заданной частотой и длительностью
        Beeper.beep(frequency=800, duration=500)
        ```

## Функции

### `silent_mode`

#### Описание
Функция-декоратор `silent_mode` используется для управления режимом "беззвучия".

#### Параметры:
- `func` (function): Функция, которую необходимо декорировать.

#### Возвращает:
- `wrapper` (function): Обернутая функция, которая проверяет режим "беззвучия" перед выполнением декорируемой функции.

#### Как работает функция:
1. Принимает функцию `func` в качестве аргумента.
2. Определяет внутреннюю функцию `wrapper`, которая будет вызываться вместо исходной функции.
3. Внутри `wrapper` проверяется, включен ли режим "беззвучия" (`Beeper.silent`).
4. Если режим "беззвучия" включен, выводится сообщение о пропуске воспроизведения звука и возвращается `None`.
5. Если режим "беззвучия" выключен, вызывается исходная функция `func` с переданными аргументами и возвращается результат ее выполнения.

#### Внутренние функции:
- `wrapper(*args, **kwargs)`: Внутренняя функция-обертка для проверки режима "беззвучия" перед выполнением функции.
    - **Параметры**:
        - `args`: Позиционные аргументы, переданные в оборачиваемую функцию.
        - `kwargs`: Именованные аргументы, переданные в оборачиваемую функцию.
    - **Возвращает**: Результат выполнения оборачиваемой функции или `None`, если режим "беззвучия" включен.

#### Примеры:
```python
@silent_mode
async def beep(level: BeepLevel | str = BeepLevel.INFO, frequency: int = 400, duration: int = 1000) -> None:
    # ...
    pass
```
```