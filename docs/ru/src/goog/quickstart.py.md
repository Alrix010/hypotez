# Модуль `quickstart`

## Обзор

Модуль `quickstart` демонстрирует базовое использование Apps Script API. Он вызывает Apps Script API для создания нового скриптового проекта, загружает файл в проект и регистрирует URL-адрес скрипта для пользователя.

## Подробнее

Этот модуль предоставляет пример кода для взаимодействия с Google Apps Script API. Он создает новый скриптовый проект, загружает в него код и манифест, и выводит URL для редактирования скрипта.
Модуль использует библиотеку `googleapiclient` для взаимодействия с API, а также библиотеки `google-auth-oauthlib` и `google.auth.transport.requests` для аутентификации и авторизации.
Расположение файла в проекте: `hypotez/src/goog/quickstart.py`. Это указывает на то, что модуль является частью пакета `goog` и, вероятно, отвечает за быструю настройку и демонстрацию работы с Google Apps Script API.

## Функции

### `main`

```python
def main():
    """Вызывает Apps Script API."""
```

**Назначение**: Вызывает Apps Script API для создания нового скриптового проекта, загрузки файлов и вывода URL-адреса скрипта.

**Как работает функция**:

1.  **Аутентификация и авторизация**:
    *   Проверяет наличие файла `token.json` с учетными данными пользователя.
    *   Если файл существует, загружает учетные данные из него.
    *   Если файл не существует или учетные данные недействительны, запускает процесс авторизации через `InstalledAppFlow`.
    *   Сохраняет полученные учетные данные в файл `token.json` для последующих запусков.
2.  **Создание скриптового проекта**:
    *   Использует `googleapiclient.discovery.build` для создания экземпляра сервиса Apps Script API.
    *   Создает новый проект с названием "My Script" с помощью метода `service.projects().create`.
3.  **Загрузка файлов в проект**:
    *   Определяет содержимое для двух файлов: `hello.js` (с кодом `SAMPLE_CODE`) и `appsscript.json` (с манифестом `SAMPLE_MANIFEST`).
    *   Загружает файлы в проект с помощью метода `service.projects().updateContent`.
4.  **Вывод URL-адреса скрипта**:
    *   Выводит URL-адрес для редактирования скрипта в Google Apps Script.
5.  **Обработка ошибок**:
    *   Обрабатывает возможные ошибки API с помощью `try...except` и выводит содержимое ошибки.

**Примеры**:

```python
# Для запуска этого примера необходимо наличие файла credentials.json
# и установленные библиотеки google-api-python-client, google-auth-httplib2 и google-auth-oauthlib.
# Пример предполагает, что пользователь уже аутентифицирован и авторизован.
main()
```

## Переменные

### `SCOPES`

```python
SCOPES = ['https://www.googleapis.com/auth/script.projects']
```

**Описание**: Список областей доступа, необходимых для работы с Apps Script API.

### `SAMPLE_CODE`

```python
SAMPLE_CODE = '''
function helloWorld() {
  console.log("Hello, world!");
}
'''.strip()
```

**Описание**: Пример кода JavaScript, который будет загружен в скриптовый проект.

### `SAMPLE_MANIFEST`

```python
SAMPLE_MANIFEST = '''
{
  "timeZone": "America/New_York",
  "exceptionLogging": "CLOUD"
}
'''.strip()
```

**Описание**: Пример манифеста JSON, который будет загружен в скриптовый проект.

```python
token_path = gs.path.secrets / 'e-cat-346312-137284f4419e.json'
```

**Описание**: Путь к файлу, содержащему учетные данные пользователя.