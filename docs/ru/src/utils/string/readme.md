# Модуль `normalizer`

## Обзор

Модуль `normalizer` предоставляет функциональность для нормализации различных типов данных, включая строки, логические значения, целые числа и числа с плавающей точкой. Он также включает вспомогательные функции для обработки текста.

## Подробней

Модуль предоставляет удобные утилиты для нормализации и обработки данных. Его можно использовать для:

- Удаления HTML-тегов из строк.
- Преобразования строк в числовые или логические значения.
- Очистки строк от специальных символов.
- Преобразования списков строк в одну нормализованную строку.

## Функции модуля

### `normalize_boolean`

**Назначение**: Преобразует входное значение в логическое значение.

**Параметры**:

- `input_data` (Any): Данные, представляющие логическое значение (строка, число, логический тип).

**Возвращает**:

- `bool`: Преобразованное логическое значение.

**Пример**:

```python
normalize_boolean('yes')  # Результат: True
normalize_boolean(0)      # Результат: False
```

**Как работает функция**:
Функция `normalize_boolean` принимает входные данные различных типов и преобразует их в логическое значение. Если входные данные являются строкой, функция проверяет, соответствуют ли они одному из значений 'yes', 'true' (без учета регистра), и возвращает `True` в случае соответствия. Если входные данные являются числом, функция возвращает `True`, если число не равно нулю, и `False` в противном случае.

### `normalize_string`

**Назначение**: Преобразует строку или список строк в нормализованную строку, удаляя лишние пробелы, HTML-теги и специальные символы.

**Параметры**:

- `input_data` (str | list): Строка или список строк.

**Возвращает**:

- `str`: Очищенная строка в кодировке UTF-8.

**Пример**:

```python
normalize_string(['  Example string  ', '<b>with HTML</b>'])  # Результат: 'Example string with HTML'
```

**Как работает функция**:
Функция `normalize_string` принимает на вход строку или список строк. Она удаляет HTML-теги, лишние пробелы и специальные символы из входных данных и возвращает очищенную строку в кодировке UTF-8. Если входные данные являются списком, функция объединяет все элементы списка в одну строку.

### `normalize_int`

**Назначение**: Преобразует входное значение в целое число.

**Параметры**:

- `input_data` (str | int | float | Decimal): Число или его строковое представление.

**Возвращает**:

- `int`: Преобразованное целое число.

**Пример**:

```python
normalize_int('42')  # Результат: 42
normalize_int(3.14)  # Результат: 3
```

**Как работает функция**:
Функция `normalize_int` принимает на вход число или его строковое представление. Она преобразует входные данные в целое число и возвращает результат. Если входные данные являются строкой, функция пытается преобразовать строку в число. Если входные данные являются числом с плавающей точкой, функция отбрасывает дробную часть.

### `normalize_float`

**Назначение**: Преобразует входное значение в число с плавающей точкой.

**Параметры**:

- `value` (Any): Число, строка или список чисел.

**Возвращает**:

- `float | List[float] | None`: Число с плавающей точкой, список чисел с плавающей точкой или `None` в случае ошибки.

**Пример**:

```python
normalize_float('3.14')         # Результат: 3.14
normalize_float([1, '2.5', 3])  # Результат: [1.0, 2.5, 3.0]
```

**Как работает функция**:
Функция `normalize_float` принимает на вход число, строку или список чисел. Она преобразует входные данные в число с плавающей точкой и возвращает результат. Если входные данные являются списком, функция преобразует каждый элемент списка в число с плавающей точкой. Если преобразование не удалось, функция возвращает `None`.

### `remove_line_breaks`

**Назначение**: Удаляет символы новой строки из строки.

**Параметры**:

- `input_str` (str): Входная строка.

**Возвращает**:

- `str`: Строка без символов новой строки.

**Пример**:

```python
remove_line_breaks('String\nwith line breaks\r')  # Результат: 'String with line breaks'
```

**Как работает функция**:
Функция `remove_line_breaks` принимает на вход строку и удаляет из нее все символы новой строки (`\n` и `\r`).

### `remove_html_tags`

**Назначение**: Удаляет HTML-теги из строки.

**Параметры**:

- `input_html` (str): Входная строка с HTML-тегами.

**Возвращает**:

- `str`: Строка без HTML-тегов.

**Пример**:

```python
remove_html_tags('<p>Example text</p>')  # Результат: 'Example text'
```

**Как работает функция**:
Функция `remove_html_tags` принимает на вход строку с HTML-тегами. Она использует регулярное выражение для удаления всех HTML-тегов из строки.

### `remove_special_characters`

**Назначение**: Удаляет специальные символы из строки или списка строк.

**Параметры**:

- `input_str` (str | list): Строка или список строк.

**Возвращает**:

- `str | list`: Строка или список строк без специальных символов.

**Пример**:

```python
remove_special_characters('Hello@World!')  # Результат: 'HelloWorld'
```

**Как работает функция**:
Функция `remove_special_characters` принимает на вход строку или список строк. Она удаляет из входных данных все специальные символы, оставляя только буквы и цифры.

### `normalize_sql_date`

**Назначение**: Преобразует строку или объект datetime в стандартный формат даты SQL (`YYYY-MM-DD`).

**Параметры**:

- `input_data` (str | datetime): Строка или объект datetime, представляющий дату.

**Возвращает**:

- `str`: Нормализованная дата SQL в формате `YYYY-MM-DD`.

**Пример**:

```python
normalize_sql_date('2024-12-06')  # Результат: '2024-12-06'
normalize_sql_date(datetime(2024, 12, 6))  # Результат: '2024-12-06'
```

**Как работает функция**:
Функция `normalize_sql_date` принимает на вход строку или объект `datetime`, представляющие дату. Она преобразует входные данные в строку в формате `YYYY-MM-DD`, который является стандартным форматом даты SQL.

## Пример использования

```python
from src.utils.string.normalizer import normalize_string, normalize_boolean, normalize_int, normalize_float, normalize_sql_date

# Нормализация строки
clean_str = normalize_string(['<h1>Header</h1>', '  text with spaces  '])
print(clean_str)  # 'Header text with spaces'

# Нормализация логического значения
is_active = normalize_boolean('Yes')
print(is_active)  # True

# Нормализация целого числа
integer_value = normalize_int('42')
print(integer_value)  # 42

# Нормализация числа с плавающей точкой
float_value = normalize_float('3.14159')
print(float_value)  # 3.14159

# Нормализация даты SQL
sql_date = normalize_sql_date('2024-12-06')
print(sql_date)  # '2024-12-06'
```

## Требования

- Python 3.10 или выше.
- Модуль `src.logger` для ведения логов.
- Модуль используется в режиме разработки (`DEBUG=True`).

## Логирование

Все ошибки и предупреждения регистрируются через `logger`:

- Ошибки регистрируются с использованием `logger.error`.
- Неожиданные значения регистрируются с использованием `logger.debug` или `logger.warning`.