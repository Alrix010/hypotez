# Модуль для работы с URL строками

## Обзор

Модуль `src.utils.string.url` предназначен для работы с URL строками, включая извлечение параметров запроса, проверку на валидность URL и сокращение ссылок.

## Подробней

Модуль предоставляет функции для парсинга URL, проверки их валидности и сокращения длинных URL с использованием сервиса TinyURL. Он использует библиотеки `urllib.parse`, `validators` и `requests` для выполнения этих задач.

## Функции

### `extract_url_params`

**Назначение**: Извлекает параметры из строки URL.

**Параметры**:
- `url` (str): Строка URL для парсинга.

**Возвращает**:
- `dict | None`: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.

**Как работает функция**:
1. Функция принимает URL в качестве строки.
2. Использует `urlparse` из `urllib.parse` для парсинга URL.
3. Извлекает параметры запроса из URL с помощью `parse_qs`.
4. Преобразует значения параметров из списка в строку, если параметр имеет только одно значение.
5. Возвращает словарь параметров или `None`, если параметров нет.

**Примеры**:

```python
url = "https://example.com?param1=value1&param2=value2"
params = extract_url_params(url)
print(params)  # Вывод: {'param1': 'value1', 'param2': 'value2'}

url = "https://example.com"
params = extract_url_params(url)
print(params)  # Вывод: None

url = "https://example.com?param1=value1&param2=value2&param2=value3"
params = extract_url_params(url)
print(params)  # Вывод: {'param1': 'value1', 'param2': ['value2', 'value3']}
```

### `is_url`

**Назначение**: Проверяет, является ли переданный текст валидным URL с использованием библиотеки `validators`.

**Параметры**:
- `text` (str): Строка для проверки.

**Возвращает**:
- `bool`: `True`, если строка является валидным URL, иначе `False`.

**Как работает функция**:
1. Функция принимает строку в качестве аргумента.
2. Использует функцию `url` из библиотеки `validators` для проверки, является ли строка валидным URL.
3. Возвращает `True`, если строка является валидным URL, и `False` в противном случае.

**Примеры**:

```python
url = "https://example.com"
is_valid = is_url(url)
print(is_valid)  # Вывод: True

url = "not a url"
is_valid = is_url(url)
print(is_valid)  # Вывод: False
```

### `url_shortener`

**Назначение**: Сокращает длинный URL с использованием сервиса TinyURL.

**Параметры**:
- `long_url` (str): Длинный URL для сокращения.

**Возвращает**:
- `str | None`: Сокращённый URL или `None`, если произошла ошибка.

**Как работает функция**:
1. Функция принимает длинный URL в качестве аргумента.
2. Формирует URL для запроса к API TinyURL.
3. Выполняет GET-запрос к API TinyURL с использованием библиотеки `requests`.
4. Если запрос успешен (status_code == 200), возвращает сокращенный URL из ответа.
5. В случае ошибки возвращает `None`.

**Примеры**:

```python
long_url = "https://www.example.com/very/long/url/to/shorten"
short_url = url_shortener(long_url)
print(short_url)  # Вывод: http://tinyurl.com/example (или None, если произошла ошибка)
```

### `if __name__ == "__main__":`

**Назначение**: Демонстрация работы функций модуля.

**Как работает**:
1.  Запрашивает у пользователя ввод URL.
2.  Проверяет введенный URL на валидность с помощью функции `is_url`.
3.  Если URL валиден, извлекает параметры с помощью функции `extract_url_params` и выводит их.
4.  Предлагает пользователю сократить URL с помощью функции `url_shortener` и выводит сокращенный URL, если пользователь согласен.