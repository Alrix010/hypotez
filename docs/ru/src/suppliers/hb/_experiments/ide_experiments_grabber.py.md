# Модуль для экспериментального сбора данных о продуктах с сайта HB

## Обзор

Модуль предназначен для экспериментов по сбору информации о продуктах с сайта поставщика HB (hbdeadsea.co.il). Он включает в себя функциональность для навигации по страницам категорий, извлечения данных о продуктах и их отправки на сервер. Модуль использует Selenium WebDriver для взаимодействия с веб-сайтом и включает обработку сценариев, логирование ошибок и нормализацию данных.

## Подробней

Этот модуль является частью процесса извлечения данных о продуктах с сайта hbdeadsea.co.il. Он содержит экспериментальный код для извлечения и обработки данных о продуктах, который может быть использован для заполнения словаря product_fields и отправки его на сервер. Включает в себя работу с веб-драйвером, выполнение сценариев, логирование и обработку различных исключений, возникающих в процессе работы.

## Классы

### `Supplier`

**Описание**: Класс представляет поставщика товаров.

**Наследует**:
Не наследует.

**Атрибуты**:
- `supplier_prefix` (str): Префикс поставщика, используется для идентификации.

**Методы**:
- Описывает методы взаимодействия с данными поставщика, включая локаторы элементов на сайте.

### `Product`

**Описание**: Класс представляет продукт, предлагаемый поставщиком.

**Наследует**:
Не наследует.

**Атрибуты**:
- `s` (Supplier): Объект поставщика, связанный с продуктом.

**Методы**:
- Методы для работы с информацией о продукте.

### `ProductFields`

**Описание**: Класс предназначен для хранения и обработки полей продукта.

**Наследует**:
Не наследует.

**Атрибуты**:
- `s` (Supplier): Объект поставщика, связанный с полями продукта.

**Методы**:
- Методы для работы с полями продукта.

### `Driver`

**Описание**: Класс представляет собой драйвер веб-браузера, используемый для взаимодействия с веб-страницами.

**Наследует**:
Не наследует.

**Атрибуты**:
Отсутствуют.

**Методы**:
- `execute_locator(l: dict)`: Выполняет локатор и возвращает веб-элемент.

## Функции

### `run_scenarios`

**Описание**: Функция для запуска сценариев.

```python
def run_scenarios(s, s.current_scenario):
    """ Функция для запуска сценариев. 
    Args:
        s :
        s.current_scenario :

    Returns:
        

    Raises:
        

    """
    ...
```

### `StringFormatter`
```python
def StringFormatter():
    """  """
    ...
```

### `StringNormalizer`
```python
def StringNormalizer():
    """  """
    ...
```

### `__init__` (в классах `Supplier`, `Product`, `ProductFields`)

**Описание**: Конструкторы классов, инициализируют объекты классов с необходимыми параметрами.

```python
def __init__(supplier_prefix: str):
    """ Конструктор класса Supplier.
    Args:
        supplier_prefix (str): Префикс поставщика.

    Returns:
        None

    Raises:
        Нет.
    """
    ...
```

```python
def __init__(s: Supplier):
    """ Конструктор класса Product.
    Args:
        s (Supplier): Объект поставщика.

    Returns:
        None

    Raises:
        Нет.
    """
    ...
```

```python
def __init__(s: Supplier):
    """ Конструктор класса ProductFields.
    Args:
        s (Supplier): Объект поставщика.

    Returns:
        None

    Raises:
        Нет.
    """
    ...
```

## Переменные

- `dir_root` (Path): Корневая директория проекта.
- `dir_src` (Path): Директория с исходным кодом проекта.
- `s` (Supplier): Объект поставщика с префиксом 'hb'.
- `p` (Product): Объект продукта, связанный с поставщиком `s`.
- `l` (Dict): Локаторы элементов продукта, полученные из `s.locators["product"]`.
- `d` (Driver): Драйвер веб-браузера, связанный с поставщиком `s`.
- `f` (ProductFields): Объект для хранения полей продукта, связанный с поставщиком `s`.
- `s.current_scenario` (Dict): Словарь с информацией о текущем сценарии, включая URL, название, условие и категории PrestaShop.
- `ret`: Результат выполнения сценариев.

## Логика работы

1. **Инициализация**:
   - Определяются корневая и исходная директории проекта для добавления в `sys.path`.
   - Создаются экземпляры классов `Supplier`, `Product`, `ProductFields` и `Driver`.
   - Определяется текущий сценарий с информацией о URL, названии продукта и категориях.

2. **Выполнение сценария**:
   - Получается URL из текущего сценария и передается драйверу для открытия страницы.
   - Выполняются сценарии с использованием функции `run_scenarios`.
   - Вызывается функция `s.related_modules.grab_product_page(s)` для сбора данных о продукте.

## Примеры

```python
# Пример создания экземпляра поставщика
s = Supplier(supplier_prefix='hb')

# Пример создания экземпляра продукта
p = Product(s)

# Пример установки текущего сценария
s.current_scenario = {
    "url": "https://hbdeadsea.co.il/product-category/bodyspa/feet-hand-treatment/",
    "name": "טיפוח כפות ידיים ורגליים",
    "condition": "new",
    "presta_categories": {
        "default_category": 11259,
        "additional_categories": []
    }
}

# Пример получения URL и выполнения сценария
d.get_url(s.current_scenario['url'])
ret = run_scenarios(s, s.current_scenario)