# Модуль для работы с Jupyter widgets редактора кампаний AliExpress

## Обзор

Модуль содержит класс `JupyterCampaignEditorWidgets`, который предоставляет набор виджетов Jupyter для взаимодействия с редактором кампаний AliExpress. Этот класс позволяет выбирать кампании, категории и языки, инициализировать редакторы, сохранять кампании и отображать продукты в Jupyter notebooks.

## Подробнее

Этот модуль предназначен для упрощения управления кампаниями AliExpress непосредственно из Jupyter notebook. Он предоставляет графический интерфейс для выбора и настройки параметров кампании, что делает процесс более интерактивным и удобным.

## Классы

### `JupyterCampaignEditorWidgets`

**Описание**: Предоставляет виджеты Jupyter для редактирования кампаний AliExpress.

**Атрибуты**:
- `language` (str): Язык кампании.
- `currency` (str): Валюта кампании.
- `campaign_name` (str): Название кампании.
- `category_name` (str): Название категории.
- `category` (SimpleNamespace): Объект, представляющий категорию.
- `campaign_editor` (AliCampaignEditor): Редактор кампании AliExpress.
- `products` (list[SimpleNamespace]): Список товаров кампании.

**Методы**:
- `__init__`: Инициализирует виджеты и настраивает редактор кампаний.
- `initialize_campaign_editor`: Инициализирует редактор кампаний на основе выбранных параметров.
- `update_category_dropdown`: Обновляет выпадающий список категорий на основе выбранной кампании.
- `on_campaign_name_change`: Обрабатывает изменения в выпадающем списке названий кампаний.
- `on_category_change`: Обрабатывает изменения в выпадающем списке категорий.
- `on_language_change`: Обрабатывает изменения в выпадающем списке языков.
- `save_campaign`: Сохраняет кампанию и её категории.
- `show_products`: Отображает продукты в выбранной категории.
- `open_spreadsheet`: Открывает Google Spreadsheet в браузере.
- `setup_callbacks`: Настраивает обратные вызовы для виджетов.
- `display_widgets`: Отображает виджеты для взаимодействия в Jupyter notebook.

### `__init__`

```python
def __init__(self):
    """Инициализирует виджеты и настраивает редактор кампаний.

    Устанавливает виджеты для выбора кампаний, категорий и языков. Также настраивает
    значения по умолчанию и обратные вызовы для виджетов.
    """
    ...
```

**Как работает функция**:
- Определяет путь к каталогу кампаний на Google Drive.
- Проверяет существование каталога кампаний.
- Инициализирует выпадающие списки для выбора кампании, категории и языка/валюты.
- Создает кнопки для инициализации редактора, сохранения кампании, отображения продуктов и открытия Google Spreadsheet.
- Устанавливает обратные вызовы для виджетов.
- Инициализирует редактор кампаний со значениями по умолчанию.

### `initialize_campaign_editor`

```python
def initialize_campaign_editor(self, _):
    """Инициализирует редактор кампаний.

    Args:
        _: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

    Устанавливает редактор кампаний на основе выбранной кампании и категории.
    """
    ...
```

**Как работает функция**:
- Получает выбранные значения кампании, категории и языка/валюты из выпадающих списков.
- Обновляет выпадающий список категорий на основе выбранной кампании.
- Создает экземпляр класса `AliCampaignEditor` с выбранными параметрами.
- Получает категорию и продукты, если выбраны кампания и категория.
- Выводит предупреждение, если не выбрано название кампании.

### `update_category_dropdown`

```python
def update_category_dropdown(self, campaign_name: str):
    """Обновляет выпадающий список категорий на основе выбранной кампании.

    Args:
        campaign_name (str): Название кампании.

    Example:
        >>> self.update_category_dropdown("SummerSale")
    """
    ...
```

**Как работает функция**:
- Формирует путь к каталогу категорий кампании.
- Получает список названий категорий из каталога.
- Обновляет опции выпадающего списка категорий.

### `on_campaign_name_change`

```python
def on_campaign_name_change(self, change: dict[str, str]):
    """Обрабатывает изменения в выпадающем списке названий кампаний.

    Args:
        change (dict[str, str]): Словарь изменений, содержащий новое значение.

    Example:
        >>> self.on_campaign_name_change({'new': 'SummerSale'})
    """
    ...
```

**Как работает функция**:
- Получает новое название кампании из словаря изменений.
- Обновляет выпадающий список категорий на основе выбранной кампании.
- Повторно инициализирует редактор кампаний с новой кампанией.

### `on_category_change`

```python
def on_category_change(self, change: dict[str, str]):
    """Обрабатывает изменения в выпадающем списке категорий.

    Args:
        change (dict[str, str]): Словарь изменений, содержащий новое значение.

    Example:
        >>> self.on_category_change({'new': 'Electronics'})
    """
    ...
```

**Как работает функция**:
- Получает новое название категории из словаря изменений.
- Повторно инициализирует редактор кампаний с новой категорией.

### `on_language_change`

```python
def on_language_change(self, change: dict[str, str]):
    """Обрабатывает изменения в выпадающем списке языков.

    Args:
        change (dict[str, str]): Словарь изменений, содержащий новое значение.

    Example:
        >>> self.on_language_change({'new': 'EN USD'})
    """
    ...
```

**Как работает функция**:
- Получает новый язык и валюту из словаря изменений.
- Повторно инициализирует редактор кампаний с новым языком и валютой.

### `save_campaign`

```python
def save_campaign(self, _):
    """Сохраняет кампанию и её категории.

    Args:
        _: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

    Example:
        >>> self.save_campaign(None)
    """
    ...
```

**Как работает функция**:
- Получает значения кампании, категории и языка/валюты из выпадающих списков.
- Создает экземпляр класса `AliCampaignEditor` с выбранными параметрами.
- Сохраняет категории из Google Spreadsheet.
- Логирует ошибки при сохранении кампании.
- Выводит предупреждение, если не выбраны название кампании и язык/валюта.

### `show_products`

```python
def show_products(self, _):
    """Отображает продукты в выбранной категории.

    Args:
        _: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

    Example:
        >>> self.show_products(None)
    """
    ...
```

**Как работает функция**:
- Получает название кампании и категории из выпадающих списков.
- Создает экземпляр класса `AliCampaignEditor` с выбранными параметрами.
- Устанавливает таблицу продуктов для выбранной категории.
- Логирует ошибки при отображении продуктов.

### `open_spreadsheet`

```python
def open_spreadsheet(self, _):
    """Открывает Google Spreadsheet в браузере.

    Args:
        _: Неиспользуемый аргумент, необходимый для обратного вызова кнопки.

    Example:
        >>> self.open_spreadsheet(None)
    """
    ...
```

**Как работает функция**:
- Формирует URL для Google Spreadsheet.
- Открывает URL в браузере.
- Выводит сообщение, если редактор кампаний не инициализирован.

### `setup_callbacks`

```python
def setup_callbacks(self):
    """Настраивает обратные вызовы для виджетов."""
    ...
```

**Как работает функция**:
- Устанавливает обратные вызовы для обработки изменений в выпадающих списках и нажатий на кнопки.

### `display_widgets`

```python
def display_widgets(self):
    """Отображает виджеты для взаимодействия в Jupyter notebook.

    Инициализирует редактор кампаний автоматически с первой выбранной кампанией.

    Example:
        >>> self.display_widgets()
    """
    ...
```

**Как работает функция**:
- Отображает выпадающие списки и кнопки в Jupyter notebook.
- Инициализирует редактор кампаний с первой выбранной кампанией.