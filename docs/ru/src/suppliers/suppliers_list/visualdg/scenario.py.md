# Модуль: Сбор данных о товарах с сайта kualastyle.il с использованием веб-драйвера

## Обзор

Модуль предназначен для сбора информации о товарах с сайта поставщика kualastyle.il. Он использует веб-драйвер для навигации по сайту, сбора списков категорий и товаров, а также для извлечения данных со страниц товаров. Модуль адаптирован под особенности структуры сайта данного поставщика и включает функциональность для обработки категорий, пагинации и извлечения URL товаров.

## Подробнее

Модуль выполняет следующие основные задачи:

- Сбор списка категорий товаров с сайта поставщика (`get_list_categories_from_site`).
- Сбор списка URL товаров на страницах категорий (`get_list_products_in_category`).
- Пагинация по страницам категорий для сбора всех товаров (`paginator`).
- Обработка каждой страницы товара для извлечения необходимой информации (эта функциональность реализована в других модулях, таких как `grab_product_page`, и здесь не рассматривается).

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category (s: Supplier) -> list[str, str, None]:
    """ Функция возвращает список URL товаров со страницы категории.

    Если требуется пролистать страницы категорий, выполняет пролистывание.

    Args:
        s (Supplier): Объект поставщика, содержащий информацию о драйвере и локаторах.

    Returns:
        list[str, str, None]: Список URL товаров или None в случае отсутствия товаров.
    """
```

**Назначение**: Функция извлекает список URL товаров со страницы категории.

**Параметры**:
- `s` (Supplier): Объект поставщика, содержащий драйвер (`s.driver`) и локаторы (`s.locators`).

**Возвращает**:
- `list[str, str, None]`: Список URL товаров в виде строк. Возвращает `None`, если список товаров не найден.

**Как работает функция**:
1. Функция получает объект драйвера из объекта поставщика (`d:Driver = s.driver`).
2. Извлекает локаторы, специфичные для категории, из объекта поставщика (`l: dict = s.locators['category']`).
3. Ожидает 1 секунду (`d.wait(1)`).
4. Выполняет локатор для закрытия баннера, если он есть (`d.execute_locator (s.locators ['product']['close_banner'] )`).
5. Выполняет прокрутку страницы (`d.scroll()`).
6. Извлекает список ссылок на товары с использованием локатора `l['product_links']` и сохраняет их в `list_products_in_category`.
7. Если список товаров пуст, функция логирует предупреждение и возвращает `None`.
8. Организует пагинацию, пока текущий URL не отличается от предыдущего. На каждой странице пагинации добавляет новые ссылки на товары в `list_products_in_category`.
9. Преобразует `list_products_in_category` в список, если он является строкой.
10. Логирует количество найденных товаров в категории.
11. Возвращает список URL товаров.

**Внутренние функции**:
- `paginator`

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...) # Инициализация объекта Supplier с необходимыми данными
product_list = get_list_products_in_category(supplier)
if product_list:
    print(f"Найдено {len(product_list)} товаров.")
else:
    print("Товары не найдены.")
```

### `paginator`

```python
def paginator(d:Driver, locator: dict, list_products_in_category: list):
    """ Функция осуществляет пагинацию на странице категории. """
```

**Назначение**: Функция осуществляет переход на следующую страницу категории, если это возможно.

**Параметры**:
- `d` (Driver): Объект драйвера.
- `locator` (dict): Словарь с локаторами для элементов пагинации.
- `list_products_in_category` (list): Список ссылок на товары.

**Возвращает**:
- `True`: Если пагинация прошла успешно.
- `None`: Если пагинация не удалась.

**Как работает функция**:
1. Функция пытается выполнить локатор для кнопки "следующая страница" (`locator['pagination']['<-']`).
2. Если кнопка не найдена или список, возвращаемый локатором, пуст, функция возвращает `None`.
3. Если кнопка найдена, функция возвращает `True`.

**Примеры**:

```python
# Пример вызова функции
driver = Driver(...) # Инициализация объекта Driver
locators = {...} # Словарь с локаторами
products = [] # Список товаров
paginator(driver, locators, products)
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    """ Функция выполняет сбор актуальных категорий с сайта. """
```

**Назначение**: Функция собирает актуальные категории с сайта поставщика.

**Параметры**:
- `s` (Supplier): Объект поставщика, содержащий информацию о драйвере и локаторах.

**Возвращает**:
- *None*: Функция ничего не возвращает явно.

**Как работает функция**:
1.  Производит сбор актуальных категорий с сайта, используя объект поставщика `s`.
2.  Подробности работы функции в предоставленном коде не указаны (`...`).

**Примеры**:
```python
# Пример вызова функции
supplier = Supplier(...) # Инициализация объекта Supplier с необходимыми данными
get_list_categories_from_site(supplier)
```