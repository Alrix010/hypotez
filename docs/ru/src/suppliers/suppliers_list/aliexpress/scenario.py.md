# Модуль для управления категориями Aliexpress

## Обзор

Модуль предназначен для управления категориями товаров на сайте Aliexpress. Он включает в себя функции для сбора URL товаров из категорий, обновления информации о категориях в файле сценария, а также для взаимодействия с базой данных категорий.

## Подробнее

Модуль предоставляет функциональность для автоматизации работы с категориями товаров на Aliexpress, включая сбор ссылок на товары, сравнение и обновление данных о категориях между сайтом и файлом сценария, а также взаимодействие с базой данных для хранения информации о категориях.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category(s) -> list[str, str]:
    """  Считывает URL товаров со страницы категории.

    Args:
        s (Supplier): Экземпляр поставщика.
        run_async (bool): Устанавливает синхронность/асинхронность исполнения функции `async_get_list_products_in_category()`.

    Returns:
        list[str, str]: Список собранных URL. Может быть пустым, если в исследуемой категории нет товаров.

    Как работает функция:
    - Функция считывает URL товаров со страницы категории, используя экземпляр поставщика `Supplier`.
    - Если на странице категории есть несколько страниц с товарами, функция перелистывает все страницы и собирает URL с каждой страницы.
    - Важно, что к моменту вызова этой функции веб-драйвер уже должен быть настроен и открывать страницу категории.

    Примеры:
        #TODO: добавить примеры использования
    """
```

### `get_prod_urls_from_pagination`

```python
def get_prod_urls_from_pagination(s) -> list[str]:
    """Функция собирает ссылки на товары со страницы категории с перелистыванием страниц

    Args:
        s (Supplier): Экземпляр поставщика.

    Returns:
        list[str]: Список ссылок, собранных со страницы категории.

    Как работает функция:
    - Функция принимает экземпляр поставщика `Supplier` в качестве аргумента.
    - Извлекает драйвер (`_d`) и локаторы (`_l`) из экземпляра поставщика.
    - Использует локатор `_l` для извлечения списка ссылок на товары с текущей страницы категории и сохраняет его в `list_products_in_category`.
    - Если список `list_products_in_category` пуст, функция возвращает пустой список, так как это означает, что в категории нет товаров.
    - Затем функция переходит в цикл, в котором она пытается перелистнуть страницу, используя локатор для кнопки "следующая страница".
    - Если перелистнуть страницу не удается, функция выходит из цикла.
    - Если перелистывание удалось, функция добавляет ссылки на товары с новой страницы в список `list_products_in_category`.
    - После завершения цикла функция возвращает список `list_products_in_category`, содержащий все ссылки на товары, собранные со всех страниц категории.

    Примеры:
        #TODO: добавить примеры использования
    """
```

### `update_categories_in_scenario_file`

```python
def update_categories_in_scenario_file(s, scenario_filename: str) -> bool:
    """Проверка изменений категорий на сайте

    Args:
        s: Параметр не используется в функции
        scenario_filename (str): Имя файла сценария.

    Returns:
        bool: True, если обновление выполнено успешно

    Как работает функция:
    - Считывает JSON-файл сценария, содержащий информацию о категориях.
    - Извлекает список категорий из файла сценария.
    - Получает список категорий с сайта.
    - Обновляет идентификаторы категорий в файле сценария, если они не определены.
    - Сравнивает список идентификаторов категорий в файле и на сайте.
    - Добавляет новые категории из сайта в файл сценария.
    - Отключает удаленные категории в файле сценария.

    Внутренние функции:

    `_update_all_ids_in_file`
        - Итерируется по категориям в файле сценария.
        - Если идентификатор категории на сайте больше 0, добавляет его в список `all_ids_in_file`.
        - В противном случае извлекает идентификатор из URL категории и добавляет его в список.
    Примеры:
        #TODO: добавить примеры использования
    """
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s, scenario_file, brand=''):
    """
    Функция получает список категорий с сайта.

    Args:
        s: Объект, содержащий драйвер.
        scenario_file: Файл сценария.
        brand (str, optional): Бренд. По умолчанию ''.

    Returns:
        None

    Как работает функция:
    - Функция принимает объект `s`, содержащий драйвер, имя файла сценария `scenario_file` и бренд `brand` в качестве аргументов.
    - Загружает JSON из файла сценария.
    - Открывает страницу категорий магазина, используя URL, указанный в JSON-файле сценария.
    """
```

## Классы

### `DBAdaptor`

**Описание**: Класс для адаптации базы данных.

**Методы**:

#### `select`

```python
def select(cat_id: int = None, parent_id: int = None, project_cat_id: int = None):
    """
    Выполняет операцию SELECT для таблицы AliexpressCategory.

    Args:
        cat_id (int, optional): ID категории. По умолчанию None.
        parent_id (int, optional): ID родительской категории. По умолчанию None.
        project_cat_id (int, optional): ID категории проекта. По умолчанию None.

    Returns:
        None

    Как работает функция:
        Пример операции SELECT
        Выбрать все записи из таблицы AliexpressCategory, где parent_category_id равен \'parent_id_value\'
    """
```

#### `insert`

```python
def insert():
    """
    Выполняет операцию INSERT для таблицы AliexpressCategory.

    Args:
        Нет

    Returns:
        None

    Как работает функция:
        Пример операции INSERT
        Вставить новую запись в таблицу AliexpressCategory
    """
```

#### `update`

```python
def update():
    """
    Выполняет операцию UPDATE для таблицы AliexpressCategory.

    Args:
        Нет

    Returns:
        None

    Как работает функция:
        Пример операции UPDATE
        Обновить запись в таблице AliexpressCategory, где hypotez_category_id равен \'hypotez_id_value\'
    """
```

#### `delete`

```python
def delete():
    """
    Выполняет операцию DELETE для таблицы AliexpressCategory.

    Args:
        Нет

    Returns:
        None

    Как работает функция:
        Пример операции DELETE
        Удалить запись из таблицы AliexpressCategory, где hypotez_category_id равен \'hypotez_id_value\'
    """