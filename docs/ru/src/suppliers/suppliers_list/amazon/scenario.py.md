# Модуль: Сценарий сбора данных с Amazon

## Обзор

Модуль предназначен для сбора информации о товарах с сайта Amazon с использованием веб-драйвера. Он содержит функции для извлечения списка товаров из категорий и дальнейшей обработки этих данных. Модуль является частью системы сбора данных от поставщиков в проекте `hypotez`.

## Подробней

Этот модуль разработан для автоматизации процесса сбора данных о товарах с Amazon. Он использует веб-драйвер для навигации по сайту, сбора ссылок на товары и передачи этих ссылок для дальнейшей обработки. Основная цель модуля - получение данных о товарах для последующего импорта или анализа в PrestaShop.

## Функции

### `get_list_products_in_category`

```python
async def get_list_products_in_category(d:'Driver', l:dict) -> list[str,str,None]:
    """ Возвращает список URL товаров со страницы категории
    Если надо пролистстать - страницы категорий - листаю ??????

    Args:
        d (Driver): Инстанс веб-драйвера.
        l (dict): Словарь с локаторами для поиска элементов на странице.

    Returns:
        list[str,str,None]: Список URL товаров или `None`, если товары не найдены.
    """
```

**Назначение**: Функция извлекает список URL товаров со страницы категории Amazon.

**Параметры**:
- `d` (`Driver`): Инстанс веб-драйвера, используемый для взаимодействия с сайтом.
- `l` (`dict`): Словарь, содержащий локаторы для поиска элементов на странице, в частности, ссылок на товары.

**Возвращает**:
- `list[str,str,None]`: Список URL товаров, найденных на странице категории. Возвращает `None`, если товары не найдены.

**Как работает функция**:

1. **Прокрутка страницы**:
   - Выполняет прокрутку страницы, чтобы убедиться, что все элементы загружены. `d.scroll()`

2. **Извлечение ссылок на товары**:
   - Использует локатор `l['product_links']` для извлечения ссылок на товары со страницы категории. `list_products_in_category = d.execute_locator(l['product_links'])`

3. **Обработка результатов**:
   - Проверяет, были ли найдены ссылки на товары.
   - Если ссылки не найдены, функция логирует предупреждение и возвращает `None`.

4. **Преобразование результатов**:
   - Преобразует результат в список, если он представлен в виде строки.

5. **Логирование количества найденных товаров**:
   - Логирует количество найденных товаров.

**Примеры**:

```python
from src.webdirver import Driver, Chrome
# Пример использования функции
driver = Driver(Chrome)
locator = {'product_links': {'by': 'XPATH', 'selector': '//a[@class="product-link"]'}}
product_list = await get_list_products_in_category(driver, locator)
if product_list:
    print(f"Найдено {len(product_list)} товаров")
else:
    print("Товары не найдены")