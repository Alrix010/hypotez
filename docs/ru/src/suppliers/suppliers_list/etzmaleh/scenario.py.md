# Модуль `scenario.py`

## Обзор

Модуль `scenario.py` предназначен для сбора информации о товарах с сайта поставщика Etzmaleh (предположительно, bangood.co.il) через веб-драйвер. Он содержит функции для получения списка категорий и товаров, а также для обработки страниц товаров и передачи данных классу `Product`.

## Подробнее

Этот модуль является частью процесса сбора данных о товарах от поставщиков в проекте `hypotez`. Каждый поставщик имеет свой собственный сценарий обработки данных.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category(s) -> list[str, str, None]:
    """
    Возвращает список URL-адресов товаров со страницы категории.

    Args:
        s: Объект поставщика (Supplier).

    Returns:
        list[str, str, None]: Список URL-адресов товаров или None, если список не найден.
    """
```

**Назначение**:

Функция извлекает список URL-адресов товаров, представленных на странице категории поставщика. Если требуется прокрутка страниц категорий, она также выполняет эту задачу.

**Параметры**:

- `s`: Объект поставщика (Supplier), содержащий информацию о поставщике, включая драйвер веб-браузера и локаторы элементов на странице.

**Возвращает**:

- `list[str, str, None]`: Список URL-адресов товаров, найденных на странице категории. Если URL-адреса не найдены, возвращает `None`.

**Как работает функция**:

1.  Извлекает драйвер веб-браузера из объекта поставщика `s`.
2.  Извлекает локаторы для элементов категории из объекта поставщика `s`.
3.  Выполняет команду `close_banner` если необходимо закрыть всплывающее окно.
4.  Проверяет наличие локаторов. Если локаторы отсутствуют, регистрирует ошибку и завершает выполнение.
5.  Выполняет прокрутку страницы для загрузки всех товаров.
6.  Ищет ссылки на товары, используя локатор `product_links`.
7.  Если ссылки на товары не найдены, регистрирует предупреждение и завершает выполнение.
8.  Преобразует результат в список, если он представлен строкой.
9.  Регистрирует количество найденных товаров.
10. Возвращает список URL-адресов товаров.

**Примеры**:

```python
from unittest.mock import MagicMock
from src.logger.logger import logger

# Пример объекта поставщика (Supplier) с мокированным драйвером и локаторами
supplier_mock = MagicMock()
supplier_mock.driver.execute_locator.return_value = ['https://example.com/product1', 'https://example.com/product2']
supplier_mock.locators = {
    'category': {
        'product_links': {'by': 'css', 'selector': '.product-link'}
    },
    'product': {
        'close_banner': {'by': 'xpath', 'selector': '//button[@class="close-banner"]'}
    }
}

# Вызов функции с мокированным объектом поставщика
product_list = get_list_products_in_category(supplier_mock)
print(product_list)
# Вывод: ['https://example.com/product1', 'https://example.com/product2']

```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    ...
```

**Назначение**:

Функция предназначена для получения списка категорий с сайта поставщика. Подробная реализация не предоставлена (`...`).