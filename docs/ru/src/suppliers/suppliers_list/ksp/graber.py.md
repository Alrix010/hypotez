# Модуль для сбора данных о товарах с сайта KSP

## Обзор

Модуль `graber.py` предназначен для сбора информации о товарах с сайта `ksp.co.il`. Он содержит класс `Graber`, который наследует функциональность класса `Graber` из модуля `src.suppliers.graber`. Класс `Graber` специализируется на обработке данных с сайта `ksp.co.il`, переопределяя методы родительского класса при необходимости нестандартной обработки полей.

## Подробнее

Основная задача модуля - автоматизированный сбор данных о товарах с сайта `ksp.co.il`. Для этого используется веб-драйвер, который управляет браузером и взаимодействует с элементами на странице. Модуль содержит механизмы для обработки различных ситуаций, таких как всплывающие окна и мобильная версия сайта.

## Классы

### `Graber`

**Описание**: Класс для сбора данных о товарах с сайта `ksp.co.il`.

**Наследует**: `Graber` из модуля `src.suppliers.graber`.

**Атрибуты**:

-   `supplier_prefix` (str): Префикс поставщика, используемый для идентификации. В данном случае - `'ksp'`.

**Методы**:

-   `__init__(self, driver: Optional['Driver'] = None, lang_index: Optional[int] = None)`: Инициализирует класс `Graber`, устанавливает префикс поставщика, инициализирует родительский класс и выполняет дополнительные действия, специфичные для сайта `ksp.co.il`.

**Принцип работы**:

Класс `Graber` предназначен для автоматизированного сбора данных о товарах с сайта `ksp.co.il`. Он наследует функциональность класса `Graber` из модуля `src.suppliers.graber` и переопределяет его методы при необходимости нестандартной обработки полей.

При инициализации класса устанавливается префикс поставщика (`supplier_prefix`), который используется для идентификации поставщика. Затем инициализируется родительский класс `Graber` с указанным префиксом поставщика, драйвером и индексом языка.

После этого выполняется проверка на наличие мобильной версии сайта в текущем URL. Если мобильная версия обнаружена, загружаются соответствующие локаторы для мобильной версии сайта.

В конце инициализации устанавливается значение `Config.locator_for_decorator` в `None`. Если это значение будет изменено, то соответствующий локатор будет выполнен в декораторе `@close_pop_up`.

## Методы класса

### `__init__`

```python
def __init__(self, driver: Optional['Driver'] = None, lang_index: Optional[int] = None):
    """Инициализация класса сбора полей товара.

    Args:
        driver (Optional['Driver'], optional): Экземпляр веб-драйвера для управления браузером. По умолчанию `None`.
        lang_index (Optional[int], optional): Индекс языка. По умолчанию `None`.

    Returns:
        None

    Raises:
        ExecuteLocatorException: Если возникает ошибка при выполнении локатора.

    Как работает функция:
        1. Устанавливает префикс поставщика в 'ksp'.
        2. Инициализирует родительский класс Graber с указанным префиксом, драйвером и индексом языка.
        3. Приостанавливает выполнение на 3 секунды.
        4. Проверяет, содержит ли текущий URL строку '/mob/'. Если да, то:
            - Загружает локаторы для мобильной версии сайта KSP из файла 'product_mobile_site.json'.
            - Логирует информацию об установке локаторов для мобильной версии сайта.
        5. Устанавливает Config.locator_for_decorator в None.

    Примеры:
        >>> grabber = Graber(driver=driver, lang_index=0)
    """
```

## Параметры класса

-   `driver` (Optional['Driver'], optional): Экземпляр веб-драйвера для управления браузером. По умолчанию `None`.
-   `lang_index` (Optional[int], optional): Индекс языка. По умолчанию `None`.

## Примеры

```python
# Пример инициализации класса Graber
from src.webdriver.driver import Driver, Chrome
driver = Driver(Chrome)
grabber = Graber(driver=driver, lang_index=0)