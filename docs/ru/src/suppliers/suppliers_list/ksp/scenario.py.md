# Модуль сбора товаров со страницы категорий поставщика hb.co.il через вебдрайвер

## Обзор

Модуль предназначен для сбора информации о товарах с сайта поставщика hb.co.il. Он включает функции для получения списка категорий товаров и списка товаров в каждой категории с использованием веб-драйвера.

## Подробней

Модуль предоставляет функциональность для автоматизированного сбора данных о товарах с сайта hb.co.il. Он выполняет следующие основные задачи:

- Сбор списка категорий товаров со страниц продавца.
- Сбор списка товаров со страницы каждой категории.
- Передача URL страниц товаров в функцию `grab_product_page()` для обработки информации о товаре.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category (s: Supplier) -> list[str, str, None]:
    """ Returns list of products urls from category page
    Если надо пролистстать - страницы категорий - листаю ??????

    Attrs:
        s - Supplier
    @returns
        list or one of products urls or None
    """
```

**Назначение**: Извлекает список URL товаров со страницы категории.

**Параметры**:
- `s` (Supplier): Объект поставщика, содержащий информацию о текущем сценарии, локаторы элементов на странице и инстанс веб-драйвера.

**Возвращает**:
- `list[str, str, None]`: Список URL товаров в категории.

**Как работает функция**:
1. Функция инициализирует веб-драйвер из объекта поставщика (`s`).
2. Извлекает локаторы для элементов на странице категории из объекта поставщика.
3. Ожидает некоторое время (`d.wait(1)`) для загрузки страницы.
4. Выполняет локатор для закрытия баннера, если такой присутствует (`d.execute_locator(s.locators['category']['close_banner'])`).
5. Прокручивает страницу вниз (`d.scroll()`) для загрузки всех элементов.
6. Извлекает список URL товаров, используя локатор `l['product_links']`.
7. Если список URL пуст, записывает предупреждение в лог и возвращает `None`.
8. Организует пагинацию, если она есть.
9. Если URL текущей страницы не равен предыдущему, то вызывается функция `paginator` и добавляются новые ссылки.
10. Записывает в лог количество найденных товаров в категории.

**Внутренние функции**:
- нет

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...)  # Предполагается, что объект Supplier уже создан и настроен
product_urls = get_list_products_in_category(supplier)
if product_urls:
    print(f"Найдено {len(product_urls)} URL товаров.")
else:
    print("Не удалось получить URL товаров.")
```

### `paginator`

```python
def paginator(d:Driver, locator: dict, list_products_in_category: list):
    """ Листалка """
```

**Назначение**: Осуществляет навигацию по страницам категорий, если есть пагинация.

**Параметры**:
- `d` (Driver): Инстанс веб-драйвера.
- `locator` (dict): Локаторы элементов на странице.
- `list_products_in_category` (list): Список URL товаров в текущей категории.

**Возвращает**:
- `True`: Если пагинация прошла успешно.
- `None`: Если пагинация не удалась.

**Как работает функция**:

1. Функция пытается выполнить клик по локатору `< -`.
2. Если отклик нулевой или список равен нулю - значит пагинация не удалась.
3. Если пагинация прошла удачно - возвращает `True`.

**Внутренние функции**:
- нет

**Примеры**:

```python
# Пример вызова функции
driver = Driver(BrowserType.CHROME)
locator = {'pagination': {'<-': {'selector': 'a.next-page', 'by': 'CSS_SELECTOR'}}}
product_list = ['https://example.com/product1', 'https://example.com/product2']
result = paginator(driver, locator, product_list)
if result:
    print("Пагинация прошла успешно.")
else:
    print("Пагинация не удалась.")
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    """ сборщик актуальных категорий с сайта """
```

**Назначение**: Собирает актуальный список категорий с сайта.

**Параметры**:
- `s`: Объект, представляющий сайт поставщика.

**Возвращает**:
- Ничего явно не возвращает.

**Как работает функция**:
1. Функция собирает актуальные категории с сайта.
2. Подробности работы функции не предоставлены в данном коде (`...`).

**Внутренние функции**:
- нет

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...)  # Объект поставщика должен быть предварительно инициализирован
get_list_categories_from_site(supplier)