# Локаторы в `hypotez`

## Обзор

Этот документ описывает локаторы, используемые в проекте `hypotez` для взаимодействия с веб-элементами на страницах. Локаторы — это конфигурационные объекты, которые описывают, как найти и взаимодействовать с веб-элементами. Они передаются в класс `ExecuteLocator` для выполнения различных действий, таких как клики, отправка сообщений, извлечение атрибутов и т. д. 

## Детали

Локаторы предоставляют гибкий инструмент для автоматизации взаимодействия с веб-элементами, а `executor` обеспечивает их выполнение с учетом всех параметров и условий. 

## Классы

### `ExecuteLocator` 

**Описание**: Класс `ExecuteLocator` используется для выполнения различных действий на веб-странице на основе предоставленного локатора.

**Атрибуты**:

- `locator (dict)`: Словарь, содержащий информацию о локаторе, например, тип локатора (`by`), селектор (`selector`), атрибут (`attribute`), событие (`event`) и т. д.

**Методы**:

- `execute_locator(locator: dict) -> dict`: Выполняет действие, описанное в локаторе. Возвращает словарь с результатами выполнения действия.

## Локаторы 

### `close_banner`

**Суть локатора**: Закрыть баннер (pop-up окно), если он появился на странице.

**Ключи**:

- `attribute`: Не используется в данном случае.
- `by`: Тип локатора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//button[@id = 'closeXButton']`).
- `if_list`: Если найдено несколько элементов, использовать первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Необязательное действие (`false`).
- `timeout`: Таймаут для поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Событие для выполнения (`click()`).
- `locator_description`: Описание локатора.

**Взаимодействие с `executor`**:

- `executor` найдет элемент по XPATH и выполнит клик на нем.
- Если элемент не найден, `executor` продолжит выполнение, так как действие не обязательно (`mandatory: false`).

### `id_manufacturer`

**Суть локатора**: Возвращает значение, установленное в `attribute`.

**Ключи**:

- `attribute`: Значение атрибута (`11290`).
- `by`: Тип локатора (`VALUE`).
- `selector`: Не используется в данном случае.
- `if_list`: Если найдено несколько элементов, использовать первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Обязательное действие (`true`).
- `timeout`: Таймаут для поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет события (`null`).
- `locator_description`: Описание локатора.

**Взаимодействие с `executor`**:

- `executor` вернет значение, установленное в `attribute` (`11290`).
- Так как `by` установлен в `VALUE`, `executor` не будет искать элемент на странице.

### `additional_images_urls`

**Суть локатора**: Извлечь URL дополнительных изображений.

**Ключи**:

- `attribute`: Атрибут для извлечения (`src`).
- `by`: Тип локатора (`XPATH`).
- `selector`: Выражение для поиска элементов (`//ol[contains(@class, 'flex-control-thumbs')]//img`).
- `if_list`: Если найдено несколько элементов, использовать первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Необязательное действие (`false`).
- `timeout`: Таймаут для поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет события (`null`).

**Взаимодействие с `executor`**:

- `executor` найдет элементы по XPATH и извлечет значение атрибута `src` для каждого элемента.
- Если элементы не найдены, `executor` продолжит выполнение, так как действие не обязательно (`mandatory: false`).

### `default_image_url`

**Суть локатора**: Сделать скриншот изображения по умолчанию.

**Ключи**:

- `attribute`: Не используется в данном случае.
- `by`: Тип локатора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//a[@id = 'mainpic']//img`).
- `if_list`: Если найдено несколько элементов, использовать первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `timeout`: Таймаут для поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Событие для выполнения (`screenshot()`).
- `mandatory`: Обязательное действие (`true`).
- `locator_description`: Описание локатора.

**Взаимодействие с `executor`**:

- `executor` найдет элемент по XPATH и сделает скриншот элемента.
- Если элемент не найден, `executor` выдаст ошибку, так как действие обязательно (`mandatory: true`).

### `id_supplier`

**Суть локатора**: Извлечь текст внутри элемента, содержащего SKU.

**Ключи**:

- `attribute`: Атрибут для извлечения (`innerText`).
- `by`: Тип локатора (`XPATH`).
- `selector`: Выражение для поиска элемента (`//span[@class = 'ltr sku-copy']`).
- `if_list`: Если найдено несколько элементов, использовать первый (`first`).
- `use_mouse`: Не использовать мышь (`false`).
- `mandatory`: Обязательное действие (`true`).
- `timeout`: Таймаут для поиска элемента (`0`).
- `timeout_for_event`: Условие ожидания (`presence_of_element_located`).
- `event`: Нет события (`null`).
- `locator_description`: Описание локатора.

**Взаимодействие с `executor`**:

- `executor` найдет элемент по XPATH и извлечет текст внутри элемента (`innerText`).
- Если элемент не найден, `executor` выдаст ошибку, так как действие обязательно (`mandatory: true`).

### Взаимодействие с `executor`

`executor` использует локаторы для выполнения различных действий на веб-странице. Основные шаги взаимодействия:

1. **Парсинг локатора**: Преобразует локатор в объект `SimpleNamespace`, если это необходимо.
2. **Поиск элемента**: Использует тип локатора (`by`) и селектор (`selector`) для поиска элемента на странице.
3. **Выполнение события**: Если указан ключ `event`, выполняет соответствующее действие (например, клик, скриншот).
4. **Извлечение атрибута**: Если указан ключ `attribute`, извлекает значение атрибута из найденного элемента.
5. **Обработка ошибок**: Если элемент не найден и действие не обязательно (`mandatory: false`), продолжает выполнение. Если действие обязательно, выдает ошибку.