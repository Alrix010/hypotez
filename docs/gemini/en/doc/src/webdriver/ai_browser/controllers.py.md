# Модуль управления веб-браузером
## Обзор
Модуль `browser_use.py` предоставляет класс `BrowserController`, который управляет веб-браузером (Chrome) с использованием Selenium. Он предлагает методы для навигации, поиска, сбора данных с веб-страниц и взаимодействия с элементами. 

## Детали
Этот модуль реализует `BrowserController`, который позволяет управлять браузером Chrome для выполнения задач, связанных с веб-скрепингом, автоматизацией, поиском и взаимодействием с веб-страницами. Он использует Selenium для управления браузером и WebDriverManager для автоматического скачивания и обновления драйверов.

## Классы

### `BrowserController`
Класс для управления веб-браузером (Chrome) с использованием Selenium. Предоставляет методы для навигации, поиска, скрапинга и взаимодействия.

**Атрибуты:**

- `driver` (Driver): Экземпляр класса `Driver`, представляющий управляемый веб-браузер.

**Методы:**

- `__init__(self, window_mode: str = 'normal')`: Инициализирует веб-драйвер Firefox с определенным режимом окна (`window_mode`).
- `_check_driver(self) -> bool`: Проверяет, был ли драйвер успешно инициализирован.
- `search(self, query: str, search_engine_url: str = "https://www.google.com") -> str`: Выполняет поиск в указанной поисковой системе.

## Функции
### `_check_driver(self) -> bool`

**Назначение**: Проверяет, был ли драйвер успешно инициализирован.

**Параметры**: 

- `self`: Ссылка на экземпляр класса `BrowserController`.

**Возвращает**: 

- `bool`: `True`, если драйвер успешно инициализирован; `False` в противном случае.

**Пример**:
```python
# Проверка инициализации драйвера
if not self._check_driver():
    # Вывод сообщения об ошибке
    logger.error("Драйвер браузера не был инициализирован.", None, exc_info=False)
```

### `search(self, query: str, search_engine_url: str = "https://www.google.com") -> str`

**Назначение**: Выполняет поиск в указанной поисковой системе.

**Параметры**: 

- `self`: Ссылка на экземпляр класса `BrowserController`.
- `query` (str): Поисковый запрос.
- `search_engine_url` (str): URL поисковой системы. По умолчанию используется Google.

**Возвращает**: 

- `str`: Текст результатов поиска, включая запрос и текст страницы.

**Пример**:
```python
# Выполнение поиска
results_text = self.search(query="Пример поиска", search_engine_url="https://www.google.com")
print(results_text)
```

**Как работает функция**:

1. Проверяет инициализацию драйвера.
2. Загружает указанную поисковую систему.
3. Использует `WebDriverWait` для ожидания появления поля поиска.
4. Вводит поисковый запрос в поле поиска.
5. Отправляет запрос с помощью `Keys.RETURN`.
6. Ожидает загрузки результатов поиска.
7. Извлекает текст с результатами поиска.
8. Ограничивает длину текста результатов поиска до 2500 символов.
9. Возвращает текст результатов поиска, включая запрос и текст страницы.

**Пример**:
```python
from src.webdriver.ai_browser.controllers import BrowserController

# Создаем экземпляр BrowserController
controller = BrowserController()

# Выполняем поиск
results_text = controller.search(query="Пример поиска")
print(results_text)

# Закрываем браузер
controller.driver.quit()
```