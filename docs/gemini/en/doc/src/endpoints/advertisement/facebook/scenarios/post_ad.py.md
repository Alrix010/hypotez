# Модуль публикации объявления в Facebook

## Обзор

Модуль `src.endpoints.advertisement.facebook.scenarios.post_ad.py` предоставляет функции для публикации рекламных объявлений в группах Facebook. Он использует WebDriver для взаимодействия с веб-страницей Facebook и отправки текста и изображений для объявления.

## Детали

Модуль импортирует необходимые библиотеки, такие как `Driver` для работы с веб-драйвером, `j_loads_ns` для загрузки JSON-файлов, `logger` для записи событий и другие модули, необходимые для реализации логики публикации объявлений.

## Классы

### `post_ad`

**Описание**: Функция `post_ad` отправляет текст объявления и, при необходимости, изображение в группу Facebook.

**Аргументы**:
- `d` (Driver): Экземпляр драйвера для взаимодействия с веб-страницей Facebook.
- `message` (SimpleNamespace): Объект, содержащий текст объявления (`description`) и, возможно, путь к изображению (`image_path`).

**Возвращает**:
- `bool`: `True`, если отправка текста и изображения прошла успешно, `None` в противном случае.

**Исключения**:
- `None`

**Пример**:
```python
driver = Driver(...)
message = SimpleNamespace(description="Текст объявления", image_path="путь/к/изображению.jpg")
post_ad(driver, message)
```

**Как работает функция**:
- Функция использует функцию `post_message_title` для отправки текста объявления (`message.description`).
- Если `message.image_path` не пуст, функция `upload_post_media` используется для загрузки изображения.
- Наконец, функция `message_publish` публикует объявление в группу Facebook.

**Внутренние функции**:
- `post_message_title`: Отправляет текст объявления в группу Facebook.
- `upload_post_media`: Загружает изображение для объявления в группу Facebook.
- `message_publish`: Публикует объявление в группу Facebook.


## Параметры

- `d` (Driver): Экземпляр драйвера для взаимодействия с веб-страницей Facebook.
- `message` (SimpleNamespace): Объект, содержащий текст объявления (`description`) и, возможно, путь к изображению (`image_path`).

## Примеры

```python
driver = Driver(...)
message = SimpleNamespace(description="Текст объявления", image_path="путь/к/изображению.jpg")
post_ad(driver, message)
```

**Дополнительные примеры**:
```python
driver = Driver(...)
message = SimpleNamespace(description="Текст объявления без изображения")
post_ad(driver, message)
```

##  Дополнительные детали

- Функция `post_ad` использует счетчик `fails` для отслеживания неудачных попыток отправки. Если количество неудачных попыток превышает 15, функция возвращает `None`.
- Функция `post_ad` использует глобальную переменную `fails` для отслеживания неудачных попыток отправки.

**Логирование**:
- Модуль использует `logger` для записи событий, таких как ошибки отправки текста и изображения.

**Дополнительная информация**:
- Модуль использует локаторы, определенные в файле `post_message.json`.
- Модуль использует WebDriver для взаимодействия с веб-страницей Facebook.
- Модуль использует `SimpleNamespace` для хранения информации о тексте и изображении объявления.