# Forefront Provider

## Overview

This module implements the Forefront provider for the g4f framework. The Forefront provider allows interacting with the Forefront chatbot service using the g4f API.

## Details

The Forefront provider is designed to enable communication with the Forefront chatbot. It utilizes a custom API endpoint (`https://streaming.tenant-forefront-default.knative.chi.coreweave.com/free-chat`) to send requests and receive responses. The provider also supports streaming responses, which allows for the gradual display of chat messages.

## Classes

This module does not contain any classes.

## Functions

### `_create_completion`

**Purpose**: This function handles the process of creating a completion, which represents a response generated by the Forefront chat model. It packages user messages into a JSON payload and sends it to the Forefront API, then processes the streamed responses received from the API.

**Parameters**:

- `model (str)`: Specifies the chat model to be used for generating responses.
- `messages (list)`: A list of messages from the chat conversation.
- `stream (bool)`: Indicates whether to process the response as a stream (True) or not (False).
- `**kwargs`: Additional keyword arguments (not described in detail).

**Returns**:

- `Generator[str, None, None]`: A generator that yields individual tokens of the response stream.

**Raises Exceptions**:

- `requests.exceptions.RequestException`: If an error occurs during the API request.
- `json.JSONDecodeError`: If an error occurs during JSON decoding of the response stream.

**How the Function Works**:

1. The function builds a JSON payload containing the necessary information for the chat request.
2. The payload is sent to the Forefront API using `requests.post`.
3. The function iterates through the response stream, splitting each line and extracting the `delta` token, which represents a portion of the response.
4. Each extracted `delta` token is yielded as a string.

**Example**:

```python
messages = [
    {'role': 'user', 'content': 'Hello, world!'},
    {'role': 'assistant', 'content': 'Hi there! How can I help you today?'},
]

for token in _create_completion(model='gpt-4', messages=messages, stream=True):
    print(token)
```

**Inner Functions**:

There are no inner functions within this function.

## Parameter Details

- `model (str)`: Specifies the chat model to be used for generating responses.
- `messages (list)`: A list of messages from the chat conversation.
- `stream (bool)`: Indicates whether to process the response as a stream (True) or not (False).
- `**kwargs`: Additional keyword arguments.

## Examples

- `_create_completion(model='gpt-4', messages=[{'role': 'user', 'content': 'Hello, world!'}], stream=True)`: Sends a chat request to the Forefront API with a single message and processes the response stream.

## Additional Notes

- The Forefront provider assumes that authentication is not required for accessing the API (`needs_auth=False`).
- The provider supports streaming responses, allowing for gradual display of chat messages.

## Conclusion

This module provides the Forefront provider for the g4f framework, enabling communication with the Forefront chat service. The provider utilizes a custom API endpoint, supports streaming responses, and simplifies the process of sending chat requests and receiving responses from Forefront.