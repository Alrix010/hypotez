# Модуль `randomization.py`

## Обзор

Модуль `randomization.py` предоставляет класс `ABRandomizer`, который используется для рандомизации вариантов между двумя вариантами (например, «контроль» и «обработка») и последующего де-рандомизирования. Класс хранит информацию о рандомизации, чтобы можно было восстановить исходные значения вариантов после их рандомизации. 

## Детали

Модуль `randomization.py` находится в директории `hypotez/src/endpoints/tiny_troupe/tinytroupe (2)/experimentation`. Он используется в рамках экспериментов с целью рандомизации параметров и отслеживания изменений. 

## Классы

### `ABRandomizer`

**Описание**: Класс `ABRandomizer` позволяет рандомизировать выбор между двумя вариантами и сохранять информацию о рандомизации для последующего де-рандомизирования.

**Атрибуты**:

* `choices` (dict): Словарь, хранящий информацию о рандомизации. Ключ - индекс элемента, значение - кортеж из двух чисел, указывающий на то, были ли варианты переставлены.
* `real_name_1` (str): Настоящее имя первого варианта.
* `real_name_2` (str): Настоящее имя второго варианта.
* `blind_name_a` (str): Имя первого варианта, которое видит пользователь.
* `blind_name_b` (str): Имя второго варианта, которое видит пользователь.
* `passtrough_name` (list): Список имен, которые не рандомизируются и всегда возвращаются как есть.
* `random_seed` (int): Случайное число, используемое для генерации случайных чисел.

**Методы**:

#### `__init__`

**Описание**: Инициализирует экземпляр класса `ABRandomizer` с заданными параметрами.

**Параметры**:

* `real_name_1` (str, optional): Настоящее имя первого варианта. По умолчанию: "control".
* `real_name_2` (str, optional): Настоящее имя второго варианта. По умолчанию: "treatment".
* `blind_name_a` (str, optional): Имя первого варианта, которое видит пользователь. По умолчанию: "A".
* `blind_name_b` (str, optional): Имя второго варианта, которое видит пользователь. По умолчанию: "B".
* `passtrough_name` (list, optional): Список имен, которые не рандомизируются и всегда возвращаются как есть. По умолчанию: [].
* `random_seed` (int, optional): Случайное число, используемое для генерации случайных чисел. По умолчанию: 42.

**Возвращает**: None


#### `randomize`

**Описание**: Рандомизирует выбор между двумя вариантами (`a` и `b`) и сохраняет информацию о рандомизации для элемента с индексом `i`.

**Параметры**:

* `i` (int): Индекс элемента.
* `a` (str): Первый вариант.
* `b` (str): Второй вариант.

**Возвращает**: Кортеж из двух значений (`a` и `b`), которые могут быть переставлены.


#### `derandomize`

**Описание**: Де-рандомизирует выбор для элемента с индексом `i` и возвращает исходные варианты (`a` и `b`).

**Параметры**:

* `i` (int): Индекс элемента.
* `a` (str): Первый вариант.
* `b` (str): Второй вариант.

**Возвращает**: Кортеж из двух значений (`a` и `b`) в их исходном порядке.


#### `derandomize_name`

**Описание**: Де-рандомизирует имя варианта (`blind_name`), выбранное пользователем, и возвращает настоящее имя этого варианта.

**Параметры**:

* `i` (int): Индекс элемента.
* `blind_name` (str): Имя варианта, выбранное пользователем.

**Возвращает**: Настоящее имя варианта.

**Исключения**:

* `Exception`: Возникает, если не найдена информация о рандомизации для элемента `i` или если не распознано имя варианта `blind_name`.



## Примеры

```python
from hypotez.src.endpoints.tiny_troupe.tinytroupe (2).experimentation.randomization import ABRandomizer

# Создание экземпляра класса ABRandomizer
randomizer = ABRandomizer(real_name_1="control", real_name_2="treatment", blind_name_a="A", blind_name_b="B")

# Рандомизация выбора для элемента с индексом 0
choice_a, choice_b = randomizer.randomize(0, "control", "treatment")

# Вывод рандомизированных вариантов
print(f"Рандомизированные варианты: {choice_a}, {choice_b}")

# Де-рандомизация выбора для элемента с индексом 0
original_a, original_b = randomizer.derandomize(0, "control", "treatment")

# Вывод исходных вариантов
print(f"Исходные варианты: {original_a}, {original_b}")

# Де-рандомизация имени варианта
original_name = randomizer.derandomize_name(0, "B")

# Вывод исходного имени варианта
print(f"Исходное имя: {original_name}")
```
```python
from hypotez.src.endpoints.tiny_troupe.tinytroupe (2).experimentation.randomization import ABRandomizer

# Создание экземпляра класса ABRandomizer
randomizer = ABRandomizer(real_name_1="control", real_name_2="treatment", blind_name_a="A", blind_name_b="B")

# Рандомизация выбора для элемента с индексом 0
choice_a, choice_b = randomizer.randomize(0, "control", "treatment")

# Вывод рандомизированных вариантов
print(f"Рандомизированные варианты: {choice_a}, {choice_b}")

# Де-рандомизация выбора для элемента с индексом 0
original_a, original_b = randomizer.derandomize(0, "control", "treatment")

# Вывод исходных вариантов
print(f"Исходные варианты: {original_a}, {original_b}")

# Де-рандомизация имени варианта
original_name = randomizer.derandomize_name(0, "B")

# Вывод исходного имени варианта
print(f"Исходное имя: {original_name}")