# Модуль Bing для FreeGPT-WebUI-RU (G4F)

## Обзор

Этот модуль предоставляет реализацию провайдера Bing для FreeGPT-WebUI-RU (G4F). Провайдер Bing позволяет взаимодействовать с моделью GPT-4 от Microsoft через их API.

## Детали

Этот модуль использует веб-сокеты для взаимодействия с API Bing. Он обрабатывает установление соединения, отправку запросов и получение ответов от модели.  

## Классы

### `optionsSets`

**Описание**: Класс `optionsSets` определяет различные наборы опций для модели.

**Атрибуты**:
- `optionSet (dict)`: Словарь, представляющий набор опций.
- `jailbreak (dict)`: Набор опций для "jailbreak" модели.

**Методы**:
- Не определены

### `Defaults`

**Описание**: Класс `Defaults` определяет значения по умолчанию для различных параметров.

**Атрибуты**:
- `delimiter (str)`: Разделитель для текстовых сообщений.
- `ip_address (str)`: IP-адрес для отправки запросов.
- `allowedMessageTypes (list)`: Список допустимых типов сообщений.
- `sliceIds (list)`: Список идентификаторов сегментов.
- `location (dict)`: Информация о местоположении пользователя.

**Методы**:
- Не определены

## Функции

### `_format`

**Описание**: Функция `_format` форматирует входной словарь в JSON-строку.

**Параметры**:
- `msg (dict)`: Входной словарь.

**Возвращает**:
- `str`: JSON-строка, представляющая входной словарь.

### `create_conversation`

**Описание**: Функция `create_conversation` создает новую беседу с API Bing.

**Параметры**:
- Нет

**Возвращает**:
- `tuple`: Кортеж из трех элементов: идентификатор беседы, идентификатор клиента и подпись беседы.

**Исключения**:
- `Exception`: Если не удалось создать беседу.

### `stream_generate`

**Описание**: Функция `stream_generate` генерирует текст от модели Bing, используя веб-сокеты.

**Параметры**:
- `prompt (str)`: Текст запроса.
- `mode (optionsSets.optionSet)`: Набор опций для модели.
- `context (bool or str)`: Контекст для запроса.

**Возвращает**:
- `Generator`: Генератор, который выдает частичные ответы от модели.

**Исключения**:
- `Exception`: Если произошла ошибка во время генерации.

### `run`

**Описание**: Функция `run` запускает асинхронную генерацию текста от модели Bing.

**Параметры**:
- `generator (Generator)`: Генератор, возвращаемый функцией `stream_generate`.

**Возвращает**:
- `Generator`: Генератор, который выдает полные ответы от модели.

**Исключения**:
- `StopAsyncIteration`: Если генерация текста завершена.

### `convert`

**Описание**: Функция `convert` преобразует список сообщений в контекст для модели.

**Параметры**:
- `messages (list)`: Список сообщений.

**Возвращает**:
- `str`: Контекст, используемый для модели.

### `_create_completion`

**Описание**: Функция `_create_completion` создает завершение текста, используя модель Bing.

**Параметры**:
- `model (str)`: Имя модели.
- `messages (list)`: Список сообщений.
- `stream (bool)`: Флаг для потоковой передачи ответов.

**Возвращает**:
- `Generator`: Генератор, который выдает частичные ответы от модели.

**Исключения**:
- `Exception`: Если произошла ошибка во время завершения.

## Примеры

```python
# Пример использования провайдера Bing:
from hypotez.src.endpoints.freegpt-webui-ru.g4f.Provider.Providers.Bing import _create_completion
from hypotez.src.endpoints.freegpt-webui-ru.g4f.Provider.Providers.Bing import optionsSets

messages = [
    {'role': 'user', 'content': 'Привет! Как дела?'},
]

for token in _create_completion(model='gpt-4', messages=messages, stream=False):
    print(token, end='')

# Использование набора опций "jailbreak":
for token in _create_completion(model='gpt-4', messages=messages, stream=False, mode=optionsSets.jailbreak):
    print(token, end='')
```