# Документация для модуля `Gravityengine.py`

## Обзор

Модуль предоставляет реализацию провайдера `Gravityengine` для работы с моделями GPT через API `gpt4.gravityengine.cc`. Он поддерживает модели `gpt-3.5-turbo-16k` и `gpt-3.5-turbo-0613`, а также потоковую передачу данных. Не требует аутентификации.

## Более подробно

Этот модуль используется для взаимодействия с API Gravityengine для генерации текста на основе предоставленных сообщений. Он отправляет POST-запросы к API и возвращает сгенерированный контент. Модуль включает функцию `_create_completion`, которая формирует запрос к API и обрабатывает ответ.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """ Функция создает запрос к API Gravityengine для генерации текста на основе предоставленных сообщений.
    Args:
        model (str): Имя используемой модели.
        messages (list): Список сообщений, используемых для генерации текста.
        stream (bool): Флаг, указывающий, следует ли использовать потоковую передачу.
        **kwargs: Дополнительные аргументы.

    Returns:
        Generator[str, None, None]: Генератор, возвращающий сгенерированный контент.

    Raises:
        Exception: Если возникает ошибка при отправке запроса или обработке ответа.

    Пример:
        >>> model = 'gpt-3.5-turbo-16k'
        >>> messages = [{'role': 'user', 'content': 'Hello, how are you?'}]
        >>> stream = True
        >>> for chunk in _create_completion(model, messages, stream):
        ...     print(chunk)
    """
```

**Описание работы**:

1.  Функция принимает параметры, необходимые для запроса к API, такие как имя модели (`model`), список сообщений (`messages`) и флаг потоковой передачи (`stream`).
2.  Определяются заголовки запроса, включающие `Content-Type: application/json`.
3.  Формируется тело запроса `data` с указанием модели, температуры, штрафа за присутствие и сообщений.
4.  Отправляется POST-запрос к адресу `url + '/api/openai/v1/chat/completions'` с указанными заголовками и телом запроса.
5.  Функция ожидает потоковый ответ от API и извлекает контент из каждого полученного чанка.
6.  Возвращается генератор, который выдает контент каждого чанка.

## Параметры

*   `model` (str): Имя модели, используемой для генерации текста.
*   `messages` (list): Список сообщений, передаваемых в API для генерации текста.
*   `stream` (bool): Флаг, указывающий, следует ли использовать потоковую передачу.
*   `**kwargs`: Дополнительные аргументы, которые могут быть переданы в API.

**Примеры**:

```python
model = 'gpt-3.5-turbo-16k'
messages = [{'role': 'user', 'content': 'Hello, how are you?'}]
stream = True
for chunk in _create_completion(model, messages, stream):
    print(chunk)
```

## Переменные

*   `url` (str): URL-адрес API `gpt4.gravityengine.cc`.
*   `model` (list): Список поддерживаемых моделей (`gpt-3.5-turbo-16k`, `gpt-3.5-turbo-0613`).
*   `supports_stream` (bool): Флаг, указывающий, поддерживается ли потоковая передача (True).
*   `needs_auth` (bool): Флаг, указывающий, требуется ли аутентификация (False).
*   `params` (str): Строка, содержащая информацию о поддерживаемых параметрах функции `_create_completion`.