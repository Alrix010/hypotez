# Телеграм-бот

## Обзор

Этот модуль реализует телеграм-бота, который предоставляет набор функций для взаимодействия с пользователями в Telegram. Бот поддерживает обработку команд, голосовых сообщений, файлов документов и текстовых сообщений.

## Подробности

Этот модуль использует библиотеку `python-telegram-bot` для создания бота. Бот инициализируется токеном, который используется для аутентификации в Telegram API. Основная логика бота реализована в классе `TelegramBot`, который содержит методы для обработки различных событий, таких как команды, голосовые сообщения, файлы документов и текстовые сообщения.

## Классы

### `TelegramBot`

**Описание**: Класс, реализующий телеграм-бота.

**Атрибуты**:

- `token`: Строка, содержащая токен для доступа к Telegram API.

**Методы**:

- `__init__(self, token: str)`: Инициализирует бота с токеном и регистрирует обработчики.
- `register_handlers(self)`: Регистрирует обработчики команд и сообщений.
- `start(self, update: Update, context: CallbackContext)`: Обрабатывает команду `/start`.
- `help_command(self, update: Update, context: CallbackContext)`: Обрабатывает команду `/help`.
- `send_pdf(self, pdf_file: str | Path)`: Обрабатывает команду `/sendpdf` для отправки PDF-файла.
- `handle_voice(self, update: Update, context: CallbackContext)`: Обрабатывает голосовые сообщения и транскрибирует аудио.
- `transcribe_voice(self, file_path: Path) -> str`: Транскрибирует голосовые сообщения (заглушка).
- `handle_document(self, update: Update, context: CallbackContext) -> str`: Обрабатывает файлы документов и читает их содержимое.
- `handle_message(self, update: Update, context: CallbackContext) -> str`: Обрабатывает текстовые сообщения и возвращает полученный текст.

## Основная функция

### `main()`:

**Описание**: Инициализирует бота, регистрирует обработчики команд и сообщений, и запускает бота с помощью `run_polling()`.

**Принцип работы**:
- Инициализирует бота с токеном.
- Регистрирует обработчики команд и сообщений.
- Запускает бота в режиме опроса (`run_polling()`) для постоянного отслеживания обновлений.

## Модули и библиотеки

- `python-telegram-bot`: Основная библиотека для создания Telegram-ботов.
- `pathlib`: Для работы с путями файлов.
- `tempfile`: Для создания временных файлов.
- `asyncio`: Для асинхронного выполнения задач.
- `requests`: Для загрузки файлов.
- `src.utils.convertors.tts`: Для распознавания речи и преобразования текста в речь.
- `src.utils.file`: Для чтения текстовых файлов.

## Примеры

```python
# Example of initializing and running the Telegram bot
from src.endpoints.bots.telegram import TelegramBot

token = "YOUR_TELEGRAM_BOT_TOKEN"
bot = TelegramBot(token)
bot.main()
```

## Дополнительная информация

Этот бот в настоящее время является базовой реализацией с заглушками для транскрибирования голоса и других функций. Бот может быть расширен для поддержки дополнительных функций и улучшения функциональности.