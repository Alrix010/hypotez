# Модуль `utils.py`

## Обзор

Модуль `utils.py` предоставляет вспомогательную функцию для удаления текстовых сообщений в Telegram-боте.

## Детали

Данный модуль используется для удаления текстовых сообщений, отправленных пользователем в Telegram-бот. Он взаимодействует с контекстом состояния `FSMContext` для получения информации о последнем отправленном сообщении и использует API Telegram-бота для удаления сообщений.

## Функции

### `process_dell_text_msg`

**Описание**: Функция удаляет текстовое сообщение, отправленное пользователем.

**Параметры**:

- `message` (Message):  Объект сообщения, отправленного пользователем.
- `state` (FSMContext): Контекст состояния FSM для получения информации о последнем отправленном сообщении.

**Возвращаемое значение**: Нет.

**Исключения**:

- `Exception`: Возникает ошибка при удалении сообщения.

**Пример**:

```python
async def process_dell_text_msg(message: Message, state: FSMContext):
    """
    Удаляет текстовое сообщение, отправленное пользователем.

    Args:
        message (Message): Объект сообщения, отправленного пользователем.
        state (FSMContext): Контекст состояния FSM для получения информации о последнем отправленном сообщении.

    Returns:
        None

    Raises:
        Exception: Возникает ошибка при удалении сообщения.

    Example:
        >>> await process_dell_text_msg(message, state)
    """
    data = await state.get_data()
    last_msg_id = data.get('last_msg_id')

    try:
        if last_msg_id:
            await bot.delete_message(chat_id=message.from_user.id, message_id=last_msg_id)
        else:
            logger.warning("Ошибка: Не удалось найти идентификатор последнего сообщения для удаления.")
        await message.delete()

    except Exception as e:
        logger.error(f"Произошла ошибка при удалении сообщения: {str(e)}")
```

**Как работает функция**:

1. Функция получает данные из контекста состояния `FSMContext` с помощью `state.get_data()`.
2. Она извлекает идентификатор последнего сообщения (`last_msg_id`) из данных состояния.
3. Если `last_msg_id` найден, функция использует API Telegram-бота (`bot.delete_message`) для удаления последнего сообщения.
4. Если `last_msg_id` не найден, функция выводит предупреждение в лог.
5. После этого функция удаляет текущее сообщение (`message.delete`).
6. Если во время процесса возникает исключение, функция выводит ошибку в лог.

**Примеры**:

```python
# Пример вызова функции:
# Предположим, что объект `message` содержит информацию о текстовом сообщении, а `state` - о контексте FSM
await process_dell_text_msg(message, state)
```