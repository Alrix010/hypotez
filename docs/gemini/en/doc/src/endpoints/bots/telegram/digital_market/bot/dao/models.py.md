# Модуль `models.py`

## Обзор

Модуль содержит определения моделей базы данных, используемых в Telegram-боте для цифрового рынка.
Он включает модели для пользователей, категорий, товаров и покупок, а также определяет отношения между ними.
Модуль использует SQLAlchemy ORM для определения и взаимодействия с таблицами базы данных.

## Детали

Модуль определяет следующие классы моделей, которые соответствуют таблицам в базе данных:

- `User`: Пользователи бота.
- `Category`: Категории товаров.
- `Product`: Товары, доступные для покупки.
- `Purchase`: Информация о совершённых покупках.

Эти модели определяют структуру данных и отношения, необходимые для управления пользователями, товарами и покупками в боте.

## Классы

### `User`

**Описание**:
Представляет пользователя бота.

**Наследует**:
- `Base` (из `bot.dao.database`)

**Атрибуты**:
- `telegram_id` (int): Уникальный идентификатор пользователя в Telegram.
- `username` (str | None): Имя пользователя в Telegram (может отсутствовать).
- `first_name` (str | None): Имя пользователя (может отсутствовать).
- `last_name` (str | None): Фамилия пользователя (может отсутствовать).
- `purchases` (List['Purchase']): Список покупок, связанных с пользователем.

**Методы**:

#### `__repr__`

```python
def __repr__(self):
    """
    Возвращает строковое представление объекта `User`.

    Args:
        self (User): Экземпляр класса `User`.

    Returns:
        str: Строковое представление объекта `User` в формате:
             "<User(id=<id>, telegram_id=<telegram_id>, username='<username>')>"
    """
```

### `Category`

**Описание**:
Представляет категорию товаров.

**Наследует**:
- `Base` (из `bot.dao.database`)

**Атрибуты**:
- `category_name` (str): Название категории.
- `products` (List["Product"]): Список товаров, связанных с категорией.

**Методы**:

#### `__repr__`

```python
def __repr__(self):
    """
    Возвращает строковое представление объекта `Category`.

    Args:
        self (Category): Экземпляр класса `Category`.

    Returns:
        str: Строковое представление объекта `Category` в формате:
             "<Category(id=<id>, name='<category_name>')>"
    """
```

### `Product`

**Описание**:
Представляет товар.

**Наследует**:
- `Base` (из `bot.dao.database`)

**Атрибуты**:
- `name` (str): Название товара.
- `description` (str): Описание товара.
- `price` (int): Цена товара.
- `file_id` (str | None): Идентификатор файла товара (может отсутствовать).
- `category_id` (int): Идентификатор категории, к которой относится товар.
- `hidden_content` (str): Скрытое содержимое товара.
- `category` (Category): Категория, к которой относится товар.
- `purchases` (List['Purchase']): Список покупок, связанных с товаром.

**Методы**:

#### `__repr__`

```python
def __repr__(self):
    """
    Возвращает строковое представление объекта `Product`.

    Args:
        self (Product): Экземпляр класса `Product`.

    Returns:
        str: Строковое представление объекта `Product` в формате:
             "<Product(id=<id>, name='<name>', price=<price>)>"
    """
```

### `Purchase`

**Описание**:
Представляет покупку.

**Наследует**:
- `Base` (из `bot.dao.database`)

**Атрибуты**:
- `user_id` (int): Идентификатор пользователя, совершившего покупку.
- `product_id` (int): Идентификатор купленного товара.
- `price` (int): Цена товара на момент покупки.
- `payment_type` (str): Тип оплаты.
- `payment_id` (str): Уникальный идентификатор платежа.
- `user` (User): Пользователь, совершивший покупку.
- `product` (Product): Купленный товар.

**Методы**:

#### `__repr__`

```python
def __repr__(self):
    """
    Возвращает строковое представление объекта `Purchase`.

    Args:
        self (Purchase): Экземпляр класса `Purchase`.

    Returns:
        str: Строковое представление объекта `Purchase` в формате:
             "<Purchase(id=<id>, user_id=<user_id>, product_id=<product_id>, date=<created_at>)>"
    """
```