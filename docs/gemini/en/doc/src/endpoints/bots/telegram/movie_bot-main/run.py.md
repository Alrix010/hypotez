# Документация для `run.py`

## Обзор

Файл `run.py` является точкой входа для Telegram-бота, отвечающего за взаимодействие с пользователями через Telegram API. Он инициализирует и запускает бота, регистрирует обработчики сообщений и настраивает промежуточное ПО для управления нагрузкой.

## Детали

Файл содержит основную логику для запуска и управления Telegram-ботом. Он использует библиотеки `aiogram` для взаимодействия с Telegram API, `dotenv` для загрузки переменных окружения из файла `.env`, и `betterlogging` для настройки логирования.

## Структура файла

- Импорты необходимых библиотек и модулей.
- Инициализация диспетчера `dp`.
- Определение асинхронной функции `main` для запуска бота.
- Регистрация промежуточного ПО и обработчиков сообщений.
- Запуск бота в режиме опроса (polling).
- Настройка логирования.

## Функции

### `main`

```python
async def main() -> None:
    """
    Асинхронная функция для запуска Telegram-бота.

    Args:
        None

    Returns:
        None

    Raises:
        None

    Как работает функция:
    - Инициализирует бота с использованием токена, полученного из переменных окружения.
    - Добавляет промежуточное ПО для управления частотой запросов (throttling).
    - Включает маршрутизатор (router) для обработки сообщений.
    - Запускает бота в режиме опроса (polling), чтобы получать обновления от Telegram.

    Пример:
    ```python
    async def main():
        bot = Bot(os.getenv('TOKEN'))
        dp.message.middleware(ThrottlingMiddleware())
        dp.include_router(router)
        await dp.start_polling(bot)
    ```
    """
```

## Прочее

- Настройка логирования с использованием `betterlogging` для записи информации, предупреждений и ошибок в консоль.

```python
if __name__ == "__main__":
    logging.basic_colorized_config(
        level=logging.INFO,
        format='%(asctime)s - [%(levelname)s] - %(name)s - '
               '(%(filename)s).%(funcName)s(%(lineno)d) - %(message)s',
        datefmt='%H:%M:%S'
    )
    asyncio.run(main())