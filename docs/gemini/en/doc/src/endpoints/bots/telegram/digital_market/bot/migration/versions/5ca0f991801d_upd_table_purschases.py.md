# Module: `hypotez/src/endpoints/bots/telegram/digital_market/bot/migration/versions/5ca0f991801d_upd_table_purschases.py`

## Overview

This module defines an Alembic migration script for updating the `purchases` table in a database. It adds a new column named `payment_type` to the `purchases` table and creates a unique constraint on the `payment_id` column.

## Details

This migration script is part of the `hypotez` project, likely used for managing a database schema for an e-commerce platform. The script adds a new column to track the payment method used for each purchase, and ensures that each purchase has a unique payment ID.

## Functions

### `upgrade()`

**Purpose**: This function executes the database migration script, applying the changes to the `purchases` table.

**Parameters**: None

**Returns**: None

**Raises Exceptions**: None

**How the Function Works**:

1. Adds a new column named `payment_type` to the `purchases` table.
2. Creates a unique constraint on the `payment_id` column, ensuring that each purchase has a distinct payment ID.

**Example**:

```python
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('purchases', sa.Column('payment_type', sa.String(), nullable=False))
    op.create_unique_constraint(None, 'purchases', ['payment_id'])
    # ### end Alembic commands ###
```

### `downgrade()`

**Purpose**: This function reverts the changes made by the `upgrade()` function, removing the newly added column and constraint.

**Parameters**: None

**Returns**: None

**Raises Exceptions**: None

**How the Function Works**:

1. Drops the unique constraint on the `payment_id` column.
2. Removes the `payment_type` column from the `purchases` table.

**Example**:

```python
def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, 'purchases', type_='unique')
    op.drop_column('purchases', 'payment_type')
    # ### end Alembic commands ###
```

## Parameter Details

- `payment_type` (sa.String): This column represents the type of payment used for a particular purchase. It is of type `sa.String`, meaning it can store textual values.
- `payment_id` (sa.String): This column represents the unique identifier for a payment.

## Examples

```python
from alembic import op
import sqlalchemy as sa

# Upgrade example
op.add_column('purchases', sa.Column('payment_type', sa.String(), nullable=False))
op.create_unique_constraint(None, 'purchases', ['payment_id'])

# Downgrade example
op.drop_constraint(None, 'purchases', type_='unique')
op.drop_column('purchases', 'payment_type')
```