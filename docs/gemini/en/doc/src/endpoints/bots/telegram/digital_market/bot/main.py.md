# Модуль запуска Telegram-бота для цифрового рынка

## Обзор

Модуль `main.py` является точкой входа для запуска Telegram-бота для цифрового рынка. Он содержит функции для установки команд по умолчанию, запуска и остановки бота, регистрации мидлварей и роутеров, а также создания и настройки приложения aiohttp.

## Детали

Этот модуль отвечает за:

- **Инициализацию бота**:  загружает настройки, устанавливает команды по умолчанию и регистрирует мидлвари и роутеры.
- **Запуск веб-сервера**:  использует aiohttp для запуска веб-сервера, который слушает запросы от Telegram API.
- **Обработка запросов**:  обрабатывает входящие сообщения от пользователей и отправляет ответы.
- **Логирование**:  регистрирует действия бота и ошибки.

##  Функции

### `set_default_commands`

**Описание**:  Функция устанавливает команды по умолчанию для бота, такие как `/start` для запуска бота.

**Параметры**:  нет

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> await set_default_commands()
```

### `on_startup`

**Описание**:  Функция выполняется при запуске приложения. Она устанавливает команды по умолчанию, настраивает вебхук и отправляет сообщения админам о запуске бота.

**Параметры**:

- `app` (`web.Application`): объект приложения aiohttp.

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> await on_startup(app)
```

### `on_shutdown`

**Описание**:  Функция выполняется при остановке приложения. Она отправляет сообщения админам об остановке бота, удаляет вебхук и закрывает сессию.

**Параметры**:

- `app` (`web.Application`): объект приложения aiohttp.

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> await on_shutdown(app)
```

### `register_middlewares`

**Описание**:  Функция регистрирует мидлвари для диспетчера. Мидлвари - это функции, которые выполняются перед обработкой запроса.

**Параметры**:  нет

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> register_middlewares()
```

### `register_routers`

**Описание**:  Функция регистрирует роутеры для диспетчера. Роутеры - это функции, которые обрабатывают запросы от пользователей.

**Параметры**:  нет

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> register_routers()
```

### `create_app`

**Описание**:  Функция создает и настраивает приложение aiohttp. 

**Параметры**:  нет

**Возвращаемое значение**:

- `web.Application`: объект приложения aiohttp.

**Примеры**:

```python
>>> app = create_app()
```

### `main`

**Описание**:  Главная функция для запуска приложения. 

**Параметры**:  нет

**Возвращаемое значение**:  нет

**Примеры**:

```python
>>> main()
```

##  Параметры

### `settings`

**Описание**:  Объект с настройками приложения, такими как:

- `BOT_TOKEN`:  токен бота Telegram.
- `get_webhook_url`:  функция для получения URL-адреса вебхука.
- `SITE_HOST`:  хост для веб-сервера.
- `SITE_PORT`:  порт для веб-сервера.

### `bot`

**Описание**:  Объект бота Telegram.

### `admins`

**Описание**:  Список идентификаторов админов бота.

### `dp`

**Описание**:  Объект диспетчера для бота Telegram.

##  Пример использования

```python
# Запуск бота
if __name__ == "__main__":
    main()
```

##  Дополнительная информация

- Для логгирования используйте модуль `logger` из `src.logger`.
- Для работы с webdriver используйте классы `Driver`, `Chrome`, `Firefox`, `Playwright` из модуля `src.webdirver`.
- Все комментарии и документация должны быть на русском языке.