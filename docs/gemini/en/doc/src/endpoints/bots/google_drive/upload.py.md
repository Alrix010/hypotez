# Модуль для загрузки файлов в Google Drive
## Обзор
Этот модуль предоставляет функциональность для загрузки файлов в Google Drive. Он использует библиотеку `pydrive` для взаимодействия с API Google Drive. 

## Подробности
Модуль предоставляет функцию `upload`, которая принимает имя файла, контекст и необязательный родительский каталог в качестве входных данных. Функция авторизуется в Google Drive, используя сохраненные учетные данные пользователя. 

**Основные этапы работы модуля:**

1. **Авторизация:** 
   - Проверяет наличие сохраненных учетных данных в файле, имя которого соответствует ID пользователя.
   - Если учетные данные отсутствуют, выводит сообщение об ошибке.
   - Если учетные данные устарели, обновляет их.
   - Инициализирует сохраненные учетные данные.
2. **Проверка файла:** 
   - Проверяет, существует ли указанный файл. 
   - Если файл не найден, выводит сообщение об ошибке.
3. **Создание каталога:** 
   - Если указан родительский каталог, проверяет его наличие в корневом каталоге Google Drive.
   - Если каталог не найден, создает его и получает его ID. 
4. **Загрузка файла:** 
   - Создает объект файла `file_to_upload` с соответствующими метаданными, такими как имя файла, родительский каталог и тип MIME.
   - Загружает содержимое файла в объект `file_to_upload`.
   - Выполняет загрузку файла в Google Drive.
   - Получает публичную ссылку на загруженный файл.

## Классы
### `upload`
**Описание:** Функция для загрузки файлов в Google Drive.
**Параметры:**
 - `filename` (str): Имя файла, который необходимо загрузить.
 - `update`: Объект, содержащий информацию о пользователе и обновлении.
 - `context`: Контекст, в котором выполняется функция.
 - `parent_folder` (str, optional): Имя родительского каталога, в который необходимо загрузить файл. По умолчанию `None`.

**Возвращает:**
 - `str`: Публичная ссылка на загруженный файл.

**Примеры:**

```python
upload('example.txt', update, context) # Загружает файл `example.txt` в корневой каталог Google Drive.
upload('example.txt', update, context, parent_folder='My Folder') # Загружает файл `example.txt` в каталог `My Folder`.
```

**Как работает функция:**

Функция `upload` использует библиотеку `pydrive` для взаимодействия с API Google Drive. Она выполняет следующие действия:

1. Авторизуется в Google Drive, используя сохраненные учетные данные.
2. Проверяет, существует ли указанный файл. 
3. Если указан родительский каталог, проверяет его наличие в корневом каталоге Google Drive. 
4. Если каталог не найден, создает его и получает его ID.
5. Создает объект файла с соответствующими метаданными.
6. Загружает файл в Google Drive.
7. Получает публичную ссылку на загруженный файл.

**Внутренние функции:**

- `get_folder_id(parent_folder: str) -> str`:  Функция для поиска ID родительского каталога по его имени.
  - **Параметры:**
    - `parent_folder` (str): Имя родительского каталога.
  - **Возвращает:**
    - `str`: ID родительского каталога.
  - **Описание:** 
    - Функция получает список файлов и каталогов из корневого каталога Google Drive. 
    - Она ищет каталог с заданным именем и возвращает его ID.
    - Если каталог не найден, создает его и возвращает ID. 
- `create_folder(parent_folder: str) -> str`: Функция для создания каталога.
  - **Параметры:**
    - `parent_folder` (str): Имя каталога.
  - **Возвращает:**
    - `str`: ID каталога.
  - **Описание:**
    - Функция создает каталог с заданным именем в корневом каталоге Google Drive.
    - Возвращает ID созданного каталога.
- `upload_file(filename: str, parent_folder: str = None) -> str`: Функция для загрузки файла.
  - **Параметры:**
    - `filename` (str): Имя файла, который необходимо загрузить.
    - `parent_folder` (str, optional): Имя родительского каталога, в который необходимо загрузить файл. По умолчанию `None`.
  - **Возвращает:**
    - `str`: Публичная ссылка на загруженный файл.
  - **Описание:**
    - Функция создает объект файла с соответствующими метаданными.
    - Загружает файл в Google Drive.
    - Получает публичную ссылку на загруженный файл.

## Параметры
- `filename` (str): Путь к файлу, который необходимо загрузить.
- `parent_folder` (str, optional): Имя родительского каталога, в который необходимо загрузить файл. По умолчанию `None`.

## Примеры
```python
upload('example.txt', update, context) # Загружает файл `example.txt` в корневой каталог Google Drive.
upload('example.txt', update, context, parent_folder='My Folder') # Загружает файл `example.txt` в каталог `My Folder`.
```