# Модуль `TypeGPT`

## Обзор

Модуль `TypeGPT` предоставляет класс `TypeGPT`, который является подклассом `OpenaiTemplate` и предназначен для взаимодействия с сервисом TypeGPT. Он содержит информацию о URL, API, заголовках и моделях, используемых для связи с TypeGPT.

## Детали

Этот модуль определяет настройки и параметры, необходимые для подключения к TypeGPT, включая URL, заголовки запросов и список поддерживаемых моделей. Он также включает методы для получения списка доступных моделей. Этот код важен для настройки и использования TypeGPT в проекте `hypotez`.

## Классы

### `TypeGPT`

**Описание**: Класс `TypeGPT` является подклассом `OpenaiTemplate` и предоставляет интерфейс для взаимодействия с API TypeGPT.

**Наследует**:
- `OpenaiTemplate`: Этот класс наследует базовый функционал для работы с OpenAI-подобными API из класса `OpenaiTemplate`.

**Атрибуты**:
- `label` (str): Метка провайдера, в данном случае `"TypeGpt"`.
- `url` (str): URL сервиса TypeGPT, `"https://chat.typegpt.net"`.
- `api_base` (str): Базовый URL API TypeGPT, `"https://chat.typegpt.net/api/openai/v1"`.
- `working` (bool): Флаг, указывающий на работоспособность провайдера, `True`.
- `headers` (dict): Заголовки HTTP-запроса для взаимодействия с API.
- `default_model` (str): Модель, используемая по умолчанию, `'gpt-4o-mini-2024-07-18'`.
- `default_vision_model` (str): Модель для обработки изображений, используемая по умолчанию, совпадает с `default_model`.
- `vision_models` (list): Список моделей, поддерживающих обработку изображений.
- `fallback_models` (list): Список моделей, используемых в качестве запасных вариантов.
- `image_models` (list): Список моделей, предназначенных для генерации изображений.
- `model_aliases` (dict): Словарь псевдонимов моделей.

**Принцип работы**:

Класс `TypeGPT` настраивает параметры подключения к сервису TypeGPT, включая URL, заголовки и список поддерживаемых моделей. Он также предоставляет метод `get_models` для получения актуального списка доступных моделей из API. Эти параметры используются для выполнения запросов к TypeGPT и обработки ответов.

## Методы класса

### `get_models`

```python
@classmethod
def get_models(cls, **kwargs):
    """
    Получает список доступных моделей из API TypeGPT.

    Args:
        **kwargs: Дополнительные параметры.

    Returns:
        list: Список доступных моделей.
    """
```

**Описание**:
Метод класса `get_models` получает список доступных моделей из API TypeGPT.

**Параметры**:
- `cls` (Type[TypeGPT]): Ссылка на класс `TypeGPT`.
- `**kwargs`: Дополнительные параметры.

**Возвращает**:
- `list`: Список доступных моделей.

**Как работает функция**:
1. Проверяет, был ли уже получен список моделей (хранится в `cls.models`).
2. Если список моделей не был получен, выполняет GET-запрос к `f"{cls.url}/api/config"` для получения конфигурации.
3. Извлекает список моделей из JSON-ответа, используя ключ `"customModels"`.
4. Разделяет строку моделей на список, используя `,` в качестве разделителя.
5. Извлекает имя каждой модели, удаляя префиксы `+` и `@<версия>`, если они присутствуют.
6. Фильтрует модели, исключая те, которые указаны в `cls.image_models`.
7. Сохраняет полученный список моделей в `cls.models` для последующего использования.
8. Возвращает список доступных моделей.

**Примеры**:
```python
models = TypeGPT.get_models()
print(models)
# Output: ['gpt-4o-mini-2024-07-18', 'gpt-3.5-turbo', ...]