# Документация модуля `Poe.py`

## Обзор

Модуль `Poe.py` предназначен для взаимодействия с платформой Poe (https://poe.com) для выполнения задач создания текста с использованием различных моделей, таких как Llama-2, CodeLlama, GPT и Google-PaLM. Модуль предоставляет класс `Poe`, который реализует функциональность отправки запросов к Poe и получения ответов.

## Более подробно

Модуль содержит класс `Poe`, который наследуется от `AbstractProvider` и реализует методы для создания запросов к Poe и получения ответов. Он использует `selenium` для автоматизации взаимодействия с веб-интерфейсом Poe.

## Классы

### `Poe`

**Описание**: Класс для взаимодействия с платформой Poe.

**Наследует**:
- `AbstractProvider`: Абстрактный класс, определяющий интерфейс для провайдеров.

**Атрибуты**:
- `url` (str): URL-адрес платформы Poe.
- `working` (bool): Флаг, указывающий, работает ли провайдер.
- `needs_auth` (bool): Флаг, указывающий, требуется ли аутентификация для использования провайдера.
- `supports_stream` (bool): Флаг, указывающий, поддерживает ли провайдер потоковую передачу данных.
- `models` (dict): Список поддерживаемых моделей.

**Принцип работы**:
Класс использует `selenium` для автоматизации взаимодействия с веб-интерфейсом Poe. Он открывает страницу Poe в браузере, вводит запрос в текстовое поле и отправляет его. Затем он получает ответ от Poe и возвращает его.

## Методы класса

### `create_completion`

```python
@classmethod
def create_completion(
    cls,
    model: str,
    messages: Messages,
    stream: bool,
    proxy: str = None,
    webdriver: WebDriver = None,
    user_data_dir: str = None,
    headless: bool = True,
    **kwargs
) -> CreateResult:
    """
    Функция создает запрос к платформе Poe и возвращает результат.

    Args:
        model (str): Имя используемой модели.
        messages (Messages): Список сообщений для отправки.
        stream (bool): Флаг, указывающий, использовать ли потоковую передачу данных.
        proxy (str, optional): Адрес прокси-сервера. По умолчанию `None`.
        webdriver (WebDriver, optional): Экземпляр веб-драйвера. По умолчанию `None`.
        user_data_dir (str, optional): Каталог пользовательских данных для Chrome. По умолчанию `None`.
        headless (bool, optional): Запускать ли браузер в безголовом режиме. По умолчанию `True`.
        **kwargs: Дополнительные аргументы.

    Returns:
        CreateResult: Результат создания запроса.

    Raises:
        ValueError: Если указанная модель не поддерживается.
        RuntimeError: Если не найдено текстовое поле для ввода запроса.

    Как работает функция:
    1. Проверяет, указана ли модель. Если нет, используется модель "gpt-3.5-turbo".
    2. Проверяет, поддерживается ли указанная модель. Если нет, выбрасывается исключение ValueError.
    3. Форматирует запрос из списка сообщений.
    4. Создает сессию веб-драйвера.
    5. Внутри сессии:
        - Добавляет скрипт для перехвата сообщений WebSocket.
        - Открывает страницу Poe для указанной модели.
        - Ожидает появления текстового поля для ввода запроса.
        - Вводит запрос в текстовое поле.
        - Отправляет запрос.
        - В цикле получает чанки ответа с использованием JavaScript.
        - Возвращает чанки ответа.
    """
```

**Параметры**:
- `model` (str): Имя используемой модели.
- `messages` (Messages): Список сообщений для отправки.
- `stream` (bool): Флаг, указывающий, использовать ли потоковую передачу данных.
- `proxy` (str, optional): Адрес прокси-сервера. По умолчанию `None`.
- `webdriver` (WebDriver, optional): Экземпляр веб-драйвера. По умолчанию `None`.
- `user_data_dir` (str, optional): Каталог пользовательских данных для Chrome. По умолчанию `None`.
- `headless` (bool, optional): Запускать ли браузер в безголовом режиме. По умолчанию `True`.
- `**kwargs`: Дополнительные аргументы.

**Возвращает**:
- `CreateResult`: Результат создания запроса.

**Примеры**:

Пример вызова функции `create_completion` с различными параметрами:

```python
Poe.create_completion(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Hello"}], stream=True)
Poe.create_completion(model="gpt-4", messages=[{"role": "user", "content": "Tell me a joke"}], stream=False, proxy="http://proxy:8080")
```
```python
    def inner_function():
        """
        Внутренняя функция. Функция выполняет какое-то действие... <Здесь вы пишете, что делает функция>
        Args:
            param (str): Описание параметра `param`.
            param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.

        Returns:
            dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.

        Raises:
            SomeError: Описание ситуации, в которой возникает исключение `SomeError`.
        """