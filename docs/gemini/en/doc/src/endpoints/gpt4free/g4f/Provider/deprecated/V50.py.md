# Модуль `V50`

## Обзор

Модуль `V50` представляет собой реализацию провайдера для работы с языковой моделью через API `https://p5.v50.ltd`.
Он поддерживает модель `gpt-3.5-turbo`, не поддерживает потоковую передачу данных, не требует аутентификации и в настоящее время помечен как нерабочий.

## Более подробно

Этот модуль предназначен для интеграции с API `https://p5.v50.ltd` и предоставляет метод `create_completion` для создания запросов к модели.
Он формирует HTTP-запросы к API и возвращает результаты.

## Классы

### `V50`

**Описание**:
Класс `V50` является наследником `AbstractProvider` и реализует логику взаимодействия с API `https://p5.v50.ltd`.

**Наследует**:
`AbstractProvider` - базовый класс для всех провайдеров в проекте.

**Атрибуты**:
- `url` (str): URL-адрес API (`https://p5.v50.ltd`).
- `supports_gpt_35_turbo` (bool): Поддержка модели `gpt-3.5-turbo` (True).
- `supports_stream` (bool): Поддержка потоковой передачи (False).
- `needs_auth` (bool): Требуется ли аутентификация (False).
- `working` (bool): Статус работоспособности провайдера (False).

**Принцип работы**:
Класс `V50` предназначен для взаимодействия с API `https://p5.v50.ltd`. Он формирует запросы к API на основе входных параметров и обрабатывает ответы.

## Методы класса

### `create_completion`

```python
    @staticmethod
    def create_completion(
        model: str,
        messages: list[dict[str, str]],
        stream: bool, **kwargs: Any) -> CreateResult:
        """
        Создает запрос к API для получения завершения текста.

        Args:
            model (str): Идентификатор модели.
            messages (list[dict[str, str]]): Список сообщений для контекста.
            stream (bool): Флаг потоковой передачи (не используется).
            **kwargs (Any): Дополнительные параметры, такие как `temperature`, `top_p` и `proxy`.

        Returns:
            CreateResult: Результат запроса к API.

        Как работает функция:
        - Функция формирует текстовое представление истории сообщений для отправки в API.
        - Подготавливает словарь `payload` с данными для отправки, включая историю сообщений, параметры температуры и другие параметры.
        - Формирует HTTP-заголовки, необходимые для запроса к API.
        - Отправляет POST-запрос к API `https://p5.v50.ltd/api/chat-process` с сформированными данными и заголовками.
        - Обрабатывает ответ от API и возвращает его.
        - Если в ответе содержится `https://fk1.v50.ltd`, возвращает текст ответа.
        """
```

**Параметры**:
- `model` (str): Идентификатор модели, которую требуется использовать.
- `messages` (list[dict[str, str]]): Список сообщений, представляющих историю разговора.
  Каждое сообщение содержит роль (`role`) и содержание (`content`).
- `stream` (bool): Флаг, указывающий, следует ли использовать потоковый режим (в данном случае не поддерживается).
- `**kwargs` (Any): Дополнительные параметры, такие как:
  - `temperature` (float): Параметр, определяющий случайность выбора следующего токена.
  - `top_p` (float): Параметр, ограничивающий выборку наиболее вероятными токенами.
  - `proxy` (dict): Параметры прокси-сервера для выполнения запроса.

**Возвращает**:
- `CreateResult`: Результат запроса к API в виде генератора текста.

**Примеры**:

```python
# Пример вызова функции create_completion
model = "gpt-3.5-turbo"
messages = [
    {"role": "user", "content": "Привет!"},
    {"role": "assistant", "content": "Здравствуйте!"}
]
stream = False
kwargs = {"temperature": 0.5, "top_p": 0.5}

result = V50.create_completion(model, messages, stream, **kwargs)
for res in result:
    print(res)