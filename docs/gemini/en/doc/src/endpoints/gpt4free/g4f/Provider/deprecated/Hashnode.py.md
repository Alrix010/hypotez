# Модуль `Hashnode.py`

## Обзор

Модуль `Hashnode.py` предоставляет класс `Hashnode`, который является асинхронным провайдером для взаимодействия с сервисом Hashnode. Он позволяет генерировать ответы на основе предоставленных сообщений, используя различные типы поиска, такие как быстрый поиск, поиск кода и веб-поиск. Модуль поддерживает историю сообщений и модель GPT-3.5 Turbo.

## Более подробно

Модуль предназначен для интеграции с платформой Hashnode, предоставляя возможность использовать её API для получения ответов на запросы. Он использует библиотеку `aiohttp` для асинхронных HTTP-запросов.

## Классы

### `SearchTypes`

**Описание**: Класс, содержащий константы, определяющие типы поиска, которые могут быть использованы при запросе к Hashnode.

**Атрибуты**:
- `quick` (str): Тип быстрого поиска.
- `code` (str): Тип поиска кода.
- `websearch` (str): Тип веб-поиска.

### `Hashnode`

**Описание**: Класс, реализующий асинхронного провайдера для Hashnode.

**Наследует**:
- `AsyncGeneratorProvider`: Базовый класс для асинхронных провайдеров.

**Атрибуты**:
- `url` (str): URL сервиса Hashnode.
- `working` (bool): Флаг, указывающий на работоспособность сервиса.
- `supports_message_history` (bool): Флаг, указывающий на поддержку истории сообщений.
- `supports_gpt_35_turbo` (bool): Флаг, указывающий на поддержку модели GPT-3.5 Turbo.
- `_sources` (list): Список источников, полученных в результате поиска.

#### Методы класса

- `create_async_generator`
- `get_sources`

## Методы класса

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    search_type: str = SearchTypes.websearch,
    proxy: str = None,
    **kwargs
) -> AsyncResult:
    """
    Создает асинхронный генератор для получения ответов от Hashnode.

    Args:
        cls (Hashnode): Ссылка на класс Hashnode.
        model (str): Модель для генерации ответа.
        messages (Messages): Список сообщений для запроса.
        search_type (str, optional): Тип поиска. По умолчанию `SearchTypes.websearch`.
        proxy (str, optional): URL прокси-сервера. По умолчанию `None`.
        **kwargs: Дополнительные аргументы.

    Returns:
        AsyncResult: Асинхронный генератор, выдающий чанки ответа.

    Raises:
        Exception: Если возникает ошибка при выполнении запроса.

    Как работает функция:
    - Функция принимает параметры, необходимые для запроса к API Hashnode.
    - Устанавливает заголовки запроса, включая User-Agent, Accept и Content-Type.
    - Если указан тип поиска `websearch`, выполняет запрос к API Hashnode для получения источников.
    - Формирует данные для запроса, включая идентификатор чата, историю сообщений, запрос и результаты поиска.
    - Выполняет POST-запрос к API Hashnode для получения завершения.
    - Итерируется по чанкам ответа и декодирует их для выдачи через генератор.
    """
    ...
```

### `get_sources`

```python
@classmethod
def get_sources(cls) -> list:
    """
    Возвращает список источников, использованных для генерации ответа.

    Args:
        cls (Hashnode): Ссылка на класс Hashnode.

    Returns:
        list: Список словарей, содержащих информацию об источниках.

    Как работает функция:
    - Функция извлекает информацию об использованных источниках из атрибута `_sources` класса.
    - Форматирует каждый источник в словарь, содержащий заголовок и URL.
    - Возвращает список этих словарей.
    """
    ...