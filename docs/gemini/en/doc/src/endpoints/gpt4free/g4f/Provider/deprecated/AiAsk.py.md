# Документация для модуля `AiAsk.py`

## Обзор

Модуль `AiAsk.py` предоставляет асинхронный генератор для взаимодействия с сервисом AiAsk. Он поддерживает ведение истории сообщений и использование модели GPT-3.5 Turbo.

## Подробности

Модуль предназначен для асинхронного обмена сообщениями с сервисом AiAsk. Он использует `aiohttp` для выполнения HTTP-запросов и предоставляет класс `AiAsk`, который является асинхронным генератором. Модуль также обрабатывает случаи достижения лимита запросов.

## Классы

### `AiAsk`

**Описание**: Класс `AiAsk` предоставляет асинхронный генератор для взаимодействия с сервисом AiAsk.

**Наследует**:
- `AsyncGeneratorProvider`: Наследует функциональность асинхронного генератора от базового класса `AsyncGeneratorProvider`.

**Атрибуты**:
- `url` (str): URL сервиса AiAsk (`https://e.aiask.me`).
- `supports_message_history` (bool): Указывает, поддерживает ли сервис историю сообщений (значение `True`).
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли сервис модель GPT-3.5 Turbo (значение `True`).
- `working` (bool): Указывает, работает ли сервис в данный момент (значение `False`).

**Методы**:
- `create_async_generator`: Создает асинхронный генератор для отправки сообщений и получения ответов от сервиса AiAsk.

## Методы класса

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    proxy: str = None,
    **kwargs
) -> AsyncResult:
    """
    Создает асинхронный генератор для взаимодействия с сервисом AiAsk.

    Args:
        cls: Ссылка на класс.
        model (str): Используемая модель.
        messages (Messages): Список сообщений для отправки.
        proxy (str, optional): Прокси-сервер для использования. По умолчанию `None`.
        **kwargs: Дополнительные параметры, такие как температура.

    Returns:
        AsyncResult: Асинхронный генератор, возвращающий ответы от сервиса.

    Raises:
        RuntimeError: Если достигнут лимит запросов.

    Как работает функция:
    - Функция устанавливает необходимые заголовки для запроса.
    - Создает асинхронную сессию с использованием `aiohttp.ClientSession`.
    - Формирует данные для отправки в теле запроса, включая историю сообщений, модель и параметры.
    - Отправляет POST-запрос к сервису AiAsk.
    - Читает ответ чанками и возвращает их через генератор.
    - Проверяет наличие сообщения о лимите запросов и вызывает исключение `RuntimeError`, если лимит достигнут.

    Пример:
        >>> async for chunk in AiAsk.create_async_generator(model='gpt-3.5-turbo', messages=[{'role': 'user', 'content': 'Hello'}]):
        ...     print(chunk)
    """
```

## Параметры класса

- `model` (str): Определяет, какая модель будет использоваться для генерации ответов.
- `messages` (Messages): Список сообщений, отправляемых в запросе.
- `proxy` (str, optional): Адрес прокси-сервера, через который будет осуществляться подключение. По умолчанию `None`.
- `kwargs` (dict): Дополнительные параметры, которые могут быть переданы в запрос, такие как температура.

## Примеры

Пример использования `create_async_generator`:

```python
async for chunk in AiAsk.create_async_generator(model='gpt-3.5-turbo', messages=[{'role': 'user', 'content': 'Hello'}]):
    print(chunk)