# Module `GetGpt.py`

## Обзор

Модуль предоставляет класс `GetGpt`, который является устаревшим провайдером для взаимодействия с моделью GPT через API `chat.getgpt.world`. Он поддерживает потоковую передачу данных и предназначен для использования с моделью `gpt-3.5-turbo`.
В модуле реализовано создание запросов к API, шифрование данных (закомментировано) и обработка потоковых ответов.

## Более детально

Модуль `GetGpt` является частью набора провайдеров, используемых для доступа к различным моделям GPT. Он реализует абстрактный класс `AbstractProvider` и предоставляет функциональность для отправки запросов к API `chat.getgpt.world` и получения потоковых ответов.
Этот модуль содержит методы для создания запросов, шифрования данных (хотя в текущей версии эта функциональность закомментирована) и обработки потоковых ответов от API.
Основная цель модуля - обеспечить возможность взаимодействия с API `chat.getgpt.world` для генерации текста на основе модели `gpt-3.5-turbo`.

## Классы

### `GetGpt`

**Описание**: Класс `GetGpt` является провайдером для взаимодействия с API `chat.getgpt.world`.

**Наследует**:
- `AbstractProvider`: Абстрактный класс, определяющий интерфейс для всех провайдеров.

**Атрибуты**:
- `url` (str): URL-адрес API `chat.getgpt.world`.
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных. В данном случае `True`.
- `working` (bool): Указывает, работает ли провайдер в данный момент. В данном случае `False`.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель `gpt-3.5-turbo`. В данном случае `True`.

**Принцип работы**:
Класс `GetGpt` предназначен для отправки запросов к API `chat.getgpt.world` и обработки потоковых ответов. Он использует метод `create_completion` для создания запроса с заданными параметрами, такими как модель, сообщения и другие параметры запроса.
Затем он отправляет POST-запрос к API и обрабатывает потоковые ответы, извлекая содержимое из каждой строки ответа.
Функциональность шифрования данных, представленная в методах `_encrypt` и `_pad_data`, в текущей версии закомментирована.

#### Методы

- `create_completion`

## Методы класса

### `create_completion`

```python
@staticmethod
def create_completion(
    model: str,
    messages: list[dict[str, str]],
    stream: bool, **kwargs: Any) -> CreateResult:
    """ Функция создает запрос к API chat.getgpt.world и обрабатывает потоковые ответы.

    Args:
        model (str): Модель для использования (в данном случае всегда `gpt-3.5-turbo`).
        messages (list[dict[str, str]]): Список сообщений для отправки в API.
        stream (bool): Указывает, использовать ли потоковую передачу данных.
        **kwargs (Any): Дополнительные параметры запроса, такие как `frequency_penalty`, `max_tokens`, `presence_penalty`, `temperature`, `top_p`.

    Returns:
        CreateResult: Генератор строк, содержащих содержимое ответов от API.

    Raises:
        requests.exceptions.HTTPError: Если возникает ошибка при отправке запроса к API.

    Как работает функция:
    1. Функция принимает параметры запроса, включая модель, сообщения и другие параметры.
    2. Формирует заголовки запроса, включая `Content-Type`, `Referer` и `user-agent`.
    3. Преобразует данные запроса в формат JSON.
    4. Отправляет POST-запрос к API `chat.getgpt.world/api/chat/stream` с использованием библиотеки `requests`.
    5. Проверяет статус ответа и вызывает исключение `HTTPError` в случае ошибки.
    6. Итерирует по строкам ответа, извлекая содержимое из каждой строки.
    7. Возвращает генератор строк, содержащих содержимое ответов от API.

    Пример:
        messages = [{"role": "user", "content": "Hello, how are you?"}]
        stream = True
        kwargs = {"max_tokens": 100}
        result = GetGpt.create_completion(model="gpt-3.5-turbo", messages=messages, stream=stream, **kwargs)
        for line in result:
            print(line)
    """
```

## Функции

### `_encrypt`

```python
def _encrypt(e: str):
    """ Функция шифрования данных (в текущей версии не реализована).

    Args:
        e (str): Строка для шифрования.

    Returns:
        None: Функция ничего не возвращает, так как в текущей версии она не реализована.

    Как работает функция:
    - Функция принимает строку для шифрования.
    - В текущей версии функция не выполняет никаких действий и просто возвращает `None`.

    Пример:
        _encrypt("test string")
    """
```

### `_pad_data`

```python
def _pad_data(data: bytes) -> bytes:
    """ Функция для добавления отступов к данным (в текущей версии не реализована).

    Args:
        data (bytes): Байтовая строка для добавления отступов.

    Returns:
        bytes: Функция ничего не возвращает, так как в текущей версии она не реализована.

    Как работает функция:
    - Функция принимает байтовую строку для добавления отступов.
    - В текущей версии функция не выполняет никаких действий и просто возвращает `None`.

    Пример:
        _pad_data(b"test data")
    """