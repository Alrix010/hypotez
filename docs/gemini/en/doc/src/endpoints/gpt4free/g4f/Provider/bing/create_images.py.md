# Модуль для создания изображений с помощью Bing Image Creator

## Обзор

Модуль `create_images.py` предоставляет функциональность для создания изображений на основе текстовых подсказок с помощью сервиса Bing Image Creator. Он использует асинхронные операции для оптимизации работы и обработки различных ошибок, возникающих во время взаимодействия с API.

## Подробности

Этот модуль является частью проекта `hypotez` и используется для реализации функции создания изображений с помощью сервиса Bing Image Creator. Модуль обеспечивает взаимодействие с API Bing Image Creator, обработку ответов, извлечение сгенерированных изображений и управление ошибками.

## Классы

### `create_session`

**Описание**:  Функция создает новый сеанс клиента с заданными куки и заголовками.

**Параметры**:

- `cookies` (Dict[str, str]): Словарь с куки для сеанса.

**Возвращает**:

- ClientSession: Созданный сеанс клиента.

### `create_images`

**Описание**: Создает изображения на основе заданной подсказки с помощью сервиса Bing Image Creator.

**Параметры**:

- `session` (ClientSession): Активный сеанс клиента.
- `prompt` (str): Текстовая подсказка для генерации изображений.
- `proxy` (str, optional): Настройки прокси. По умолчанию - `None`.
- `timeout` (int): Время ожидания запроса. По умолчанию - `TIMEOUT_IMAGE_CREATION`.

**Возвращает**:

- List[str]: Список URL-адресов созданных изображений.

**Исключения**:

- RuntimeError: В случае ошибки создания изображения или превышения времени ожидания.
- MissingRequirementsError: Если не установлен пакет `beautifulsoup4`.

**Как работает функция**:

1. Проверяет наличие пакета `beautifulsoup4`.
2. Кодирует подсказку с помощью `quote`.
3. Формирует URL-адрес запроса и данные для отправки POST-запроса.
4. Отправляет POST-запрос на API Bing Image Creator.
5. Обрабатывает ответ: проверяет наличие ошибок, наличие кредитов и успешность создания изображения.
6. В случае успешной отправки запроса, извлекает URL-адрес перенаправления.
7. Ожидает завершения процесса генерации, отслеживая статус по URL-адресу опроса.
8. Извлекает URL-адреса сгенерированных изображений из HTML-кода.
9. Возвращает список URL-адресов изображений.

### `read_images`

**Описание**: Извлекает URL-адреса изображений из HTML-кода.

**Параметры**:

- `html_content` (str): HTML-код, содержащий URL-адреса изображений.

**Возвращает**:

- List[str]: Список URL-адресов изображений.

**Исключения**:

- RuntimeError: В случае отсутствия тегов изображений или наличия некорректных URL-адресов изображений.

**Как работает функция**:

1. Парсит HTML-код с помощью BeautifulSoup.
2. Извлекает теги изображений с определенными классами.
3. Извлекает URL-адреса изображений из атрибута `src` тегов изображений.
4. Проверяет наличие некорректных URL-адресов.
5. Возвращает список URL-адресов изображений.

## Примеры

```python
# Создание сеанса клиента с заданными куки
session = create_session(cookies={'some_cookie': 'some_value'})

# Создание изображения на основе подсказки
images_urls = create_images(session, prompt='A cat sitting on a chair')

# Вывод URL-адресов сгенерированных изображений
print(images_urls)
```
```markdown