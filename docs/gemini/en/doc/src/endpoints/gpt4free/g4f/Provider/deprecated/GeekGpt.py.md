# Module GeekGpt

## Обзор

Модуль `GeekGpt` является устаревшим провайдером для работы с API GeekGpt. Он предоставляет класс `GeekGpt`, который позволяет создавать запросы к моделям GPT и получать ответы. Модуль поддерживает потоковую передачу данных, историю сообщений, а также модели GPT-3.5 Turbo и GPT-4.

## Подробнее

Этот модуль предназначен для интеграции с сервисом GeekGpt через его API. Он формирует HTTP-запросы к API и обрабатывает ответы, возвращая контент в потоковом режиме. Внутри модуля используются библиотеки `requests` для отправки HTTP-запросов и `json` для работы с данными в формате JSON.

## Classes

### `GeekGpt`

**Описание**: Класс `GeekGpt` является провайдером для работы с API GeekGpt.

**Наследует**:
- `AbstractProvider`: Абстрактный базовый класс для провайдеров.

**Атрибуты**:
- `url` (str): URL-адрес API GeekGpt (`https://chat.geekgpt.org`).
- `working` (bool): Указывает, работает ли провайдер (по умолчанию `False`).
- `supports_message_history` (bool): Поддержка истории сообщений (установлена в `True`).
- `supports_stream` (bool): Поддержка потоковой передачи (установлена в `True`).
- `supports_gpt_35_turbo` (bool): Поддержка модели GPT-3.5 Turbo (установлена в `True`).
- `supports_gpt_4` (bool): Поддержка модели GPT-4 (установлена в `True`).

**Принцип работы**:
Класс `GeekGpt` использует библиотеку `requests` для отправки POST-запросов к API GeekGpt. Он формирует JSON-данные с параметрами запроса, включая сообщения, модель, температуру и другие параметры. После получения ответа от API, класс обрабатывает его, извлекая контент из каждого чанка данных и возвращая его в потоковом режиме.

## Class Methods

### `create_completion`

```python
@classmethod
def create_completion(
    cls,
    model: str,
    messages: Messages,
    stream: bool,
    **kwargs
) -> CreateResult:
    """ Создает запрос к API GeekGpt и возвращает результат.

    Args:
        model (str): Идентификатор модели для использования.
        messages (Messages): Список сообщений для отправки в запросе.
        stream (bool): Указывает, следует ли использовать потоковую передачу данных.
        **kwargs: Дополнительные аргументы для настройки запроса.

    Returns:
        CreateResult: Результат запроса в виде генератора строк.

    Raises:
        RuntimeError: Если возникает ошибка при обработке ответа от API.

    Как работает функция:
    - Функция принимает параметры для формирования запроса к API GeekGpt.
    - Если модель не указана, используется "gpt-3.5-turbo" в качестве модели по умолчанию.
    - Формируются JSON-данные с параметрами запроса, включая сообщения, модель, температуру и другие параметры.
    - Отправляется POST-запрос к API GeekGpt с использованием библиотеки `requests`.
    - Обрабатывается ответ от API в потоковом режиме, извлекая контент из каждого чанка данных.
    - Если в чанке содержится контент, он возвращается в виде генератора строк.
    - В случае ошибки при обработке ответа, выбрасывается исключение `RuntimeError`.

    Внутренние функции:
    - Внутри функции используется `response.iter_lines()` для итерации по строкам ответа от сервера.
    - Используется `json.loads(json_data)` для преобразования JSON-данных в словарь Python.

    """
```

**Parameters**:

- `model` (str): Идентификатор используемой модели.
- `messages` (Messages): Список сообщений для отправки в запросе.
- `stream` (bool): Флаг, указывающий, использовать ли потоковую передачу.
- `**kwargs`: Дополнительные параметры для настройки запроса.

**Примеры**:

```python
# Пример вызова функции create_completion
model = "gpt-3.5-turbo"
messages = [{"role": "user", "content": "Hello, GeekGpt!"}]
stream = True
kwargs = {"temperature": 0.7, "top_p": 0.9}

result = GeekGpt.create_completion(model, messages, stream, **kwargs)
for chunk in result:
    print(chunk, end="")