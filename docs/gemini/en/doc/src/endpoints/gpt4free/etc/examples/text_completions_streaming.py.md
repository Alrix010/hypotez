# Модуль для текстового стриминга с использованием GPT-4

## Обзор

Этот модуль демонстрирует, как использовать синхронный и асинхронный стриминг для получения текстовых завершений от модели GPT-4. Он содержит функции для выполнения этих операций и примеры их использования.

## Детали

Модуль использует библиотеку `g4f` для взаимодействия с моделью GPT-4. Он предоставляет примеры как синхронного, так и асинхронного стриминга, что позволяет пользователям выбирать наиболее подходящий подход в зависимости от их потребностей.

## Функции

### `sync_stream`

**Описание**:
Функция выполняет синхронный стриминг запроса к модели GPT-4 и выводит полученные чанки текста.

```python
def sync_stream():
    """
    Функция выполняет синхронный стриминг запроса к модели GPT-4 и выводит полученные чанки текста.

    Функция создает синхронный клиент, отправляет запрос на завершение текста к модели GPT-4 и печатает полученные чанки.

    Raises:
        Exception: Если возникает ошибка при создании стрима или обработке чанков.
    """
    ...
```

**Как работает**:
- Создается экземпляр класса `Client` из библиотеки `g4f`.
- Вызывается метод `chat.completions.create` для создания стрима с моделью GPT-4.
- В цикле перебираются чанки, полученные из стрима, и печатается их содержимое.

**Пример**:
```python
sync_stream()
```

### `async_stream`

**Описание**:
Асинхронная функция для стриминга запроса к модели GPT-4 и вывода полученных чанков текста.

```python
async def async_stream():
    """
    Асинхронная функция для стриминга запроса к модели GPT-4 и вывода полученных чанков текста.

    Функция создает асинхронный клиент, отправляет асинхронный запрос на завершение текста к модели GPT-4 и печатает полученные чанки.

    Raises:
        Exception: Если возникает ошибка при создании стрима или обработке чанков.
    """
    ...
```

**Как работает**:
- Создается экземпляр класса `AsyncClient` из библиотеки `g4f`.
- Вызывается метод `chat.completions.create` для создания асинхронного стрима с моделью GPT-4.
- В асинхронном цикле перебираются чанки, полученные из стрима, и печатается их содержимое.

**Пример**:
```python
import asyncio
asyncio.run(async_stream())
```

### `main`

**Описание**:
Главная функция, которая запускает как синхронный, так и асинхронный стриминг.

```python
def main():
    """
    Главная функция, которая запускает как синхронный, так и асинхронный стриминг.

    Функция вызывает `sync_stream` для выполнения синхронного стриминга и `async_stream` для выполнения асинхронного стриминга.
    """
    ...
```

**Как работает**:
- Выводит сообщение "Synchronous Stream:".
- Вызывает функцию `sync_stream` для выполнения синхронного стриминга.
- Выводит сообщение "Asynchronous Stream:".
- Запускает асинхронную функцию `async_stream` с помощью `asyncio.run`.

**Пример**:
```python
main()
```

## Запуск модуля

Для запуска модуля необходимо выполнить файл `text_completions_streaming.py`.

**Пример**:
```bash
python text_completions_streaming.py
```

## Обработка ошибок

В случае возникновения ошибки при выполнении модуля, будет выведено сообщение об ошибке.

```python
if __name__ == "__main__":
    try:
        main()
    except Exception as ex:
        print(f"An error occurred: {str(ex)}")