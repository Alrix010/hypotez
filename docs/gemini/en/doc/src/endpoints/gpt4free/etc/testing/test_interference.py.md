# Тестирование взаимодействия с GPT-4Free

## Обзор

Этот модуль содержит набор тестовых функций, которые проверяют взаимодействие с моделью GPT-4Free, 
используемой в проекте `hypotez`. 
Он демонстрирует взаимодействие с API GPT-4Free через библиотеку `openai` для выполнения различных задач 
обработки текста. 

## Детали

Тестовый код демонстрирует отправку запроса к модели GPT-4Free для получения текста поэмы. 
В коде реализованы два варианта: 

1.  **Без потокового режима (non-stream)**: Получение полного ответа сразу. 
2.  **С потоковым режимом (stream)**: Получение ответа частями по мере его формирования.

Код также демонстрирует, как получать доступ к полученным данным, используя  `chat_completion.choices[0].message.content` для получения полного текста и  `token["choices"][0]["delta"].get("content")` для получения части текста.

## Функции

### `main()`

**Цель**:  Основная функция, выполняющая тестирование взаимодействия с GPT-4Free.

**Параметры**:  
-  `None`

**Возвращает**: 
-  `None`

**Исключения**: 
-  `None`

**Как работает функция**:

1.  Устанавливает соединение с API GPT-4Free, используя `openai.api_key` и `openai.api_base`.
2.  Использует `openai.ChatCompletion.create()` для отправки запроса к модели GPT-4Free с заданным текстом. 
3.  Выполняет проверку на наличие  `stream` для определения режима получения ответа. 
4.  Печатает полученный текст в консоль.

**Примеры**:

```python
>>> main()
```

**Внутренние функции**: 
-  `None`

**Примеры вызова**:
-  `main()` - Запускает тестирование взаимодействия с GPT-4Free.

## Параметры

-  `openai.api_key` (str): Ключ API для доступа к API GPT-4Free.
-  `openai.api_base` (str): Базовый URL API GPT-4Free.
-  `model` (str): Имя модели GPT-4Free (например, `gpt-3.5-turbo`).
-  `messages` (list): Список сообщений для отправки в чат GPT-4Free.
-  `stream` (bool): Флаг, указывающий на режим получения ответа (потоковый или полный).

## Примеры

-  **Пример 1**: Получение полного текста поэмы:
    
    ```python
    >>> chat_completion = openai.ChatCompletion.create(
    ...     model="gpt-3.5-turbo",
    ...     messages=[{"role": "user", "content": "write a poem about a tree"}],
    ...     stream=False,
    ... )
    >>> print(chat_completion.choices[0].message.content)
    ```
    
-  **Пример 2**: Получение текста поэмы частями:
    
    ```python
    >>> chat_completion = openai.ChatCompletion.create(
    ...     model="gpt-3.5-turbo",
    ...     messages=[{"role": "user", "content": "write a poem about a tree"}],
    ...     stream=True,
    ... )
    >>> for token in chat_completion:
    ...     content = token["choices"][0]["delta"].get("content")
    ...     if content != None:
    ...         print(content, end="", flush=True)
    ```
    
## Дополнительные сведения

-  Этот модуль содержит тестовые функции, которые не предназначены для использования в производственной среде.
-  Дополнительные сведения о взаимодействии с API GPT-4Free можно найти в документации библиотеки `openai`.