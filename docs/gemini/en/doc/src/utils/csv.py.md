# Модуль для работы с CSV и JSON-файлами
## Обзор

Модуль `src.utils.csv` предоставляет набор функций для работы с файлами CSV и JSON, 
включая запись данных в CSV-файлы, чтение данных из CSV-файлов, 
преобразование CSV-файлов в JSON и обратно, а также чтение данных в виде словаря. 

## Детали

Этот модуль является частью проекта `hypotez` и предназначен для удобной обработки 
CSV-данных. Он использует модуль `csv` для работы с CSV-файлами и модуль `json` 
для преобразования данных между CSV и JSON форматами. 

## Функции
### `save_csv_file`

**Цель**: Сохраняет список словарей в CSV-файл.

**Параметры**:
- `data` (List[Dict[str, str]]): Список словарей для сохранения.
- `file_path` (Union[str, Path]): Путь к CSV-файлу.
- `mode` (str): Режим открытия файла ('a' для добавления, 'w' для перезаписи). 
По умолчанию 'a'.
- `exc_info` (bool): Включить информацию о трассировке в журналах.

**Возвращает**:
- `bool`: True, если сохранение прошло успешно, иначе False.

**Возможные ошибки**:
- `TypeError`: Если входные данные не являются списком словарей.
- `ValueError`: Если входные данные пусты.

**Как работает функция**:
- Проверяет тип входных данных, чтобы убедиться, что это список словарей.
- Проверяет, не пуст ли список словарей.
- Создает родительскую директорию для файла, если она не существует.
- Открывает файл в заданном режиме, создавая новый, если он не существует.
- Создает объект `csv.DictWriter` для записи данных в CSV-формате.
- Записывает заголовок CSV-файла, если файл новый или режим открытия файла - 'w'.
- Записывает данные из списка словарей в CSV-файл.
- Возвращает True, если сохранение прошло успешно, иначе False. 

**Примеры**:
```python
from src.utils.csv import save_csv_file
from pathlib import Path

data = [
    {"name": "Alice", "age": 30},
    {"name": "Bob", "age": 25},
]

# Сохранение в новый файл
save_csv_file(data, "data.csv")

# Добавленение данных в существующий файл
save_csv_file(data, "data.csv", mode='a')
```
### `read_csv_file`

**Цель**: Чтение CSV-файла в виде списка словарей.

**Параметры**:
- `file_path` (Union[str, Path]): Путь к CSV-файлу.
- `exc_info` (bool): Включить информацию о трассировке в журналах.

**Возвращает**:
- `List[Dict[str, str]] | None`: Список словарей, полученных из CSV-файла, 
или None, если чтение не удалось.

**Возможные ошибки**:
- `FileNotFoundError`: Если файл не найден.

**Как работает функция**:
- Открывает файл в режиме чтения.
- Создает объект `csv.DictReader` для чтения CSV-данных.
- Возвращает список словарей, созданный из данных, прочитанных из CSV-файла.

**Примеры**:
```python
from src.utils.csv import read_csv_file
from pathlib import Path

# Чтение CSV-файла
data = read_csv_file("data.csv")

# Обработка данных
if data:
    for row in data:
        print(f"Name: {row['name']}, Age: {row['age']}")
```

### `read_csv_as_json`

**Цель**: Преобразовать CSV-файл в JSON-формат и сохранить его.

**Параметры**:
- `csv_file_path` (Union[str, Path]): Путь к CSV-файлу.
- `json_file_path` (Union[str, Path]): Путь к файлу, куда сохранить JSON-файл.
- `exc_info` (bool): Включить информацию о трассировке в журналах.

**Возвращает**:
- `bool`: True, если преобразование прошло успешно, иначе False.

**Как работает функция**:
- Считывает CSV-файл в список словарей с помощью `read_csv_file`.
- Сохраняет данные в JSON-формат в указанный файл.

**Примеры**:
```python
from src.utils.csv import read_csv_as_json

# Преобразование CSV в JSON
read_csv_as_json("data.csv", "data.json")
```

### `read_csv_as_dict`

**Цель**: Преобразовать CSV-файл в словарь.

**Параметры**:
- `csv_file` (Union[str, Path]): Путь к CSV-файлу.

**Возвращает**:
- `dict | None`: Словарь, представляющий данные из CSV-файла, 
или None, если чтение не удалось.

**Как работает функция**:
- Считывает данные из CSV-файла.
- Возвращает словарь, где ключ - это заголовок столбца, а значение - 
список значений столбца.

**Примеры**:
```python
from src.utils.csv import read_csv_as_dict

# Преобразование CSV в словарь
data = read_csv_as_dict("data.csv")

# Обработка данных
if data:
    print(data)
```

### `read_csv_as_ns`

**Цель**: Загрузить данные CSV в список словарей с помощью Pandas.

**Параметры**:
- `file_path` (Union[str, Path]): Путь к CSV-файлу.

**Возвращает**:
- `List[dict]`: Список словарей, представляющий данные из CSV-файла.

**Возможные ошибки**:
- `FileNotFoundError`: Если файл не найден.

**Как работает функция**:
- Считывает данные из CSV-файла с помощью Pandas.
- Преобразует DataFrame в список словарей.

**Примеры**:
```python
from src.utils.csv import read_csv_as_ns

# Чтение CSV с помощью Pandas
data = read_csv_as_ns("data.csv")

# Обработка данных
for row in data:
    print(row)
```