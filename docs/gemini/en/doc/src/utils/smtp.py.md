# Модуль `src.utils.smtp`

## Обзор

Модуль `src.utils.smtp` предоставляет интерфейс для отправки и получения электронных писем с использованием протоколов SMTP и IMAP. Он включает функции для отправки электронных писем через SMTP-сервер и получения электронных писем через IMAP-сервер.

## Подробнее

Этот модуль предоставляет функции для работы с электронной почтой, такие как отправка и получение сообщений. Важно отметить, что учетные данные для подключения к SMTP-серверу не должны быть жестко закодированы в файле, а должны передаваться через переменные окружения. Это повышает безопасность и гибкость конфигурации.

## Классы

В данном модуле классы отсутствуют.

## Функции

### `send`

```python
def send(subject: str = '', body: str = '', to: str = 'one.last.bit@gmail.com') -> bool:
    """Отправляет электронное письмо. Возвращает `True` в случае успеха, `False` в противном случае. Регистрирует ошибки.

    Args:
        subject (str, optional): Тема письма. По умолчанию ''.
        body (str, optional): Тело письма. По умолчанию ''.
        to (str, optional): Адрес получателя. По умолчанию 'one.last.bit@gmail.com'.

    Returns:
        bool: `True`, если письмо успешно отправлено, `False` в противном случае.

    Raises:
        Exception: Если во время отправки письма произошла ошибка.

    Как работает функция:
        Функция `send` создает SMTP-соединение, выполняет аутентификацию, создает сообщение электронной почты и отправляет его указанному получателю.
        В случае возникновения исключения, информация об ошибке регистрируется с использованием модуля `logger`.

    Примеры:
        >>> send(subject='Тест', body='Это тестовое письмо', to='test@example.com')
        True
        >>> send(subject='Ошибка', body='Произошла ошибка', to='error@example.com')
        False
    """
    ...
```

### `receive`

```python
def receive(imap_server: str, user: str, password: str, folder: str = 'inbox') -> Optional[List[Dict[str, str]]]:
    """Получает электронные письма. Возвращает список словарей с данными писем в случае успеха, `None` в противном случае. Регистрирует ошибки.

    Args:
        imap_server (str): Адрес IMAP-сервера.
        user (str): Имя пользователя для входа в IMAP-сервер.
        password (str): Пароль для входа в IMAP-сервер.
        folder (str, optional): Папка для получения писем. По умолчанию 'inbox'.

    Returns:
        Optional[List[Dict[str, str]]]: Список словарей, где каждый словарь содержит информацию об одном письме (тема, отправитель, тело). Возвращает `None` в случае ошибки.

    Raises:
        Exception: Если во время получения писем произошла ошибка.

    Как работает функция:
        Функция `receive` подключается к IMAP-серверу, выполняет аутентификацию, выбирает указанную папку и получает все письма.
        Для каждого письма извлекается тема, отправитель и тело, которые сохраняются в словаре.
        В случае возникновения исключения, информация об ошибке регистрируется с использованием модуля `logger`.

    Примеры:
        >>> receive(imap_server='imap.example.com', user='test', password='password', folder='inbox')
        [{'subject': 'Тест', 'from': 'sender@example.com', 'body': 'Это тестовое письмо'}]
        >>> receive(imap_server='imap.example.com', user='test', password='password', folder='spam')
        None
    """
    ...
```

## Параметры

### Конфигурация

- `_connection` (dict): Словарь, содержащий параметры подключения к SMTP-серверу.
  - `server` (str): Адрес SMTP-сервера.
  - `port` (int): Порт SMTP-сервера.
  - `user` (str): Имя пользователя для аутентификации на SMTP-сервере.
  - `password` (str): Пароль для аутентификации на SMTP-сервере.
  - `receiver` (str): Адрес электронной почты получателя по умолчанию.