# Модуль `src.utils.xml`

## Обзор

Модуль `src.utils.xml` предназначен для работы с XML-данными. Он включает функции для очистки XML от пустых элементов, форматирования XML-строк и сохранения XML-данных в файлы.

## Более подробно

Модуль предоставляет инструменты для обработки XML, такие как удаление пустых элементов и форматирование XML-кода для улучшения читаемости. Это особенно полезно при работе с XML-данными, полученными из внешних источников или сгенерированными автоматически, где может потребоваться дополнительная очистка и форматирование.

## Функции

### `clean_empty_cdata`

**Назначение**: Очищает пустые секции CDATA и удаляет лишние пробелы в XML-строке.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.

**Возвращает**:
- `str`: Очищенный и отформатированный XML-контент.

**Как работает**:
1. Преобразует XML-строку в дерево элементов с помощью `ET.fromstring()`.
2. Определяет внутреннюю функцию `remove_empty_elements`, которая рекурсивно удаляет пустые элементы из дерева XML.
3. Преобразует очищенное дерево XML обратно в строку с помощью `ET.tostring()`.
4. Удаляет лишние пробелы между тегами с помощью регулярного выражения `re.sub()`.
5. Возвращает очищенную и отформатированную XML-строку.

**Примеры**:

```python
xml_data = "<root><item>Value</item><empty></empty><item attr=\"test\">Another</item></root>"
cleaned_xml = clean_empty_cdata(xml_data)
print(cleaned_xml)
# Output: <root><item>Value</item><item attr="test">Another</item></root>
```

### `save_xml`

**Назначение**: Сохраняет очищенные XML-данные из строки в файл с отступами.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.
- `file_path` (str): Путь к выходному файлу.

**Возвращает**:
- `None`

**Как работает**:
1. Очищает XML-строку от пустых элементов с помощью функции `clean_empty_cdata()`.
2. Парсит очищенную XML-строку с помощью `ET.fromstring()` и создает дерево элементов.
3. Преобразует дерево элементов в строку с отступами с помощью `minidom.parseString()` и `toprettyxml()`.
4. Записывает отформатированную XML-строку в файл, указанный в `file_path`.

**Примеры**:

```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item></root>"
save_xml(xml_data, "output.xml")
```

В результате выполнения кода будет создан файл `output.xml` с отформатированным XML-контентом.

```xml
<?xml version="1.0" ?>
<root>
  <item>Value</item>
  <item attr="test">Another</item>
</root>
```