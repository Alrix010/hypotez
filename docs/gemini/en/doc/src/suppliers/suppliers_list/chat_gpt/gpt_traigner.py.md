# Модуль для работы с GPT-тренировкой

## Обзор

Модуль `gpt_traigner` предназначен для работы с данными, полученными из чатов с GPT, для их дальнейшего анализа и использования в процессе тренировки больших языковых моделей. Он предоставляет набор функций для загрузки, очистки и преобразования данных из разных источников.

## Детали

Модуль использует `Google Drive` для хранения данных, `BeautifulSoup` для парсинга HTML-кода и `pandas` для обработки табличных данных. Также используется `src.utils.printer` для вывода информации.

## Классы

### `GPT_Traigner`

**Описание**: Класс, предоставляющий методы для работы с данными из чатов с GPT.

**Атрибуты**:

- `driver`: Экземпляр `webdriver` для взаимодействия с веб-страницами. 
- `gs`: Экземпляр `GptGs` для работы с Google Drive.

**Методы**:

#### `__init__(self)`

**Описание**: Инициализирует экземпляр `GPT_Traigner`.

**Параметры**:

- `self`: Самостоятельный объект.

**Возвращает**:

- `None`

#### `determine_sentiment(self, conversation_pair: dict[str, str], sentiment: str = 'positive') -> str`

**Описание**: Определяет метку тональности для пары сообщений в чате.

**Параметры**:

- `self`: Самостоятельный объект.
- `conversation_pair`: Словарь, содержащий пары сообщений из чата.
- `sentiment`: Метка тональности, которая будет присвоена паре сообщений. По умолчанию `positive`.

**Возвращает**:

- `str`: Метка тональности (positive или negative).

#### `save_conversations_to_jsonl(self, data: list[dict], output_file: str)`

**Описание**: Сохраняет пары сообщений из чата в JSONL-файл.

**Параметры**:

- `self`: Самостоятельный объект.
- `data`: Список словарей, содержащих пары сообщений из чата.
- `output_file`: Путь к выходному JSONL-файлу.

**Возвращает**:

- `None`

#### `dump_downloaded_conversations(self)`

**Описание**: Сбор сообщений из HTML-файлов, хранящихся в Google Drive, и сохранение их в CSV и JSONL файлы.

**Параметры**:

- `self`: Самостоятельный объект.

**Возвращает**:

- `None`

**Как работает**:

- Метод получает список HTML-файлов из директории `conversation` в Google Drive.
- Для каждого файла:
    - Открывает файл и извлекает текстовое содержимое.
    - Использует `driver.execute_locator` для получения элементов `user` и `assistant` из HTML-кода.
    - Извлекает текст из элементов и сохраняет его в список.
    - Формирует словарь с парами сообщений и их тональностью.
    - Сохраняет данные в `pandas DataFrame`.
- После обработки всех файлов объединяет все `DataFrame` в один.
- Сохраняет объединенные данные в CSV-файл.
- Сохраняет объединенные данные в JSONL-файл.
- Сохраняет необработанный текст всех сообщений в отдельный TXT-файл.

## Примеры

```python
# Создание экземпляра GPT_Traigner
traigner = GPT_Traigner()

# Вызов метода для сбора и сохранения данных из HTML-файлов
traigner.dump_downloaded_conversations()
```

## Примечания

- Используйте `logger` из `src.logger` для вывода информации и ошибок.
- Используйте `Driver` из `src.webdriver` для взаимодействия с веб-страницами.
- Метод `determine_sentiment` в настоящее время возвращает только `positive` или `negative`.
- Метод `dump_downloaded_conversations` использует `zip_longest` для объединения списков `user_content` и `assistant_content`, что позволяет обрабатывать случаи, когда в одном списке больше элементов, чем в другом.
- Метод `dump_downloaded_conversations` использует `pd.concat` для объединения `DataFrame` в один, что повышает эффективность обработки данных.
- `pprint` используется для вывода информации на консоль.