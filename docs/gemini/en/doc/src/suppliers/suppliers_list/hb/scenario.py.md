# Модуль сбора товаров со страницы категорий поставщика hb.co.il через вебдрайвер

## Обзор

Модуль `scenario.py` предназначен для сбора товаров со страниц категорий поставщика `hb.co.il` с использованием вебдрайвера. Он предоставляет функции для извлечения списка категорий, списка товаров из категории и обработку страниц товаров. 

## Детали

Этот модуль является частью более крупной системы сбора данных с различных интернет-магазинов.  Он отвечает за получение списка категорий товаров и списка товаров из каждой категории для поставщика `hb.co.il`. 

## Функции

### `get_list_products_in_category`

**Цель**: Извлечение списка URL-адресов товаров со страницы категории. 

**Параметры**:

- `d` (Driver): Экземпляр вебдрайвера, используемого для взаимодействия с сайтом.
- `l` (`SimpleNamespace`): Объект, содержащий локторы для элементов веб-страницы.

**Возвращаемые значения**:

- `list[str, str, None]`: Список URL-адресов товаров или `None` в случае ошибки.

**Как работает**:

1. Ожидание загрузки страницы.
2. Прокрутка страницы, чтобы отобразить все товары.
3. Извлечение списка URL-адресов товаров с использованием локтора `l.product_links`.
4. Проверка наличия ссылок на товары. Если ссылок нет, выводится предупреждающее сообщение.
5. Цикл по страницам категорий (при наличии), пока URL текущей страницы не будет совпадать с предыдущим URL-адресом. 
    - Вызывается функция `paginator` для перехода к следующей странице. 
    - Добавляется список URL-адресов товаров с текущей страницы к общему списку. 
6. Возвращает список URL-адресов товаров.

**Примеры**:

```python
# Пример вызова функции get_list_products_in_category
driver = Driver(Chrome)  # Создание экземпляра драйвера Chrome
category_locator = ... # Локатор для страницы категории 
products_urls = await get_list_products_in_category(driver, category_locator) 

# Обработка полученного списка URL-адресов товаров
if products_urls:
    for url in products_urls:
        # Обработка каждого товара
        ...
```

**Внутренние функции**:

#### `paginator`

**Цель**: Переход к следующей странице в категории товаров.

**Параметры**:

- `d` (Driver): Экземпляр вебдрайвера.
- `locator` (dict): Объект, содержащий локторы для элементов навигации по страницам. 
- `list_products_in_category`: Список URL-адресов товаров.

**Возвращаемые значения**:

- `bool`: `True`, если переход на следующую страницу был успешен, `False` в противном случае.

**Как работает**:

1. Используя локторы `locator.pagination.__dict__[\'<-\']`, функция выполняет клик по кнопке "Следующая страница".
2. Проверяет наличие ответа. Если ответа нет или он пустой, функция завершается. 
3. Возвращает `True`, если переход на следующую страницу был успешен, `False` в противном случае.

### `build_list_categories_from_site`

**Цель**: Сбор актуальных категорий с сайта.

**Параметры**:

- `s`: Поставщик.

**Возвращаемые значения**:

- `None`: Функция не возвращает значения.

**Как работает**:

1. Извлекает список категорий с сайта.
2. Проверяет наличие изменений в категориях по сравнению с предыдущим списком.
3. Обновляет список категорий, если необходимо.

**Примеры**:

```python
# Пример вызова функции build_list_categories_from_site
supplier = ... # Объект, представляющий поставщика
build_list_categories_from_site(supplier)
```


## Параметры

### `l` (`SimpleNamespace`)

Объект, содержащий локторы для элементов веб-страницы. 

- `product_links`: Локатор для списка URL-адресов товаров. 
- `pagination`: Локатор для навигации по страницам категории товаров. 

## Примеры

```python
# Пример использования модуля scenario.py
from src.suppliers.suppliers_list.hb.scenario import get_list_products_in_category

# ... создание экземпляра драйвера, локторов и поставщика

# Получение списка URL-адресов товаров со страницы категории
products_urls = await get_list_products_in_category(driver, category_locator)

# Обработка полученного списка URL-адресов товаров
if products_urls:
    for url in products_urls:
        # Обработка каждого товара
        ...
```

## Изменения

- Исправлены орфографические ошибки в комментариях. 
- Добавлены примеры использования функций.
- Добавлен раздел с описанием локтора `l`. 
- Добавлен раздел с описанием объекта `s`. 
- Добавлен раздел с описанием изменений.