# Модуль `src.logger`

## Обзор

Модуль `src.logger` предоставляет гибкую систему логирования, которая поддерживает вывод в консоль, файл и JSON. В основе модуля лежит паттерн Singleton, гарантирующий использование только одного экземпляра логгера во всем приложении. Логгер поддерживает различные уровни логирования (например, `INFO`, `ERROR`, `DEBUG`) и включает в себя вывод с цветовым оформлением для сообщений в консоль. Также можно настроить форматы вывода и управлять логированием в разные файлы.

## Подробности

Модуль `src.logger` реализован с использованием паттерна Singleton, который позволяет использовать только один экземпляр класса `Logger` во всем приложении. Это гарантирует, что все логи записываются в одно и то же место, а не в несколько разных файлов.

Модуль `src.logger` использует `logging.Logger` и различные обработчики (handlers) для записи сообщений в разные места, такие как консоль, файл, а также в JSON.

## Классы

### `SingletonMeta`

**Описание**: Метакласс, реализующий паттерн Singleton для логгера.

**Наследует**: `type`

**Атрибуты**:

- `instance`: Хранит единственный экземпляр класса `Logger`.

**Методы**:

- `__call__`: Метод, вызываемый при создании экземпляра класса `Logger`. Возвращает единственный экземпляр класса `Logger`.

### `JsonFormatter`

**Описание**: Настраиваемый форматтер, который выводит логи в формате JSON.

**Наследует**: `logging.Formatter`

**Атрибуты**:

- `format`: Строка формата для JSON-вывода.

**Методы**:

- `format`: Метод для форматирования сообщения. Возвращает строку JSON-формата.

### `Logger`

**Описание**: Основной класс логгера, поддерживающий вывод в консоль, файл и JSON.

**Наследует**: `object`

**Атрибуты**:

- `_instance`: Хранит единственный экземпляр класса `Logger`.
- `_console_logger`: Логгер для вывода в консоль.
- `_info_logger`: Логгер для вывода информационных сообщений в файл.
- `_debug_logger`: Логгер для вывода отладочных сообщений в файл.
- `_error_logger`: Логгер для вывода сообщений об ошибках в файл.
- `_json_logger`: Логгер для вывода сообщений в формате JSON.

**Методы**:

- `__init__`: Инициализирует экземпляр класса `Logger` с помощью заглушек для разных типов логгеров (консоль, файл, JSON).
- `_configure_logger`: Настраивает и возвращает экземпляр логгера.
- `initialize_loggers`: Инициализирует логгеры для вывода в консоль и в файлы (информационные, отладочные, сообщения об ошибках, JSON).
- `log`: Записывает сообщение на указанном уровне (например, `INFO`, `DEBUG`, `ERROR`) с возможностью включения исключения и цветового оформления.
- `info`: Записывает информационное сообщение.
- `success`: Записывает сообщение об успешном выполнении.
- `warning`: Записывает предупреждающее сообщение.
- `debug`: Записывает отладочное сообщение.
- `error`: Записывает сообщение об ошибке.
- `critical`: Записывает критическое сообщение.


## Функции

### `__init__`

**Цель**: Инициализирует экземпляр класса `Logger` с заглушками для разных типов логгеров (консоль, файл, JSON).

**Параметры**:

- `self`: Ссылка на текущий экземпляр класса `Logger`.

**Возвращает**: 
- `None`

### `_configure_logger`

**Цель**: Настраивает и возвращает экземпляр логгера.

**Параметры**:

- `name`: Имя логгера.
- `log_path`: Путь к файлу логов.
- `level`: Уровень логирования, например, `logging.DEBUG`. По умолчанию `logging.DEBUG`.
- `formatter`: Настраиваемый форматтер (необязательно).
- `mode`: Режим открытия файла, например, `'a'` для добавления (по умолчанию).

**Возвращает**: Настроенный экземпляр `logging.Logger`.

### `initialize_loggers`

**Цель**: Инициализирует логгеры для вывода в консоль и в файлы (информационные, отладочные, сообщения об ошибках, JSON).

**Параметры**:

- `info_log_path`: Путь к файлу для записи информационных сообщений (необязательно).
- `debug_log_path`: Путь к файлу для записи отладочных сообщений (необязательно).
- `errors_log_path`: Путь к файлу для записи сообщений об ошибках (необязательно).
- `json_log_path`: Путь к файлу для записи сообщений в формате JSON (необязательно).

**Возвращает**: `None`

### `log`

**Цель**: Записывает сообщение на указанном уровне (например, `INFO`, `DEBUG`, `ERROR`) с возможностью включения исключения и цветового оформления.

**Параметры**:

- `level`: Уровень логирования (например, `logging.INFO`, `logging.DEBUG`).
- `message`: Сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `False`).
- `color`: Кортеж с цветами текста и фона для вывода в консоль (необязательно).

**Возвращает**: `None`

### `info`

**Цель**: Записывает информационное сообщение.

**Параметры**:

- `message`: Информационное сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

### `success`

**Цель**: Записывает сообщение об успешном выполнении.

**Параметры**:

- `message`: Сообщение об успешном выполнении для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

### `warning`

**Цель**: Записывает предупреждающее сообщение.

**Параметры**:

- `message`: Предупреждающее сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

### `debug`

**Цель**: Записывает отладочное сообщение.

**Параметры**:

- `message`: Отладочное сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

### `error`

**Цель**: Записывает сообщение об ошибке.

**Параметры**:

- `message`: Сообщение об ошибке для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

### `critical`

**Цель**: Записывает критическое сообщение.

**Параметры**:

- `message`: Критическое сообщение для записи в лог.
- `ex`: Необязательное исключение для записи в лог.
- `exc_info`: Флаг, определяющий, нужно ли включать информацию об исключении (по умолчанию `True`).
- `colors`: Кортеж с цветами сообщения (необязательно).

**Возвращает**: `None`

## Параметры для логгера

Класс `Logger` принимает несколько необязательных параметров для настройки поведения логирования.

- **Уровень**: Управляет серьезностью записываемых сообщений. Общие уровни включают:
  - `logging.DEBUG`: Подробная информация, полезная для диагностики проблем.
  - `logging.INFO`: Общая информация, например, о успешных операциях.
  - `logging.WARNING`: Предупреждения, которые не обязательно требуют немедленных действий.
  - `logging.ERROR`: Сообщения об ошибках.
  - `logging.CRITICAL`: Критические ошибки, требующие немедленного внимания.

- **Форматтер**: Определяет, как форматируются сообщения в логах. По умолчанию сообщения форматируются как `'%(asctime)s - %(levelname)s - %(message)s'`. Вы можете указать настраиваемый форматтер для разных форматов, например, JSON.

- **Цвет**: Цвета для сообщений в логах в консоли. Цвета указываются в виде кортежа с двумя элементами:
  - **Цвет текста**: Указывает цвет текста (например, `colorama.Fore.RED`).
  - **Цвет фона**: Указывает цвет фона (например, `colorama.Back.WHITE`).

Цвет можно настроить для разных уровней логирования (например, зеленый для информации, красный для ошибок и т. д.).

## Настройка файлового логирования (`config`)

Чтобы записывать сообщения в файл, вы можете указать пути к файлам в конфигурации.

```python
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
```

Пути к файлам, указанные в `config`, используются для записи логов в соответствующие файлы для каждого уровня логирования.

## Примеры использования

#### 1. Инициализация логгера:

```python
logger: Logger = Logger()
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
logger.initialize_loggers(**config)
```

#### 2. Запись сообщений на разных уровнях:

```python
logger.info('Это информационное сообщение')
logger.success('Это сообщение об успешном выполнении')
logger.warning('Это предупреждающее сообщение')
logger.debug('Это отладочное сообщение')
logger.error('Это сообщение об ошибке')
logger.critical('Это критическое сообщение')
```

#### 3. Настройка цветов:

```python
logger.info('Это сообщение будет зеленым', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
logger.error('Это сообщение будет иметь красный фон', colors=(colorama.Fore.WHITE, colorama.Back.RED))
```

---

Данный модуль предоставляет полную и гибкую систему логирования для приложений Python. Вы можете настроить консольное и файловое логирование с использованием разных форматов и цветов, управлять уровнями логирования и элегантно обрабатывать исключения. Настройка файлового логирования хранится в словаре `config`, что позволяет легко ее настраивать.