**Instructions for Generating Code Documentation**

1. **Analyze the Code**: Understand the logic and actions performed by the code snippet.

2. **Create a Step-by-Step Guide**:
    - **Description**: Explain what the code block does.
    - **Execution Steps**: Describe the sequence of actions in the code.
    - **Usage Example**: Provide a code example of how to use the snippet in the project.

3. **Example**:

How to Use This Code Block
=========================================================================================

Description
-------------------------
This code block represents a database migration script for the `purchases` table in the `hypotez` project. It defines an upgrade function that adds a new column `payment_type` and creates a unique constraint on the `payment_id` column. The downgrade function reverses these changes.

Execution Steps
-------------------------
1. The `upgrade()` function adds a new column called `payment_type` of type `sa.String()` to the `purchases` table, making it non-nullable.
2. It then creates a unique constraint on the `payment_id` column in the `purchases` table.
3. The `downgrade()` function reverses the changes made by `upgrade()`.
4. It drops the unique constraint created in the `upgrade()` function.
5. It removes the newly added `payment_type` column from the `purchases` table.

Usage Example
-------------------------

```python
from alembic import op
import sqlalchemy as sa

# ... other code ...

def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('purchases', sa.Column('payment_type', sa.String(), nullable=False))
    op.create_unique_constraint(None, 'purchases', ['payment_id'])
    # ### end Alembic commands ###

def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(None, 'purchases', type_='unique')
    op.drop_column('purchases', 'payment_type')
    # ### end Alembic commands ###
```

4. **Avoid Vague Terms** like "getting" or "doing". Be specific about what the code does, for example: "checks", "validates", or "sends".