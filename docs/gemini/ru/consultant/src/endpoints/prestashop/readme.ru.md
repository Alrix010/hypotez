### **Инструкция: Обработка кода и документации проекта `hypotez`**

---

#### **Основные требования**:

1. **Формат документации**:
  - Используй стандарт `Markdown (.md)`.

   - Каждый файл должен начинаться с заголовка и краткого описания его содержимого.

   Примеры документации: Пример загаоловка файла модуля:

        """
        Модуль для работы с ассистентом программиста
        =================================================

        Модуль содержит класс :class:`CodeAssistant`, который используется для взаимодействия с различными AI-моделями
        (например, Google Gemini и OpenAI) и выполнения задач обработки кода.

        Пример использования
        ----------------------

        >>>assistant = CodeAssistant(role='code_checker', lang='ru', model=['gemini'])\n
        >>>assistant.process_files()\n
        """

2. **Сохранение комментариев**:
   - Все существующие комментарии после `#` должны оставаться неизменными.
   - В случае изменений кода, добавляй построчные комментарии с использованием символа `#`.

3. **Обработка данных**:

   - Каждый файл должен начинаться с заголовка и краткого описания его содержимого.

   Примеры документации: Пример загаоловка файла модуля:

        """
        Модуль для работы с ассистентом программиста
        =================================================

        Модуль содержит класс :class:`CodeAssistant`, который используется для взаимодействия с различными AI-моделями
        (например, Google Gemini и OpenAI) и выполнения задач обработки кода.

        Пример использования
        ----------------------

        >>>assistant = CodeAssistant(role='code_checker', lang='ru', model=['gemini'])\n
        >>>assistant.process_files()\n
        """

   - Для всех классов и функций используйте следующий формат комментариев:
     ```python
     def function(param: str, param1: Optional[str | dict | str] = None) -> dict | None:\n
         """ Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n
         Args:\n
             param (str): Описание параметра `param`.\n
             param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n
\n
         Returns:\n
             dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n
\n
         Raises:\n
             SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n
            ...\n
            <Выводить тело функции НЕ НАДО. Только docstring>\n
         """
         def inner_function():\n
            """ Внутрняя функция Функция выполняет некоторое действия... <Тут Ты пишешь что именно делает функция> \n
                Args:\n
                    param (str): Описание параметра `param`.\n
                    param1 (Optional[str | dict | str], optional): Описание параметра `param1`. По умолчанию `None`.\n
\n
                Returns:\n
                    dict | None: Описание возвращаемого значения. Возвращает словарь или `None`.\n
\n
                Raises:\n
                    SomeError: Описание ситуации, в которой возникает исключение `SomeError`.\n
\n
                ...\n
                    <Выводить тело функции НЕ НАДО. Только docstring>\n
\n
                """
     ```

     - Все комментарии в фунцкии и docstring должны быть на русском языке в формате UTF-8
     - Если внутри рассматривемой функции есть внутренние функции - рассматривай подробно каждую из них по отдельности
     
   - Используй `ex` вместо `e` в блоках обработки исключений.
   - Для логгирования используй `logger` из моего модуля `src.logger`. Например:\n
     ```python
     from src.logger import logger\n
     logger.info('Some information message')\n
     ...\n
     except SomeError as ex:\n
         logger.error('Some error message', ex, exc_info = True), где ошибка передается вторым аргументом. exc_info определает надо ли выводить служебную информацию.\n
    ```

    _ Если в коде используется вебдрайвер, знай как его использовать
    наследуй Driver, Chrome, Firexox, Playwright
    Далее определи так
    # Создание инстанса драйвера (пример с Chrome)
    driver = Drivewr(Chrome)
    В модулях Driver И Chrome, Firexox, Playwright уже содержатся все настройки selenium. 
    Основная комада, которая используется в коде: `driver.execute_locator(l:dict)`
    Она возвращает аначение вебэелемента по локатору.

    - Всегда используй одинарные кавычки (`'`) в Python-коде. Например:
     ```python
     a = 'A1'
     b = ['a', 'b']
     c = {'key': 'value'}
     ```
     

   - Все комментарии и docstring должны быть на русском языке в формате UTF-8. Если в коде docsting на английском - сделай перевеод на русский

4. **Анализ структуры**:
   - Проверь наличие всех необходимых импортов.
   - Проанализируй связь с другими модулями и классами проекта `hypotez`.

5. **Рефакторинг и улучшения**:
   - Добавляй комментарии в следующем формате для всех функций, методов и классов:
        ```python
        def function_name(arg1: type, arg2: type) -> type:
            """
            Описание функции.\n
    \n
            Args:\n
                arg1 (type): Описание аргумента 1.\n
                arg2 (type): Описание аргумента 2.\n
    \n
            Returns:\n
                type: Описание возвращаемого значения.\n
            """
            ...\n
        ```

  
6. **Примеры документации**:
   **Пример модуля**:
   ```python
   """
   Модуль для работы с ассистентом программиста
   =================================================\n
\n
   Модуль содержит класс :class:`CodeAssistant`, который используется для взаимодействия с различными AI-моделями
   (например, Google Gemini и OpenAI) и выполнения задач обработки кода.\n
\n
   Пример использования
   ----------------------\n
\n
   >>>assistant = CodeAssistant(role='code_checker', lang='ru', model=['gemini'])\n
   >>>assistant.process_files()\n
   """
   ```

   **Пример функции**:
   ```python
   async def save_text_file(
       file_path: str | Path,
       data: str | list[str] | dict,
       mode: str = 'w'
   ) -> bool:
       """
       Асинхронно сохраняет данные в текстовый файл.\n
        Args:\n
            file_path (str | Path): Путь к файлу.\n
            data (str | list[str] | dict): Данные для записи.\n
            mode (str, optional): Режим записи. По умолчанию 'w'.\n
        Returns:\n
            bool: Результат сохранения файла.\n
\n
        Example:\n
           >>> from pathlib import Path\n
           >>> file_path = Path('example.txt')\n
           >>> data = 'Пример текста'\n
           >>> result = await save_text_file(file_path, data)\n
           >>> print(result)\n
           True\n
       """
       ...\n
   ```



7. **Рекомендации по улучшению**:
   - Следуй стандартам PEP8 для форматирования.
   - Избегай неясных формулировок в комментариях, таких как "получаем" или "делаем". Вместо этого используй более точные описания: "проверяем", "отправляем", "выполняем".

---

#### **Структура ответа**:

1. **Заголовок**:  
   - Анализ кода модуля `<module_name>`

2. **Качество кода**:
   - **Соответствие стандартам**: Оценка от 1 до 10
   - **Плюсы**:
     - <Положительные стороны кода>
   - **Минусы**:
     - <Отрицательные стороны кода>

3. **Рекомендации по улучшению**:
   - <Подробные советы и описания необходимых изменений>

4. **Оптимизированный код**:
   - Предложеный тобой код

   
## Твое поведение при анализе кода:
- всегда смотри системную инструкцию для обработки кода проекта `hypotez`;
- анализируй расположение файла в проекте. Это поможет понять его назначение и взаимосвязь с другими файлами. Расположение файла ты найдешь в самой превой строке кода, начинающейся с `## \\file /...`;
- запоминай предоставленный код и анализируй его связь с другими частями проекта `hypotez`;

```python
                <TABLE >
<TR>
<TD>
<A HREF = 'https://github.com/hypo69/hypotez/blob/master/README.MD'>[Root ↑]</A>
</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypotez/blob/master/src/readme.ru.md'>src</A> \ 
<A HREF = 'https://github.com/hypo69/hypotez/blob/master/src/endpoints/readme.ru.md'>endpoints</A>
</TD>
<TD>
<A HREF = 'https://github.com/hypo69/hypotez/blob/master/src/endpoints/prestashop/README.MD'>English</A>
</TD>
</TR>
</TABLE>

# Управление сайтами на PrestaShop

&nbsp;&nbsp;&nbsp;Документ описывает структуру и способ работы с сайтами на платформе PrestaShop, а также хранение и использование ключей API.

## Сайты

Ваши сайты, работающие на PrestaShop:
1. [e-cat.co.il](https://e-cat.co.il)
2. [emil-design.com](https://emil-design.com)
3. [sergey.mymaster.co.il](https://sergey.mymaster.co.il)

Каждый из этих сайтов использует API для взаимодействия с различными параметрами и функциями.

## Хранение ключей API

Ключи API для каждого сайта хранятся в файле `credentials.kdbx`. Этот файл является защищенной базой данных паролей и содержит следующие данные для каждого сайта:\n
- URL сайта
- Ключ API
- Дополнительные метаданные (если необходимо)

Для работы с ключами из файла используйте менеджер паролей, поддерживающий формат `.kdbx`, например, [KeePass](https://keepass.info/) или [KeePassXC](https://keepassxc.org/).

## Пример использования API

Чтобы подключиться к API одного из сайтов, следуйте следующему шаблону:

### Запрос данных через API

**Шаблон API-запроса:**
```bash
curl -X GET 'https://<URL_сайта>/api/<endpoint>' \\\n
-H 'Authorization: Basic <base64(API_KEY)>'
```

**Объяснение параметров:**
- `<URL_сайта>` — адрес сайта, например, `e-cat.co.il`.\n
- `<endpoint>` — конечная точка API (например, `products`, `customers`).\n
- `<API_KEY>` — ключ API, закодированный в формате Base64.

### Пример вызова API

Для получения списка продуктов на сайте `e-cat.co.il`:\n
```bash
curl -X GET 'https://e-cat.co.il/api/products' \\\n
-H 'Authorization: Basic <base64(API_KEY)>'
```

## Рекомендации по безопасности

- Никогда не передавайте файл `credentials.kdbx` третьим лицам. ❗
- Убедитесь, что файл находится в защищенном месте, доступном только вам. (папка `secrets` в корне проекта исключена из `git`)
- Регулярно обновляйте ключи API и пароли для базы данных.

## Дополнительно

Если у вас возникли вопросы или трудности с подключением, ознакомьтесь с [официальной документацией PrestaShop API](https://devdocs.prestashop.com/), где представлена информация о доступных конечных точках и способах работы с ними.
```

### **Анализ кода модуля `readme.ru.md`**

2. **Качество кода**:
   - **Соответствие стандартам**: 7
   - **Плюсы**:
     - Документ предоставляет ясную структуру работы с PrestaShop API.
     - Описаны основные шаги для подключения и запроса данных через API.
     - Содержит полезные рекомендации по безопасности хранения ключей API.
   - **Минусы**:
     - Файл представляет собой документацию в формате Markdown, а не код Python, поэтому многие требования неприменимы.
     - Отсутствует описание структуры проекта и интеграции с другими модулями `hypotez`.

3. **Рекомендации по улучшению**:
   - Добавить информацию о том, как этот файл связан с другими частями проекта `hypotez`. Например, указать, какие модули используют описанные здесь API.
   - Можно добавить примеры использования API на Python с применением модуля `requests` или других библиотек.
   - Уточнить, как именно происходит получение и использование ключей API из `credentials.kdbx` в коде проекта.

4. **Оптимизированный код**:

```markdown
<TABLE>
<TR>
<TD>
<A HREF='https://github.com/hypo69/hypotez/blob/master/README.MD'>[Root ↑]</A>
</TD>
<TD>
<A HREF='https://github.com/hypo69/hypotez/blob/master/src/readme.ru.md'>src</A> \ 
<A HREF='https://github.com/hypo69/hypotez/blob/master/src/endpoints/readme.ru.md'>endpoints</A>
</TD>
<TD>
<A HREF='https://github.com/hypo69/hypotez/blob/master/src/endpoints/prestashop/README.MD'>English</A>
</TD>
</TR>
</TABLE>

# Управление сайтами на PrestaShop

&nbsp;&nbsp;&nbsp;Документ описывает структуру и способ работы с сайтами на платформе PrestaShop, а также хранение и использование ключей API.

## Сайты

Ваши сайты, работающие на PrestaShop:
1. [e-cat.co.il](https://e-cat.co.il)
2. [emil-design.com](https://emil-design.com)
3. [sergey.mymaster.co.il](https://sergey.mymaster.co.il)

Каждый из этих сайтов использует API для взаимодействия с различными параметрами и функциями.

## Хранение ключей API

Ключи API для каждого сайта хранятся в файле `credentials.kdbx`. Этот файл является защищенной базой данных паролей и содержит следующие данные для каждого сайта:
- URL сайта
- Ключ API
- Дополнительные метаданные (если необходимо)

Для работы с ключами из файла используйте менеджер паролей, поддерживающий формат `.kdbx`, например, [KeePass](https://keepass.info/) или [KeePassXC](https://keepassxc.org/).

## Пример использования API

Чтобы подключиться к API одного из сайтов, следуйте следующему шаблону:

### Запрос данных через API

**Шаблон API-запроса:**
```bash
curl -X GET 'https://<URL_сайта>/api/<endpoint>' \\\n
-H 'Authorization: Basic <base64(API_KEY)>'
```

**Объяснение параметров:**
- `<URL_сайта>` — адрес сайта, например, `e-cat.co.il`.
- `<endpoint>` — конечная точка API (например, `products`, `customers`).
- `<API_KEY>` — ключ API, закодированный в формате Base64.

### Пример вызова API

Для получения списка продуктов на сайте `e-cat.co.il`:\n
```bash
curl -X GET 'https://e-cat.co.il/api/products' \\\n
-H 'Authorization: Basic <base64(API_KEY)>'
```

## Рекомендации по безопасности

- Никогда не передавайте файл `credentials.kdbx` третьим лицам. ❗
- Убедитесь, что файл находится в защищенном месте, доступном только вам. (папка `secrets` в корне проекта исключена из `git`)
- Регулярно обновляйте ключи API и пароли для базы данных.

## Дополнительно

Если у вас возникли вопросы или трудности с подключением, ознакомьтесь с [официальной документацией PrestaShop API](https://devdocs.prestashop.com/), где представлена информация о доступных конечных точках и способах работы с ними.