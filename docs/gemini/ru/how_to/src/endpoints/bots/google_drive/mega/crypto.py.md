## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода предоставляет функции для шифрования и дешифрования данных с использованием алгоритма AES в режиме CBC. Он также включает функции для работы с 32-битными целыми числами (a32) в виде строк и преобразования их в base64.

Шаги выполнения
-------------------------
1. **Инициализация ключа**:
    - Вызывается функция `prepare_key(a)` для подготовки ключа.
    - Эта функция принимает список 32-битных целых чисел `a` и генерирует ключ `pkey`.
    - Ключ `pkey` используется для шифрования и дешифрования данных.
2. **Шифрование данных**:
    - Используется функция `encrypt_key(a, key)` для шифрования данных.
    - Эта функция принимает список 32-битных целых чисел `a` и ключ `key`.
    - Она возвращает зашифрованные данные.
3. **Дешифрование данных**:
    - Используется функция `decrypt_key(a, key)` для дешифрования данных.
    - Эта функция принимает зашифрованные данные `a` и ключ `key`.
    - Она возвращает дешифрованные данные.
4. **Шифрование атрибутов**:
    - Используется функция `enc_attr(attr, key)` для шифрования атрибутов.
    - Эта функция принимает атрибуты `attr` в виде JSON-строки и ключ `key`.
    - Она возвращает зашифрованные атрибуты.
5. **Дешифрование атрибутов**:
    - Используется функция `dec_attr(attr, key)` для дешифрования атрибутов.
    - Эта функция принимает зашифрованные атрибуты `attr` и ключ `key`.
    - Она возвращает дешифрованные атрибуты.

Пример использования
-------------------------

```python
# Пример данных
data = [1, 2, 3, 4, 5, 6, 7, 8]

# Подготовка ключа
key = prepare_key(data)

# Шифрование данных
encrypted_data = encrypt_key(data, key)

# Дешифрование данных
decrypted_data = decrypt_key(encrypted_data, key)

# Проверка дешифрованных данных
assert decrypted_data == data

# Пример атрибутов
attr = {'name': 'John Doe', 'age': 30}

# Шифрование атрибутов
encrypted_attr = enc_attr(attr, key)

# Дешифрование атрибутов
decrypted_attr = dec_attr(encrypted_attr, key)

# Проверка дешифрованных атрибутов
assert decrypted_attr == attr
```

**Функции `aes_cbc_encrypt`, `aes_cbc_decrypt`, `aes_cbc_encrypt_a32`, `aes_cbc_decrypt_a32`, `stringhash` являются вспомогательными функциями, которые используются в других функциях для выполнения шифрования и дешифрования.**

**Функции `a32_to_str`, `str_to_a32`, `a32_to_base64` используются для преобразования 32-битных целых чисел (a32) в строки и обратно.**

**Этот код может быть использован для шифрования и дешифрования чувствительных данных, таких как пароли, ключи и другие конфиденциальные сведения.**