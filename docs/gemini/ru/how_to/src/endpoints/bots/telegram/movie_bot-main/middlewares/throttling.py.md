## Как использовать Middleware для ограничения частоты запросов
=========================================================================================

Описание
-------------------------
Middleware `ThrottlingMiddleware` ограничивает количество запросов от одного пользователя в определенный промежуток времени. Это предотвращает злоупотребление ботом и защищает его от перегрузки.

Шаги выполнения
-------------------------
1. **Инициализация**: Создается экземпляр `ThrottlingMiddleware` с заданным временным ограничением `time_limit` (по умолчанию 2 секунды). 
2. **Создание кэша**: Внутри класса создается кэш `self.limit` с использованием `TTLCache`. Кэш хранит информацию о последних запросах пользователей.
3. **Обработка запроса**: При поступлении нового запроса проверяется, есть ли уже запись в кэше для данного `event.chat.id`. 
4. **Ограничение**:  Если запись есть, запрос игнорируется. Если записи нет, то она добавляется в кэш, а запрос передается обработчику `handler`. 

Пример использования
-------------------------

```python
from aiogram import Dispatcher
from hypotez.src.endpoints.bots.telegram.movie_bot-main.middlewares.throttling import ThrottlingMiddleware

# Инициализация Middleware с временным ограничением 1 секунда
throttling = ThrottlingMiddleware(time_limit=1)

# Регистрация Middleware в Dispatcher
dp = Dispatcher(...)
dp.middleware.setup(throttling)

# Обработка запроса
@dp.message_handler(...)
async def handle_message(message: Message):
    # Логика обработки запроса
    ...
```

В этом примере Middleware будет ограничивать частоту запросов от одного пользователя до одного раза в секунду.