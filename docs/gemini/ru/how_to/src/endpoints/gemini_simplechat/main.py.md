## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода создает простую программу чат-бота с использованием Gemini API Google Cloud. 
Он настраивает сервер FastAPI, загружает конфигурацию, инициализирует модель Gemini и обрабатывает запросы на чат. 

Шаги выполнения
-------------------------
1. **Инициализация FastAPI**: Создается экземпляр FastAPI приложения `app` с помощью `FastAPI()`.
2. **CORS**: Добавляется промежуточное ПО для кросс-доменных запросов (CORS).
3. **Модель чата**: Определяется модель `ChatRequest`, которая принимает сообщение пользователя как строку.
4. **Инициализация модели Gemini**: Создается экземпляр `GoogleGenerativeAi` с использованием конфигурации из `gemini_simplechat.json`.
5. **Маршрут корня**: Определяется маршрут `app.get("/", response_class=HTMLResponse)` для обработки запросов на корневой адрес. 
   - Он считывает HTML-шаблон с помощью `Path(Config.ENDPOINT/ 'html'/ 'index.html').read_text(encoding="utf-8")` и возвращает HTML-ответ. 
6. **Маршрут чата**: Определяется маршрут `app.post("/api/chat")` для обработки запросов на чат.
   - Он использует модель `GoogleGenerativeAi` для получения ответа на сообщение пользователя с помощью `model.chat(request.message)`.
   - Возвращается ответ в формате JSON.
7. **Запуск сервера**: При запуске в качестве основного модуля,  код запускает сервер FastAPI с использованием `uvicorn.run(app, host = Config.HOST, port = port)`.

Пример использования
-------------------------

```python
from fastapi.testclient import TestClient

client = TestClient(app)

# Тестовый запрос на корневой адрес
response = client.get("/")
assert response.status_code == 200

# Тестовый запрос на чат
response = client.post("/api/chat", json={"message": "Привет!"})
assert response.status_code == 200
print(response.json()) # Вывод ответа в JSON
```