Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода предоставляет реализацию для взаимодействия с API `chat.getgpt.world`. Он включает функции для шифрования данных, отправки запросов и обработки потоковых ответов. Этот код позволяет отправлять запросы к API и получать ответы в потоковом режиме, что полезно для задач, требующих непрерывного получения данных.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули `os`, `json`, `uuid`, `requests` и `AES` из библиотеки `Crypto`.

2. **Определение URL и параметров модели**:
   - `url` — URL-адрес API `chat.getgpt.world`.
   - `model` — список поддерживаемых моделей (`gpt-3.5-turbo`).
   - `supports_stream` — указывает, поддерживает ли провайдер потоковую передачу данных (в данном случае `True`).
   - `needs_auth` — указывает, требуется ли аутентификация (в данном случае `False`).

3. **Определение функции `_create_completion`**:
   - Эта функция принимает параметры модели, сообщения и флаг потоковой передачи, а также дополнительные аргументы.
   - Внутри функции определены две вспомогательные функции: `encrypt` и `pad_data`.

4. **Определение функции `encrypt`**:
   - Генерирует случайные векторы инициализации (`t` и `n`).
   - Шифрует данные с использованием алгоритма AES в режиме CBC.
   - Возвращает зашифрованные данные в шестнадцатеричном формате вместе с векторами инициализации.

5. **Определение функции `pad_data`**:
   - Дополняет данные до размера блока AES с использованием PKCS7.

6. **Формирование заголовков запроса**:
   - Создаются заголовки запроса, включающие `Content-Type`, `Referer` и `user-agent`.

7. **Формирование данных запроса**:
   - Создается JSON-объект, включающий сообщения, параметры модели и другие аргументы.
   - Данные включают в себя параметры:
     - `messages` - список сообщений
     - `frequency_penalty` - штраф за частоту
     - `max_tokens` - максимальное количество токенов
     - `model` - используемая модель
     - `presence_penalty` - штраф за присутствие
     - `temperature` - температура
     - `top_p` - top_p
     - `stream` - включение потоковой передачи
     - `uuid` - уникальный идентификатор запроса

8. **Отправка POST-запроса**:
   - Отправляется POST-запрос к API `chat.getgpt.world/api/chat/stream` с зашифрованными данными.
   - Используется потоковый режим для получения данных по частям.

9. **Обработка потоковых данных**:
   - Итерируется по каждой строке в ответе.
   - Если строка содержит `b'content'`, она декодируется и извлекается содержимое сообщения.
   - Содержимое сообщения возвращается через `yield`.

10. **Формирование параметров**:
    - Создается строка `params`, содержащая информацию о поддерживаемых типах данных для функции `_create_completion`.

Пример использования
-------------------------

```python
import asyncio
from hypotez.src.endpoints.freegpt_webui_ru.g4f.Provider.Providers import GetGpt

async def main():
    messages = [
        {"role": "user", "content": "Привет, как дела?"}
    ]
    
    # Пример использования функции _create_completion
    for response_chunk in GetGpt._create_completion(model='gpt-3.5-turbo', messages=messages, stream=True):
        print(response_chunk, end='', flush=True)

if __name__ == "__main__":
    asyncio.run(main())