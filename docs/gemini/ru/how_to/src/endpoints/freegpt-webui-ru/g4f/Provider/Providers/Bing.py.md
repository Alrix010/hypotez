## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода реализует провайдер Bing для модели gpt-4, который позволяет взаимодействовать с ней через API Bing. 

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:  Импортируются модули для работы с сетью (aiohttp, requests), обработкой данных (json),  
   создания UUID, работы с SSL сертификатами (ssl, certifi), а также другие необходимые модули.
2. **Определение констант**: Определяются константы, такие как URL API Bing, список поддерживаемых моделей, 
   флаги, указывающие на поддержку потокового режима (supports_stream) и необходимость авторизации (needs_auth).
3. **Определение класса `optionsSets`**:  Создается класс, который представляет собой набор опций для запросов к модели.
   В этом классе определены два основных набора опций:
   - `optionSet`:  Определяет структуру для хранения набора опций.
   - `jailbreak`: Содержит список опций для обхода ограничений модели.
4. **Определение класса `Defaults`**:  Этот класс определяет значения по умолчанию для различных параметров, 
   используемых в запросах к API Bing.
5. **Функция `_format`**: Форматирует словарь с данными в JSON-строку, добавляя разделитель.
6. **Функция `create_conversation`**:  Создает новую сессию разговора с API Bing. 
   Она делает запрос к API Bing, получая идентификатор сессии, идентификатор клиента и подпись разговора, 
   и возвращает их.
7. **Функция `stream_generate`**:  Отправляет запрос к API Bing для генерации текста с использованием модели gpt-4 
   в потоковом режиме. Она устанавливает соединение через WebSockets, отправляет запрос, получает и обрабатывает
   ответом в режиме реального времени.
8. **Функция `run`**: Выполняет асинхронную генерацию текста, получая и возвращая результат по частям.
9. **Функция `convert`**: Преобразует список сообщений в строку контекста, необходимую для запроса к модели.
10. **Функция `_create_completion`**: Основная функция, которая отправляет запрос к API Bing для генерации текста 
   с использованием модели gpt-4. Она собирает контекст из предыдущих сообщений, отправляет запрос с использованием
   функции `stream_generate` и возвращает результат по частям. 

Пример использования
-------------------------

```python
from g4f.Provider.Providers.Bing import _create_completion

messages = [
    {'role': 'user', 'content': 'Привет, как дела?'},
    {'role': 'assistant', 'content': 'Хорошо, спасибо!'}
]

for token in _create_completion('gpt-4', messages, stream=True):
    print(token, end='')
```

Этот код создает два сообщения (одно от пользователя, одно от ассистента), а затем отправляет их в модель gpt-4 
с помощью функции `_create_completion`. 
Результат вывода модели будет выводиться по частям в консоль.