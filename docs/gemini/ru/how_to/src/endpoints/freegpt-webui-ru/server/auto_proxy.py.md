## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода реализует механизм поиска, тестирования и выбора прокси-серверов. 
Он предназначен для использования в приложениях, которые требуют анонимности или 
улучшенной производительности за счет использования прокси.

Шаги выполнения
-------------------------
1. **Получение списка прокси:**
   - Функция `fetch_proxies()` извлекает список прокси-серверов с сайта `proxyscrape.com`.
   - Она отправляет запрос на указанный URL и парсит полученный ответ, 
     разделяя строки с прокси-серверами по символу переноса строки.
   - Если запрос завершается с ошибкой, функция возвращает пустой список.
2. **Тестирование прокси:**
   - Функция `test_proxy()` проверяет работоспособность прокси-сервера.
   - Она отправляет тестовый запрос с помощью библиотеки `requests`, используя 
     указанный прокси и тестовую фразу `prompt`.
   - Она измеряет время ответа и добавляет прокси в список рабочих прокси 
     `working_proxies`, если время ответа меньше заданного порога `timeout`.
3. **Обновление списка рабочих прокси:**
   - Функция `get_working_proxies()` собирает список прокси, запускает многопоточный 
     процесс их проверки и добавляет рабочие прокси в список `working_proxies`.
4. **Регулярное обновление списка рабочих прокси:**
   - Функция `update_working_proxies()` запускается в отдельном потоке и периодически 
     обновляет список `working_proxies`, тестируя прокси-серверы с помощью тестовой фразы.
5. **Получение случайного рабочего прокси:**
   - Функция `get_random_proxy()` возвращает случайный рабочий прокси из списка 
     `working_proxies`.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.freegpt-webui-ru.server.auto_proxy import get_random_proxy

# Получаем случайный рабочий прокси
proxy = get_random_proxy()

# Используем прокси для отправки запроса
response = requests.get("https://www.example.com", proxies={"http": proxy})

print(response.text)
```