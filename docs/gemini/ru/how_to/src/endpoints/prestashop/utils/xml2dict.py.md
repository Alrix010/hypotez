### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код предназначен для преобразования XML-данных в словари Python. Он включает функции для парсинга XML из строк и ElementTree, обработки атрибутов и пространств имен, а также преобразования структуры XML в словарь. Этот модуль полезен для работы с данными, полученными из API Prestashop, которые представлены в формате XML.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули `re` для работы с регулярными выражениями и `xml.etree.cElementTree` или `xml.etree.ElementTree` для парсинга XML.
2. **Определение функции `_parse_node(node)`**: Эта функция рекурсивно обрабатывает XML-ноду, извлекая атрибуты и дочерние элементы, и преобразует их в словарь.
   - Извлекаются атрибуты ноды и сохраняются в словарь `attrs`. Атрибуты, соответствующие пространству имен `http://www.w3.org/1999/xlink`, игнорируются.
   - Извлекается текстовое значение ноды.
   - Если у ноды есть дочерние элементы, они рекурсивно обрабатываются и добавляются в словарь. Если у ноды несколько одинаковых дочерних элементов, они объединяются в список.
   - Если у ноды нет дочерних элементов, её текстовое значение сохраняется в словаре под ключом `'value'`.
   - Если в словаре есть только ключ `'value'`, возвращается только значение.
3. **Определение функции `_make_dict(tag, value)`**: Эта функция создает словарь с одним элементом, где ключ - это тег XML, а значение - значение тега. Если тег содержит пространство имен, оно извлекается и добавляется в словарь.
4. **Определение функции `xml2dict(xml)`**: Эта функция принимает XML-строку, преобразует её в ElementTree и вызывает функцию `ET2dict` для преобразования ElementTree в словарь.
5. **Определение функции `ET2dict(element_tree)`**: Эта функция принимает ElementTree и вызывает функцию `_make_dict` для преобразования ElementTree в словарь.

Пример использования
-------------------------

```python
    from pprint import pprint
    from src.endpoints.prestashop.utils.xml2dict import xml2dict

    xml_data = """<?xml version="1.0" encoding="UTF-8"?>
    <prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
    <addresses>
    <address id="1" xlink:href="http://localhost:8080/api/addresses/1"/>
    <address id="2" xlink:href="http://localhost:8080/api/addresses/2"/>
    </addresses>
    </prestashop>"""

    data = xml2dict(xml_data)
    pprint(data)