## Как использовать функцию `_create_completion`
=========================================================================================

### Описание
-------------------------
Функция `_create_completion` отправляет запрос к API `caipacity.com` для получения ответа от языковой модели `gpt-3.5-turbo`.

### Шаги выполнения
-------------------------
1. Формирование заголовков запроса (`headers`):
   - `authority`: Устанавливает хост API.
   - `accept`: Указывает, какие типы контента приемлемы для ответа.
   - `accept-language`: Задает предпочтительные языки для ответа.
   - `authorization`: Устанавливает тип авторизации (в данном случае `free`).
   - `client-id`: Генерирует уникальный идентификатор клиента.
   - `client-v`:  Указывает версию клиента.
   - `content-type`:  Определяет тип отправляемого контента (JSON).
   - `origin`:  Указывает источник запроса.
   - `referer`:  Указывает ссылку, с которой пришел запрос.
   - `sec-ch-ua`, `sec-ch-ua-mobile`, `sec-ch-ua-platform`: Предоставляют информацию о браузере пользователя.
   - `sec-fetch-dest`, `sec-fetch-mode`, `sec-fetch-site`: Описывают тип и источник запроса.
   - `user-agent`:  Указывает информацию о браузере пользователя.
2. Формирование параметров запроса (`params`):
   - `full`: Устанавливает, должна ли функция возвращать полный текст или только часть.
3. Формирование временной метки (`timestamp`): 
   - Вызывает функцию `Utils.format_timestamp` для получения форматированного timestamp.
4. Создание сигнатуры (`sig`):
   - Генерирует словарь `sig` с датой, временной меткой и хэш-кодом сообщения.
   - Использует функцию `Utils.hash` для генерации хэш-кода.
5. Создание JSON-данных (`json_data`):
   - Формирует JSON-объект, включающий:
     - `model`: Имя модели (`gpt-3.5-turbo`).
     - `temperature`: Температура для генерации текста.
     - `stream`:  Определяет, должен ли ответ поступать потоком.
     - `messages`:  Список сообщений в чате.
     - `sig`: Сигнатура запроса.
6. Отправка POST-запроса:
   - Использует библиотеку `requests` для отправки запроса к API `caipacity.com/v1/chat/completions`.
   - Устанавливает заголовки (`headers`), данные (`json_data`) и опцию `stream` для получения ответа потоком.
7. Обработка ответа:
   - Проходит по строкам ответа (`response.iter_lines()`) и проверяет, содержит ли строка `'content'`.
   - Если строка содержит `'content'`,  декодирует строку, извлекает объект `completion_chunk` и получает текст ответа (`token`).
   - Возвращает текст ответа `token` как генератор.

### Пример использования
-------------------------

```python
from ...Provider.Providers.Ails import _create_completion

messages = [
    {"role": "user", "content": "Привет! Как дела?"}
]

for token in _create_completion(model='gpt-3.5-turbo', messages=messages, stream=True):
    print(token, end='')
```

### Дополнительная информация
-------------------------
- Функция `_create_completion` является частной функцией и не предназначена для прямого вызова.
- Используется для получения ответов от модели `gpt-3.5-turbo`.
- В качестве параметров принимает модель, сообщения в чате, температуру, флаг `stream` и дополнительные аргументы.
- Возвращает ответ как генератор текстовых токенов.