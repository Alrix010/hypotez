Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода реализует функцию `_create_completion` для взаимодействия с API `liaobots.com`. Он отправляет запросы на генерацию текста на основе предоставленной модели, списка сообщений и параметров, таких как ключ авторизации. Код также включает информацию о поддерживаемых моделях (`gpt-3.5-turbo` и `gpt-4`) и заголовки запроса.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:
   - Импортируются модули `os`, `uuid`, `requests`.
   - Импортируются типы данных `sha256`, `Dict`, `get_type_hints` из модуля `...typing`.

2. **Определение глобальных переменных**:
   - Устанавливается базовый URL `url = 'https://liaobots.com'`.
   - Определяется список поддерживаемых моделей `model = ['gpt-3.5-turbo', 'gpt-4']`.
   - Указывается поддержка потоковой передачи данных `supports_stream = True`.
   - Указывается необходимость аутентификации `needs_auth = True`.

3. **Конфигурация моделей**:
   - Создается словарь `models`, содержащий конфигурации для каждой поддерживаемой модели, включая их ID, имена, максимальную длину и лимит токенов.

4. **Функция `_create_completion`**:
   - **Определение заголовков**:
     - Создается словарь `headers` с необходимыми HTTP-заголовками, включая `authority`, `content-type`, `origin`, `referer`, `user-agent` и `x-auth-code` (ключ авторизации из `kwargs`).
   - **Формирование JSON-данных**:
     - Создается словарь `json_data` с данными для отправки в запросе, включая:
       - `conversationId`: Уникальный идентификатор разговора, сгенерированный с помощью `uuid.uuid4()`.
       - `model`: Конфигурация модели, полученная из словаря `models` на основе переданного параметра `model`.
       - `messages`: Список сообщений для генерации ответа.
       - `key`: Пустая строка.
       - `prompt`: Инструкция для ChatGPT.
   - **Отправка запроса**:
     - Отправляется POST-запрос к API `https://liaobots.com/api/chat` с использованием библиотеки `requests`.
     - Указываются заголовки `headers`, JSON-данные `json_data` и включается потоковая передача данных `stream=True`.
   - **Обработка потока ответов**:
     - Итерируется по содержимому ответа, полученного от сервера, с помощью `response.iter_content(chunk_size=2046)`.
     - Декодируется каждый чанк данных в кодировке UTF-8 и возвращается как часть генератора.

5. **Параметры поддержки**:
   - Формируется строка `params`, содержащая информацию о поддерживаемых типах параметров функцией `_create_completion`.

Пример использования
-------------------------

```python
import asyncio
from src.endpoints.juliana.freegpt-webui-ru.g4f.Provider.Providers import Liaobots

async def main():
    messages = [
        {"role": "user", "content": "Hello, how are you?"}
    ]
    auth_key = "YOUR_AUTH_KEY"  # Замените на ваш реальный ключ авторизации
    generator = Liaobots._create_completion(model='gpt-3.5-turbo', messages=messages, stream=True, auth=auth_key)
    
    async for message in generator:
        print(message, end="")

if __name__ == "__main__":
    asyncio.run(main())