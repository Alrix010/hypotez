### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода отвечает за публикацию рекламного сообщения в группах Facebook. Он выполняет отправку заголовка сообщения, загрузку медиафайлов (изображений) и, наконец, публикацию всего сообщения.

Шаги выполнения
-------------------------
1. **Инициализация**:
   - Функция `post_ad` принимает объект драйвера `Driver` и объект сообщения `message:SimpleNamespace` как аргументы.
   - Объявляется глобальная переменная `fails`, которая подсчитывает количество неудачных попыток.

2. **Отправка заголовка сообщения**:
   - Вызывается функция `post_message_title` для отправки заголовка сообщения. Функция `post_message_title` отправляет заголовок сообщения, используя драйвер `d` и текст из `message.description`.
   - Если отправка не удалась, регистрируется ошибка с помощью `logger.error`.
   - Счетчик `fails` увеличивается на 1. Если количество неудачных попыток меньше 15, функция возвращается. В противном случае выполнение прекращается.

3. **Загрузка медиафайлов (изображений)**:
   - Проверяется, есть ли у объекта `message` атрибут `image_path` и существует ли путь к изображению.
   - Если путь к изображению существует, вызывается функция `upload_post_media` для загрузки медиафайла. Если загрузка не удалась, функция возвращается.

4. **Публикация сообщения**:
   - Вызывается функция `message_publish` для публикации сообщения. Если публикация не удалась, функция возвращается.

5. **Сброс счетчика неудач и успешное завершение**:
   - Счетчик `fails` сбрасывается до 0.
   - Функция возвращает `True`, указывая на успешное завершение публикации.

Пример использования
-------------------------

```python
from types import SimpleNamespace
from src.webdriver.driver import Driver

# Пример использования функции post_ad
def example_usage(driver: Driver):
    # Создаем экземпляр SimpleNamespace для имитации объекта сообщения
    message = SimpleNamespace(
        description="Текст рекламного сообщения",
        image_path="/путь/к/изображению.jpg"  # необязательный параметр
    )

    # Вызываем функцию post_ad для публикации сообщения
    result = post_ad(driver, message)

    if result:
        print("Сообщение успешно опубликовано!")
    else:
        print("Не удалось опубликовать сообщение.")

# Пример вызова example_usage (предполагается, что driver уже инициализирован)
# example_usage(driver)
```