## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Блок кода реализует API для чат-бота, используя модель Google Generative AI (Gemini). API принимает текстовые сообщения, отправляет их в модель Gemini и возвращает сгенерированный ответ. Дополнительно API реализует обработку статических файлов, локализацию и загрузку файлов локализации.

Шаги выполнения
-------------------------
1. **Инициализация API:**
    - Создается объект `app` FastAPI, настраивается CORS для разрешения кросс-доменных запросов.
    - Определяется модель `ChatRequest` для принятия текстовых сообщений.
    - Инициализируется объект `model` Google Generative AI, если он еще не был создан.
2. **Обработка статических файлов:**
    - API монтирует папку `templates` как статические файлы.
3. **Маршрут корневого URL:**
    - Обрабатывается запрос по URL `/`.
    - Отображается файл `index.html` из папки `templates`.
4. **Маршрут для чата:**
    - Обрабатывается POST-запрос по URL `/api/chat`.
    - Извлекается текст сообщения из объекта `request`.
    - Отправляется сообщение в модель `model` и записывается полученный ответ.
    - Возвращается ответ в виде JSON-объекта.
5. **Функция `get_locale_file`:**
    - Загружает файл локализации в формате JSON по указанному языку.
    - Обрабатывает ошибки: `FileNotFoundError`, `json.JSONDecodeError` и `Exception`.
6. **Маршрут для файлов локализации:**
    - Обрабатывается GET-запрос по URL `/locales/{lang}.json`.
    - Возвращает файл локализации, полученный функцией `get_locale_file`.
7. **Запуск API:**
    - При запуске скрипта API запускается на сервере `127.0.0.1` на порту `8000`.

Пример использования
-------------------------

```python
import requests

# Отправка сообщения в чат-бот
message = "Привет, как дела?"
url = "http://127.0.0.1:8000/api/chat"
response = requests.post(url, json={"message": message})

# Получение ответа
if response.status_code == 200:
    response_data = response.json()
    print(response_data["response"])
else:
    print(f"Error: {response.status_code}")

# Получение файла локализации
lang = "ru"
url = f"http://127.0.0.1:8000/locales/{lang}.json"
response = requests.get(url)

# Обработка ответа
if response.status_code == 200:
    locale_data = response.json()
    print(locale_data)
else:
    print(f"Error: {response.status_code}")
```