### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода предоставляет документацию для модуля `code_assistant`, описывающего скрипты (`code_assistant.py`, `make_summary.py`, `onela_bot.py`, `bot_handlers.py`) и их функциональность.

Шаги выполнения
-------------------------
1. **Обзор модуля**: Модуль `Code Assistant` предназначен для взаимодействия с моделями **Gemini** и **OpenAI** для обработки исходного кода проекта.

2. **Описание скриптов**:
   - `code_assistant.py`: Читает код из файлов, взаимодействует с моделями для генерации документации или проверки ошибок и сохраняет результаты.
   - `make_summary.py`: Рекурсивно создает файл `SUMMARY.md` для компиляции документации, поддерживает фильтрацию файлов по языку.
   - `onela_bot.py` и `bot_handlers.py`: Создают Telegram-бота для обработки задач, связанных с кодом.

3. **Структура проекта**: Описывает использование моделей, подсказок из файлов и обработку файлов `.py` и `README.MD`.

4. **Примеры использования**:
   - Запуск с настройками JSON: `python code_assistant.py --settings settings.json`
   - Запуск с параметрами: `python code_assistant.py --role doc_writer --lang ru --models gemini openai --start_dirs /path/to/dir1 /path/to/dir2`
   - Примеры для ролей и моделей: `python code_assistant.py --role code_checker --lang en --models gemini --start_dirs /path/to/dir`, `python code_assistant.py --role doc_writer --lang en --models openai`

5. **Параметры командной строки**:
   - `--settings`: Путь к JSON-файлу с настройками. Функция загружает параметры из файла.
   - `--role`: Роль модели для задачи.
   - `--lang`: Язык для задачи.
   - `--models`: Список моделей для инициализации.
   - `--start_dirs`: Список директорий для обработки.

6. **Рабочий процесс**:
   - Поиск файлов `.py` и `README.MD` в директориях.
   - Загрузка подсказок из `src/ai/prompts/developer/`.
   - Формирование запросов и их отправка в модели.
   - Сохранение ответов модели в директориях.

7. **Исключения**: Описывает настройку исключений для файлов и директорий с использованием параметров `exclude_file_patterns`, `exclude_dirs` и `exclude_files`.

8. **Логирование**: Информация о процессе обработки файлов и ответах моделей.

9. **Зависимости**: Необходимы API-ключи для моделей Gemini и OpenAI.

10. **Создание новой роли для AI-моделей**:
    - Обновление `code_assistant.json`: Добавление роли в список или исключение её в `"exclude-roles"`.
    - Добавление роли в `translations/translations.json`.
    - Создание системного промпта в `ai/prompts/developer/`.
    - Создание инструкции команды в `instructions/`.

Пример использования
-------------------------

```python
# Пример запуска скрипта code_assistant.py с различными параметрами
# python code_assistant.py --role doc_writer --lang ru --models gemini openai --start_dirs /path/to/your/code
```