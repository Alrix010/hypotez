## Как использовать этот блок кода
=========================================================================================

### Описание
-------------------------
Данный блок кода представляет класс `ChatGLM`, который реализует асинхронный генератор ответов от модели ChatGLM. 
Он взаимодействует с API chatglm.cn, отправляя запросы с текстовыми сообщениями и получая асинхронно ответы в виде потока текста.

### Шаги выполнения
-------------------------
1. **Инициализация класса:** Создается экземпляр класса `ChatGLM`.
2. **Создание асинхронного генератора:** Вызывается метод `create_async_generator`, который принимает модель, сообщения и опционально прокси.
3. **Подготовка данных для запроса:** Формируется JSON-объект с необходимыми параметрами: ID устройства, данные разговора, сообщения.
4. **Отправка запроса:** Используется `aiohttp` для отправки POST-запроса на API чатглом.
5. **Обработка ответа:**
    - Обрабатывается ответ в формате *Server-Sent Events*.
    - Декодируется каждый chunk данных.
    - Извлекается текст ответа из JSON-данных.
    - Генерируется текст ответа по частям (`yield text`).
    - При завершении ответа (status='finish') генерируется `FinishReason("stop")`.

### Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.ChatGLM import ChatGLM

async def main():
    # Создаем экземпляр класса ChatGLM
    chatglm = ChatGLM()

    # Формируем список сообщений
    messages = [
        {"role": "user", "content": "Привет, как дела?"},
        {"role": "assistant", "content": "Хорошо, а у тебя?"}
    ]

    # Получаем асинхронный генератор
    async_generator = await chatglm.create_async_generator(model="glm-4", messages=messages)

    # Обрабатываем ответ по частям
    async for chunk in async_generator:
        if isinstance(chunk, str):
            print(f"Ответ: {chunk}")
        elif isinstance(chunk, FinishReason):
            print("Отправка завершена.")
        else:
            print(f"Неожиданный тип данных: {type(chunk)}")

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())

```