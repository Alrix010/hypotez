## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода определяет класс `AIModel`, который представляет собой модель искусственного интеллекта, использующую API G4F. 
Класс наследуется от `OpenAIModel` и добавляет функциональность для работы с G4F.

Шаги выполнения
-------------------------
1. **Инициализация модели**: 
   - Создается экземпляр класса `AIModel` с заданным именем модели `model_name` и опциональным провайдером `provider`.
   - В качестве аргумента можно задать роль для системного запроса `system_prompt_role` (по умолчанию `'system'`).
   - Также можно задать провайдера модели `system` (по умолчанию `openai`).
2. **Создание клиента**:
   - Внутри класса `AIModel` создается экземпляр класса `AsyncClient` с заданным провайдером и дополнительными аргументами.
3. **Генерация имени модели**:
   - Метод `name()` возвращает имя модели в формате `g4f:provider:model_name` или `g4f:model_name` в зависимости от наличия провайдера.
4. **Функция `new_infer_model`**:
   - Эта функция принимает модель `Model` или имя модели `KnownModelName` в качестве аргумента.
   - Проверяет, начинается ли имя модели с `g4f:`, и если да, то извлекает имя провайдера и модели, создавая экземпляр `AIModel`.
   - В противном случае использует стандартную функцию `infer_model` для определения модели.
5. **Функция `patch_infer_model`**:
   - Эта функция исправляет функцию `infer_model` в `pydantic_ai.models`  так, чтобы она использовала `new_infer_model` для определения моделей G4F.
   - Также она присваивает `AIModel` к `pydantic_ai.models.AIModel`.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.integration.pydantic_ai import AIModel

# Инициализация модели
model = AIModel(model_name='text-davinci-003', provider='g4f')

# Отправка запроса
response = model.client.complete(
    messages=[
        {"role": "user", "content": "Привет! Как дела?"}
    ],
    stream=True
)

# Обработка ответа
for chunk in response:
    print(chunk['content'])
```