### **Инструкции по использованию кода `GizAI`**

=========================================================================================

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет асинхронный провайдер `GizAI` для взаимодействия с API `Giz AI` для генерации текста на основе предоставленных сообщений. Класс поддерживает выбор модели, передачу истории сообщений и использует `aiohttp` для асинхронных HTTP-запросов.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:
   Импортируются модули `__future__`, `ClientSession` из `aiohttp`, типы `AsyncResult`, `Messages` из `..typing`, базовый класс `AsyncGeneratorProvider` и `ProviderModelMixin`, а также функция `format_prompt` из `helper`.

2. **Определение класса `GizAI`**:
   Класс `GizAI` наследуется от `AsyncGeneratorProvider` и `ProviderModelMixin`. Устанавливаются параметры, такие как `url`, `api_endpoint`, флаги поддержки потоковой передачи и системных сообщений, а также значения моделей по умолчанию и их алиасы.

3. **Метод `get_model`**:
   Функция проверяет, является ли запрошенная модель допустимой, используя список допустимых моделей (`cls.models`) и алиасы моделей (`cls.model_aliases`). Если модель не найдена, используется модель по умолчанию.

4. **Метод `create_async_generator`**:
   Это асинхронная функция, которая принимает модель, список сообщений, прокси и дополнительные параметры. Функция форматирует заголовок запроса, преобразует структуру сообщений и отправляет асинхронный POST-запрос к API `Giz AI`.

5. **Формирование запроса**:
   Формируется словарь `data` с параметрами, включая выбранную модель и список сообщений. Системные сообщения выделяются отдельно, а сообщения пользователей и AI преобразуются в формат, ожидаемый API.

6. **Отправка запроса и обработка ответа**:
   Используется `ClientSession` для отправки POST-запроса к `api_endpoint` с JSON-данными и прокси (если указан). В случае успешного ответа (status code 201), извлекается текст из JSON-ответа и возвращается как строка. Если возникает ошибка, вызывается исключение с описанием статуса ответа и содержимым.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.GizAI import GizAI

async def main():
    messages = [
        {"role": "user", "content": "Hello, how are you?"}
    ]
    
    async for response in GizAI.create_async_generator(model="chat-gemini-flash", messages=messages):
        print(response)

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```
```