Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует асинхронный генератор для взаимодействия с API Dynaspark. Он позволяет отправлять текстовые запросы и изображения для генерации ответов с использованием различных моделей, таких как Gemini. Класс `Dynaspark` предоставляет интерфейс для отправки запросов к API Dynaspark и получения ответов в асинхронном режиме.

Шаги выполнения
-------------------------
1. **Подготовка заголовков**: Определяются заголовки HTTP-запроса, необходимые для взаимодействия с API Dynaspark.
2. **Создание асинхронной сессии**: Создается асинхронная сессия `ClientSession` с заданными заголовками для выполнения HTTP-запросов.
3. **Формирование данных формы**: Создается объект `FormData` для отправки данных в формате multipart/form-data. Добавляются текстовый запрос пользователя (`user_input`) и выбранная модель (`ai_model`).
4. **Обработка медиафайлов (изображений)**: Если в запросе присутствуют медиафайлы (изображения), они преобразуются в байты и добавляются в форму.
5. **Отправка POST-запроса**: Отправляется POST-запрос к API Dynaspark с данными формы и прокси (если указан).
6. **Обработка ответа**: Полученный ответ проверяется на наличие ошибок, извлекается текстовое содержимое, преобразуется в JSON и извлекается поле `response`, которое передается в генератор.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.Dynaspark import Dynaspark
from src.endpoints.gpt4free.g4f.typing import Messages, MediaListType
import asyncio

async def main():
    model = "gemini-1.5-flash"
    messages: Messages = [{"role": "user", "content": "Напиши короткий стих о весне"}]
    media: MediaListType = None  # или список с изображениями
    proxy = None

    async for response in Dynaspark.create_async_generator(model=model, messages=messages, proxy=proxy, media=media):
        print(response)

if __name__ == "__main__":
    asyncio.run(main())