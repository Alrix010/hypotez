### **Как использовать этот блок кода**

=========================================================================================

Описание
-------------------------
Этот код определяет структуру клиента для взаимодействия с API, предоставляющими функциональность чат-ботов и обработки изображений. Он включает в себя классы и типы, необходимые для работы с различными провайдерами, прокси и асинхронными итераторами.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:
   - Импортируются модули `os` для работы с переменными окружения.
   - Из `.stubs` импортируются `ChatCompletion` и `ChatCompletionChunk` для работы с ответами чат-бота.
   - Из `..providers.types` импортируется `BaseProvider` как базовый класс для провайдеров.
   - Из `typing` импортируются `Union`, `Iterator`, `AsyncIterator` для определения типов.

2. **Определение типов**:
   - `ImageProvider` определяется как `Union[BaseProvider, object]`, представляющий провайдера изображений.
   - `Proxies` определяется как `Union[dict, str]`, представляющий прокси для HTTP-запросов.
   - `IterResponse` определяется как `Iterator[Union[ChatCompletion, ChatCompletionChunk]]`, представляющий итератор для синхронных ответов чат-бота.
   - `AsyncIterResponse` определяется как `AsyncIterator[Union[ChatCompletion, ChatCompletionChunk]]`, представляющий асинхронный итератор для ответов чат-бота.

3. **Определение класса `Client`**:
   - Класс `Client` инициализируется с параметрами: `api_key` (ключ API), `proxies` (прокси) и `**kwargs` (дополнительные аргументы).
   - В конструкторе `__init__` устанавливаются значения `api_key` и `proxies`, а также вызывается метод `get_proxy` для определения используемого прокси.

4. **Метод `get_proxy`**:
   - Метод `get_proxy` проверяет тип `self.proxies` и возвращает соответствующий прокси:
     - Если `self.proxies` является строкой, она возвращается как прокси.
     - Если `self.proxies` равен `None`, возвращается значение переменной окружения `G4F_PROXY`.
     - Если в `self.proxies` есть ключ `"all"`, возвращается его значение.
     - Если в `self.proxies` есть ключ `"https"`, возвращается его значение.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.client.types import Client

# Пример 1: Инициализация клиента без прокси и ключа API
client = Client()
print(f"Прокси: {client.proxy}")

# Пример 2: Инициализация клиента с прокси в виде строки
client_with_string_proxy = Client(proxies="http://example.com:8080")
print(f"Прокси (строка): {client_with_string_proxy.proxy}")

# Пример 3: Инициализация клиента с прокси в виде словаря
client_with_dict_proxy = Client(proxies={"https": "http://example.com:8080"})
print(f"Прокси (словарь): {client_with_dict_proxy.proxy}")

# Пример 4: Инициализация клиента с API ключом
client_with_api_key = Client(api_key="YOUR_API_KEY")
print(f"API ключ: {client_with_api_key.api_key}")