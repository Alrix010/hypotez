## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода реализует асинхронный генератор для взаимодействия с API  Berlin4H.top (бесплатный сервис для доступа к GPT-3.5). Он предоставляет функциональность для отправки запросов с использованием асинхронного генератора, который обрабатывает чанки ответа от API.

Шаги выполнения
-------------------------
1. **Инициализация**:  Создается асинхронный генератор с помощью метода `create_async_generator`. Он принимает модель, набор сообщений, прокси-сервер (необязательный) и дополнительные параметры.
2. **Аутентификация**: Если токен доступа отсутствует, выполняется аутентификация на API Berlin4H.top.  
3. **Форматирование запроса**:  Форматируется запрос к API Berlin4H.top, включающий модель, сообщения, параметры запроса, а также ID родительского сообщения.
4. **Отправка запроса**: Отправляется POST-запрос к API `/api/chat/completions` с использованием `aiohttp.ClientSession`.
5. **Обработка ответа**:  Ответ API обрабатывается асинхронным генератором. Он итерирует по частям ответа (chunks) и  декодирует их в JSON. 
6. **Выдача результата**:  Каждая декодированная часть ответа (chunk)  с содержанием ответа от API  выдается через генератор. 

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.deprecated.Berlin import Berlin

async def main():
    messages = [
        {"role": "user", "content": "Привет!"}
    ]
    async for response in Berlin.create_async_generator(model="gpt-3.5-turbo", messages=messages):
        print(response)

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```

**Дополнительные замечания**:

- Модуль  `Berlin` использует aiohttp для асинхронного взаимодействия с API, обеспечивая более эффективную обработку запросов. 
- В коде используется `secrets` и `uuid` для генерации случайных данных и уникальных идентификаторов.
- В `format_prompt`  функция оформляет запрос к  API Berlin4H.top в соответствии с требованиями  API.
- Модуль  `Berlin`  использует  `json`  для работы с данными в формате  JSON.
- В коде используются  `headers`  с  `User-Agent`,  `Accept`,  `Content-Type`,  `Origin`,  `Connection`  и другими параметрами.