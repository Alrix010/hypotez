### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода реализует асинхронный запрос к провайдеру Aichat для получения ответа от языковой модели. Он выполняет настройку заголовков, отправляет запрос с использованием предоставленных параметров и обрабатывает полученный ответ.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:
   - Импортируются модули `Messages` для работы с сообщениями, `AsyncProvider` и `format_prompt` из `..base_provider` для базового класса провайдера и форматирования запросов, `get_cookies` из `..helper` для получения куки и `StreamSession` из `...requests` для выполнения асинхронных запросов.

2. **Определение класса `Aichat`**:
   - Создается класс `Aichat`, который наследуется от `AsyncProvider`.
   - Устанавливаются атрибуты класса: `url` (URL для запросов), `working` (флаг работоспособности) и `supports_gpt_35_turbo` (поддержка модели GPT-3.5 Turbo).

3. **Создание асинхронного метода `create_async`**:
   - Метод `create_async` принимает параметры: `model` (модель для запроса), `messages` (список сообщений), `proxy` (прокси-сервер) и `kwargs` (дополнительные аргументы).
   - Функция извлекает или получает куки для домена `chat-gpt.org`. Если куки отсутствуют, выбрасывается исключение `RuntimeError`.
   - Определяются заголовки (`headers`) для HTTP-запроса, включая `authority`, `accept`, `content-type`, `origin`, `referer`, `sec-ch-ua`, `sec-fetch-dest`, `sec-fetch-mode`, `sec-fetch-site` и `user-agent`.

4. **Выполнение асинхронного запроса**:
   - Создается асинхронная сессия `StreamSession` с использованием заголовков, куки, таймаута и прокси (если предоставлены).
   - Формируется JSON-тело запроса (`json_data`) с использованием предоставленных сообщений, температуры, штрафов присутствия и частоты, а также значения `top_p`.
   - Выполняется POST-запрос к `https://chat-gpt.org/api/text` с использованием сформированного JSON-тела.

5. **Обработка ответа**:
   - Проверяется статус ответа (`response.raise_for_status()`) и извлекается JSON-результат.
   - Проверяется наличие ответа в поле `response` результата. Если ответ отсутствует, выбрасывается исключение `Exception`.
   - Функция возвращает сообщение из поля `message` результата.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.deprecated.Aichat import Aichat
from src.endpoints.gpt4free.g4f.typing import Messages
import asyncio

async def main():
    model = "gpt-3.5-turbo"
    messages: Messages = [{"role": "user", "content": "Hello, Aichat!"}]
    proxy = None  # Замените на ваш прокси, если необходимо

    try:
        response = await Aichat.create_async(model=model, messages=messages, proxy=proxy)
        print(f"Ответ от Aichat: {response}")
    except Exception as e:
        print(f"Произошла ошибка: {e}")

if __name__ == "__main__":
    asyncio.run(main())