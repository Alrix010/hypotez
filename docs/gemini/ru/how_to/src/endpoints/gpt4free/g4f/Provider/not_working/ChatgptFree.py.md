## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода реализует класс `ChatgptFree`, который представляет собой асинхронный генератор для получения ответов от модели GPT-4, доступной на сайте chatgptfree.ai. Класс использует StreamSession для выполнения асинхронных HTTP-запросов к веб-сайту и обрабатывает ответы, генерируемые моделью GPT-4, в виде потока строк. 

Шаги выполнения
-------------------------
1. **Инициализация класса:**
   - Класс `ChatgptFree` инициализируется с использованием URL-адреса сайта chatgptfree.ai, заданного в атрибуте `url`.
   - Класс также определяет список доступных моделей (`models`), включая  `default_model`, и словарь алиасов моделей (`model_aliases`).

2. **Получение nonce и post_id:**
   - При первом использовании класса `ChatgptFree` выполняется асинхронный запрос к главной странице сайта, чтобы получить значения `_nonce` и `_post_id`.
   - Эти значения необходимы для отправки запросов на генерацию текста.

3. **Форматирование запроса:**
   - Метод `format_prompt` преобразует список сообщений (`messages`) в текст, подходящий для отправки в качестве запроса модели GPT-4.

4. **Отправка запроса:**
   - Класс `ChatgptFree` отправляет POST-запрос к `wp-admin/admin-ajax.php` на сайте chatgptfree.ai.
   - Запрос содержит данные `_nonce`, `_post_id`, `url`, `action`, `message` и `bot_id`.

5. **Обработка ответа:**
   - Ответ от сервера обрабатывается по строкам.
   - Если строка начинается с `data: `, данные из строки декодируются в JSON и выводится содержимое `content` из поля `delta` в ответе.
   - Если строка не начинается с `data: `, она добавляется в буфер.
   - В конце обработки буфер также декодируется в JSON и выводится в случае наличия данных в поле `data`.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.not_working.ChatgptFree import ChatgptFree

async def main():
    provider = ChatgptFree()
    messages = [
        {"role": "user", "content": "Привет! Как дела?"},
    ]
    async for response_chunk in provider.create_async_generator(model='gpt-4o-mini', messages=messages):
        print(response_chunk)

asyncio.run(main())
```

**Примечание:** 
Данный код является примером использования класса `ChatgptFree` в асинхронном контексте. 
Он показывает, как создать экземпляр класса, отправить запрос к модели GPT-4 и обработать полученный ответ.