## Как использовать GPTalk
=========================================================================================

Описание
-------------------------
Класс `GPTalk` предоставляет асинхронный генератор для взаимодействия с API ChatGPT через `gptalk.net`. 
Он позволяет отправлять запросы с использованием `gpt-3.5-turbo` модели и получать ответы в виде потока текста.

Шаги выполнения
-------------------------
1. **Инициализация**: Создайте экземпляр класса `GPTalk`.
2. **Аутентификация**: При первом использовании `GPTalk` выполняет аутентификацию, отправляя запрос на `/api/chatgpt/user/login` и получая токен.
3. **Отправка запроса**: Используйте метод `create_async_generator` для отправки запроса с указанием модели, сообщений (в виде списка словарей) и прокси (опционально).
4. **Получение ответа**: Получите асинхронный генератор, который будет выдавать части ответа.
5. **Обработка ответа**: Итерируйтесь по генератору, чтобы получить ответ по частям.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.deprecated.GPTalk import GPTalk

async def main():
    messages = [
        {"role": "user", "content": "Привет, как дела?"},
    ]
    gptalk = GPTalk()  # Инициализация
    async for response in gptalk.create_async_generator(model="gpt-3.5-turbo", messages=messages):
        print(response, end="")  # Вывод ответа по частям

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```

**Примечания**:

- Класс `GPTalk` является устаревшим. Вместо него рекомендуется использовать более современные решения для взаимодействия с ChatGPT API.
- `GPTalk` использует авторизацию через `gptalk.net`, поэтому может потребоваться дополнительная настройка.
- Метод `create_async_generator` возвращает асинхронный генератор, который работает с потоком текста. 
- Если необходим полный ответ, потребуется собрать все части ответа в одну строку.
- Используйте прокси, если ваш IP-адрес заблокирован на `gptalk.net`.
- Модель `gpt-3.5-turbo` может быть использована по умолчанию, если не указана другая модель.
- Ограничение на использование: `GPTalk` ограничен 5 запросами в секунду.
- Для получения токена используются `secrets.token_hex` для генерации случайных данных.
- Для проверки срока действия токена используется `cls._auth["expires_at"] < timestamp`.
- Используется метод `format_prompt` для преобразования списка сообщений в строку для запроса к API.