## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода представляет класс `ARTA`, который реализует асинхронный генератор изображений с помощью API сервиса ai-arta.com. Класс наследуется от `AsyncGeneratorProvider` и `ProviderModelMixin`, обеспечивая базовые функции для работы с API. Он поддерживает различные модели для генерации изображений, позволяя пользователям выбрать желаемый стиль. Класс обрабатывает авторизацию, генерацию изображений, отслеживание статуса и получение сгенерированных изображений.

Шаги выполнения
-------------------------
1. **Инициализация**: Создается экземпляр класса `ARTA`.
2. **Авторизация**: Вызывается метод `read_and_refresh_token` для получения токена доступа. Метод проверяет наличие существующего токена в файле `auth_ARTA.json`, и если токен действителен, использует его. В противном случае, он создает новый токен, используя API.
3. **Генерация изображений**: Вызывается метод `create_async_generator` для запуска генерации изображения. Метод принимает различные параметры, такие как модель, prompt, negative_prompt, seed и т.д.
4. **Отслеживание статуса**: После запуска генерации, метод `create_async_generator` начинает отслеживать статус генерации, периодически проверяя API. 
5. **Возвращение результатов**: После завершения генерации, метод `create_async_generator` возвращает список URL-адресов сгенерированных изображений.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.ARTA import ARTA

async def generate_image():
    provider = ARTA()

    # Настраиваем параметры для генерации
    model = "Flux"  # Выбираем модель для генерации
    prompt = "A cute cat sitting on a couch"  # Вводим prompt для генерации
    n = 2  # Задаем количество изображений для генерации
    guidance_scale = 7  # Указываем силу направляющей

    # Запускаем асинхронный генератор 
    async for result in provider.create_async_generator(model=model, prompt=prompt, n=n, guidance_scale=guidance_scale):
        if isinstance(result, Reasoning):
            print(f"Status: {result.label}")
        elif isinstance(result, ImageResponse):
            print(f"Image URLs: {result.images}")

# Запускаем асинхронную функцию
asyncio.run(generate_image())
```

**Дополнительные пояснения**

* **`read_and_refresh_token`**: Этот метод проверяет, есть ли действующий токен авторизации в файле `auth_ARTA.json`. Если токен не найден или истек, он получает новый токен с помощью API.
* **`create_async_generator`**: Метод `create_async_generator` запускает асинхронный процесс генерации изображений с помощью API. Он отслеживает статус генерации, периодически проверяя API.
* **`get_model`**: Метод `get_model` преобразует строку с названием модели в действительное имя модели, используемое API.
* **`format_image_prompt`**: Метод `format_image_prompt` форматирует prompt, добавляя необходимые для API параметры.
* **`ImageResponse`**: Класс `ImageResponse` хранит ссылки на сгенерированные изображения.
* **`Reasoning`**: Класс `Reasoning` хранит информацию о статусе генерации.
* **`asyncio.run`**: Функция `asyncio.run` запускает асинхронную функцию `generate_image`.
* **`async for`**: Цикл `async for` используется для итерации по результатам асинхронного генератора, чтобы получить статусы и ссылки на сгенерированные изображения.