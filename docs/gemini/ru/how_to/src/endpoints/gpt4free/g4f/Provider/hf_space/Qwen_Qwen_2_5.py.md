## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода представляет класс `Qwen_Qwen_2_5`, который реализует асинхронный генератор, позволяющий получать ответы от модели Qwen-2.5 от Hugging Face. 

Шаги выполнения
-------------------------
1. **Инициализация класса:** Создается экземпляр класса `Qwen_Qwen_2_5` с помощью конструктора.
2. **Запуск асинхронного генератора:** Вызывается метод `create_async_generator` с необходимыми параметрами:
    - `model`: Имя модели (по умолчанию - `qwen-qwen2-5`).
    - `messages`: Список сообщений, передаваемых в модель.
    - `proxy`: (Опционально) Прокси-сервер для подключения.
3. **Формирование запроса:** 
    - Генерируется уникальный сессионный хеш для текущего запроса.
    - Формируется JSON-запрос для отправки на сервер Hugging Face, содержащий:
        - `prompt`: Сформулированный текст запроса.
        - `system_prompt`:  Системные инструкции для модели (по умолчанию - описание модели Qwen).
        - `session_hash`: Уникальный сессионный хеш.
    - Отправляется POST-запрос на API-endpoint `https://qwen-qwen2-5.hf.space/queue/join` с запросом.
4. **Получение ID события:** Получается ID события (`event_id`) из ответа сервера.
5. **Отправка запроса на получение данных:**
    - Формируется URL для получения данных потока (`https://qwen-qwen2-5.hf.space/queue/data`).
    - Отправляется GET-запрос на этот URL с параметром `session_hash`.
6. **Обработка ответа потока:** 
    - Извлекаются частичные ответы из потока данных, пока не будет получен полный ответ от модели.
    - Декодируется JSON-ответ, извлекается текст ответа и выводится.
    - Обрабатываются возможные ошибки JSON-декодирования.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.hf_space.Qwen_Qwen_2_5 import Qwen_Qwen_2_5

async def main():
    # Создаем экземпляр класса Qwen_Qwen_2_5
    provider = Qwen_Qwen_2_5()
    
    # Формируем список сообщений
    messages = [
        {"role": "user", "content": "Какой сегодня день?"},
    ]
    
    # Получаем асинхронный генератор
    async_generator = await provider.create_async_generator(
        model="qwen-qwen2-5", 
        messages=messages, 
    )
    
    # Итерируем по результатам генератора
    async for response in async_generator:
        print(response)

# Запуск асинхронной функции
asyncio.run(main()) 
```

В этом примере:
 - Создается экземпляр класса `Qwen_Qwen_2_5`
 - Формируется список сообщений с запросом "Какой сегодня день?".
 - Запускается асинхронный генератор с помощью метода `create_async_generator`.
 - В цикле `for` выводится каждый полученный фрагмент ответа, пока не будет получен полный ответ.