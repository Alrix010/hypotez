### Как использовать блок кода Cromicle
=========================================================================================

Описание
-------------------------
Этот код определяет класс `Cromicle`, который является асинхронным провайдером генерации текста. Он использует API сервиса `cromicle.top` для создания чат-ответов на основе предоставленных сообщений. Класс `Cromicle` отправляет POST-запросы к API, получает ответы в виде потока данных и возвращает их как асинхронный генератор.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули `aiohttp` для асинхронных HTTP-запросов, `hashlib` для создания хешей, а также типы `AsyncResult`, `Messages`, `Dict` и другие необходимые компоненты из `g4f`.
2. **Определение класса `Cromicle`**:
   - Устанавливается URL `https://cromicle.top` как базовый URL для API.
   - Указывается, что провайдер поддерживает модель `gpt-3.5-turbo`.
3. **Реализация метода `create_async_generator`**:
   - Создается асинхронная сессия `aiohttp.ClientSession` с заголовками, полученными из функции `_create_header`.
   - Выполняется POST-запрос к `f'{cls.url}/chat'` с использованием `session.post`. Прокси устанавливается через параметр `proxy`, а данные запроса формируются функцией `_create_payload` на основе форматированных сообщений.
   - Обрабатывается ответ от сервера:
     - `response.raise_for_status()` вызывает исключение, если HTTP-статус ответа указывает на ошибку.
     - Асинхронно итерируется по содержимому ответа `response.content.iter_any()`.
     - Декодируется каждый полученный чанк данных `stream.decode()` и возвращается как часть асинхронного генератора.
4. **Функция `_create_header`**:
   - Определяет заголовки для HTTP-запроса, включая `accept: '*/*'` и `content-type: 'application/json'`.
5. **Функция `_create_payload`**:
   - Формирует JSON-payload для POST-запроса, включая сообщение, токен и хеш сообщения.
   - Хеш вычисляется как SHA256 от конкатенации токена ('abc') и сообщения, закодированных в UTF-8.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.deprecated import Cromicle
import asyncio

async def main():
    messages = [{"role": "user", "content": "Hello, how are you?"}]
    
    async for message in Cromicle.create_async_generator(model="gpt-3.5-turbo", messages=messages):
        print(message, end="")

if __name__ == "__main__":
    asyncio.run(main())
```

В этом примере:
- Импортируется класс `Cromicle`.
- Определяется асинхронная функция `main`, которая создает список сообщений для отправки.
- Вызывается `Cromicle.create_async_generator` с указанием модели и сообщений.
- Асинхронно итерируется по ответам, возвращаемым генератором, и печатается каждый чанк ответа.