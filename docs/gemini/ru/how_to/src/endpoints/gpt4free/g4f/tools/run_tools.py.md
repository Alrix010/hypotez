## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный блок кода предоставляет набор инструментов для работы с различными типами запросов к моделям искусственного интеллекта. Он включает обработку поиска в интернете, продолжения разговора и использования данных из хранилища "Bucket".

Шаги выполнения
-------------------------
1. **Инициализация:** Импортируй необходимые библиотеки и модули.
2. **Обработка запросов к инструментам:** Используй `ToolHandler` для обработки запросов к инструментам. Он предоставляет методы для валидации аргументов и обработки каждого типа инструмента:
    - `process_search_tool`: Обрабатывает запросы к инструменту поиска в интернете.
    - `process_continue_tool`: Обрабатывает запросы к инструменту продолжения разговора.
    - `process_bucket_tool`: Обрабатывает запросы к инструменту использования данных из хранилища "Bucket".
3. **Обработка инструментов:** Используй `process_tools` для последовательной обработки всех запросов к инструментам в списке `tool_calls`.
4. **Управление API ключами:** Используй `AuthManager` для загрузки API ключей из конфигурационного файла.
5. **Обработка "мышления" модели:** Используй `ThinkingProcessor` для обработки "мышления" модели, выделяя фрагменты, где модель думает, и записывая время, затраченное на "размышление".
6. **Выполнение поиска в интернете:** Используй `perform_web_search` для выполнения поиска в интернете и обновления списка сообщений.
7. **Запуск инструментов асинхронно:** Используй `async_iter_run_tools` для асинхронного запуска инструментов, получая результаты по мере готовности.
8. **Запуск инструментов синхронно:** Используй `iter_run_tools` для синхронного запуска инструментов, получая результаты по мере готовности.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.tools.run_tools import ToolHandler, AuthManager, ThinkingProcessor, iter_run_tools

# Пример использования инструмента поиска:
tool_calls = [
    {
        "type": "function",
        "function": {
            "name": "search_tool",
            "arguments": {
                "query": "What is the capital of France?",
                "engine": "google" 
            }
        }
    }
]

# Пример использования инструмента продолжения разговора:
tool_calls = [
    {
        "type": "function",
        "function": {
            "name": "continue_tool"
        }
    }
]

# Пример использования инструмента использования данных из хранилища "Bucket":
tool_calls = [
    {
        "type": "function",
        "function": {
            "name": "bucket_tool"
        }
    }
]

# Пример использования функции iter_run_tools:
messages = [
    {"role": "user", "content": "What is the capital of France?"}
]

for result in iter_run_tools(
    iter_callback=provider.get_create_function,  # Функция, которая генерирует ответы
    model="gpt-3.5-turbo", 
    messages=messages, 
    provider="OpenaiAccount",  # Имя провайдера (например, OpenAI)
    tool_calls=tool_calls 
):
    print(result) 

# Вывод:
# {'role': 'assistant', 'content': 'The capital of France is Paris. [[Wikipedia]](https://en.wikipedia.org/wiki/Paris)'}
```

**Важно**:
- Замените `provider.get_create_function` на функцию, которая генерирует ответы от модели искусственного интеллекта.
- Замените `model` на имя модели, которую вы хотите использовать.
- Замените `provider` на имя провайдера (например, OpenAI).
- Замените `tool_calls` на список запросов к инструментам, которые вы хотите использовать.