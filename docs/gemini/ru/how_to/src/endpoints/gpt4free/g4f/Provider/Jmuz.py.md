### **Как использовать этот блок кода**
=========================================================================================

Описание
-------------------------
Этот код определяет класс `Jmuz`, который является подклассом `OpenaiTemplate`. `Jmuz` предоставляет интерфейс для взаимодействия с API, специфичным для Jmuz, и предназначен для генерации текста на основе предоставленных сообщений. Он содержит настройки для работы с API, такие как URL, API-ключ, и поддерживает потоковую передачу данных.

Шаги выполнения
-------------------------
1. **Инициализация класса `Jmuz`**:
   - Класс `Jmuz` наследуется от `OpenaiTemplate` и переопределяет некоторые атрибуты, такие как `url`, `api_base`, `api_key`, `working` и `supports_system_message`.
   - Определяются псевдонимы моделей в словаре `model_aliases`.
2. **Получение списка моделей**:
   - Метод `get_models` используется для получения списка доступных моделей. Если список моделей пуст, он заполняется путем вызова метода `get_models` из суперкласса `OpenaiTemplate` с использованием API-ключа и базового URL класса `Jmuz`.
3. **Создание асинхронного генератора**:
   - Метод `create_async_generator` является асинхронным генератором, который отправляет запросы к API и возвращает чанки данных.
   - Метод принимает параметры, такие как `model` (модель для использования), `messages` (список сообщений для отправки), `stream` (флаг, указывающий на потоковую передачу данных) и другие параметры.
   - Формируются заголовки запроса, включая `Authorization` с API-ключом, `Content-Type` и `user-agent`.
   - Вызывается метод `create_async_generator` из суперкласса `OpenaiTemplate` для получения чанков данных.
   - Чанки данных фильтруются и очищаются от нежелательных подстрок, таких как "Join for free" и "https://discord.gg/".
   - Если чанк является строкой, он добавляется в буфер, и после очистки буфер возвращается как результат генератора.
   - Если чанк не является строкой, он возвращается как есть.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.Jmuz import Jmuz
from src.endpoints.gpt4free.g4f.typing import Messages

async def generate_text(model: str, messages: Messages) -> str:
    """
    Генерирует текст с использованием модели Jmuz.

    Args:
        model (str): Имя модели для использования.
        messages (Messages): Список сообщений для отправки.

    Returns:
        str: Сгенерированный текст.
    """
    result_text = ""
    async for chunk in Jmuz.create_async_generator(model=model, messages=messages):
        result_text += chunk
    return result_text

# Пример использования
messages: Messages = [
    {"role": "user", "content": "Напиши короткий рассказ о приключениях."},
]
model = "gpt-4o"  # или другая доступная модель
import asyncio
async def main():
    text = await generate_text(model, messages)
    print(text)

if __name__ == "__main__":
    asyncio.run(main())