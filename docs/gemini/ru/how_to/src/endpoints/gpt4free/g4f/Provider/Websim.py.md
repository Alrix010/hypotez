## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода представляет собой класс `Websim`, реализующий асинхронный генератор для взаимодействия с API сервиса websim.ai. Класс предоставляет возможность отправлять текстовые и графические запросы к API, а также обрабатывать ответы в виде текста, изображений или потока данных.

Шаги выполнения
-------------------------
1. **Инициализация**: Создайте экземпляр класса `Websim`. 
2. **Выбор модели**: Укажите желаемую модель для взаимодействия с API, например, `gemini-1.5-pro` или `flux`.
3. **Формирование запроса**: Сформируйте запрос, используя метод `create_async_generator` и передайте необходимые параметры, такие как:
    - `messages`: список сообщений для отправки в чат.
    - `prompt`: текст подсказки для запроса.
    - `proxy`: прокси-сервер для соединения с API.
    - `aspect_ratio`: соотношение сторон для генерации изображений.
4. **Обработка ответа**: Получите результаты ответа с помощью `async for` цикла, который перебирает данные из `AsyncResult`.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.Websim import Websim

async def main():
    websim = Websim()
    messages = [
        {"role": "user", "content": "Привет, как дела?"},
        {"role": "assistant", "content": "Хорошо, а у тебя как?"}
    ]
    model = 'gemini-1.5-pro'

    async for response in websim.create_async_generator(model=model, messages=messages):
        print(f"Ответ: {response}")

if __name__ == "__main__":
    asyncio.run(main())
```

**Дополнительные замечания**:

- Класс поддерживает асинхронную обработку данных, что позволяет использовать его в приложениях с высоким уровнем параллелизма.
- `Websim` также предоставляет возможность работы с прокси-серверами для обхода сетевых ограничений.
- Класс использует `raise_for_status` для обработки ошибок при получении ответов от API.
- Для обработки графических запросов используется метод `_handle_image_request`, который формирует запрос к API с использованием `ClientSession` и возвращает `ImageResponse`.
- Метод `_handle_chat_request` обрабатывает текстовые запросы, отправляет их к API и возвращает текст ответа или поток данных.