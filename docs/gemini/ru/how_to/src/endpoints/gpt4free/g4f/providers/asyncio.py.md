### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода предоставляет набор утилит для работы с асинхронными операциями в Python, включая обработку асинхронных генераторов, и управление event loop. Он также включает в себя обход проблем, связанных с вложенными event loop и некорректной обработкой исключений в асинхронных генераторах.

Шаги выполнения
-------------------------
1. **Определение доступности библиотек**: Код проверяет, установлены ли библиотеки `nest_asyncio` и `uvloop`.
2. **Получение текущего event loop**: Функция `get_running_loop` пытается получить текущий event loop. Если он существует, проверяется, не является ли он экземпляром `uvloop.Loop`. Если loop не является экземпляром `uvloop.Loop` и не был пропатчен, применяются патчи `nest_asyncio` для поддержки вложенных event loop.
3. **Обработка асинхронных генераторов**: 
   - `await_callback`: Функция предназначена для корректного ожидания выполнения callback-функций.
   - `async_generator_to_list`: преобразует асинхронный генератор в список.
   - `to_sync_generator`: преобразует асинхронный генератор в синхронный генератор. Он запускает event loop, если он еще не запущен, и итерируется по асинхронному генератору, возвращая значения синхронно.
4. **Преобразование синхронного итератора в асинхронный**: Функция `to_async_iterator` преобразует синхронный итератор в асинхронный, что позволяет использовать его в асинхронном коде.

Пример использования
-------------------------

```python
import asyncio
from typing import AsyncIterator

from g4f.providers.asyncio import to_sync_generator, to_async_iterator

async def my_async_generator() -> AsyncIterator[int]:
    """Асинхронный генератор, возвращающий последовательность чисел."""
    for i in range(5):
        await asyncio.sleep(0.1)
        yield i

def use_sync_generator():
    """Использование синхронного генератора для получения данных из асинхронного."""
    for item in to_sync_generator(my_async_generator()):
        print(f"Синхронный генератор: {item}")

async def use_async_iterator():
    """Использование асинхронного итератора для перебора данных."""
    async for item in to_async_iterator([1, 2, 3]):
        print(f"Асинхронный итератор: {item}")

async def main():
    """Главная асинхронная функция для запуска примеров."""
    print("Использование to_sync_generator:")
    use_sync_generator()

    print("\nИспользование to_async_iterator:")
    await use_async_iterator()

if __name__ == "__main__":
    asyncio.run(main())