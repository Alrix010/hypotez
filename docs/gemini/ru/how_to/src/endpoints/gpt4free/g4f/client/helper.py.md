## Как использовать этот блок кода
=========================================================================================

### Описание
-------------------------
Данный блок кода предоставляет набор функций для обработки и фильтрации текста, в частности, для извлечения кода из Markdown-текста, фильтрации JSON-кода и поиска стоп-слов в тексте.

### Шаги выполнения
-------------------------
1. **Функция `filter_markdown`**:
    - Извлекает код из Markdown-текста, используя регулярное выражение для поиска блоков кода.
    - Принимает текст и необязательные параметры `allowd_types` (список разрешенных типов кода) и `default` (значение по умолчанию).
    - Проверяет, соответствует ли тип найденного кода (если есть) заданным `allowd_types`.
    - Возвращает содержимое блока кода, если он найден и соответствует типу, иначе возвращает значение по умолчанию.

2. **Функция `filter_json`**:
    - Извлекает JSON-код из Markdown-текста, используя функцию `filter_markdown` с заданными типами кода "json".
    - Возвращает содержимое найденного блока JSON-кода.

3. **Функция `find_stop`**:
    - Находит позицию первого вхождения стоп-слова в тексте.
    - Принимает список стоп-слов `stop`, текст `content` и необязательный фрагмент текста `chunk`.
    - Ищет первое вхождение любого слова из списка `stop` в тексте `content`.
    - Если стоп-слово найдено, обрезает текст `content` до позиции первого вхождения и возвращает позицию, обрезанный текст и обрезанный фрагмент (если он задан).
    - Если стоп-слово не найдено, возвращает `-1`, исходный текст и исходный фрагмент.

4. **Функция `filter_none`**:
    - Фильтрует словарь, удаляя пары ключ-значение, где значение равно `None`.
    - Возвращает новый словарь, содержащий только пары с ненулевыми значениями.

5. **Асинхронная функция `safe_aclose`**:
    - Безопасно закрывает асинхронный генератор, вызывая метод `aclose`, если он доступен.
    - Обрабатывает ошибки, возникающие при закрытии генератора, и выводит предупреждающее сообщение в лог.

### Пример использования
-------------------------
```python
from hypotez.src.endpoints.gpt4free.g4f.client.helper import filter_markdown, filter_json, find_stop

markdown_text = """
```python
print("Hello, world!")
```
"""

# Извлечение кода из Markdown-текста
python_code = filter_markdown(markdown_text, allowd_types=["python"])
print(f"Python код: {python_code}")

# Фильтрация JSON-кода
json_text = """
```json
{"name": "John Doe", "age": 30}
```
"""
json_data = filter_json(json_text)
print(f"JSON данные: {json_data}")

# Поиск стоп-слова
content = "This is a sample text. Stop here."
stop_words = ["Stop"]
first_stop_position, content_trimmed, _ = find_stop(stop_words, content)
print(f"Позиция первого стоп-слова: {first_stop_position}")
print(f"Обрезанный текст: {content_trimmed}")
```