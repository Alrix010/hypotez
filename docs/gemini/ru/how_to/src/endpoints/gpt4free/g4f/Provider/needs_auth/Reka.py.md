## Как использовать Reka Provider
=========================================================================================

Описание
-------------------------
Этот блок кода представляет собой реализацию класса `Reka`, который является провайдером для взаимодействия с API сервиса `Reka.ai`. Класс наследуется от базового класса `AbstractProvider` и предоставляет функции для создания завершений текста, загрузки изображений и получения токена доступа. 

Шаги выполнения
-------------------------
1. **Инициализация класса**: Создается экземпляр класса `Reka` с помощью `Reka()`.
2. **Проверка авторизации**: Класс проверяет наличие cookies, необходимых для авторизации на сайте Reka.ai. Если cookies отсутствуют, необходимо авторизоваться на сайте или предоставить токен доступа.
3. **Получение токена доступа**: Если cookies доступны, класс извлекает токен доступа (`appSession`) из cookies.
4. **Подготовка запроса**: Формируется JSON-объект с историей разговора (`conversation_history`), параметрами модели (`model_name`) и другими параметрами.
5. **Отправка запроса**: Отправляется POST-запрос на API Reka.ai с JSON-данными и cookies.
6. **Получение результата**: Обрабатываются ответы от API в виде потока текста и выдаются по частям.
7. **Загрузка изображения**: Если в запросе присутствует изображение, оно загружается на сервер Reka.ai.
8. **Получение URL изображения**: Получается URL загруженного изображения.


Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.needs_auth import Reka

# Инициализация провайдера
provider = Reka()

# Пример запроса с текстовым сообщением
messages = [
    {"role": "user", "content": "Привет!"},
]

# Создание завершения текста с помощью провайдера
for token in provider.create_completion(model="reka", messages=messages):
    print(token, end="")

# Пример запроса с изображением
image = "path/to/image.jpg"

messages = [
    {"role": "user", "content": "Что изображено на этой картинке?"},
]

# Создание завершения текста с изображением
for token in provider.create_completion(model="reka", messages=messages, image=image):
    print(token, end="")
```

### Дополнительные пояснения:

- **`create_completion()`**:  Эта функция создает завершение текста, используя API Reka.ai. Принимает параметры модели (`model`), историю разговора (`messages`), параметры потоковой передачи (`stream`), прокси (`proxy`), ключ API (`api_key`) и изображение (`image`).
- **`upload_image()`**:  Функция загружает изображение на сервер Reka.ai и возвращает URL изображения.
- **`get_access_token()`**:  Функция получает токен доступа из cookies.
- **`domain`**:  Домен Reka.ai.
- **`url`**:  Базовый URL API Reka.ai.
- **`working`**:  Флаг, указывающий, работает ли провайдер.
- **`needs_auth`**:  Флаг, указывающий, требуется ли авторизация для использования провайдера.
- **`supports_stream`**:  Флаг, указывающий, поддерживает ли провайдер потоковую передачу.
- **`default_vision_model`**:  Название модели по умолчанию для работы с изображениями.
- **`cookies`**:  Словарь с cookies для авторизации.
- **`proxy`**:  Прокси-сервер для отправки запросов.
- **`api_key`**:  Ключ API для авторизации.
- **`image`**:  Изображение в виде пути к файлу, URL или байтов.
- **`conversation_history`**:  Список сообщений в истории разговора.
- **`model_name`**:  Название используемой модели Reka.ai.

**Важно**: 
- Для использования этого провайдера необходимо получить cookies или токен доступа для авторизации на Reka.ai. 
- Обратите внимание, что некоторые параметры могут быть опциональными.