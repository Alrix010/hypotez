## Как использовать этот блок кода
=========================================================================================

### Описание
-------------------------
Этот блок кода реализует асинхронный генератор для взаимодействия с моделью Qwen-2.5-Max, доступной на платформе Hugging Face Spaces. Он отправляет запросы на API, получает ответы в формате потока данных (SSE) и преобразует их в текстовые фрагменты, которые затем передаются в качестве результата.

### Шаги выполнения
-------------------------
1. **Генерация уникального сессионного хэша**: 
    - Функция `generate_session_hash` создает уникальный хэш для текущей сессии. 
    - Хэш используется для идентификации запроса и обработки ответа.
2. **Подготовка заголовков и данных**:
    - Определяются заголовки для запросов `join` и `data`.
    -  Формируется сообщение с системным запросом и историей сообщений пользователя.
    - Создаётся объект `payload_join` с данными для запроса `join`.
3. **Отправка запроса `join`**:
    - С помощью `aiohttp.ClientSession` отправляется POST-запрос на API-endpoint `api_endpoint`. 
    - В ответе сервер возвращает `event_id`.
4. **Подготовка запроса `data`**:
    - Формируется URL-адрес для запроса `data`.
    - Задаются параметры и заголовки запроса.
5. **Получение и обработка данных**:
    - Отправляется GET-запрос на URL-адрес `url_data`.
    - Цикл обрабатывает данные потока (SSE), вызывая генератор для каждого фрагмента текста.
    - Проверяет наличие завершения генерации.
    - В случае завершения генерации выводит оставшийся фрагмент текста.
6. **Предоставление результата**:
    - Генератор выдает текстовые фрагменты по мере их получения.
    -  Обеспечивает потоковую передачу ответа, позволяя использовать генерацию текста в реальном времени.

### Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.hf_space.Qwen_Qwen_2_5_Max import Qwen_Qwen_2_5_Max

async def main():
    provider = Qwen_Qwen_2_5_Max()
    messages = [
        {"role": "user", "content": "Напиши краткое стихотворение про кошку."}
    ]
    async for response in provider.create_async_generator(model="qwen-2-5-max", messages=messages):
        print(response, end="")

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```