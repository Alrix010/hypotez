### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует асинхронный генератор для взаимодействия с моделью Qwen Qwen-2.5-Max через API HF Space. Он отправляет запросы к API, обрабатывает потоковые данные и возвращает сгенерированный текст.

Шаги выполнения
-------------------------
1. **Генерация уникального идентификатора сессии**:
   - Функция `generate_session_hash` генерирует уникальный идентификатор сессии, который используется для отслеживания запросов.
2. **Подготовка заголовков и полезной нагрузки для запроса `join`**:
   - Определяются заголовки (`headers_join`) для HTTP-запроса, включая `User-Agent`, `Accept`, `Referer` и другие.
   - Формируется полезная нагрузка (`payload_join`) с использованием предоставленных сообщений, включая системный запрос и пользовательские сообщения.
3. **Отправка запроса `join` для инициации сессии**:
   - Используется `aiohttp.ClientSession` для отправки POST-запроса к API (`cls.api_endpoint`) с заголовками и полезной нагрузкой.
   - Извлекается `event_id` из ответа.
4. **Подготовка заголовков и параметров для запроса потока данных**:
   - Определяются заголовки (`headers_data`) для запроса потоковых данных.
   - Устанавливаются параметры запроса (`params_data`), включая `session_hash`.
5. **Отправка запроса потока данных и обработка ответа**:
   - Отправляется GET-запрос к API (`url_data`) с заголовками и параметрами.
   - Читаются и декодируются строки из потока ответа.
   - Если строка начинается с `data: `, она обрабатывается как JSON.
6. **Обработка JSON-данных для генерации и завершения этапов**:
   - Если `msg` имеет значение `process_generating`, извлекаются сгенерированные фрагменты текста из `json_data['output']['data'][1]`.
   - Дубликаты и фрагменты, соответствующие шаблону `^\\[.*\\]$`, игнорируются.
   - Сгенерированные фрагменты добавляются к `full_response` и возвращаются как часть генератора.
   - Если `msg` имеет значение `process_completed`, извлекается окончательный ответ из `json_data['output']['data'][1][0][1]`.
   - Очищается окончательный ответ от повторяющихся частей и возвращается.
7. **Обработка ошибок JSON**:
   - Если возникает ошибка `json.JSONDecodeError`, она логируется с помощью `debug.log`.

Пример использования
-------------------------

```python
import asyncio
from src.endpoints.gpt4free.g4f.Provider.hf_space.Qwen_Qwen_2_5_Max import Qwen_Qwen_2_5_Max

async def main():
    messages = [
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Как дела?"}
    ]

    async for response in Qwen_Qwen_2_5_Max.create_async_generator(model="qwen-2-5-max", messages=messages):
        print(response, end="")

if __name__ == "__main__":
    asyncio.run(main())