### **Как использовать блок кода `G4F.create_async_generator`**

=========================================================================================

Описание
-------------------------
Данный блок кода предназначен для асинхронной генерации изображений с использованием различных моделей, предоставляемых фреймворком G4F (например, `flux`, `flux-dev` и другими). Он позволяет генерировать изображения на основе текстового запроса (`prompt`) с возможностью настройки параметров, таких как размеры изображения, seed для воспроизводимости и использования прокси.

Шаги выполнения
-------------------------
1. **Определение модели**:
   - Код проверяет, если запрошенная модель (`model`) относится к семейству `flux` (`flux`, `flux-dev`).
   - Если модель `flux`, то происходит делегирование вызова в `FluxDev.create_async_generator` для обработки запроса.

2. **Обработка моделей отличных от `flux`**:
   - Если модель не относится к `flux`, код проверяет, содержит ли название модели `cls.default_model`.
   - Если нет, то происходит вызов метода `create_async_generator` родительского класса (предположительно `DeepseekAI_JanusPro7b`).

3. **Подготовка параметров для генерации изображения**:
   - Если используется модель по умолчанию (`cls.default_model` содержится в названии модели):
     - Получает модель с помощью `cls.get_model(model)`.
     - Валидирует и корректирует ширину и высоту изображения, чтобы они были кратны 8 и не меньше 32.
     - Если `prompt` не предоставлен, формирует его на основе входящих сообщений (`messages`) с помощью `format_image_prompt(messages)`.
     - Если `seed` не предоставлен, генерирует случайное число.

4. **Формирование payload для запроса**:
   - Создает словарь `payload` с данными для запроса к API, включая `prompt`, `seed`, `width`, `height` и другие параметры.

5. **Выполнение асинхронного запроса к API**:
   - Использует `ClientSession` для выполнения асинхронного POST-запроса к `cls.url_flux` с сформированным `payload`.
   - Перед запросом, если `api_key` не предоставлен, получает его с использованием функции `get_zerogpu_token`.
   - Добавляет необходимые заголовки, включая `x-zerogpu-token` и `x-zerogpu-uuid`.
   - Отправляет запрос и обрабатывает ответ, извлекая URL сгенерированного изображения.

6. **Асинхронное ожидание и обработка результата**:
   - Создает асинхронную задачу (`task`) для генерации изображения.
   - Пока задача выполняется, генерирует сообщения о статусе (`Reasoning`) с указанием времени генерации.
   - После завершения задачи возвращает результат — объект `ImageResponse` с URL изображения и альтернативным текстом.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.hf_space.G4F import G4F
from src.typing import Message
import asyncio

async def main():
    model = "flux"  # Или другая доступная модель, например, "deepseekai"
    messages = [Message(role="user", content="A futuristic cityscape")]
    
    async for chunk in G4F.create_async_generator(model=model, messages=messages, width=512, height=512):
        print(chunk)  # Вывод статуса или результата генерации

asyncio.run(main())