Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет класс `FakeGpt`, который является асинхронным провайдером генерации текста, имитирующим GPT. Он использует API `chat-shared2.zhile.io` для генерации ответов на основе предоставленных сообщений. Класс поддерживает модель `gpt-3.5-turbo` и использует асинхронные запросы для взаимодействия с API.

Шаги выполнения
-------------------------
1. **Инициализация**:
   - Устанавливаются URL, поддержка `gpt-3.5-turbo`, статус работы и переменные для токена доступа и cookie jar.
2. **Создание асинхронного генератора**:
   - Метод `create_async_generator` создает асинхронный генератор, который отправляет запросы к API и возвращает сгенерированный текст.
   - Формируются заголовки запроса, включая User-Agent, Referer и другие необходимые параметры.
3. **Получение токена доступа**:
   - Если токен доступа отсутствует, код выполняет следующие действия:
     - Отправляет GET-запрос к `/api/loads` для получения списка токенов.
     - Выбирает случайный токен из списка.
     - Отправляет POST-запрос к `/auth/login` с выбранным токеном и случайным паролем сессии.
     - Отправляет GET-запрос к `/api/auth/session` для получения токена доступа.
     - Сохраняет токен доступа и cookie jar для последующих запросов.
4. **Формирование запроса**:
   - Формируются заголовки запроса, включая токен доступа.
   - Формируется тело запроса в формате JSON, включающее сообщения пользователя, идентификаторы и другие параметры.
5. **Отправка запроса и получение ответа**:
   - Отправляется POST-запрос к `/api/conversation` с сформированными заголовками и телом запроса.
   - Асинхронно читаются строки из ответа.
   - Каждая строка проверяется на наличие префикса `data: `.
   - Если строка содержит данные, она преобразуется из JSON.
   - Извлекается сгенерированный текст из поля `message.content.parts`.
   - Возвращается новая часть сгенерированного текста, отсутствующая в предыдущем сообщении.
6. **Обработка завершения**:
   - Если получен маркер `[DONE]`, генерация завершается.
   - Если не получено ни одного валидного сообщения, вызывается исключение `RuntimeError`.

Пример использования
-------------------------

```python
import asyncio
from src.endpoints.gpt4free.g4f.Provider.deprecated import FakeGpt
from src.typing import Message

async def main():
    messages: list[Message] = [{"role": "user", "content": "Привет, как дела?"}]
    async for response in FakeGpt.create_async_generator(model="gpt-3.5-turbo", messages=messages):
        print(response, end="")

if __name__ == "__main__":
    asyncio.run(main())