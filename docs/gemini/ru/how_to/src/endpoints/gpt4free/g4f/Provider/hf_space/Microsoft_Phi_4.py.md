## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода представляет собой класс `Microsoft_Phi_4`, который реализует асинхронный генератор для работы с моделью Microsoft Phi-4, доступной на платформе Hugging Face. 

Он обеспечивает следующие возможности:

- **Асинхронная генерация ответов**: Использует асинхронные методы для более быстрого и эффективного взаимодействия с моделью.
- **Поддержка мультимодальных запросов**:  Позволяет отправлять текстовые и мультимодальные (изображения, аудио) запросы.
- **Потоковая обработка ответов**:  Обрабатывает ответы модели в потоковом режиме, что позволяет получать части ответа по мере их формирования.
- **Сохранение контекста**:  Сохраняет и использует историю предыдущих взаимодействий для поддержания контекста в беседе.


Шаги выполнения
-------------------------
1. **Инициализация**:  Создается экземпляр класса `Microsoft_Phi_4` с помощью `provider = Microsoft_Phi_4()`.
2. **Подготовка данных**:  Подготавливаются запросы, включающие текстовые сообщения, мультимодальные данные (изображения) и, при необходимости, история предыдущих взаимодействий.
3. **Запуск генератора**:  Используется метод `async def create_async_generator` для создания асинхронного генератора, который будет генерировать ответы модели.
4. **Обработка ответов**:  Используется цикл `async for` для итерации по генератору и получения ответов модели в потоковом режиме.


Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.hf_space.Microsoft_Phi_4 import Microsoft_Phi_4
from hypotez.src.endpoints.gpt4free.g4f.Provider.base_provider import Messages
from hypotez.src.endpoints.gpt4free.g4f.Provider.response import JsonConversation

# Инициализация класса
provider = Microsoft_Phi_4()

# Подготовка данных
messages = Messages(
    [
        {"role": "user", "content": "Привет! Как дела?"},
        {"role": "assistant", "content": "Хорошо, а у тебя как?"},
    ]
)

# Запуск генератора 
async for response in provider.create_async_generator(messages=messages):
    print(response)

# Ожидаемый вывод
# > Хорошо, а у тебя как? 
```

**Важно**: 

- В данном коде реализована работа с API Hugging Face. Для корректной работы необходимо получить API ключ и UUID.
- Для запуска кода необходимо установить библиотеки `aiohttp`, `json`, `uuid`, а также `hypotez`.
- Для работы с изображениями необходимо использовать библиотеки для обработки изображений, например `pillow` или `opencv`.