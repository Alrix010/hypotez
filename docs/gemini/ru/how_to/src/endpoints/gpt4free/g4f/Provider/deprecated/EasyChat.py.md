### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода определяет класс `EasyChat`, который является провайдером для работы с API EasyChat. Он позволяет отправлять запросы к серверам EasyChat для получения ответов на основе предоставленных сообщений и параметров модели. Класс поддерживает стриминг ответов и использует GPT-3.5 Turbo.

Шаги выполнения
-------------------------
1. **Определение активных серверов**:
   - Создается список `active_servers`, содержащий URL активных серверов EasyChat.

2. **Выбор сервера**:
   - Функция выбирает случайный сервер из списка `active_servers` или использует предоставленный в `kwargs` параметр `active_server`.

3. **Формирование заголовков**:
   - Создается словарь `headers`, содержащий заголовки HTTP-запроса, необходимые для взаимодействия с API EasyChat. Заголовки включают информацию о типе контента, источнике запроса, User-Agent и другие параметры.

4. **Формирование JSON-данных**:
   - Создается словарь `json_data`, содержащий данные для отправки в запросе. Данные включают сообщения, параметры модели (температура, штрафы присутствия и частоты, top_p) и флаг стриминга.

5. **Создание сессии и получение Cookie**:
   - Инициализируется сессия `requests.Session()` для поддержания состояния между запросами.
   - Выполняется GET-запрос к выбранному серверу для получения и установки Cookie.

6. **Отправка запроса и обработка ответа**:
   - Выполняется POST-запрос к API EasyChat (`/api/openai/v1/chat/completions`) с использованием сформированных заголовков и JSON-данных.
   - Если запрос завершается с кодом, отличным от 200, вызывается исключение.
   - Если стриминг не используется:
     - Извлекаются данные JSON из ответа.
     - Извлекается и возвращается содержимое первого сообщения из списка `choices`.
     - Если в ответе нет `choices`, вызывается исключение.
   - Если стриминг используется:
     - Итерируется по строкам ответа.
     - Если строка содержит `content`, она декодируется и извлекается содержимое из JSON.
     - Возвращается извлеченное содержимое.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.deprecated import EasyChat

model = "gpt-3.5-turbo"
messages = [{"role": "user", "content": "Hello, how are you?"}]
stream = False

try:
    for response in EasyChat.create_completion(model=model, messages=messages, stream=stream):
        print(response)
except Exception as e:
    print(f"An error occurred: {e}")