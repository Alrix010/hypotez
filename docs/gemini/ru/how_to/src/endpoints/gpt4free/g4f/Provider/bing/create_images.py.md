## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Блок кода предоставляет функциональность для создания изображений с использованием сервиса Bing Image Creator. Он включает в себя:
- Создание сессии с необходимыми куки и заголовками.
- Отправку запроса на создание изображений с заданным текстовым описанием.
- Отслеживание статуса создания изображений.
- Извлечение ссылок на созданные изображения из HTML-контента.

Шаги выполнения
-------------------------
1. **Создание сессии:**
    - Создается новая сессия с использованием `aiohttp.ClientSession` с необходимыми куки, заголовками и прокси (при необходимости).
2. **Отправка запроса:**
    - Запрос отправляется на сервер Bing Image Creator с текстовым описанием изображения, закодированным в URL.
    - Отслеживается статус ответа:
        - Если статус 302 (перенаправление) - код переходит к этапу 4.
        - Если статус не 302 - функция генерирует ошибку.
3. **Отслеживание статуса создания:**
    - После перенаправления на URL, содержащий ID запроса, код периодически опрашивает сервер, чтобы проверить статус создания изображений.
    - Опрашивание продолжается до тех пор, пока не будет получен ответ с кодом 200 (успех) или пока не истечет таймаут.
4. **Извлечение ссылок на изображения:**
    - После успешного завершения создания изображений, HTML-код с результатами парсится с помощью `BeautifulSoup`.
    - Извлекаются ссылки на изображения из HTML-тегов `img` с соответствующим классом.
    - Функция возвращает список полученных ссылок.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.bing.create_images import create_images, create_session

async def main():
    # Загружаем куки
    with open('cookies.json', 'r') as f:
        cookies = json.load(f)
    # Создаем сессию с куки
    session = create_session(cookies)
    try:
        # Создаем изображения по запросу
        images_urls = await create_images(session, "A beautiful sunset over a lake")
        # Выводим ссылки на изображения
        print(images_urls)
    finally:
        await session.close()

asyncio.run(main())

```