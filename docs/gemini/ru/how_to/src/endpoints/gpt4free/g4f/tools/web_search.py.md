## Как использовать этот блок кода
=========================================================================================

### Описание
-------------------------
Данный блок кода реализует инструмент веб-поиска для использования в чат-боте, основанного на модели GPT. Он позволяет добавлять результаты веб-поиска к подсказке GPT, чтобы улучшить контекст и полноту ответа.

### Шаги выполнения
-------------------------
1. **Импорт библиотек**:  Код импортирует необходимые библиотеки, такие как `aiohttp` для асинхронных HTTP-запросов, `BeautifulSoup` для парсинга HTML, `duckduckgo_search` для поиска по DuckDuckGo и `spacy` для извлечения ключевых слов.
2. **Определение классов**: Классы `SearchResults` и `SearchResultEntry` представляют результаты поиска и отдельные записи в результатах соответственно.
3. **Функция `scrape_text`**:  Функция извлекает текст из HTML-страницы, используя правила для определения ключевых элементов, таких как заголовки, абзацы и изображения. Она также добавляет ссылки на исходные страницы к тексту.
4. **Функция `fetch_and_scrape`**: Функция асинхронно отправляет запрос на указанный URL, получает HTML-код и извлекает текст из него с помощью функции `scrape_text`. 
5. **Функция `search`**: Функция выполняет веб-поиск по заданному запросу с помощью DuckDuckGo, получая результаты поиска и извлекая текст из них.
6. **Функция `do_search`**: Функция принимает подсказку GPT, извлекает из нее запрос поиска и выполняет поиск с помощью `search`. Затем она добавляет полученные результаты поиска к подсказке GPT, обозначая ссылки на источники.
7. **Функция `get_search_message`**: Функция обертывает `do_search` для синхронного использования, возвращая подсказку с добавленными результатами поиска.
8. **Функция `spacy_get_keywords`**: Функция использует библиотеку `spacy` для извлечения ключевых слов из текста.

### Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.tools.web_search import get_search_message

# Пример запроса GPT
prompt = "Расскажи мне о истории создания компьютера."

# Добавляем результаты поиска
new_prompt = get_search_message(prompt)

# Передаем новую подсказку GPT для получения ответа
# ...
```

### Дополнительно
-------------------------
- Блок кода поддерживает кэширование результатов поиска для оптимизации времени запросов.
- Можно настроить параметры поиска, такие как количество результатов, максимальное количество слов в результатах и источник поиска.
- Функция `spacy_get_keywords` может быть использована для извлечения ключевых слов из текста, что может быть полезно для настройки запросов поиска.