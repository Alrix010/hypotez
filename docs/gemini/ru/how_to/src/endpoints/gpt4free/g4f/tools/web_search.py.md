### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код предоставляет функциональность для выполнения веб-поиска с использованием DuckDuckGo Search API, извлечения и очистки текста из веб-страниц, а также кэширования результатов поиска для повышения производительности. Он также включает возможность извлечения ключевых слов из текста с использованием spaCy.

Шаги выполнения
-------------------------
1. **Инициализация**:
   - Проверяется наличие необходимых библиотек (`duckduckgo-search`, `beautifulsoup4`, `spacy`). Если библиотеки отсутствуют, устанавливаются соответствующие флаги (`has_requirements`, `has_spacy`).
   - Определяется класс `SearchResults` для хранения результатов поиска, а также класс `SearchResultEntry` для представления отдельной записи результата поиска.

2. **Веб-поиск**:
   - Функция `search` выполняет поиск в DuckDuckGo с использованием предоставленного запроса (`query`).
   - Результаты поиска фильтруются и сохраняются в виде списка объектов `SearchResultEntry`.
   - Опционально извлекается текст с веб-страниц, используя асинхронные запросы и функцию `fetch_and_scrape`.

3. **Извлечение и очистка текста**:
   - Функция `scrape_text` извлекает текст из HTML-кода веб-страницы, используя `BeautifulSoup`.
   - Текст очищается от HTML-тегов и форматируется.
   - Функция `fetch_and_scrape` выполняет HTTP-запрос к веб-странице, извлекает HTML-код и очищает текст с использованием `scrape_text`.
   - Результаты кэшируются в файловой системе для повторного использования.

4. **Кэширование результатов поиска**:
   - Функция `do_search` выполняет поиск и кэширует результаты в файловой системе.
   - При повторном выполнении поиска с тем же запросом результаты извлекаются из кэша, если они доступны.

5. **Форматирование результатов**:
   - Функция `do_search` форматирует результаты поиска и объединяет их с инструкциями пользователя для создания нового запроса.

6. **Извлечение ключевых слов**:
   - Функция `spacy_get_keywords` извлекает ключевые слова из текста с использованием библиотеки `spaCy`.
   - Ключевые слова определяются на основе частей речи и именованных сущностей.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.tools.web_search import get_search_message

# Пример использования функции get_search_message
prompt = "Напиши отчет о последних новостях в мире технологий"
search_results = get_search_message(prompt)
print(search_results)