### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Данный код реализует асинхронный генератор для взаимодействия с API chatgpt.es. Он отправляет запросы к API, обходя защиту Cloudflare с использованием `curl_cffi`, извлекает `nonce` и `post_id` из HTML-кода главной страницы и формирует запрос для получения ответа от чат-бота.

Шаги выполнения
-------------------------
1. **Проверка зависимостей**:
   - Проверяется, установлен ли пакет `curl_cffi`. Если нет, вызывается исключение `MissingRequirementsError` с предложением установить его.

2. **Подготовка данных для запроса**:
   - Извлекается модель, если она передана, или используется модель по умолчанию.
   - Формируется промпт из сообщений и системного промпта.

3. **Создание сессии `curl_cffi`**:
   - Создается сессия `curl_cffi.requests.Session` для автоматического обхода Cloudflare.
   - Устанавливаются заголовки запроса, такие как `user-agent`, `referer`, `origin` и `content-type`.
   - Если передан `proxy`, он устанавливается для сессии.

4. **Извлечение `nonce` и `post_id`**:
   - Выполняется GET-запрос к главной странице `chatgpt.es` для получения HTML-кода.
   - Из HTML-кода извлекаются значения `nonce` и `post_id` с использованием регулярных выражений.

5. **Формирование данных для POST-запроса**:
   - Генерируется случайный `client_id`.
   - Формируются данные для POST-запроса, включающие `nonce`, `post_id`, URL, действие, сообщение, идентификаторы бота и клиента, а также историю чата в формате JSON.

6. **Выполнение POST-запроса**:
   - Выполняется POST-запрос к API `chatgpt.es` с использованием подготовленных данных.

7. **Обработка ответа**:
   - Проверяется статус код ответа. Если он не равен 200, вызывается исключение `ValueError`.
   - Извлекается JSON из ответа и проверяется наличие ключа `data`.
   - Если `data` содержит сообщение об ошибке "Du musst das Kästchen anklicken!", вызывается исключение `ValueError`.
   - Если все проверки пройдены, возвращается значение `data` как результат.

Пример использования
-------------------------

```python
import asyncio
from src.endpoints.gpt4free.g4f.Provider.ChatGptEs import ChatGptEs

async def main():
    messages = [
        {"role": "user", "content": "Hello, how are you?"}
    ]

    try:
        async for response in ChatGptEs.create_async_generator(model="gpt-4", messages=messages):
            print(response)
    except Exception as e:
        print(f"An error occurred: {e}")

if __name__ == "__main__":
    asyncio.run(main())