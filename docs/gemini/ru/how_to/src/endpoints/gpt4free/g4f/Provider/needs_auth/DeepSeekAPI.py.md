## Как использовать блок кода DeepSeekAPI
=========================================================================================

Описание
-------------------------
Блок кода определяет класс `DeepSeekAPI`, который представляет собой асинхронный провайдер для использования API DeepSeek. 
Он реализует интерфейс `AsyncAuthedProvider`, что означает, что он требует аутентификации перед отправкой запросов. 
Протокол аутентификации реализуется методом `on_auth_async`.

Шаги выполнения
-------------------------
1. **Инициализация**: При первом обращении к классу `DeepSeekAPI` метод `on_auth_async` запускает процесс аутентификации.
2. **Запрос на аутентификацию**:  Метод отправляет запрос на аутентификацию на сайт DeepSeek и ожидает, пока пользователь не выполнит вход.
3. **Получение токена доступа**: После успешной аутентификации метод извлекает токен доступа из локального хранилища браузера и сохраняет его в свойстве `_access_token`.
4. **Создание экземпляра API**:  После аутентификации класс создает экземпляр `DskAPI` с помощью полученного токена доступа.
5. **Создание сессии чата**: Если сессия чата не существует, метод создает новую сессию чата с помощью метода `create_chat_session` объекта `DskAPI`.
6. **Отправка запросов на завершение чата**:  Метод отправляет запросы на завершение чата (chat_completion) с использованием API DeepSeek. 
7. **Обработка ответов**:  Метод обрабатывает ответы API,  отделяя ответы с подсказками (thinking) от завершенных текстовых ответов и сообщений о завершении.
8. **Возврат результатов**: Метод возвращает асинхронный результат, представляющий собой поток текстовых ответов, подсказок и сообщений о завершении.

Пример использования
-------------------------

```python
from hypotez.src.endpoints.gpt4free.g4f.Provider.needs_auth.DeepSeekAPI import DeepSeekAPI

async def main():
    # Инициализируем провайдер
    provider = DeepSeekAPI()

    # Выполняем аутентификацию
    auth_result = await provider.on_auth_async() 

    # Создание сессии чата
    messages = [{"role": "user", "content": "Привет! Как дела?"}]
    conversation = await provider.create_authed(model="deepseek-v3", messages=messages, auth_result=auth_result)

    # Отправка запросов на завершение чата
    async for response in provider.chat_completion(model="deepseek-v3", messages=messages, conversation=conversation):
        print(response)

if __name__ == "__main__":
    asyncio.run(main())
```