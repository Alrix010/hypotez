Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода отвечает за запуск графического интерфейса (GUI) приложения g4f с использованием библиотеки webview. Он определяет параметры запуска, такие как режим отладки, порт HTTP, использование SSL и путь для хранения данных. Также определяет, откуда брать файлы интерфейса (из директории установки или из исходного кода).

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**:
   - Импортируются модули `sys`, `os.path`, `webview`, `platformdirs` (опционально), `gui_parser`, `JsApi`, `g4f.version` и `g4f.debug`.

2. **Определение функции `run_webview`**:
   - Функция `run_webview` принимает аргументы:
     - `debug` (bool): Режим отладки. По умолчанию `False`.
     - `http_port` (int): Порт HTTP для запуска webview. По умолчанию `None`.
     - `ssl` (bool): Использовать SSL. По умолчанию `True`.
     - `storage_path` (str): Путь для хранения данных. По умолчанию `None`.
     - `gui` (str): Указывает, какой GUI использовать. По умолчанию `None`.

3. **Определение директории ресурсов**:
   - Код проверяет, запущен ли скрипт как "frozen" (скомпилированный в исполняемый файл). Если да, то `dirname` устанавливается в директорию, где находится исполняемый файл (`sys._MEIPASS`).
   - Если скрипт запущен из исходного кода, то `dirname` устанавливается в директорию, где находится текущий файл (`__file__`).

4. **Настройка webview**:
   - Устанавливаются настройки `webview.settings`:
     - `OPEN_EXTERNAL_LINKS_IN_BROWSER` в `True`, чтобы внешние ссылки открывались в браузере.
     - `ALLOW_DOWNLOADS` в `True`, чтобы разрешить скачивание файлов.

5. **Создание окна webview**:
   - Функция `webview.create_window` создает окно с указанными параметрами:
     - Заголовок окна: `"g4f - {g4f.version.utils.current_version}"`.
     - Путь к HTML-файлу: `os.path.join(dirname, "client/index.html")`.
     - `text_select` в `True`, чтобы разрешить выделение текста.
     - `js_api` устанавливается в экземпляр класса `JsApi` для взаимодействия JavaScript с Python.

6. **Определение пути для хранения данных**:
   - Если модуль `platformdirs` доступен и `storage_path` не указан, то используется директория конфигурации пользователя (`user_config_dir("g4f-webview")`).

7. **Запуск webview**:
   - Функция `webview.start` запускает приложение webview с указанными параметрами:
     - `private_mode` в `False`, чтобы отключить приватный режим.
     - `storage_path` указывает путь для хранения данных.
     - `debug` включает режим отладки.
     - `http_port` задает порт HTTP.
     - `ssl` включает или отключает SSL.

8. **Обработка аргументов командной строки (в блоке `if __name__ == "__main__":`)**:
   - Создается парсер аргументов командной строки с помощью `gui_parser()`.
   - Аргументы парсятся с помощью `parser.parse_args()`.
   - Если указан аргумент `--debug`, то включается логирование отладки (`g4f.debug.logging = True`).
   - Вызывается функция `run_webview` с параметрами из аргументов командной строки.

Пример использования
-------------------------

```python
import g4f.debug
from g4f.gui.webview import run_webview
from g4f.gui.gui_parser import gui_parser

if __name__ == "__main__":
    parser = gui_parser()
    args = parser.parse_args(['--debug', '--port', '8080'])  # Пример аргументов
    if args.debug:
        g4f.debug.logging = True
    run_webview(args.debug, args.port, not args.debug)
```