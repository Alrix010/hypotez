### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код определяет класс `PollinationsAI`, который предоставляет интерфейс для взаимодействия с API Pollinations AI для генерации текста и изображений. Он поддерживает потоковую передачу (streaming) результатов и использует асинхронные запросы для неблокирующей работы. Класс позволяет генерировать изображения на основе текстовых подсказок, а также генерировать текст на основе предоставленных сообщений и медиафайлов.

Шаги выполнения
-------------------------
1. **Инициализация класса**:
   - Создается экземпляр класса `PollinationsAI`.
   - Определяются основные атрибуты класса, такие как `label`, `url`, `text_api_endpoint`, `image_api_endpoint` и списки поддерживаемых моделей.

2. **Получение списка моделей**:
   - Вызывается метод `get_models` для получения списка доступных моделей как для генерации текста, так и для генерации изображений.
   - Метод выполняет HTTP-запросы к API Pollinations AI для получения актуального списка моделей.
   - В случае ошибки загрузки моделей используются значения по умолчанию.

3. **Создание асинхронного генератора**:
   - Вызывается метод `create_async_generator` для создания асинхронного генератора, который будет возвращать результаты генерации текста или изображения.
   - В зависимости от указанной модели (`model`) и наличия медиафайлов выбирается соответствующий метод для генерации (`_generate_image` или `_generate_text`).

4. **Генерация изображений**:
   - Если выбрана модель для генерации изображений, вызывается метод `_generate_image`.
   - Формируется URL-запрос к API для генерации изображений на основе текстовой подсказки (`prompt`) и дополнительных параметров (соотношение сторон, размеры, seed и т.д.).
   - Выполняется асинхронный HTTP-запрос к API, и полученные URL-адреса изображений возвращаются через асинхронный генератор.

5. **Генерация текста**:
   - Если выбрана модель для генерации текста, вызывается метод `_generate_text`.
   - Формируется URL-запрос к API для генерации текста на основе списка сообщений (`messages`), медиафайлов (`media`) и дополнительных параметров (температура, top_p, частотные штрафы и т.д.).
   - Выполняется асинхронный HTTP-запрос к API, и полученные текстовые фрагменты возвращаются через асинхронный генератор.
   - Поддерживаются потоковая передача (`streaming`) результатов, а также обработка ответов в формате JSON.

Пример использования
-------------------------

```python
from src.endpoints.gpt4free.g4f.Provider.PollinationsAI import PollinationsAI
from src.endpoints.gpt4free.g4f.typing import Messages
import asyncio

async def main():
    # Пример использования для генерации текста
    messages: Messages = [{"role": "user", "content": "Напиши короткий рассказ о космосе."}]
    model = "openai"  # или другая текстовая модель из PollinationsAI.text_models

    generator = PollinationsAI.create_async_generator(model=model, messages=messages)
    async for chunk in await generator:
        print(chunk, end="")

    print()
    # Пример использования для генерации изображения
    messages: Messages = [{"role": "user", "content": "Летящий в космосе кот."}]
    model = "flux"  # или другая модель для генерации изображений из PollinationsAI.image_models

    generator = PollinationsAI.create_async_generator(model=model, messages=messages)
    async for chunk in await generator:
        print(chunk) # Вывод URL-адреса сгенерированного изображения
if __name__ == "__main__":
    asyncio.run(main())