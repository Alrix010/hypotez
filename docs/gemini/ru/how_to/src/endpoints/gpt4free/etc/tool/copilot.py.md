## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода представляет собой скрипт для автоматической проверки pull requests на GitHub с помощью модели GPT-4 от OpenAI. Он выполняет следующие действия:

1. Получает информацию о pull request, такую как номер, заголовок, описание и diff.
2. Создает prompt для модели GPT-4, включая контекст pull request, diff и указания по написанию комментариев.
3. Вызывает модель GPT-4 через g4f API для анализа diff и генерации комментариев.
4. Форматирует комментарии в соответствии с форматом GitHub и отправляет их в качестве ревью.

Шаги выполнения
-------------------------
1. **Инициализация**: 
    - Скрипт получает значения переменных окружения: GITHUB_TOKEN, GITHUB_REPOSITORY, G4F_PROVIDER, G4F_MODEL.
    - Создается объект GitHub для взаимодействия с API GitHub.
    - Считывается номер pull request из файла `pr_number`.
2. **Получение данных о pull request**:
    - С помощью объекта GitHub получен объект PullRequest, содержащий информацию о pull request.
    - Загружен diff с помощью функции `get_diff`.
3. **Анализ кода**:
    - Функция `analyze_code` анализирует diff и создает prompt для модели GPT-4.
    - Модель GPT-4 вызывается через `get_ai_response` для генерации комментариев.
4. **Создание комментариев**:
    - Комментарии форматируются в соответствии с форматом GitHub.
    - Если существуют существующие комментарии, используется функция `create_issue_comment` для создания нового комментария.
    - В противном случае используется функция `create_review` для создания ревью с комментариями.

Пример использования
-------------------------

```python
# Пример запуска скрипта
if __name__ == "__main__":
    main()
```

**Чтобы использовать этот код, вам необходимо:**

1. Настроить переменные окружения:
    - GITHUB_TOKEN: Токен доступа к GitHub.
    - GITHUB_REPOSITORY: Репозиторий, к которому относится pull request.
    - G4F_PROVIDER: Провайдер GPT-4 (например, "openai").
    - G4F_MODEL: Модель GPT-4 (например, "gpt-4").
2. Создать файл `pr_number` в той же директории, что и скрипт, и вписать в него номер pull request.
3. Запустить скрипт.

**Важно**: Этот скрипт предназначен для проверки pull requests на GitHub с помощью GPT-4. Он не подходит для других целей.