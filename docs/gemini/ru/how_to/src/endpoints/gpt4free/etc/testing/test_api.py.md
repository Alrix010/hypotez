### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код демонстрирует, как использовать API OpenAI для генерации текста с использованием модели `gpt-3.5-turbo` в режиме стриминга и без него. Он также показывает, как установить API-ключ и базовый URL, если это необходимо.

Шаги выполнения
-------------------------
1. **Импорт библиотеки `openai`**: Импортируется библиотека `openai`, необходимая для взаимодействия с API OpenAI.
2. **Установка API-ключа**: Устанавливается API-ключ OpenAI. Если используются embeddings Hugging Face, то необходимо указать токен Hugging Face в качестве API-ключа.
3. **Установка базового URL (опционально)**: Устанавливается базовый URL API, если необходимо, например, для локальной разработки.
4. **Вызов API ChatCompletion.create()**: Вызывается метод `openai.ChatCompletion.create()` для генерации текста. Указываются следующие параметры:
    - `model`: Имя модели, используемой для генерации текста (`gpt-3.5-turbo`).
    - `messages`: Список сообщений, содержащих запрос пользователя. В данном случае, это запрос на написание стихотворения о дереве.
    - `stream`: Указывает, следует ли использовать режим стриминга.
5. **Обработка ответа**:
    - Если `response` является словарем, то это означает, что режим стриминга не используется. В этом случае, извлекается содержимое сгенерированного сообщения из `response.choices[0].message.content` и выводится на экран.
    - Если `response` не является словарем, то это означает, что используется режим стриминга. В этом случае, происходит итерация по токенам в `response`, и извлекается содержимое каждого токена из `token["choices"][0]["delta"].get("content")`. Содержимое каждого токена выводится на экран.

Пример использования
-------------------------

```python
                import openai

# Устанавливает ваш Hugging Face token в качестве API-ключа, если вы используете embeddings
# Если вы не используете embeddings, оставьте его пустым
openai.api_key = "YOUR_HUGGING_FACE_TOKEN"  # Замените на ваш фактический токен

# Устанавливает базовый URL API, если это необходимо, например, для локальной среды разработки
openai.api_base = "http://localhost:1337/v1"

def main():
    response = openai.ChatCompletion.create(
        model="gpt-3.5-turbo",
        messages=[{"role": "user", "content": "write a poem about a tree"}],
        stream=True,
    )
    if isinstance(response, dict):
        # Не стриминг
        print(response.choices[0].message.content)
    else:
        # Стриминг
        for token in response:
            content = token["choices"][0]["delta"].get("content")
            if content is not None:
                print(content, end="", flush=True)

if __name__ == "__main__":
    main()