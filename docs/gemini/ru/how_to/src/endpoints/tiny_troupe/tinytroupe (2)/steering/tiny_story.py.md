### Как использовать класс `TinyStory`
=========================================================================================

Описание
-------------------------
Класс `TinyStory` предназначен для создания и развития истории в контексте симуляции `TinyTroupe`. Он позволяет сгенерировать начало истории и продолжить её, основываясь на взаимодействиях агентов или изменениях в окружающей среде. Класс использует OpenAI для генерации текста истории, учитывая заданные параметры и контекст симуляции.

Шаги выполнения
-------------------------
1. **Инициализация класса `TinyStory`**:
   - Создается экземпляр класса `TinyStory` с указанием либо окружения (`environment`), либо агента (`agent`), вокруг которого будет строиться история.
   - Задаются цели (`purpose`) и начальный контекст (`context`) истории.
   - Определяется, какое количество первых (`first_n`) и последних (`last_n`) взаимодействий будет учтено в истории, а также нужно ли включать информацию об опущенных взаимодействиях (`include_omission_info`).

2. **Генерация начала истории**:
   - Вызывается метод `start_story` с указанием дополнительных требований к истории (`requirements`), количества слов (`number_of_words`) и необходимости включения сюжетного поворота (`include_plot_twist`).
   - Метод `start_story` формирует запросы к OpenAI, используя шаблоны сообщений и текущий контекст симуляции.
   - OpenAI генерирует начало истории, которое добавляется к текущему контексту истории (`current_story`).

3. **Продолжение истории**:
   - Вызывается метод `continue_story` с аналогичными параметрами, как и `start_story`.
   - Метод `continue_story` формирует запросы к OpenAI для генерации продолжения истории, основываясь на текущем контексте и новых требованиях.
   - OpenAI генерирует продолжение истории, которое добавляется к текущему контексту истории (`current_story`).

4. **Получение текущей истории**:
   - Метод `_current_story` используется для получения текущего состояния истории, включая информацию о взаимодействиях агентов или изменениях в окружающей среде.
   - Этот метод форматирует информацию о взаимодействиях и добавляет её к текущему контексту истории.

Пример использования
-------------------------

```python
from tinytroupe.environment import TinyWorld
from tinytroupe.agent import TinyPerson
from tinytroupe.steering.tiny_story import TinyStory

# Пример создания окружения и агента (предположим, они уже созданы)
environment = TinyWorld()
agent = TinyPerson()

# Инициализация TinyStory с окружением
story_env = TinyStory(environment=environment, purpose="Рассказать о жизни в городе.")

# Инициализация TinyStory с агентом
story_agent = TinyStory(agent=agent, purpose="Раскрыть характер персонажа.")

# Начало истории
start = story_env.start_story(requirements="Начать с описания города.", number_of_words=150)
print(f"Начало истории об окружении: {start}")

# Продолжение истории
continuation = story_agent.continue_story(requirements="Пусть персонаж встретит друга.", number_of_words=120)
print(f"Продолжение истории об агенте: {continuation}")

# Получение текущей истории
current_story = story_env._current_story()
print(f"Текущая история: {current_story}")