### **Как использовать этот блок кода**
=========================================================================================

Описание
-------------------------
Этот блок кода содержит утилиты для взаимодействия с API OpenAI и Azure OpenAI. Он включает в себя классы для управления запросами к моделям, обработки ответов и кэширования результатов. Также здесь определены вспомогательные функции для преобразования типов данных и подсчета токенов.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули, такие как `os`, `openai`, `json`, `pickle`, `logging`, `configparser`, `pydantic`, `typing` и `tiktoken`.
2. **Чтение конфигурационного файла**: Считываются параметры конфигурации из файла с помощью `utils.read_config_file()`.
3. **Определение значений параметров по умолчанию**: Определяются значения параметров по умолчанию для модели, такие как `model`, `max_tokens`, `temperature` и т. д., из конфигурационного файла.
4. **Создание класса `LLMRequest`**: Создается класс `LLMRequest`, который представляет запрос к языковой модели (LLM). Этот класс включает параметры для указания системных и пользовательских шаблонов или подсказок, а также параметры модели.
5. **Инициализация класса `LLMRequest`**: Инициализируется экземпляр класса `LLMRequest` с указанием имени системного шаблона, имени пользовательского шаблона и других параметров модели.
6. **Вызов метода `call` класса `LLMRequest`**: Вызывается метод `call` класса `LLMRequest` для отправки запроса в LLM и получения ответа.
7. **Создание класса `OpenAIClient`**: Создается класс `OpenAIClient` для взаимодействия с API OpenAI. Он включает методы для отправки сообщений, получения ответов и кэширования API-вызовов.
8. **Инициализация класса `OpenAIClient`**: Инициализируется экземпляр класса `OpenAIClient` с указанием параметров кэширования.
9. **Вызов метода `send_message` класса `OpenAIClient`**: Вызывается метод `send_message` класса `OpenAIClient` для отправки сообщения в API OpenAI и получения ответа.
10. **Регистрация клиентов**: Регистрируются клиенты для OpenAI и Azure с помощью функции `register_client`.
11. **Получение клиента**: Функция `client()` используется для получения клиента для настроенного типа API.
12. **Принудительное указание типа API**: Функция `force_api_type()` используется для принудительного указания типа API.
13. **Принудительное указание кэша API**: Функция `force_api_cache()` используется для принудительного указания конфигурации кэша API.

Пример использования
-------------------------

```python
    from tinytroupe.openai_utils import LLMRequest

    # Создание экземпляра класса LLMRequest с использованием шаблонов
    llm_request = LLMRequest(
        system_template_name="system_template",
        user_template_name="user_template",
        output_type=str,
        model="gpt-4o",
        max_tokens=1024,
        temperature=0.7
    )

    # Вызов LLM с конфигурациями рендеринга
    response = llm_request(rendering_configs={"param1": "value1", "param2": "value2"})

    if response:
        print(f"LLM Response: {response}")
    else:
        print("Failed to get response from LLM.")