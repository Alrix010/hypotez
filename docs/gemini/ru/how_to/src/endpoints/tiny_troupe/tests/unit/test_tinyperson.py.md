### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода содержит набор тестов для проверки различных аспектов поведения агентов, созданных с использованием библиотеки `tinytroupe`. Он проверяет, как агенты реагируют на различные стимулы и действия, такие как прослушивание сообщений, определение значений, общение с другими агентами, восприятие визуальных стимулов, размышления, интернализацию целей, перемещение в новые локации и изменение контекста.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули `pytest`, `logging`, `sys`, а также модули для создания агентов (`create_oscar_the_architect`, `create_lisa_the_data_scientist`) и вспомогательные функции для тестирования (`contains_action_type`, `terminates_with_action_type` и др.).
2. **Настройка пути**: Модифицируется `sys.path` для корректного импорта модулей из родительских директорий.
3. **Определение тестовых функций**: Определяются функции для тестирования различных аспектов поведения агентов:
    - `test_act`: Проверяет, что агент выполняет действия в ответ на сообщение, и что среди действий есть как минимум одно действие типа "TALK" и завершающее действие "DONE".
    - `test_listen`: Проверяет, что агент слушает сообщение и обновляет свою память.
    - `test_define`: Проверяет, что агент может определять новые значения и что это отражается в его конфигурации и подсказках.
    - `test_define_several`: Проверяет, что агент может определять несколько значений для группы.
    - `test_socialize`: Проверяет, что агент может общаться с другим агентом и упоминать его имя.
    - `test_see`: Проверяет, что агент реагирует на визуальный стимул.
    - `test_think`: Проверяет, что агент реагирует на размышления.
    - `test_internalize_goal`: Проверяет, что агент реагирует на интернализацию цели.
    - `test_move_to`: Проверяет, что агент может перемещаться в новую локацию и изменять контекст.
    - `test_change_context`: Проверяет, что агент может изменять контекст.
    - `test_save_specification`: Проверяет, что агент может сохранять свою спецификацию в файл и загружать ее обратно.
    - `test_programmatic_definitions`: Проверяет программные определения для агентов.
4. **Использование агентов**: В каждой тестовой функции создаются экземпляры агентов (`create_oscar_the_architect`, `create_lisa_the_data_scientist`) и выполняются различные действия для проверки их поведения.
5. **Выполнение проверок**: В каждой тестовой функции используются операторы `assert` для проверки ожидаемого поведения агентов.

Пример использования
-------------------------

```python
    def test_act(setup):
        # Проверяет, что агент выполняет действия в ответ на сообщение
        for agent in [create_oscar_the_architect(), create_lisa_the_data_scientist()]:
            actions = agent.listen_and_act("Tell me a bit about your life.", return_actions=True)
            logger.info(agent.pp_current_interactions())
            assert len(actions) >= 1, f"{agent.name} должен иметь как минимум одно действие для выполнения (даже если это просто DONE)."
            assert contains_action_type(actions, "TALK"), f"{agent.name} должен иметь как минимум одно действие TALK для выполнения, так как мы попросили его сделать это."
            assert terminates_with_action_type(actions, "DONE"), f"{agent.name} всегда должен завершаться действием DONE."
```
```python
def test_internalize_goal(setup):
    # Проверяет, что интернализация цели работает ожидаемым образом
    for agent in [create_oscar_the_architect(), create_lisa_the_data_scientist()]:
        agent.internalize_goal("I want to compose in my head a wonderful poem about how cats are glorious creatures.")
        actions = agent.act(return_actions=True)
        assert len(actions) >= 1, f"{agent.name} должен иметь как минимум одно действие для выполнения."
        assert contains_action_type(actions, "THINK"), f"{agent.name} должен иметь как минимум одно действие THINK для выполнения, так как он интернализовал цель."
        assert contains_action_content(actions, "cats"), f"{agent.name} должен упоминать кошек в действии THINK, так как он интернализовал цель о них."