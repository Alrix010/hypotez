## \file hypotez/src/logger/README.MD
# -*- coding: utf-8 -*-
#! .pyenv/bin/python3

"""
.. module:: src.logger
"""

### Документация для модуля `src.logger`

Модуль `src.logger` предоставляет гибкую систему логирования, поддерживающую логирование в консоль, файлы и JSON. Он использует паттерн проектирования Singleton, чтобы гарантировать использование только одного экземпляра логгера во всем приложении. Логгер поддерживает различные уровни логирования (например, `INFO`, `ERROR`, `DEBUG`) и включает цветной вывод для консольных логов. Вы также можете настраивать форматы вывода логов и управлять логированием в разные файлы.

---

### Классы:
- **SingletonMeta**: Метакласс, реализующий паттерн проектирования Singleton для логгера.
- **JsonFormatter**: Пользовательский форматтер, выводящий логи в формате JSON.
- **Logger**: Основной класс логгера, поддерживающий логирование в консоль, файлы и JSON.

---

### Функции:

#### `__init__`
Инициализирует экземпляр Logger с плейсхолдерами для различных типов логгеров (консольный, файловый и JSON).

#### `_configure_logger(name: str, log_path: str, level: Optional[int] = logging.DEBUG, formatter: Optional[logging.Formatter] = None, mode: Optional[str] = 'a') -> logging.Logger`
Конфигурирует и возвращает экземпляр логгера.

**Параметры:**
- `name`: Имя логгера.
- `log_path`: Путь к файлу логов.
- `level`: Уровень логирования, например, `logging.DEBUG`. По умолчанию `logging.DEBUG`.
- `formatter`: Пользовательский форматтер (опционально).
- `mode`: Режим файла, например, `'a'` для добавления (по умолчанию).

**Возвращает**: Сконфигурированный экземпляр `logging.Logger`.

#### `initialize_loggers(info_log_path: Optional[str] = '', debug_log_path: Optional[str] = '', errors_log_path: Optional[str] = '', json_log_path: Optional[str] = '')`
Инициализирует логгеры для консольного и файлового логирования (info, debug, error и JSON).

**Параметры:**
- `info_log_path`: Путь к файлу info-логов (опционально).
- `debug_log_path`: Путь к файлу debug-логов (опционально).
- `errors_log_path`: Путь к файлу error-логов (опционально).
- `json_log_path`: Путь к файлу JSON-логов (опционально).

#### `log(level, message, ex=None, exc_info=False, color=None)`
Логирует сообщение на указанном уровне (например, `INFO`, `DEBUG`, `ERROR`) с опциональным исключением и цветовым форматированием.

**Параметры:**
- `level`: Уровень логирования (например, `logging.INFO`, `logging.DEBUG`).
- `message`: Логируемое сообщение.
- `ex`: Опциональное исключение для логирования.
- `exc_info`: Следует ли включать информацию об исключении (по умолчанию `False`).
- `color`: Кортеж с цветами текста и фона для вывода в консоль (опционально).

#### `info(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
Логирует информационное сообщение.

**Параметры:**
- `message`: Информационное сообщение для логирования.
- `ex`: Опциональное исключение для логирования.
- `exc_info`: Следует ли включать информацию об исключении (по умолчанию `False`).
- `colors`: Кортеж значений цвета для сообщения (опционально).

#### `success(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
Логирует сообщение об успехе.

**Параметры**:
- Те же, что и у `info`.

#### `warning(message, ex=None, exc_info=False, colors: Optional[tuple] = None)`
Логирует предупреждающее сообщение.

**Параметры**:
- Те же, что и у `info`.

#### `debug(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`
Логирует отладочное сообщение.

**Параметры**:
- Те же, что и у `info`.

#### `error(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`
Логирует сообщение об ошибке.

**Параметры**:
- Те же, что и у `info`.

#### `critical(message, ex=None, exc_info=True, colors: Optional[tuple] = None)`
Логирует критическое сообщение.

**Параметры**:
- Те же, что и у `info`.

---

### Параметры для Logger
Класс `Logger` принимает несколько опциональных параметров для настройки поведения логирования.

- **Level**: Управляет серьезностью регистрируемых логов. Общие уровни включают:
  - `logging.DEBUG`: Подробная информация, полезная для диагностики проблем.
  - `logging.INFO`: Общая информация, например, об успешных операциях.
  - `logging.WARNING`: Предупреждения, которые не обязательно требуют немедленных действий.
  - `logging.ERROR`: Сообщения об ошибках.
  - `logging.CRITICAL`: Критические ошибки, требующие немедленного внимания.

- **Formatter**: Определяет формат сообщений логов. По умолчанию сообщения форматируются как `'%(asctime)s - %(levelname)s - %(message)s'`. Вы можете предоставить пользовательский форматтер для различных форматов, таких как JSON.

- **Color**: Цвета для сообщений логов в консоли. Цвета указываются в виде кортежа с двумя элементами:
  - **Цвет текста**: Указывает цвет текста (например, `colorama.Fore.RED`).
  - **Цвет фона**: Указывает цвет фона (например, `colorama.Back.WHITE`).

Цвет можно настроить для разных уровней логов (например, зеленый для info, красный для ошибок и т. д.).

---

### Конфигурация файлового логирования (`config`)
Чтобы логировать сообщения в файл, вы можете указать пути к файлам в конфигурации.

```python
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
```

Пути к файлам, указанные в `config`, используются для записи логов в соответствующие файлы для каждого уровня логирования.

---

### Пример использования

#### 1. Инициализация Logger:
```python
logger: Logger = Logger()
config = {
    'info_log_path': 'logs/info.log',
    'debug_log_path': 'logs/debug.log',
    'errors_log_path': 'logs/errors.log',
    'json_log_path': 'logs/log.json'
}
logger.initialize_loggers(**config)
```

#### 2. Логирование сообщений на разных уровнях:
```python
logger.info('Это информационное сообщение')
logger.success('Это сообщение об успехе')
logger.warning('Это предупреждающее сообщение')
logger.debug('Это отладочное сообщение')
logger.error('Это сообщение об ошибке')
logger.critical('Это критическое сообщение')
```

#### 3. Настройка цветов:
```python
logger.info('Это сообщение будет зеленым', colors=(colorama.Fore.GREEN, colorama.Back.BLACK))
logger.error('Это сообщение будет иметь красный фон', colors=(colorama.Fore.WHITE, colorama.Back.RED))
```

---

Этот модуль предоставляет комплексную и гибкую систему логирования для Python-приложений. Вы можете настраивать логирование в консоль и файлы с разными форматами и цветами, управлять уровнями логирования и корректно обрабатывать исключения. Конфигурация для файлового логирования хранится в словаре `config`, что позволяет легко настраивать параметры.