### **Как использовать этот блок кода**

=========================================================================================

Описание
-------------------------
Этот блок кода реализует процесс авторизации на сайте Amazon с использованием веб-драйвера. Функция `login` принимает объект `Supplier` в качестве аргумента, который содержит необходимые локаторы элементов и настройки драйвера.

Шаги выполнения
-------------------------
1. **Инициализация**:
   - Функция `login(s)` принимает объект `Supplier` (`s`) в качестве входных данных. Этот объект содержит информацию о локаторах элементов на странице и экземпляре веб-драйвера.

2. **Подготовка драйвера**:
   - Извлекает локаторы для процесса авторизации из `s.locators_store['login']` и присваивает их переменной `_l`.
   - Получает экземпляр веб-драйвера из `s.driver` и присваивает его переменной `_d`.
   - Переводит фокус на окно драйвера с помощью `_d.window_focus()`.
   - Открывает главную страницу Amazon (`https://amazon.com/`) с помощью `_d.get_url()`.

3. **Клик по кнопке открытия формы логина**:
   - Функция пытается кликнуть на кнопку, которая открывает форму для ввода логина, используя локатор `_l['open_login_inputs']`.
   - Если первая попытка не удалась, происходит обновление страницы (`_d.refresh()`), повторный перевод фокуса на окно (`_d.window_focus()`) и повторная попытка клика.
   - Если и вторая попытка не удалась, в лог добавляется отладочное сообщение о необходимости поиска кнопки логина в другом месте.

4. **Ввод данных для логина**:
   - Используя метод `execute_locator`, функция вводит email, пароль, кликает на чекбокс "оставаться в системе" и на кнопку подтверждения логина.
   - Если не удалось ввести email, функция завершается.

5. **Обработка результата**:
   - После ввода данных и нажатия кнопки входа, функция проверяет текущий URL. Если URL равен `https://www.amazon.com/ap/signin`, это свидетельствует о неудачной попытке входа, и в лог записывается сообщение об ошибке.
   - Если URL отличается, функция предполагает, что вход выполнен успешно, и записывает информационное сообщение в лог.

6. **Завершение**:
   - Устанавливает максимальный размер окна браузера (`_d.maximize_window()`).
   - Возвращает `True`, если процесс логина завершился успешно.

Пример использования
-------------------------

```python
from src.suppliers.suppliers_list.amazon.login import login
from src.webdriver import Driver
from src.suppliers import Supplier

# Пример использования функции login
def test_amazon_login():
    # Создаем экземпляр драйвера (например, Firefox)
    driver = Driver(browser_name='firefox')

    # Создаем локаторы для элементов страницы Amazon
    locators = {
        'login': {
            'open_login_inputs': {'by': 'xpath', 'selector': '//a[@id="nav-link-accountList"]', 'event': 'click()'},
            'email_input': {'by': 'xpath', 'selector': '//input[@id="ap_email"]', 'event': 'send_keys("test@example.com")'},
            'continue_button': {'by': 'xpath', 'selector': '//input[@id="continue"]', 'event': 'click()'},
            'password_input': {'by': 'xpath', 'selector': '//input[@id="ap_password"]', 'event': 'send_keys("password")', 'timeout': 5},
            'keep_signed_in_checkbox': {'by': 'xpath', 'selector': '//input[@name="rememberMe"]', 'event': 'click()'},
            'success_login_button': {'by': 'xpath', 'selector': '//input[@id="signInSubmit"]', 'event': 'click()'}
        }
    }

    # Создаем объект Supplier с необходимыми данными
    supplier = Supplier(
        name='Amazon',
        url='https://amazon.com/',
        locators_store=locators,
        driver=driver
    )

    # Вызываем функцию login для авторизации
    if login(supplier):
        print("Login successful!")
    else:
        print("Login failed.")

    # Закрываем драйвер после завершения
    driver.close()

# Запускаем пример
if __name__ == "__main__":
    test_amazon_login()