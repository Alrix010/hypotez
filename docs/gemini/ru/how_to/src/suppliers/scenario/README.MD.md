## Как использовать этот блок кода
=========================================================================================

### Описание
-------------------------
Модуль `src.scenario`  автоматизирует взаимодействие с поставщиками на основе сценариев, описанных в JSON-файлах. Он  оптимизирует процесс извлечения и обработки данных о товарах с сайтов поставщиков, синхронизируя информацию с базой данных (например, PrestaShop).  Модуль включает в себя функции для чтения сценариев,  взаимодействия с веб-сайтами, обработки данных, ведения журнала выполнения и  организации всего рабочего процесса.

### Шаги выполнения
-------------------------
1. **Чтение сценариев**: Загрузка сценариев из JSON-файлов, которые содержат  информацию о товарах и  URL-адресах на сайте поставщика.
2. **Взаимодействие с веб-сайтами**: Обработка URL-адресов из сценариев для  извлечения данных о товарах.
3. **Обработка данных**: Преобразование извлеченных данных в  формат, подходящий для базы данных, и сохранение данных.
4. **Ведение журнала выполнения**:  Сохранение журналов с  деталями выполнения сценария и  результатами для отслеживания прогресса и  идентификации ошибок.

### Пример использования
-------------------------

```python
# Импорт модуля scenario
from src.scenario import run_scenario_files

# Настройка параметров
settings = {  #  Вставьте сюда  конфигурацию соединения с базой данных и другие настройки
    #  ...
}

# Список сценариев
scenario_files_list = [
    "path/to/scenario_file1.json",
    "path/to/scenario_file2.json"
]

# Запуск сценариев
run_scenario_files(settings, scenario_files_list)
```

###  Пошаговое описание функций модуля
-------------------------

#### `run_scenario_files(s, scenario_files_list)`

**Описание**:  Принимает список сценариев и  последовательно запускает их, вызывая функцию `run_scenario_file` для каждого файла.

**Параметры**:
- `s`:  Объект настроек (например, для соединения с базой данных).
- `scenario_files_list` (list):  Список путей к  файлам сценариев.

**Возвращаемое значение**:
- None

**Исключения**:
- `FileNotFoundError`:  Если файл сценария не найден.
- `JSONDecodeError`:  Если файл сценария содержит неверный JSON.

#### `run_scenario_file(s, scenario_file)`

**Описание**: Загружает сценарии из указанного файла и  вызывает `run_scenario` для каждого сценария в файле.

**Параметры**:
- `s`:  Объект настроек.
- `scenario_file` (str):  Путь к  файлу сценария.

**Возвращаемое значение**:
- None

**Исключения**:
- `FileNotFoundError`:  Если файл сценария не найден.
- `JSONDecodeError`:  Если файл сценария содержит неверный JSON.
- `Exception`:  Для любых других проблем во время выполнения сценария.

#### `run_scenario(s, scenario)`

**Описание**: Обрабатывает отдельный сценарий, переходя по URL,  извлекая данные о товарах и  сохраняя их в  базу данных.

**Параметры**:
- `s`:  Объект настроек.
- `scenario` (dict):  Словарь, содержащий сценарий (например, с URL и  категориями).

**Возвращаемое значение**:
- None

**Исключения**:
- `requests.exceptions.RequestException`:  Если возникли проблемы с  запросом к  сайту.
- `Exception`:  Для любых других проблем во время обработки сценария.

#### `dump_journal(s, journal)`

**Описание**:  Сохраняет журнал выполнения в  файл для последующего анализа.

**Параметры**:
- `s`:  Объект настроек.
- `journal` (list):  Список записей журнала выполнения.

**Возвращаемое значение**:
- None

**Исключения**:
- `Exception`:  Если возникли проблемы с  записью в  файл.

#### `main()`

**Описание**: Главная функция для запуска модуля.

**Параметры**:
- None

**Возвращаемое значение**:
- None

**Исключения**:
- `Exception`:  Для любых критических ошибок во время выполнения.

###  Пример сценария
-------------------------

Пример сценария в JSON описывает взаимодействие с  категориями товаров на  веб-сайте. Он  включает в  себя URL, название категории и  идентификаторы категории в  базе данных PrestaShop.

```json
{
    "scenarios": {
        "mineral+creams": {
            "url": "https://example.com/category/mineral-creams/",
            "name": "mineral+creams",
            "presta_categories": {
                "default_category": 12345,
                "additional_categories": [12346, 12347]
            }
        }
    }
}
```