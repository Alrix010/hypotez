## \file hypotez/src/utils/string/readme.md

# Документация модуля Data Normalizer
=====================================

Модуль `normalizer` предоставляет функциональность для нормализации различных типов данных, включая строки, логические значения, целые числа и числа с плавающей запятой. Он также включает вспомогательные функции для обработки текста.

---

## Содержание

1. [Обзор](#обзор)
2. [Функции модуля](#функции-модуля)
   - [normalize_boolean](#normalize_boolean)
   - [normalize_string](#normalize_string)
   - [normalize_int](#normalize_int)
   - [normalize_float](#normalize_float)
   - [remove_line_breaks](#remove_line_breaks)
   - [remove_html_tags](#remove_html_tags)
   - [remove_special_characters](#remove_special_characters)
   - [normalize_sql_date](#normalize_sql_date)
3. [Пример использования](#пример-использования)
4. [Требования](#требования)

---

## Обзор

Модуль предоставляет удобные утилиты для нормализации и обработки данных. Он может быть использован для:
- Удаления HTML-тегов из строк.
- Преобразования строк в числовые или логические значения.
- Очистки строк от специальных символов.
- Преобразования списков строк в одну нормализованную строку.

---

## Функции модуля

### `normalize_boolean`

**Описание:**  
Преобразовывает входное значение в логическое.

**Аргументы:**  
- `input_data (Any)`: Данные, которые могут представлять логическое значение (строка, число, логический тип).

**Возвращает:**  
- `bool`: Преобразованное логическое значение.

**Пример:**  
```python
normalize_boolean('yes')  # Результат: True
normalize_boolean(0)      # Результат: False
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `normalize_boolean` преобразует входные данные в логическое значение. Функция проверяет различные типы входных данных, такие как строки, числа и логические значения, и возвращает соответствующее логическое представление.

Шаги выполнения
-------------------------
1. Функция получает входные данные `input_data`.
2. Функция проверяет, является ли `input_data` строкой. Если да, то строка приводится к нижнему регистру и сравнивается со значениями `yes`, `true`, `1`, чтобы определить, соответствует ли она `True`, или `no`, `false`, `0`, чтобы определить, соответствует ли она `False`.
3. Если `input_data` является числом, функция проверяет, равно ли оно `0`. Если да, то возвращается `False`, иначе возвращается `True`.
4. Если `input_data` уже является логическим значением, функция возвращает его без изменений.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import normalize_boolean

result1 = normalize_boolean('yes')
print(result1)  # True

result2 = normalize_boolean(0)
print(result2)  # False
```

---

### `normalize_string`

**Описание:**  
Преобразует строку или список строк в нормализованную строку, удаляя лишние пробелы, HTML-теги и специальные символы.

**Аргументы:**  
- `input_data (str | list)`: Строка или список строк.

**Возвращает:**  
- `str`: Очищенная UTF-8 строка.

**Пример:**  
```python
normalize_string(['  Example string  ', '<b>with HTML</b>'])  # Результат: 'Example string with HTML'
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `normalize_string` принимает строку или список строк и преобразует их в нормализованную строку, удаляя лишние пробелы, HTML-теги и специальные символы.

Шаги выполнения
-------------------------
1. Функция получает входные данные `input_data`.
2. Функция проверяет, является ли `input_data` списком. Если да, то объединяет все элементы списка в одну строку.
3. Функция удаляет HTML-теги из строки с помощью функции `remove_html_tags`.
4. Функция удаляет специальные символы из строки с помощью функции `remove_special_characters`.
5. Функция удаляет лишние пробелы из строки с помощью метода `strip`.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import normalize_string

result = normalize_string(['  Example string  ', '<b>with HTML</b>'])
print(result)  # 'Example string with HTML'
```

---

### `normalize_int`

**Описание:**  
Преобразует входное значение в целое число.

**Аргументы:**  
- `input_data (str | int | float | Decimal)`: Число или его строковое представление.

**Возвращает:**  
- `int`: Преобразованное целое число.

**Пример:**  
```python
normalize_int('42')  # Результат: 42
normalize_int(3.14)  # Результат: 3
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `normalize_int` принимает строку, целое число, число с плавающей запятой или Decimal и преобразует их в целое число.

Шаги выполнения
-------------------------
1. Функция получает входные данные `input_data`.
2. Функция проверяет, является ли `input_data` строкой. Если да, то пытается преобразовать её в целое число с помощью функции `int`.
3. Если `input_data` является числом с плавающей запятой, функция преобразует его в целое число с помощью функции `int`.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import normalize_int

result1 = normalize_int('42')
print(result1)  # 42

result2 = normalize_int(3.14)
print(result2)  # 3
```

---

### `normalize_float`

**Описание:**  
Преобразует входное значение в число с плавающей запятой.

**Аргументы:**  
- `value (Any)`: Число, строка или список чисел.

**Возвращает:**  
- `float | List[float] | None`: Число с плавающей запятой, список чисел с плавающей запятой или `None` в случае ошибки.

**Пример:**  
```python
normalize_float('3.14')         # Результат: 3.14
normalize_float([1, '2.5', 3])  # Результат: [1.0, 2.5, 3.0]
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `normalize_float` преобразует входные данные в число с плавающей запятой. Функция обрабатывает различные типы входных данных, такие как строки, числа и списки чисел, и возвращает соответствующее представление числа с плавающей запятой.

Шаги выполнения
-------------------------
1. Функция получает входные данные `value`.
2. Функция проверяет, является ли `value` списком. Если да, то каждый элемент списка преобразуется в число с плавающей запятой и возвращается список чисел с плавающей запятой.
3. Если `value` является строкой, функция пытается преобразовать её в число с плавающей запятой.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import normalize_float

result1 = normalize_float('3.14')
print(result1)  # 3.14

result2 = normalize_float([1, '2.5', 3])
print(result2)  # [1.0, 2.5, 3.0]
```

---

### `remove_line_breaks`

**Описание:**  
Удаляет символы новой строки из строки.

**Аргументы:**  
- `input_str (str)`: Входная строка.

**Возвращает:**  
- `str`: Строка без символов новой строки.

**Пример:**  
```python
remove_line_breaks('String\nwith line breaks\r')  # Результат: 'String with line breaks'
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `remove_line_breaks` удаляет символы новой строки (`\n` и `\r`) из входной строки.

Шаги выполнения
-------------------------
1. Функция получает входную строку `input_str`.
2. Функция заменяет все символы `\n` на пустую строку.
3. Функция заменяет все символы `\r` на пустую строку.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import remove_line_breaks

result = remove_line_breaks('String\nwith line breaks\r')
print(result)  # 'String with line breaks'
```

---

### `remove_html_tags`

**Описание:**  
Удаляет HTML-теги из строки.

**Аргументы:**  
- `input_html (str)`: Входная строка с HTML-тегами.

**Возвращает:**  
- `str`: Строка без HTML-тегов.

**Пример:**  
```python
remove_html_tags('<p>Example text</p>')  # Результат: 'Example text'
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `remove_html_tags` удаляет HTML-теги из входной строки.

Шаги выполнения
-------------------------
1. Функция получает входную строку `input_html`.
2. Функция использует регулярное выражение для поиска и удаления всех HTML-тегов из строки.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import remove_html_tags

result = remove_html_tags('<p>Example text</p>')
print(result)  # 'Example text'
```

---

### `remove_special_characters`

**Описание:**  
Удаляет специальные символы из строки или списка строк.

**Аргументы:**  
- `input_str (str | list)`: Строка или список строк.

**Возвращает:**  
- `str | list`: Строка или список строк без специальных символов.

**Пример:**  
```python
remove_special_characters('Hello@World!')  # Результат: 'HelloWorld'
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `remove_special_characters` удаляет специальные символы из строки или списка строк.

Шаги выполнения
-------------------------
1. Функция получает входные данные `input_str`.
2. Функция проверяет, является ли `input_str` списком. Если да, то обрабатывает каждый элемент списка, удаляя специальные символы.
3. Если `input_str` является строкой, функция использует регулярное выражение для поиска и удаления всех специальных символов из строки.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import remove_special_characters

result = remove_special_characters('Hello@World!')
print(result)  # 'HelloWorld'
```

---

### `normalize_sql_date`

**Описание:**  
Преобразует строку или объект datetime в стандартный формат SQL-даты (`YYYY-MM-DD`).

**Аргументы:**  
- `input_data (str | datetime)`: Строка или объект datetime, представляющий дату.

**Возвращает:**  
- `str`: Нормализованная SQL-дата в формате `YYYY-MM-DD`.

**Пример:**  
```python
normalize_sql_date('2024-12-06')  # Результат: '2024-12-06'
normalize_sql_date(datetime(2024, 12, 6))  # Результат: '2024-12-06'
```

Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Функция `normalize_sql_date` преобразует строку или объект `datetime` в строку, представляющую дату в формате SQL (`YYYY-MM-DD`).

Шаги выполнения
-------------------------
1. Функция получает входные данные `input_data`.
2. Функция проверяет, является ли `input_data` объектом `datetime`. Если да, то преобразует его в строку в формате `YYYY-MM-DD`.
3. Если `input_data` является строкой, функция проверяет, соответствует ли она формату `YYYY-MM-DD`.

Пример использования
-------------------------

```python
from src.utils.string.normalizer import normalize_sql_date
from datetime import datetime

result1 = normalize_sql_date('2024-12-06')
print(result1)  # '2024-12-06'

result2 = normalize_sql_date(datetime(2024, 12, 6))
print(result2)  # '2024-12-06'
```

---

## Пример использования

```python
from src.utils.string.normalizer import normalize_string, normalize_boolean, normalize_int, normalize_float, normalize_sql_date

# Normalizing a string
clean_str = normalize_string(['<h1>Header</h1>', '  text with spaces  '])
print(clean_str)  # 'Header text with spaces'

# Normalizing a boolean value
is_active = normalize_boolean('Yes')
print(is_active)  # True

# Normalizing an integer
integer_value = normalize_int('42')
print(integer_value)  # 42

# Normalizing a floating-point number
float_value = normalize_float('3.14159')
print(float_value)  # 3.14159

# Normalizing a SQL date
sql_date = normalize_sql_date('2024-12-06')
print(sql_date)  # '2024-12-06'
```

---

## Требования

- Python 3.10 или выше.
- Модуль `src.logger` для логирования.
- Модуль используется в режиме разработки (``).

---

## Логирование

Все ошибки и предупреждения логируются через `logger`:
- Ошибки логируются с использованием `logger.error`.
- Неожиданные значения логируются с использованием `logger.debug` или `logger.warning`.