## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код предоставляет две основные функции: `string_for_train` и `normalize_answer`. Функция `string_for_train` очищает и форматирует строковые данные для использования в обучающих наборах данных. Она экранирует кавычки, удаляет лишние пробелы, удаляет символы новой строки и табуляции, а также объединяет списки строк в одну строку. 

Функция `normalize_answer` удаляет обрамляющие блоки кода (markdown, html, json, python) из ответов языковых моделей. Она проверяет строку на наличие префиксов и суффиксов, обозначающих блоки кода, и удаляет их, если они найдены.

Шаги выполнения
-------------------------
1. **`string_for_train`**:
    - **Экранирование кавычек**: Заменяет двойные кавычки (`"`) символом обратной косой черты (`\`) и двойными кавычками (`\"`).
    - **Удаление лишних пробелов**: Заменяет все последовательности пробельных символов (включая пробелы, табуляцию `\t`, переводы строки `\n`, `\r`, `\f`, `\v`) одним пробелом.
    - **Обрезка краев**: Удаляет начальные и конечные пробелы.
    - **Объединение списка**: Если входные данные - список строк, объединяет элементы списка в одну строку через пробел.
    - **Финальная очистка**: Применяет регулярное выражение `re.sub(r'\s+', ' ', full_text).strip()` для удаления повторяющихся и нежелательных пробельных символов (включая `\n`, `\t` и др.) и замены их одним пробелом, а также обрезает кра edges of the entire string.

2. **`normalize_answer`**:
    - **Проверка префикса**: Проверяет, начинается ли строка `text` одним из префиксов из списка `_NORMALIZER_PREFIXES`.
    - **Проверка суффикса**: Проверяет, заканчивается ли строка `text` суффиксом `_NORMALIZER_SUFFIX`.
    - **Удаление префикса**: Если строка `text` начинается с одного из префиксов, удаляет этот префикс.
    - **Удаление суффикса**: Если строка `text` заканчивается суффиксом, удаляет этот суффикс.

Пример использования
-------------------------

```python
    # Примеры для string_for_train
    print("--- string_for_train ---")
    test_str = '   Это  строка   с "кавычками"   и    пробелами. '
    print(f"Original: '{test_str}'")
    print(f"Cleaned:  '{string_for_train(test_str)}'")

    # Добавлен тест с \n и \t
    test_str_ws = '   Строка\tс \n новой строкой\n\nи\t табами.  "кавычка" '
    print(f"Original WS: '{test_str_ws}'")
    print(f"Cleaned WS:  '{string_for_train(test_str_ws)}'")


    test_list = ['Первая строка.', '   Вторая "строка"   с пробелами.', ' Третья    ', '   ']
    print(f"Original list: {test_list}")
    print(f"Cleaned list: '{string_for_train(test_list)}'")

    # Добавлен тест списка с \n и \t
    test_list_ws = ['Первая\nстрока.', ' \tВторая "строка"\t\tс\nпробелами.']
    print(f"Original list WS: {test_list_ws}")
    print(f"Cleaned list WS: '{string_for_train(test_list_ws)}'")


    print(f"Invalid input (int): '{string_for_train(123)}'")
    print(f"Invalid input (None): '{string_for_train(None)}'")


    # Примеры для normalize_answer
    print("\n--- normalize_answer ---")
    tests_norm = [
        "```html\n<p>Пример</p>\n```",
        "```markdown\n# Заголовок\nТекст.\n```",
        "```\nПросто текст\n```",
        "Обычный текст без блоков.",
        "```Неполный блок",
        "Блок в конце```",
        "```json\n{\"key\": \"value\"}\n```",
        "```md Текст```"
    ]
    for test_case in tests_norm:
        print(f"Original: '{test_case}'")
        print(f"Normalized: '{normalize_answer(test_case)}'")

    print(f"Invalid input (int): '{normalize_answer(123)}'") # type: ignore
```

**Важно**: 

- Функция `string_for_train` удаляет все пробельные символы, включая `\n` и `\t`, но сохраняет экранированные символы, такие как `\"`.
- Функция `normalize_answer` работает только с блоками кода, которые начинаются с префикса и заканчиваются суффиксом, указанных в списке `_NORMALIZER_PREFIXES` и переменной `_NORMALIZER_SUFFIX`. 
- Обе функции написаны с использованием функций Python для обработки строк, таких как `replace`, `startswith`, `endswith`, `removeprefix`, `removesuffix` и регулярных выражений `re.sub`.