### Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот блок кода предоставляет интерфейс для отправки и получения электронных писем с использованием протоколов SMTP и IMAP. Он включает функции для отправки электронных писем через SMTP-сервер и получения электронных писем через IMAP-сервер.

Шаги выполнения
-------------------------
1. **Импорт необходимых модулей**: Импортируются модули `smtplib`, `imaplib`, `email`, `os`, `MIMEText` и типы из модуля `typing` для работы с электронной почтой и переменными окружения.
2. **Настройка соединения**:
   - Определяется словарь `_connection`, который содержит параметры подключения к SMTP-серверу (сервер, порт, имя пользователя, пароль и получатель).
   - Параметры подключения считываются из переменных окружения, что позволяет избежать жесткого кодирования учетных данных в коде.
3. **Функция `send`**:
   - Создает SMTP-соединение с использованием указанных параметров.
   - Шифрует соединение с помощью `starttls()`.
   - Аутентифицируется на SMTP-сервере.
   - Создает сообщение электронной почты с использованием `MIMEText`, устанавливает тему, отправителя и получателя.
   - Отправляет электронное письмо и завершает соединение.
   - В случае ошибки записывает информацию об ошибке в журнал и возвращает `False`.
4. **Функция `receive`**:
   - Подключается к IMAP-серверу с использованием SSL.
   - Аутентифицируется на IMAP-сервере.
   - Выбирает указанную папку (по умолчанию "inbox").
   - Выполняет поиск всех электронных писем в выбранной папке.
   - Извлекает каждое электронное письмо, декодирует его и извлекает тему, отправителя и тело письма.
   - Сохраняет данные каждого электронного письма в словаре и добавляет словарь в список.
   - Закрывает соединение с IMAP-сервером и выходит из системы.
   - В случае ошибки записывает информацию об ошибке в журнал и возвращает `None`.

Пример использования
-------------------------

```python
import os
from src.utils.smtp import send, receive

# Настройка переменных окружения (пример)
os.environ['SMTP_SERVER'] = 'smtp.example.com'
os.environ['SMTP_PORT'] = '587'
os.environ['SMTP_USER'] = 'your_email@example.com'
os.environ['SMTP_PASSWORD'] = 'your_password'
os.environ['SMTP_RECEIVER'] = 'recipient_email@example.com'

# Отправка электронного письма
subject = 'Test Email'
body = 'This is a test email sent from Python.'
recipient = 'recipient_email@example.com'
if send(subject, body, recipient):
    print('Email sent successfully!')
else:
    print('Failed to send email.')

# Получение электронных писем
imap_server = 'imap.example.com'
user = 'your_email@example.com'
password = 'your_password'
folder = 'inbox'
emails = receive(imap_server, user, password, folder)
if emails:
    print('Emails received:')
    for email in emails:
        print(f"Subject: {email['subject']}")
        print(f"From: {email['from']}")
        print(f"Body: {email['body'][:100]}...")  # Вывод первых 100 символов тела письма
else:
    print('Failed to receive emails.')