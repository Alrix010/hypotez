## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код реализует класс `Driver`, предназначенный для управления LLM (Large Language Model) и запуска агентов LangChain с использованием веб-инструментов (например, поиск в интернете, браузер). 

Шаги выполнения
-------------------------
1. **Инициализация класса `Driver`**:
    - **Создание экземпляра**: Создается объект класса `Driver`, который содержит конфигурацию LLM и инструменты.
    - **Инициализация LLM**: 
        - Проверяется наличие API ключей и активность моделей Gemini и OpenAI.
        - Создаются экземпляры `ChatGoogleGenerativeAI` (Gemini) или `ChatOpenAI` (OpenAI) с использованием доступных ключей и моделей.
    - **Инициализация инструментов**: 
        - Создается список инструментов `tools`.
        - Попытка инициализировать `SerpAPIWrapper` для поиска через API.
        - Попытка инициализировать `BrowserController` (если доступен) и добавить инструменты для работы с браузером (навигация, скрипинг текста, клики по элементам).
2. **Запуск задач**:
    - **`run_task`**: 
        - Выполняет задачу с использованием выбранной модели (Gemini или OpenAI) и доступных инструментов.
        - Возвращает финальный ответ от агента.
    - **`stream_task`**: 
        - Выполняет задачу асинхронно, стримит шаги выполнения и возвращает финальный ответ и список шагов.
3. **Стриминг агента**:
    - **`stream_agent_execution`**: 
        - Выполняет задачу асинхронно через `AgentExecutor`, стримит шаги (действия, наблюдения, сообщения) и возвращает финальный ответ и список шагов.

Пример использования
-------------------------

```python
# Инициализация Driver с использованием Gemini
driver = Driver(GEMINI_API_KEY='YOUR_GEMINI_API_KEY', gemini_model_name='gemini_pro') 

# Выполняем задачу с помощью Gemini и получаем финальный ответ
result = await driver.run_task("Какая столица Австралии?", use_gemini=True)
print(f"Результат: {result}")

# Выполняем задачу с помощью Gemini, стримим шаги 
final_answer, chunks = await driver.stream_task("Какая столица Австралии?", use_gemini=True)
print(f"Финальный ответ: {final_answer}")
print(f"Шаги выполнения: {chunks}")

# Закрываем Driver (автоматически вызывается __del__)
# driver = None  # или del driver

```

**Описание примера**:

- В коде сначала инициализируется объект `Driver`, передавая API ключ Gemini и название модели.
- Затем запускается задача `run_task`, передавая текст задачи и используя Gemini.
- Далее запускается `stream_task`, чтобы получить финальный ответ и список шагов.
- В конце driver автоматически закрывается при удалении объекта.