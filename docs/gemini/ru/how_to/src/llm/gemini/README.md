## Как использовать модуль интеграции Google Generative AI
=========================================================================================

Описание
-------------------------
Этот модуль предоставляет класс `GoogleGenerativeAi` для взаимодействия с моделями Generative AI от Google. Он включает функции для отправки запросов, обработки ответов, управления диалогами и интеграции с различными AI-функциями.

Шаги выполнения
-------------------------
1. **Инициализация класса**: Создайте экземпляр класса `GoogleGenerativeAi`, передав необходимые параметры, такие как API-ключ, имя модели, конфигурацию генерации и системные инструкции.
2. **Отправка запроса**: Используйте метод `ask` для отправки текстового запроса к AI-модели и получения ответа.
3. **Ведение чата**: Используйте методы `_start_chat` для начала сессии чата и `chat` для отправки сообщений и получения ответов в рамках этой сессии.
4. **Описание изображения**: Используйте метод `describe_image` для генерации текстового описания изображения, передав путь к файлу изображения.
5. **Загрузка файла**: Используйте метод `upload_file` для загрузки файла в AI-модель.

Пример использования
-------------------------

```python
from pathlib import Path
from src.llm.gemini import GoogleGenerativeAi

# Инициализация класса GoogleGenerativeAi с вашим API-ключом и системными инструкциями
ai = GoogleGenerativeAi(api_key="your_api_key", system_instruction="Ты полезный ассистент.")

# Отправка простого запроса и получение ответа
response = ai.ask("Как дела?")
print(response)

# Начало сессии чата
ai._start_chat()

# Отправка сообщения в чат и получение ответа
chat_response = ai.chat("Расскажи мне о Google AI.")
print(chat_response)

# Описание изображения (путь к изображению должен быть указан)
image_path = Path("path/to/your/image.jpg")  # Замените на реальный путь к изображению
image_description = ai.describe_image(image_path)
print(image_description)

# Загрузка файла (путь к файлу должен быть указан)
file_path = Path("path/to/your/file.txt")  # Замените на реальный путь к файлу
upload_success = ai.upload_file(file_path)
print(f"Файл загружен: {upload_success}")
```

```markdown
## Как обрабатываются ошибки
=========================================================================================

Описание
-------------------------
Этот код обрабатывает ошибки, которые могут возникнуть во время работы с Google Generative AI. Он включает в себя обработку сетевых ошибок, проблем с доступностью сервиса, превышением квоты, аутентификацией, неверными входными данными и ошибками API.

Шаги выполнения
-------------------------
1. **Сетевые ошибки**: При возникновении сетевых ошибок, код пытается повторно отправить запрос с экспоненциальной задержкой.
2. **Проблемы с доступностью сервиса**: Если сервис недоступен, в логи записывается ошибка и предпринимается повторная попытка.
3. **Превышение квоты**: Если превышена квота запросов, в логи записывается информация об этом и происходит ожидание перед повторной попыткой.
4. **Ошибки аутентификации**: При ошибках аутентификации, информация записывается в логи и дальнейшие попытки прекращаются.
5. **Неверные входные данные**: Если входные данные неверны, происходит запись в логи и повторная попытка с таймаутом.
6. **Ошибки API**: При возникновении ошибок API, информация записывается в логи и дальнейшие попытки прекращаются.

Пример использования
-------------------------

```python
from src.llm.gemini import GoogleGenerativeAi

ai = GoogleGenerativeAi(api_key="your_api_key")

try:
    response = ai.ask("Как дела?", attempts=3)  # Ограничиваем количество попыток
    print(response)
except Exception as e:
    print(f"Произошла ошибка: {e}")
```

```markdown
## Как настроено логирование и история
=========================================================================================

Описание
-------------------------
Этот код выполняет логирование всех взаимодействий с AI-моделями и сохраняет диалоги в текстовом и JSON форматах для будущего анализа.

Шаги выполнения
-------------------------
1. **Логирование взаимодействий**: Все запросы и ответы от AI-моделей записываются в логи.
2. **Сохранение диалогов**: Диалоги сохраняются в текстовом формате для удобства чтения и в JSON формате для машинной обработки.

Пример использования
-------------------------

```python
from src.llm.gemini import GoogleGenerativeAi

ai = GoogleGenerativeAi(api_key="your_api_key")
response = ai.ask("Как дела?")
print(response)
# Вся информация о запросе и ответе будет автоматически залогирована и сохранена.