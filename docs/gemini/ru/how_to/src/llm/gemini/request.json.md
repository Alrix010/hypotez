### Как использовать этот блок кода

=========================================================================================

Описание
-------------------------
Этот блок кода представляет собой JSON-структуру, описывающую формат запроса к модели Gemini для генерации контента. Он включает в себя параметры для управления генерацией, настройки безопасности, инструменты и структуру входных данных (текст, изображения, видео).

Шаги выполнения
-------------------------
1. **Определение структуры `contents`**:
   - Массив `contents` содержит объекты с полями `role` (роль автора сообщения, например, "user" или "model") и `parts`.
   - `parts` — это массив, содержащий различные типы контента:
     - `text`: Текстовое содержимое.
     - `inlineData`: Данные в формате MIME (например, изображение в base64).
     - `fileData`: Ссылка на файл (например, изображение или видео).
     - `videoMetadata`: Метаданные для видео, включающие время начала и конца фрагмента.

2. **Использование `systemInstruction`**:
   - Объект `systemInstruction` позволяет задать инструкции для модели, определяющие её поведение или контекст.
   - Включает поля `role` и `parts`, аналогичные структуре `contents`.

3. **Настройка `tools`**:
   - Массив `tools` позволяет подключить инструменты, такие как функции, которые модель может использовать для выполнения запроса.
   - `functionDeclarations` содержит описание доступных функций, включая имя, описание и параметры.

4. **Применение `safetySettings`**:
   - Массив `safetySettings` позволяет настроить параметры безопасности, чтобы контролировать контент, генерируемый моделью.
   - `category` определяет категорию вреда (например, "Hate Speech" или "Sexual Content").
   - `threshold` устанавливает порог блокировки контента на основе категории вреда.

5. **Конфигурация `generationConfig`**:
   - Объект `generationConfig` позволяет настроить параметры генерации контента, такие как:
     - `temperature`: Влияет на случайность генерации (чем выше, тем случайнее).
     - `topP` и `topK`: Методы отбора наиболее вероятных вариантов.
     - `candidateCount`: Количество сгенерированных вариантов.
     - `maxOutputTokens`: Максимальное количество токенов в сгенерированном ответе.
     - `presencePenalty` и `frequencyPenalty`: Штрафы за повторение слов или фраз.
     - `stopSequences`: Список стоп-слов, при появлении которых генерация прекращается.
     - `responseMimeType`: Тип MIME для ответа.
     - `responseSchema`: Схема ответа.
     - `seed`: Зерно для воспроизводимости результатов.

6. **Добавление `labels`**:
   - Объект `labels` позволяет добавить произвольные метаданные к запросу в виде пар ключ-значение.

Пример использования
-------------------------

```python
import json

request_data = {
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "Напиши короткое стихотворение о весне."
        }
      ]
    }
  ],
  "generationConfig": {
    "temperature": 0.7,
    "maxOutputTokens": 100
  },
  "safetySettings": [
    {
      "category": "HARM_CATEGORY_HATE_SPEECH",
      "threshold": "BLOCK_MEDIUM_AND_ABOVE"
    }
  ]
}

# Преобразование словаря в JSON-строку
request_json = json.dumps(request_data, indent=2)

print(request_json)
```

В этом примере показано, как создать JSON-запрос для генерации стихотворения о весне с использованием модели Gemini. Установлены параметры температуры и максимального количества токенов, а также настроены параметры безопасности для блокировки контента, содержащего ненавистнические высказывания.