### **Как использовать этот блок кода**
=========================================================================================

Описание
-------------------------
Этот код предоставляет пример использования XML-RPC клиента для управления Fast API сервером из внешнего кода. Он демонстрирует, как запускать и останавливать серверы, добавлять новые маршруты и получать статус серверов.

Шаги выполнения
-------------------------
1. **Инициализация клиента**:
   - Создается экземпляр `ServerProxy` для подключения к XML-RPC серверу по адресу `http://localhost:9000`. Параметр `allow_none=True` разрешает передачу значений `None`.
2. **Запуск сервера**:
   - Вызывается метод `start_server` для запуска сервера на порту 8001 и IP-адресе "127.0.0.1".
3. **Добавление нового маршрута**:
   - Вызывается метод `add_new_route` для добавления нового маршрута `/test_route`. В качестве обработчика маршрута передается lambda-функция, которая возвращает JSON с сообщением "Hello from test_route". Метод `GET` указан как разрешенный для этого маршрута.
4. **Получение статуса серверов**:
   - Вызывается метод `status_servers` для получения информации о состоянии серверов.
5. **Остановка сервера**:
   - Вызывается метод `stop_server` для остановки сервера, работающего на порту 8001.
6. **Завершение работы**:
   - В блоке `finally` вызывается метод `shutdown` для корректного завершения работы RPC сервера.

Пример использования
-------------------------

```python
import sys
from xmlrpc.client import ServerProxy
import time

def main():
    """Основная функция для управления сервером через RPC из внешнего кода."""
    rpc_client = ServerProxy("http://localhost:9000", allow_none=True)
    
    try:
        # Функция запускает сервер на порту 8001
        print("Запуск сервера на порту 8001...")
        rpc_client.start_server(8001, "127.0.0.1")
        time.sleep(1)
        
        # Функция добавляет новый маршрут /test_route
        print("Добавление нового маршрута /test_route...")
        rpc_client.add_new_route("/test_route", 'lambda: {"message": "Hello from test_route"}', ["GET"])
        time.sleep(1)

        # Функция получает статус серверов
        print("Получение статуса серверов...")
        rpc_client.status_servers()
        time.sleep(1)

       # Функция останавливает сервер на порту 8001
        print("Остановка сервера на порту 8001...")
        rpc_client.stop_server(8001)
        time.sleep(1)
        
        # Функция получает статус серверов
        print("Получение статуса серверов...")
        rpc_client.status_servers()
        time.sleep(1)

    except Exception as ex:
        print(f"Произошла ошибка: {ex}")
    finally:
        print("Выключение RPC сервера")
        rpc_client.shutdown()


if __name__ == "__main__":
    main()
```