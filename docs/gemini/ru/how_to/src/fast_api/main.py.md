## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет собой основную функцию консольного приложения для управления Fast API сервером. 

Он предоставляет возможность запускать, останавливать и управлять сервером через консольные команды. 

Шаги выполнения
-------------------------
1. **Инициализация:**
    - Импортируются необходимые модули: `sys` для работы с системными функциями, `header` (обязательный модуль), `CommandHandler` и `logger` из `src.fast_api.fast_api`.
2. **Определение меню:**
    - Создается функция `display_menu()`, которая выводит меню доступных команд.
3. **Основная функция:**
    - Создается функция `main()`, которая является основной точкой входа для приложения.
    - Создается объект `command_handler` класса `CommandHandler`.
4. **Цикл обработки команд:**
    - В цикле `while True`:
        - Выводится меню `display_menu()`.
        - Происходит получение пользовательского ввода `command_line`.
        - Ввод обрабатывается, разделяясь по пробелам `parts = command_line.split()`.
        - Определяется первая часть ввода как команда `command = parts[0]`.
5. **Обработка команд:**
    - **`start`**: запускает сервер на указанном порту.
    - **`status`**: выводит статус всех работающих серверов.
    - **`routes`**: выводит список всех зарегистрированных маршрутов.
    - **`stop`**: останавливает сервер на указанном порту.
    - **`stop_all`**: останавливает все серверы.
    - **`add_route`**: добавляет новый маршрут к серверу.
    - **`shutdown`**: останавливает все серверы и завершает приложение.
    - **`help`**: выводит меню команд.
    - **`exit`**: завершает приложение.
6. **Обработка ошибок:**
    - В блоке `try...except` отлавливаются ошибки, которые могут возникнуть во время выполнения команд.
    - Ошибки записываются в лог с помощью `logger.error`.

Пример использования
-------------------------

```python
    # Запуск сервера на порту 8000
    Enter command: start 8000
    Enter host address (default: 127.0.0.1): 

    # Проверка статуса сервера
    Enter command: status

    # Остановка сервера на порту 8000
    Enter command: stop 8000

    # Добавление нового маршрута
    Enter command: add_route /new_route
    Enter HTTP methods (comma-separated, default: GET): POST, DELETE

    # Выход из приложения
    Enter command: exit
```