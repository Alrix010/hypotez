## Как использовать этот блок кода
=========================================================================================

Описание
-------------------------
Этот код представляет собой систему управления сервером FastAPI с помощью XML-RPC. Он позволяет запускать, останавливать, добавлять маршруты и получать информацию о состоянии сервера FastAPI из отдельной программы. Система состоит из двух частей: серверной (`fast_api_rpc.py`) и клиентской (`main.py`).

Шаги выполнения
-------------------------
1. **Запуск серверной части (`fast_api_rpc.py`):**
    * **Создание объекта `CommandHandler`:** Создается объект `CommandHandler`, который содержит методы управления сервером, такие как `start_server`, `stop_server` и т.д.
    * **Запуск XML-RPC сервера:** В конструкторе `CommandHandler` создается XML-RPC сервер, который начинает слушать порт `9000` (по умолчанию).
    * **Запуск FastAPI сервера(ов):** Сервер запускается в соответствии с кодом, созданным для него.
2. **Запуск клиентской части (`main.py`):**
    * **Создание объекта `ServerProxy`:** Создается объект `ServerProxy`, который подключается к XML-RPC серверу по адресу `http://localhost:9000`.
    * **Отображение меню и получение ввода:** `main.py` отображает меню доступных команд и ждет ввода пользователя.
3. **Ввод команды:** Когда пользователь вводит команду, например, `start 8000`, происходит следующее:
    * **Разбор команды:** `main.py` анализирует введенную строку, выделяя команду `start` и порт `8000`.
    * **Вызов метода RPC-сервера:** `main.py` вызывает метод `start_server(port=8000, host="0.0.0.0")` у объекта `rpc_client`, что фактически отправляет запрос к XML-RPC серверу.
4. **Обработка запроса на сервере:**
    * **Получение запроса:** XML-RPC сервер в `fast_api_rpc.py` получает этот запрос.
    * **Вызов метода управления:** Он понимает, что нужно вызвать метод `start_server` у объекта `CommandHandler`.
    * **Выполнение команды:** Вызывается метод `start_server`, который запускает FastAPI сервер на указанном порту.
5. **Возврат ответа:** XML-RPC сервер формирует ответ (в данном случае, это может быть `None`) и отправляет его обратно клиенту `main.py`.
6. **Отображение результата:** `main.py` может отобразить результат в консоль.
7. **Повторение цикла:** `main.py` возвращается к началу цикла, отображая меню и ожидая ввода следующей команды.

Пример использования
-------------------------

```python
# В файле main.py
from xmlrpc.client import ServerProxy

rpc_client = ServerProxy("http://localhost:9000", allow_none=True)

# Вызов метода start_server для запуска сервера на порту 8000
rpc_client.start_server(port=8000, host="0.0.0.0")
```

В этом примере, `main.py` подключается к XML-RPC серверу на `http://localhost:9000` и вызывает метод `start_server` с параметрами `port=8000` и `host="0.0.0.0"`. Этот запрос отправляется на `fast_api_rpc.py`, где он обрабатывается и запускается FastAPI сервер на указанных параметрах.