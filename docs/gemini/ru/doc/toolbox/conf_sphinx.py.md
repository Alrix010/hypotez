# Модуль конфигурации Sphinx

## Обзор

Этот модуль содержит конфигурацию для генерации документации с помощью Sphinx. Он загружает настройки проекта из файла `settings.json`, определяет информацию о проекте, а также настраивает параметры Sphinx, такие как используемые расширения, пути к шаблонам и статическим файлам, и исключаемые файлы.

## Подробней

Модуль предназначен для централизованного управления конфигурацией Sphinx. Он позволяет легко настраивать параметры документации, такие как название проекта, авторские права, используемые темы оформления и другие параметры. Модуль также предоставляет функцию для исключения определенных файлов и элементов кода из документации.

## Функции

### `skip_files`

**Назначение**: Определяет, следует ли исключать член документации на основе его имени.

```python
def skip_files(app, what, name, obj, skip, options):\n    """\n    Функция-обработчик события \'autodoc-skip-member\'.\n    Используется для игнорирования членов документации, соответствующих определённым шаблонам.\n\n    Args:\n        app: Объект приложения Sphinx\n        what: Тип документации (например, \'module\', \'class\', \'exception\', \'function\', \'method\', \'attribute\')\n        name: Имя члена документации\n        obj: Объект члена документации\n        skip: Логическое значение, указывающее, следует ли пропустить этот член по умолчанию\n        options: Опции автодокументации\n\n    Returns:\n        bool: True, если член должен быть пропущен; иначе возвращает значение `skip`\n    """
    ...
```

**Параметры**:

-   `app`: Объект приложения Sphinx.
-   `what`: Тип документации (например, 'module', 'class', 'exception', 'function', 'method', 'attribute').
-   `name`: Имя члена документации.
-   `obj`: Объект члена документации.
-   `skip`: Логическое значение, указывающее, следует ли пропустить этот член по умолчанию.
-   `options`: Опции автодокументации.

**Возвращает**:

-   `bool`: `True`, если член должен быть пропущен; иначе возвращает значение `skip`.

**Как работает функция**:

1.  Принимает параметры, предоставляемые Sphinx при обработке каждого члена документации.
2.  Проверяет, соответствует ли имя члена одному из определенных шаблонов, используя функцию `fnmatch.fnmatch`. В частности, проверяется, содержит ли имя круглые скобки или соответствует другим заданным шаблонам.
3.  Если имя соответствует одному из шаблонов, функция возвращает `True`, указывая Sphinx пропустить этот член документации.
4.  В противном случае функция возвращает исходное значение `skip`, предоставленное Sphinx, позволяя Sphinx решить, следует ли пропустить этот член на основе других критериев.

### `setup`

**Назначение**: Подключает функцию `skip_files` к событию `autodoc-skip-member` в Sphinx.

```python
def setup(app):\n    """\n    Функция настройки, которая подключает функцию `skip_files` к событию `autodoc-skip-member`.\n\n    Args:\n        app: Объект приложения Sphinx\n    """
    ...
```

**Параметры**:

-   `app`: Объект приложения Sphinx.

**Возвращает**:

-   `None`

**Как работает функция**:

1.  Принимает объект приложения Sphinx в качестве аргумента.
2.  Использует метод `app.connect` для подключения функции `skip_files` к событию `autodoc-skip-member`. Это означает, что функция `skip_files` будет вызываться каждый раз, когда Sphinx будет решать, следует ли пропустить какой-либо член документации.

## Переменные модуля

-   `project` (str): Название проекта.
-   `copyright` (str): Информация об авторских правах.
-   `author` (str): Автор проекта.
-   `release` (str): Версия релиза проекта.
-   `extensions` (list): Список расширений Sphinx, используемых для генерации документации.
-   `templates_path` (list): Список путей к директориям с шаблонами Sphinx.
-   `exclude_patterns` (list): Список шаблонов файлов и директорий, которые следует исключить из документации.
-   `available_themes` (dict): Словарь доступных тем оформления Sphinx.
-   `html_theme` (str): Используемая тема оформления Sphinx.
-   `html_static_path` (list): Список путей к директориям со статическими файлами (CSS, изображения и т.д.).

## Загрузка настроек из `settings.json`

В начале модуля происходит загрузка настроек проекта из файла `settings.json`. Если файл не найден или содержит ошибки, используются значения по умолчанию.

```python
try:\n    # Открываем файл settings.json в режиме чтения\n    with open(\'../src/settings.json\', \'r\') as settings_file:\n        # Загружаем содержимое файла как JSON\n        settings = json.load(settings_file)\n        # Извлекаем значения по ключам с установкой значений по умолчанию\n        _project_name = settings.get("project_name", "hypotez")\n        _copyright = settings.get("copyright", "2024, hypo69")\n        _release = settings.get("release", "2024, hypo69")\n        _author = settings.get("author", "2024, hypo69")\nexcept (FileNotFoundError, json.JSONDecodeError):\n    # Устанавливаем значения по умолчанию в случае ошибки\n    _project_name = "hypotez"\n    _copyright = "2024, hypo69"\n    _release = "2024, hypo69"\n    _author = "2024, hypo69"
```

## Добавление пути к исходному коду

В модуль добавляется путь к исходному коду проекта, чтобы Sphinx мог находить и анализировать код для генерации документации.

```python
sys.path.insert(0, os.path.abspath(\'..\'))  # Добавляем путь к папке \'src\' для автодокументации