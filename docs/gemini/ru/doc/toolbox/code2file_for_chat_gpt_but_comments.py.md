# Модуль для чтения и обработки файлов с сохранением комментариев

## Обзор

Этот модуль предназначен для рекурсивного чтения и обработки текстовых и данных файлов в указанном каталоге, сохраняя при этом все комментарии и docstring'и. Он также позволяет удалять файлы и директории, имена которых начинаются с символа `_` или содержат символы `(` и `)`. Объединенное содержимое файлов сохраняется в один выходной файл.

## Подробней

Модуль предоставляет функции для рекурсивного удаления содержимого директорий и чтения текстовых файлов различных форматов (Python, TXT, CSS, JS, DOT, MER, MD, PS1, JSON, CSV, XML, Excel, Jupyter Notebook, YAML, TeX, INI, RDF, TOML и SQLite) с возможностью фильтрации файлов и директорий по имени. В отличие от аналогичного модуля, этот модуль сохраняет все комментарии и docstring'и в процессе обработки файлов.

## Функции

### `delete_directory_contents`

**Назначение**: Рекурсивно удаляет все содержимое указанной директории.

```python
def delete_directory_contents(directory: Path) -> None:
    """ Рекурсивно удаляет все содержимое указанной директории.

    Args:
        directory (Path): Путь к директории, содержимое которой нужно удалить.

    Returns:
        None

    Пример:
        >>> delete_directory_contents(Path('../tmp/chat_gpt/aliexpress'))
    """
    ...
```

**Параметры**:
- `directory` (Path): Путь к директории, содержимое которой необходимо удалить.

**Возвращает**:
- `None`

**Как работает функция**:
- Функция принимает путь к директории в качестве аргумента.
- Рекурсивно перебирает все элементы в директории.
- Если элемент является директорией, вызывает себя для удаления содержимого этой директории, а затем пытается удалить саму директорию.
- Если элемент является файлом, пытается удалить файл.
- Использует модуль `src.logger` для логирования информации об удаленных файлах и директориях, а также об ошибках при удалении.

### `read_text_files`

**Назначение**: Читает все указанные текстовые и данные файлы в каталоге и сохраняет объединенный текст в один файл, одновременно удаляя файлы и директории, которые начинаются с `_` или содержат `(` и `)`.

```python
def read_text_files(
    directory: str, output_file: str
) -> None:
    """ Читает все указанные текстовые и данные файлы в каталоге и сохраняет объединенный текст в один файл,
    одновременно удаляя файлы и директории, которые начинаются с `_` или содержат `(` и `)`.

    Args:
        directory (str): Каталог для поиска файлов.
        output_file (str): Файл, в который будет сохранен объединенный текст.

    Returns:
        None

    Пример:
        >>> read_text_files('src', 'output.txt')
    """
    ...
```

**Параметры**:
- `directory` (str): Каталог для поиска файлов.
- `output_file` (str): Файл, в который будет сохранено объединенное содержимое.

**Возвращает**:
- `None`

**Как работает функция**:
1.  Функция принимает каталог для поиска файлов и имя выходного файла.
2.  Создает выходной файл.
3.  Рекурсивно перебирает все файлы и директории в указанном каталоге, используя `os.walk`.
4.  Удаляет директории, имена которых начинаются с `_` или содержат `*`, вызывая функцию `delete_directory_contents`.
5.  Удаляет файлы, имена которых начинаются с `_` или содержат `(` и `)`.
6.  Для файлов, не подлежащих удалению, определяет тип файла по расширению и считывает содержимое, преобразуя его в строку.
7.  Сохраняет содержимое каждого обработанного файла в выходной файл с префиксом `--- {filename} ---`.
8.  Обрабатывает различные типы файлов, включая:
    - `.py`, `.txt`, `.css`, `.js`, `.dot`, `.mer`, `.md`, `.ps1`: простое чтение содержимого.
    - `.json`: чтение и форматирование JSON.
    - `.csv`: чтение и объединение строк CSV.
    - `.xml`: чтение и преобразование XML в строку.
    - `.xls`, `.xlsx`: чтение листов Excel и преобразование в строку.
    - `.ipynb`: чтение содержимого Jupyter Notebook.
    - `.yaml`, `.yml`: чтение и преобразование YAML.
    - `.tex`, `.ini`, `.rdf`, `.toml`: простое чтение содержимого.
    - `.sqlite`, `.db`: чтение таблиц и данных из SQLite базы данных.
9.  Использует модуль `src.logger` для логирования ошибок при обработке файлов.

## Параметры модуля

- `MODE` (str): Определяет режим работы модуля (в данном случае, 'development').

## Примеры использования

```python
if __name__ == "__main__":
    # Указываем каталог для поиска и файл для сохранения вывода
    directory_to_search = "../src/suppliers/kazarinov/react"
    output_file_path = Path("../data/kazarinov_react.txt")

    # Создаем директорию, если она не существует
    output_file_path.parent.mkdir(parents=True, exist_ok=True)

    # Создаем файл, если его не существует
    output_file_path.touch(exist_ok=True)

    read_text_files(directory_to_search, output_file_path)
```

Этот код выполняет следующие действия:

1.  Определяет каталог для поиска файлов (`directory_to_search`) и путь к выходному файлу (`output_file_path`).
2.  Создает директорию для выходного файла, если она не существует.
3.  Создает выходной файл, если он не существует.
4.  Вызывает функцию `read_text_files` для чтения файлов из указанного каталога и сохранения объединенного содержимого в выходной файл.