# Модуль rst_indexer

## Обзор

Модуль `rst_indexer` предназначен для автоматического создания файла `index.rst` в формате, необходимом для генерации документации Sphinx. Он рекурсивно обходит указанную директорию, находит все Python-файлы и добавляет их в `index.rst` для последующей обработки Sphinx.

## Подробней

Модуль `rst_indexer` играет важную роль в автоматизации процесса создания документации для проектов на Python. Он упрощает добавление новых модулей в документацию, автоматически обновляя файл `index.rst` при каждом запуске. Это особенно полезно для больших проектов с множеством модулей и подмодулей.

## Классы

В данном модуле классы не используются.

## Функции

### `create_index_rst`

```python
def create_index_rst(start_dir: str) -> None:
    """Создает файл index.rst для Sphinx, автоматически индексируя все Python-файлы в указанной директории.

    Args:
        start_dir (str): Корневая директория, с которой начинается обход поддиректорий.

    Raises:
        Exception: Если возникает ошибка при создании файла index.rst.

    Как работает функция:
    - Функция принимает корневую директорию `start_dir` в качестве аргумента.
    - Определяет пути к директории `docs` и файлу `index.rst`.
    - Если директория `docs` не существует, она создается.
    - Открывает файл `index.rst` для записи и записывает заголовок в формате Sphinx.
    - Обходит все поддиректории, начиная с `start_dir`, и фильтрует Python-файлы.
    - Добавляет найденные Python-файлы в файл `index.rst` в формате Sphinx.
    - Если Python-файлы не найдены, записывает сообщение об этом в файл `index.rst`.
    - Закрывает файл `index.rst`.
    - В случае возникновения ошибки, логирует её и перевыбрасывает исключение.

    Примеры:
        >>> create_index_rst(os.getcwd())  # Создает index.rst для текущей директории
        >>> create_index_rst('/path/to/your/project')  # Создает index.rst для указанной директории
    """
```
**Назначение**: Создание `index.rst` для Sphinx.

**Параметры**:
- `start_dir` (str): Корневая директория, с которой начинается обход.

**Возвращает**:
- `None`

**Вызывает исключения**:
- `Exception`: Если возникает ошибка при создании `index.rst`.

## Параметры функции

- `start_dir` (str): Путь к директории, с которой начинается обход.

## Пример вызова функции

```python
create_index_rst(os.getcwd())
```

## Переменные

-   `MODE: str = \'development\'` - глобальная переменная, указывающая на режим работы приложения.
-   `start_path: Path` - объект `Path`, представляющий начальную директорию для обхода.
-   `docs_dir: Path` - объект `Path`, представляющий директорию `docs`, где будет создан файл `index.rst`.
-   `index_file_path: Path` - объект `Path`, представляющий путь к файлу `index.rst`.\
-   `found_files: bool` - флаг, указывающий, были ли найдены какие-либо файлы Python.
-   `root: str` - текущая директория в процессе обхода `os.walk`.
-   `files: list` - список файлов в текущей директории `root`.
-   `py_files: list` - отфильтрованный список файлов, содержащий только файлы Python (с расширением `.py`).
-   `rel_root: Path` - относительный путь от `start_path` до текущей директории `root`.
-   `py_file: str` - имя текущего файла Python.\
-   `module_path: Path` - объект `Path`, представляющий путь к модулю относительно `start_path`.
-   `module_name: str` - имя модуля, полученное из `module_path` путем удаления расширения `.py` и замены разделителей директорий на точки.

## Дополнительные замечания

Модуль `rst_indexer` предоставляет удобный способ автоматического создания `index.rst` для документации Sphinx.