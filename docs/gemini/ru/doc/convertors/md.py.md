# Модуль для преобразования Markdown в словарь (md2dict.py)

## Обзор

Этот модуль предоставляет функции для преобразования строки Markdown в структурированный словарь, включая извлечение JSON содержимого, если оно присутствует.

## Подробней

Модуль `src.utils.convertors.md2dict` предназначен для обработки Markdown-контента и его преобразования в структурированный формат, удобный для дальнейшего использования в программе. Он содержит функции для преобразования Markdown в HTML и извлечения структуры документа в виде словаря.

## Функции

### `md2html`

**Назначение**: Конвертирует строку Markdown в HTML.

```python
def md2html(md_string: str, extras: List[str] = None) -> str:
     """
     Конвертирует строку Markdown в HTML.

     Args:
         md_string (str): Строка Markdown для конвертации.
         extras (list, optional): Список расширений markdown2. Defaults to None.

     Returns:
         str: HTML-представление Markdown.
     """
    ...
```

**Параметры**:

-   `md_string` (str): Строка Markdown для преобразования.
-   `extras` (list, optional): Список расширений `markdown2` для использования при конвертации. По умолчанию `None`.

**Возвращает**:

-   `str`: HTML-представление Markdown.

**Как работает функция**:

1.  Использует функцию `markdown` из библиотеки `markdown2` для преобразования Markdown-строки в HTML.
2.  Если указаны расширения, передает их в функцию `markdown`.
3.  Обрабатывает возможные исключения, логируя ошибки с использованием `logger.error`.

### `md2dict`

**Назначение**: Конвертирует строку Markdown в структурированный словарь.

```python
def md2dict(md_string: str, extras: List[str] = None) -> Dict[str, list[str]]:
    """
    Конвертирует строку Markdown в структурированный словарь.

    Args:
        md_string (str): Строка Markdown для конвертации.
        extras (list, optional): Список расширений markdown2 для md2html. Defaults to None.

    Returns:
         Dict[str, list[str]]: Структурированное представление Markdown содержимого.
    """
    ...
```

**Параметры**:

-   `md_string` (str): Строка Markdown для преобразования.
-   `extras` (list, optional): Список расширений `markdown2` для использования при конвертации в HTML. По умолчанию `None`.

**Возвращает**:

-   `Dict[str, list[str]]`: Структурированное представление Markdown содержимого в виде словаря, где ключи - это заголовки разделов, а значения - список содержимого этих разделов.

**Как работает функция**:

1.  Преобразует Markdown-строку в HTML, используя функцию `md2html`.
2.  Разбивает HTML-код на строки.
3.  Перебирает строки HTML-кода и определяет заголовки разделов (h1, h2 и т.д.).
4.  Создает словарь, где ключи - это заголовки разделов, а значения - списки строк, представляющих содержимое этих разделов.
5.  Удаляет HTML-теги из содержимого разделов, используя регулярное выражение.
6.  Обрабатывает возможные исключения, логируя ошибки с использованием `logger.error`.

## Переменные модуля

В данном модуле отсутствуют переменные, за исключением импортированных библиотек и констант, которые используются внутри функций.

## Пример использования

```python
from src.utils.convertors import md2dict

markdown_text = "# Заголовок 1\nТекст под заголовком 1\n## Заголовок 2\nТекст под заголовком 2"
data_dict = md2dict.md2dict(markdown_text)
print(data_dict)
```

## Взаимосвязь с другими частями проекта

-   Этот модуль использует библиотеку `markdown2` для преобразования Markdown в HTML.
-   Зависит от модуля `src.logger.logger` для логирования.
-   Модуль может использоваться другими частями проекта `hypotez` для обработки Markdown-контента, например, для извлечения информации из Markdown-файлов.