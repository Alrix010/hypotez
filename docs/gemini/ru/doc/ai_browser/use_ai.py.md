# Модуль для использования AI в веб-драйвере (use_ai.py)

## Обзор

Этот модуль предназначен для интеграции AI моделей в процесс взаимодействия с веб-страницами. Он использует библиотеку `browser_use` и модели `langchain_openai` или `langchain_google_genai` для выполнения задач, таких как ввод текста и получение ответов от веб-сайтов.

## Подробней

Модуль `src/webdriver/ai_browser/use_ai.py` предоставляет класс `Driver`, который позволяет использовать возможности AI для автоматизации взаимодействия с веб-страницами. Он предназначен для выполнения задач, требующих анализа и обработки информации, полученной из веб-интерфейса, а также для автоматического ввода данных и получения ответов. В частности, модуль демонстрирует пример использования OpenAI и Google Gemini для взаимодействия с веб-сайтом ChatGPT.

## Классы

### `Driver`

**Описание**: Класс использует `browser_use` и `langchain_openai` для поиска и получения данных с веб-страниц.

**Методы**:

-   `run_task(model_name: str = "gpt-4o", task:str = '', models_list:list = ['gemini','openai']) -> str`: Выполняет задачу, используя указанную языковую модель для взаимодействия с веб-страницей.

#### `run_task`

**Назначение**: Исполняет сценарий для взаимодействия с веб-страницей, используя AI-модель.

```python
async def run_task(model_name: str = "gpt-4o", task:str = '', models_list:list = ['gemini','openai']) -> str:
    """
    Исполяет сценарий 

    Args:
        model_name: Название языковой модели для использования (по умолчанию gpt-4o).
        use_google: Если True, используется Google Gemini. Если False, используется OpenAI.

    Returns:
        Строку с результатом работы агента, содержащую название статьи и сгенерированный комментарий.
        Возвращает None, если произошла ошибка.
    """
    ...
```

**Параметры**:

-   `model_name` (str): Название языковой модели для использования. По умолчанию "gpt-4o".
-   `task` (str): Описание задачи для выполнения.
-    `models_list` (list): Список используемых моделей.

**Возвращает**:

-   `str`: Строка с результатом работы агента.

**Как работает функция**:

1.  Инициализирует языковую модель (OpenAI или Google Gemini) в зависимости от значения параметра `models_list`.
2.  Определяет задачу для выполнения агентом.
3.  Создает экземпляр класса `Agent` из библиотеки `browser_use`, передавая ему задачу и выбранную языковую модель.
4.  Запускает агента и получает результат его работы.
5.  Логирует информацию о начале и завершении работы агента.
6.  Обрабатывает возможные исключения, логируя ошибки с использованием `logger.error`.

## Переменные модуля

В данном модуле отсутствуют переменные, за исключением импортированных библиотек и констант, определенных внутри функций.

## Пример использования

```python
from src.webdriver.ai_browser import use_ai
import asyncio

async def main():
    result = await use_ai.Driver.run_task(model_name="gpt-4o")
    if result:
        print("Результат работы агента:")
        print(result)
    else:
        print("Не удалось получить результат.")

if __name__ == "__main__":
    asyncio.run(main())
```

## Взаимосвязь с другими частями проекта

-   Модуль использует библиотеку `browser_use` для взаимодействия с веб-страницами и библиотеки `langchain_openai` и `langchain_google_genai` для работы с AI-моделями.
-   Для логирования используется модуль `src.logger.logger`.
-   Этот модуль предназначен для использования в других частях проекта `hypotez`, где требуется автоматизированное взаимодействие с веб-страницами с использованием AI.