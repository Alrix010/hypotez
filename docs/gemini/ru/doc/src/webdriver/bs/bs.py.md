# Модуль `src.webdriver.bs`

## Обзор

Модуль `src.webdriver.bs` предоставляет кастомную реализацию для парсинга HTML-контента с использованием BeautifulSoup и XPath.

## Подробнее

Модуль `src.webdriver.bs` предназначен для работы с HTML-контентом, полученным из веб-страниц или локальных файлов. 
Он позволяет извлекать элементы из HTML-кода с помощью XPath-селекторов.

## Классы

### `BS`

**Описание**: Класс для парсинга HTML-контента с использованием BeautifulSoup и XPath.

**Атрибуты**:

- `html_content (str)`: HTML-контент, который будет парситься.

**Методы**:

- `__init__(self, url: Optional[str] = None)`: Инициализирует парсер BS с опциональным URL.

   **Параметры**:

   - `url (Optional[str])`: URL или путь к файлу для получения HTML-контента. По умолчанию `None`.
- `get_url(self, url: str) -> bool`: Получает HTML-контент из файла или URL и парсит его с помощью BeautifulSoup и XPath.

   **Параметры**:

   - `url (str)`: Путь к файлу или URL для получения HTML-контента.

   **Возвращает**:

   - `bool`: `True`, если контент был успешно получен, `False` в противном случае.

   **Вызывает исключения**:

   - `Exception`: Если возникает ошибка при чтении файла.

   **Как работает**:

   - Метод проверяет, начинается ли URL с `file://`. 
   - Если да, то извлекает путь к файлу, проверяет его существование и пытается открыть его для чтения. 
   - В случае успешного открытия файл считывается, а его содержимое сохраняется в `self.html_content`.
   - Если URL начинается с `https://`, то выполняется запрос к веб-серверу с помощью `requests.get`. 
   - В случае успешного ответа, содержимое ответа сохраняется в `self.html_content`.
   - В противном случае, метод возвращает `False` и записывает ошибку в лог с помощью `logger.error`.

- `execute_locator(self, locator: Union[SimpleNamespace, dict], url: Optional[str] = None) -> List[etree._Element]`: Выполняет XPath-локатор на HTML-контенте.

   **Параметры**:

   - `locator (Union[SimpleNamespace, dict])`: Объект локатора, содержащий селектор и атрибут.
   - `url (Optional[str])`: Опциональный URL или путь к файлу для получения HTML-контента.

   **Возвращает**:

   - `List[etree._Element]`: Список элементов, соответствующих локатору.

   **Как работает**:

   - Метод проверяет, задан ли URL, и в случае необходимости получает HTML-контент с помощью `self.get_url`.
   - Затем, он преобразует HTML-контент в объект BeautifulSoup и lxml tree.
   - В зависимости от типа локатора (`locator.by`), он выполняет соответствующий XPath-запрос для поиска элементов.
   - Метод возвращает список найденных элементов.


## Примеры

```python
# Создание инстанса парсера
parser = BS()

# Получение HTML-контента из URL
parser.get_url('https://example.com')

# Создание локатора для поиска элемента с ID 'element_id'
locator = SimpleNamespace(by='ID', attribute='element_id', selector='//*[@id="element_id"]')

# Выполнение локатора на HTML-контенте
elements = parser.execute_locator(locator)

# Вывод найденных элементов
print(elements)
```