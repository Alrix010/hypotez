# Модуль для работы с JavaScript в браузере

## Обзор

Модуль `src.webdriver.js` предоставляет набор функций, которые позволяют взаимодействовать с веб-страницей с помощью JavaScript, расширяя возможности Selenium WebDriver. 

## Детали

**Модуль используется для следующих задач:**

* Делает невидимые DOM-элементы видимыми, чтобы можно было с ними взаимодействовать.
* Извлекает метаданные, такие как состояние загрузки документа, URL-адрес реферера или язык страницы.
* Управляет фокусом окна браузера программным способом.

## Классы

### `JavaScript`

**Описание:**

Класс `JavaScript` предоставляет методы для выполнения JavaScript-кода в браузере.

**Наследует:**
    - Нет наследования

**Атрибуты:**

* `driver (WebDriver)`: Экземпляр Selenium WebDriver, который используется для выполнения JavaScript-кода.

**Методы:**

#### `unhide_DOM_element(element: WebElement) -> bool`

**Назначение:**

Метод делает невидимый DOM-элемент видимым путем изменения его свойств стиля.

**Параметры:**

* `element (WebElement)`: Объект WebElement, который нужно сделать видимым.

**Возвращает:**

* `bool`: `True`, если скрипт выполняется успешно, `False` в противном случае.

**Как работает метод:**

Метод выполняет JavaScript-код, который изменяет стили элемента: `opacity`, `transform` и `scrollIntoView`. 

#### `ready_state`

**Назначение:**

Свойство `ready_state` возвращает состояние загрузки документа.

**Возвращает:**

* `str`: `'loading'`, если документ еще загружается, `'complete'`, если загрузка завершена.

**Как работает свойство:**

Свойство выполняет JavaScript-код `return document.readyState;`, который возвращает текущее состояние загрузки документа.

#### `window_focus() -> None`

**Назначение:**

Метод устанавливает фокус на окно браузера с помощью JavaScript.

**Как работает метод:**

Метод выполняет JavaScript-код `window.focus();`, который переводит фокус на окно браузера.

#### `get_referrer() -> str`

**Назначение:**

Метод извлекает URL-адрес реферера текущего документа.

**Возвращает:**

* `str`: URL-адрес реферера или пустая строка, если он недоступен.

**Как работает метод:**

Метод выполняет JavaScript-код `return document.referrer;`, который возвращает URL-адрес реферера.

#### `get_page_lang() -> str`

**Назначение:**

Метод извлекает язык текущей страницы.

**Возвращает:**

* `str`: Код языка страницы или пустая строка, если он недоступен.

**Как работает метод:**

Метод выполняет JavaScript-код `return document.documentElement.lang;`, который возвращает код языка страницы.

## Примеры

```python
# Импортирование модуля
from src.webdriver.js import JavaScript

# Создание экземпляра драйвера (пример с Chrome)
from src.webdriver import Driver, Chrome
driver = Driver(Chrome) 

# Создание экземпляра класса JavaScript
js = JavaScript(driver)

# Делаем невидимый элемент видимым
element = driver.execute_locator({"by": "XPATH", "selector": "//div[@id='hidden_element']"})
js.unhide_DOM_element(element)

# Получаем состояние загрузки документа
ready_state = js.ready_state
print(f"Состояние загрузки документа: {ready_state}")

# Устанавливаем фокус на окно браузера
js.window_focus()

# Получаем URL-адрес реферера
referrer = js.get_referrer()
print(f"URL-адрес реферера: {referrer}")

# Получаем язык страницы
page_lang = js.get_page_lang()
print(f"Язык страницы: {page_lang}")
```

**Важно:**

* Для использования этого модуля требуется наличие установленного драйвера Selenium и библиотеки `selenium`.
* Используйте `driver.execute_locator(l: dict)` для выполнения команд Selenium, например, для поиска элементов.
* Используйте `logger` из модуля `src.logger` для регистрации ошибок и информации.

## Внутренние функции

В этом модуле нет внутренних функций.