# Модуль для работы с API сервиса rev.ai для обработки аудио файлов.

## Обзор

Модуль предоставляет инструменты для работы с API rev.ai, чтобы осуществлять транскрипцию, анализ и обработку аудио-данных.

## Подробнее

Модуль предназначен для интеграции с сервисом rev.ai, позволяя выполнять обработку аудиофайлов, такую как транскрипция и анализ. Он предоставляет класс `RevAI`, который инициализируется с использованием API-ключа и предоставляет метод `process_audio_file` для отправки и обработки аудиофайлов.

## Классы

### `RevAI`

**Описание**: Класс для работы с API rev.ai.

**Атрибуты**:
- `api_key` (str): API ключ для доступа к сервису rev.ai.
- `base_url` (str): Базовый URL для доступа к API rev.ai.
- `headers` (dict): Заголовки для HTTP-запросов к API rev.ai.

**Методы**:
- `__init__`: Инициализирует объект RevAI с указанным API ключом.
- `process_audio_file`: Обрабатывает аудио файл, используя API rev.ai.

**Принцип работы**:

Класс `RevAI` предназначен для взаимодействия с API rev.ai. При инициализации класса требуется передать API-ключ, который используется для аутентификации при запросах к сервису. Метод `process_audio_file` принимает путь к аудиофайлу, проверяет его существование, отправляет файл на обработку в rev.ai и возвращает результат в формате словаря. В случае возникновения ошибок в процессе обработки, информация об ошибке логируется с использованием модуля `logger`.

### `__init__`

```python
def __init__(self, api_key: str):
    """
    Инициализирует объект RevAI с указанным API ключом.

    Args:
        api_key (str): API ключ для доступа к сервису rev.ai.
    """
```

**Назначение**: Инициализация объекта `RevAI`.

**Параметры**:
- `api_key` (str): API ключ для доступа к сервису rev.ai.

**Как работает функция**:
- Функция инициализирует объект `RevAI`, сохраняя API-ключ, базовый URL и заголовки.

**Примеры**:

```python
revai_instance = RevAI(api_key='YOUR_API_KEY')
```

### `process_audio_file`

```python
def process_audio_file(self, audio_file_path: str) -> dict:
    """
    Обрабатывает аудио файл, используя API rev.ai.

    Args:
        audio_file_path (str): Путь к аудио файлу.

    Returns:
        dict: Результат обработки аудио файла в формате словаря.
    """
```

**Назначение**: Обработка аудиофайла с использованием API rev.ai.

**Параметры**:
- `audio_file_path` (str): Путь к аудиофайлу.

**Возвращает**:
- `dict`: Результат обработки аудиофайла в формате словаря. Возвращает `None` в случае ошибки.

**Вызывает исключения**:
- `requests.exceptions.RequestException`: Возникает при проблемах с отправкой запроса к API.
- `Exception`: Возникает при общей ошибке обработки файла.

**Как работает функция**:
- Функция проверяет существование файла по указанному пути. Если файл не существует, функция логирует ошибку и возвращает `None`.
- Далее функция пытается отправить запрос к API rev.ai, обрабатывая возможные ошибки, связанные с отправкой запроса и общей обработкой файла.
- В случае успешной отправки и обработки функция возвращает результат в формате словаря.

**Примеры**:

```python
from src.ai.revai.rev_ai import RevAI

# Пример использования с указанием корректного пути к файлу
revai_instance = RevAI(api_key='YOUR_API_KEY')
result = revai_instance.process_audio_file('path/to/audio.wav')
if result:
    print(f'Результат обработки: {result}')
else:
    print('Обработка не удалась')

# Пример использования с несуществующим файлом
revai_instance = RevAI(api_key='YOUR_API_KEY')
result = revai_instance.process_audio_file('non_existent_file.wav')
if result:
    print(f'Результат обработки: {result}')
else:
    print('Обработка не удалась, файл не найден')
```