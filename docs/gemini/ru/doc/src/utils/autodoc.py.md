# Модуль `src.utils.autodoc`

## Обзор

Модуль содержит декоратор `autodoc`, который автоматически обновляет строку документации функции, добавляя информацию о времени последнего вызова функции.

## Подробней

Этот модуль предоставляет механизм для автоматического обновления `docstring` функций с информацией о времени последнего вызова. Это может быть полезно для отслеживания времени выполнения функций или для целей отладки.

## Функции

### `autodoc`

```python
def autodoc(func):
    """Декоратор для автоматического обновления docstring функции."""
```

**Назначение**:
Декоратор `autodoc` предназначен для автоматического обновления `docstring` оборачиваемой функции.

**Параметры**:
- `func`: Функция, для которой необходимо обновить `docstring`.

**Возвращает**:
- `wrapper`: Обернутая функция, при каждом вызове которой обновляется `docstring`.

**Как работает функция**:
- Декоратор оборачивает исходную функцию `func` в функцию `wrapper`.
- При каждом вызове `wrapper` вызывается функция `update_docstring`, которая добавляет в `docstring` `func` информацию о времени последнего вызова.
- Затем вызывается исходная функция `func` с переданными аргументами и возвращается результат её выполнения.

**Внутренние функции**:
- `wrapper(*args, **kwargs)`:
    - Оборачивает функцию, выполняет обновление `docstring` перед каждым вызовом исходной функции.
    - Параметры:
        - `*args`: Позиционные аргументы, переданные в функцию.
        - `**kwargs`: Именованные аргументы, переданные в функцию.
    - Вызывает `update_docstring(func)` для обновления `docstring`.
    - Возвращает результат вызова исходной функции `func(*args, **kwargs)`.

**Примеры**:

```python
@autodoc
def example_function(param1: int, param2: str) -> None:
    """Пример функции.

    Args:
        param1 (int): Первое значение.
        param2 (str): Второе значение.
    """
    print(f"Processing {param1} and {param2}")
```

### `update_docstring`

```python
def update_docstring(func):
    """Обновляет docstring функции."""
```

**Назначение**:
Функция `update_docstring` обновляет `docstring` переданной функции, добавляя в него информацию о времени последнего вызова.

**Параметры**:
- `func`: Функция, `docstring` которой необходимо обновить.

**Как работает функция**:
- Функция получает текущее время с использованием `time.strftime("%Y-%m-%d %H:%M:%S")`.
- Проверяет, существует ли у функции `docstring`.
- Если `docstring` существует, добавляет в него строку с информацией о времени последнего вызова.
- Если `docstring` не существует, создает его и добавляет информацию о времени последнего вызова.

**Примеры**:

```python
def example_function(param1: int, param2: str) -> None:
    """Пример функции.

    Args:
        param1 (int): Первое значение.
        param2 (str): Второе значение.
    """
    print(f"Processing {param1} and {param2}")

update_docstring(example_function)
print(example_function.__doc__)
```

## Пример использования

```python
@autodoc
def example_function(param1: int, param2: str) -> None:
    """Пример функции.

    Args:
        param1 (int): Первое значение.
        param2 (str): Второе значение.
    """
    print(f"Processing {param1} and {param2}")

# Тестирование функции
example_function(1, "test")
print(example_function.__doc__)  # Вывод обновленного docstring
example_function(2, "another test")
print(example_function.__doc__)  # Вывод обновленного docstring