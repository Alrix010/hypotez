# Модуль для работы с датой и временем
=================================================

Модуль содержит класс :class:`TimeoutCheck`, который используется для проверки, попадает ли текущее время в заданный интервал, с возможностью установки таймаута.

Пример использования
----------------------

```python
>>> timeout_check = TimeoutCheck()
>>> if timeout_check.interval_with_timeout(timeout=5):
...     print("Current time is within the interval.")
... else:
...     print("Current time is outside the interval or timeout occurred.")
```

## Оглавление

- [Обзор](#обзор)
- [Подробнее](#подробнее)
- [Классы](#классы)
    - [`TimeoutCheck`](#timeoutcheck)
- [Функции](#функции)
    - [`interval`](#interval)
    - [`interval_with_timeout`](#interval_with_timeout)
    - [`get_input`](#get_input)
    - [`input_with_timeout`](#input_with_timeout)

## Обзор

Модуль предоставляет функциональность для определения, попадает ли текущее время в заданный временной интервал. Это полезно для выполнения операций, которые должны происходить только в определенные периоды времени (например, ночное обслуживание). По умолчанию временной интервал установлен с 23:00 до 06:00, и функция может обрабатывать интервалы, охватывающие полночь.

Кроме того, модуль предоставляет функциональность ожидания ответа с таймаутом.

## Подробнее

Модуль содержит класс `TimeoutCheck`, который включает методы для проверки интервала времени и ожидания ввода пользователя с использованием потоков и таймаутов. Это позволяет выполнять операции, зависящие от времени, и предотвращать зависание программы в ожидании ввода пользователя.

## Классы

### `TimeoutCheck`

**Описание**: Класс для проверки, попадает ли текущее время в заданный интервал, с возможностью установки таймаута.

**Атрибуты**:
- `result` (bool | None): Результат проверки интервала времени. Изначально `None`.
- `user_input` (str | None): Ввод пользователя. Изначально `None`.

**Методы**:
- `interval(start: time, end: time) -> bool`: Проверяет, попадает ли текущее время в заданный интервал.
- `interval_with_timeout(timeout: int, start: time, end: time) -> bool`: Проверяет, попадает ли текущее время в заданный интервал с таймаутом.
- `get_input() -> None`: Запрашивает ввод от пользователя.
- `input_with_timeout(timeout: int) -> str | None`: Ожидает ввод от пользователя с таймаутом.

**Принцип работы**:
Класс `TimeoutCheck` предоставляет методы для работы с временными интервалами и пользовательским вводом. Он использует потоки для выполнения проверок интервала времени и ожидания ввода пользователя с таймаутами, чтобы предотвратить блокировку основного потока выполнения.

## Методы класса

### `interval`

```python
def interval(self, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
    """ Проверяет, попадает ли текущее время в заданный интервал.
    
    Args:
        start (time): Начало интервала (по умолчанию 23:00).
        end (time): Конец интервала (по умолчанию 06:00).

    Returns:
        bool: True, если текущее время находится в интервале, False в противном случае.
    """
```

**Назначение**: Проверяет, находится ли текущее время в заданном интервале.

**Параметры**:
- `start` (time): Время начала интервала. По умолчанию 23:00.
- `end` (time): Время окончания интервала. По умолчанию 06:00.

**Возвращает**:
- `bool`: `True`, если текущее время находится в заданном интервале, и `False` в противном случае.

**Как работает функция**:
Функция `interval` получает текущее время и сравнивает его с заданным интервалом, который определяется параметрами `start` и `end`. Если интервал находится в пределах одного дня (например, с 08:00 до 17:00), функция проверяет, находится ли текущее время между временем начала и временем окончания. Если интервал охватывает полночь (например, с 23:00 до 06:00), функция проверяет, больше ли текущее время, чем время начала, или меньше, чем время окончания. Результат сохраняется в атрибуте `self.result`.

**Примеры**:
```python
from datetime import time
timeout_check = TimeoutCheck()

# Пример 1: Проверка интервала с 08:00 до 17:00
timeout_check.interval(start=time(8, 0), end=time(17, 0))
print(timeout_check.result)  # Вывод зависит от текущего времени

# Пример 2: Проверка интервала с 23:00 до 06:00
timeout_check.interval(start=time(23, 0), end=time(6, 0))
print(timeout_check.result)  # Вывод зависит от текущего времени
```

### `interval_with_timeout`

```python
def interval_with_timeout(self, timeout: int = 5, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
    """ Проверяет, попадает ли текущее время в заданный интервал с таймаутом.

    Args:
        timeout (int): Время в секундах для ожидания проверки интервала.
        start (time): Начало интервала (по умолчанию 23:00).
        end (time): Конец интервала (по умолчанию 06:00).

    Returns:
        bool: True, если текущее время находится в интервале и ответ получен в течение таймаута, False, если нет или произошел таймаут.
    """
```

**Назначение**: Проверяет, находится ли текущее время в заданном интервале с использованием таймаута.

**Параметры**:
- `timeout` (int): Время ожидания в секундах для проверки интервала. По умолчанию 5.
- `start` (time): Время начала интервала. По умолчанию 23:00.
- `end` (time): Время окончания интервала. По умолчанию 06:00.

**Возвращает**:
- `bool`: `True`, если текущее время находится в заданном интервале и ответ получен в течение таймаута, и `False`, если нет или произошел таймаут.

**Как работает функция**:
Функция `interval_with_timeout` создает поток, который выполняет проверку интервала времени с помощью метода `interval`. Поток запускается и ожидается в течение заданного времени (`timeout`). Если поток завершается в течение таймаута, функция возвращает результат проверки. Если таймаут истекает, функция возвращает `False`.

**Примеры**:
```python
from datetime import time
timeout_check = TimeoutCheck()

# Пример 1: Проверка интервала с таймаутом 5 секунд
result = timeout_check.interval_with_timeout(timeout=5, start=time(8, 0), end=time(17, 0))
print(result)  # Вывод зависит от текущего времени и таймаута

# Пример 2: Проверка интервала с таймаутом 1 секунда
result = timeout_check.interval_with_timeout(timeout=1, start=time(23, 0), end=time(6, 0))
print(result)  # Вывод зависит от текущего времени и таймаута
```

### `get_input`

```python
def get_input(self):
    """ Запрашиваем ввод от пользователя."""
```

**Назначение**: Запрашивает ввод от пользователя.

**Параметры**:
- Отсутствуют

**Возвращает**:
- `None`

**Как работает функция**:
Функция `get_input` запрашивает ввод от пользователя через консоль и сохраняет его в атрибуте `self.user_input`.

**Примеры**:
```python
timeout_check = TimeoutCheck()
timeout_check.get_input()
print(timeout_check.user_input)  # Вывод введенного пользователем значения
```

### `input_with_timeout`

```python
def input_with_timeout(self, timeout: int = 5) -> str | None:
    """ Ожидаем ввод с тайм-аутом.

    Args:
        timeout (int): Время ожидания ввода в секундах.

    Returns:
        str | None: Введенные данные или None, если был тайм-аут.
    """
```

**Назначение**: Ожидает ввод от пользователя с использованием таймаута.

**Параметры**:
- `timeout` (int): Время ожидания ввода в секундах.

**Возвращает**:
- `str | None`: Введенные данные или `None`, если произошел таймаут.

**Как работает функция**:
Функция `input_with_timeout` создает поток, который запрашивает ввод от пользователя с помощью метода `get_input`. Поток запускается и ожидается в течение заданного времени (`timeout`). Если поток завершается в течение таймаута, функция возвращает введенные данные. Если таймаут истекает, функция возвращает `None`.

**Примеры**:
```python
timeout_check = TimeoutCheck()

# Пример 1: Ожидание ввода с таймаутом 5 секунд
user_input = timeout_check.input_with_timeout(timeout=5)
print(user_input)  # Вывод введенного пользователем значения или None

# Пример 2: Ожидание ввода с таймаутом 1 секунда
user_input = timeout_check.input_with_timeout(timeout=1)
print(user_input)  # Вывод введенного пользователем значения или None