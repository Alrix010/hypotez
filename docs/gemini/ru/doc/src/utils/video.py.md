# Модуль для работы с видео

## Обзор

Модуль `src.utils.video` предоставляет асинхронные функции для загрузки и сохранения видеофайлов, а также получения видеоданных. 

## Подробнее

Данный модуль использует библиотеку `aiohttp` для асинхронного скачивания видеофайлов по URL. Для записи видеофайлов используется библиотека `aiofiles`. 

## Функции

### `save_video_from_url`

**Назначение**:  Асинхронно загружает видео с заданного URL и сохраняет его локально.

**Параметры**:
- `url` (str): URL видеофайла.
- `save_path` (str): Путь к файлу, куда нужно сохранить видео.

**Возвращает**:
- `Optional[Path]`: Путь к сохраненному файлу, или `None`, если операция завершилась с ошибкой. Возвращает `None` в случае ошибок, а также если файл имеет размер 0 байт.

**Вызывает исключения**:
- `aiohttp.ClientError`: при возникновении сетевых ошибок во время загрузки.

**Как работает**:
- Функция использует `aiohttp.ClientSession` для загрузки видео по URL.
- Проверяет наличие HTTP-ошибок с помощью `response.raise_for_status()`.
- Создает родительские каталоги для `save_path`, если они отсутствуют.
- Асинхронно записывает полученные данные в файл с помощью `aiofiles.open(save_path, "wb")`.
- После сохранения проверяет, был ли файл успешно сохранен и не пуст ли он. 
- Логирует все ошибки с помощью `logger` из `src.logger.logger`.

**Примеры**:

```python
import asyncio

async def example_save_video():
    url = "https://example.com/video.mp4"  # Замените на валидный URL!
    save_path = "local_video.mp4"
    result = await save_video_from_url(url, save_path)
    if result:
        print(f"Видео сохранено в {result}")

asyncio.run(example_save_video())
```

### `get_video_data`

**Назначение**:  Извлекает двоичные данные видеофайла, если он существует.

**Параметры**:
- `file_name` (str): Путь к видеофайлу.

**Возвращает**:
- `Optional[bytes]`: Двоичные данные файла, если он существует, или `None`, если файл не найден или произошла ошибка.

**Вызывает исключения**:
- `FileNotFoundError`: если файл не найден.
- `Exception`: при возникновении ошибок во время чтения файла.

**Как работает**:
- Проверяет, существует ли файл с помощью `file_path.exists()`.
- Если файл найден, читает его в двоичном режиме с помощью `open(file_path, "rb")`.
- Логирует все ошибки с помощью `logger` из `src.logger.logger`.

**Примеры**:

```python
data = get_video_data("local_video.mp4")
if data:
    print(data[:10])  # Вывод первых 10 байт для проверки
```

## Основные переменные

### `logger`

- `logger`:  Объект для логирования из `src.logger.logger`. Используется для записи сообщений об ошибках и информационных сообщений.


## Внутренние функции

Функции `save_video_from_url` и `get_video_data` не содержат внутренних функций.