# Модуль для взаимодействия с FTP серверами

## Обзор

Модуль `src.utils.ftp` предоставляет интерфейс для взаимодействия с FTP серверами. Он включает функции для отправки, получения и удаления файлов с FTP сервера.

## Подробнее

Этот модуль позволяет отправлять медиафайлы (изображения, видео), электронные таблицы и другие файлы на FTP-сервер и с него.

**Модули**:
- helpers (local): Локальные вспомогательные утилиты для FTP операций.
- typing: Подсказки типов для параметров функций и возвращаемых значений.
- ftplib: Предоставляет клиентские возможности протокола FTP.
- pathlib: Для работы с путями файловой системы.

## Функции

### `write`

**Назначение**: Отправляет файл на FTP сервер.

**Параметры**:
- `source_file_path` (str): Путь к файлу, который необходимо отправить.
- `dest_dir` (str): Каталог назначения на FTP сервере.
- `dest_file_name` (str): Имя файла на FTP сервере.

**Возвращает**:
- `bool`: `True`, если файл успешно отправлен, `False` в противном случае.

**Как работает функция**:
1. Функция пытается установить соединение с FTP сервером, используя параметры из словаря `_connection`.
2. Если соединение установлено успешно, функция переходит в указанный каталог `dest_dir`.
3. Открывает файл по пути `source_file_path` в бинарном режиме для чтения.
4. Отправляет файл на FTP сервер, используя команду `STOR` протокола FTP.
5. После успешной отправки файла функция возвращает `True`.
6. Если в процессе отправки или соединения возникают ошибки, функция логирует их и возвращает `False`.
7. В блоке `finally` функция пытается закрыть FTP сессию, логируя возможные ошибки при закрытии.

**Вызывает исключения**:
- `ftplib.all_errors`: Общий класс для всех исключений, связанных с FTP.
- `OSError`: Возникает, если не удается открыть файл `source_file_path`.

**Примеры**:

```python
success = write('local_path/to/file.txt', '/remote/directory', 'file.txt')
print(success)  # Вывод: True или False
```

### `read`

**Назначение**: Получает файл с FTP сервера.

**Параметры**:
- `source_file_path` (str): Путь, по которому файл будет сохранен локально.
- `dest_dir` (str): Каталог на FTP сервере, где расположен файл.
- `dest_file_name` (str): Имя файла на FTP сервере.

**Возвращает**:
- `Union[str, bytes, None]`: Содержимое файла в виде байтов, если файл успешно получен, `None` в противном случае.

**Как работает функция**:
1. Функция пытается установить соединение с FTP сервером, используя параметры из словаря `_connection`.
2. Если соединение установлено успешно, функция переходит в указанный каталог `dest_dir`.
3. Открывает файл по пути `source_file_path` в бинарном режиме для записи.
4. Получает файл с FTP сервера, используя команду `RETR` протокола FTP, и записывает его в локальный файл.
5. После успешного получения файла функция открывает его в бинарном режиме для чтения и возвращает его содержимое.
6. Если в процессе получения или соединения возникают ошибки, функция логирует их и возвращает `None`.
7. В блоке `finally` функция пытается закрыть FTP сессию, логируя возможные ошибки при закрытии.

**Вызывает исключения**:
- `ftplib.all_errors`: Общий класс для всех исключений, связанных с FTP.
- `OSError`: Возникает, если не удается открыть файл `source_file_path` для записи или чтения.

**Примеры**:

```python
content = read('local_path/to/file.txt', '/remote/directory', 'file.txt')
print(content)  # Вывод: b'Some file content' или None
```

### `delete`

**Назначение**: Удаляет файл с FTP сервера.

**Параметры**:
- `source_file_path` (str): Путь, по которому файл расположен локально (не используется).
- `dest_dir` (str): Каталог на FTP сервере, где расположен файл.
- `dest_file_name` (str): Имя файла на FTP сервере.

**Возвращает**:
- `bool`: `True`, если файл успешно удален, `False` в противном случае.

**Как работает функция**:
1. Функция пытается установить соединение с FTP сервером, используя параметры из словаря `_connection`.
2. Если соединение установлено успешно, функция переходит в указанный каталог `dest_dir`.
3. Удаляет файл с FTP сервера, используя команду `DELE` протокола FTP.
4. После успешного удаления файла функция возвращает `True`.
5. Если в процессе удаления или соединения возникают ошибки, функция логирует их и возвращает `False`.
6. В блоке `finally` функция пытается закрыть FTP сессию, логируя возможные ошибки при закрытии.

**Вызывает исключения**:
- `ftplib.all_errors`: Общий класс для всех исключений, связанных с FTP.

**Примеры**:

```python
success = delete('local_path/to/file.txt', '/remote/directory', 'file.txt')
print(success)  # Вывод: True или False
```