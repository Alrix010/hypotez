# Модуль для нормализации строк и числовых данных

## Обзор

Модуль предоставляет функции для нормализации строк, булевых значений, целых чисел и чисел с плавающей точкой.
Он также содержит вспомогательные методы для обработки текста, включая удаление HTML-тегов и специальных символов.

## Подробнее

Этот модуль предоставляет набор инструментов для стандартизации различных типов данных, что особенно полезно при работе с данными, полученными из разных источников. Он обеспечивает согласованность и упрощает дальнейшую обработку и анализ данных.

## Функции

### `normalize_boolean`

**Назначение**: Преобразует входные данные в логическое значение.

**Параметры**:
- `input_data` (Any): Данные, которые могут быть представлены как логическое значение (например, `bool`, `string`, `integer`).

**Возвращает**:
- `bool`: Логическое представление входных данных.

**Как работает функция**:
- Функция принимает входные данные любого типа и пытается преобразовать их в логическое значение.
- Сначала проверяется, является ли входное значение уже логическим. Если да, оно возвращается без изменений.
- Если входное значение является строкой, она преобразуется в нижний регистр и сравнивается с набором известных строковых представлений `True` и `False`.
- Если преобразование не удалось, функция логирует отладочное сообщение и возвращает исходное значение.

**Примеры**:
```python
>>> normalize_boolean('yes')
True
>>> normalize_boolean(0)
False
>>> normalize_boolean(True)
True
```

### `normalize_string`

**Назначение**: Нормализует строку или список строк.

**Параметры**:
- `input_data` (str | list): Входные данные, которые могут быть строкой или списком строк.

**Возвращает**:
- `str`: Очищенная и нормализованная строка в формате UTF-8.

**Вызывает исключения**:
- `TypeError`: Если `input_data` не является строкой или списком.

**Как работает функция**:
- Функция принимает строку или список строк и выполняет ряд операций для нормализации данных.
- Сначала проверяется, является ли входное значение строкой или списком. Если это список, он объединяется в одну строку с разделителем в виде пробела.
- Затем удаляются HTML-теги, переносы строк и специальные символы.
- В конце функция удаляет лишние пробелы и возвращает строку в кодировке UTF-8.

**Примеры**:
```python
>>> normalize_string(['Hello', '  World!  '])
'Hello World!'
>>> normalize_string(" Пример строки <b>с HTML</b> ")
'Пример строки с HTML'
```

### `normalize_int`

**Назначение**: Преобразует входные данные в целое число.

**Параметры**:
- `input_data` (str | int | float | Decimal): Входные данные, которые могут быть числом или его строковым представлением.

**Возвращает**:
- `int`: Целое представление входных данных.

**Как работает функция**:
- Функция принимает числовые данные любого типа и пытается преобразовать их в целое число.
- Если входное значение является экземпляром `Decimal`, оно сначала преобразуется в `int`.
- Если преобразование не удалось, функция логирует ошибку и возвращает исходное значение.

**Примеры**:
```python
>>> normalize_int('42')
42
>>> normalize_int(42.5)
42
```

### `normalize_float`

**Назначение**: Безопасно преобразует входные значения в число с плавающей точкой или список чисел с плавающей точкой.

**Параметры**:
- `value` (Any): Входное значение для преобразования. Может быть единичным значением (числом или строкой) или итерируемым (списком/кортежем).

**Возвращает**:
- `float | List[float] | None`: Число с плавающей точкой, список чисел с плавающей точкой или `None`, если преобразование не удалось.

**Как работает функция**:
- Функция принимает входное значение и пытается преобразовать его в число с плавающей точкой.
- Если входное значение является списком или кортежем, функция рекурсивно вызывает саму себя для каждого элемента и возвращает список чисел с плавающей точкой.
- Если преобразование не удалось, функция логирует предупреждение и возвращает исходное значение.

**Примеры**:
```python
>>> normalize_float("3.14")
3.14
>>> normalize_float([1, '2.5', 3])
[1.0, 2.5, 3.0]
```

### `normalize_sql_date`

**Назначение**: Преобразует данные в формат даты SQL (YYYY-MM-DD).

**Параметры**:
- `input_data` (str): Данные, которые могут представлять дату (например, строка, объект datetime).

**Возвращает**:
- `str`: Нормализованная дата в формате SQL (YYYY-MM-DD) или исходное значение, если преобразование не удалось.

**Как работает функция**:
- Функция принимает строку или объект datetime и пытается преобразовать их в формат даты SQL (YYYY-MM-DD).
- Если входные данные являются строкой, функция пытается разобрать дату, используя несколько форматов даты.
- Если входные данные уже являются объектом datetime, функция преобразует их в формат SQL.
- Если преобразование не удалось, функция логирует отладочное сообщение и возвращает исходное значение.

**Примеры**:
```python
>>> normalize_sql_date('2024-12-06')
'2024-12-06'
>>> normalize_sql_date('12/06/2024')
'2024-12-06'
```

### `simplify_string`

**Назначение**: Упрощает входную строку, сохраняя только буквы, цифры и заменяя пробелы подчеркиваниями.

**Параметры**:
- `input_str` (str): Строка для упрощения.

**Возвращает**:
- `str`: Упрощенная строка.

**Как работает функция**:
- Функция принимает строку и выполняет ряд операций для ее упрощения.
- Сначала удаляются все символы, кроме букв, цифр и пробелов.
- Затем пробелы заменяются подчеркиваниями.
- В конце функция удаляет последовательные подчеркивания.

**Примеры**:
```python
>>> simplify_string("It's a test string with 'single quotes', numbers 123 and symbols!")
'Its_a_test_string_with_single_quotes_numbers_123_and_symbols'
```

### `remove_line_breaks`

**Назначение**: Удаляет переносы строк из входной строки.

**Параметры**:
- `input_str` (str): Входная строка.

**Возвращает**:
- `str`: Строка без переносов строк.

**Как работает функция**:
- Функция принимает строку и удаляет из нее символы переноса строки (`\n`) и возврата каретки (`\r`), заменяя их пробелами.

**Примеры**:
```python
>>> remove_line_breaks("Hello\nWorld!\r")
'Hello World!'
```

### `remove_html_tags`

**Назначение**: Удаляет HTML-теги из входной строки.

**Параметры**:
- `input_html` (str): Входная HTML-строка.

**Возвращает**:
- `str`: Строка без HTML-тегов.

**Как работает функция**:
- Функция принимает HTML-строку и удаляет из нее все HTML-теги с помощью регулярного выражения.

**Примеры**:
```python
>>> remove_html_tags("<p>Hello</p> <b>World!</b>")
'Hello World!'
```

### `remove_special_characters`

**Назначение**: Удаляет указанные специальные символы из строки или списка строк.

**Параметры**:
- `input_str` (str | list): Входная строка или список строк.
- `chars` (list[str], optional): Список символов для удаления. По умолчанию `None`.

**Возвращает**:
- `str | list`: Обработанная строка или список с удаленными указанными символами.

**Как работает функция**:
- Функция принимает строку или список строк и удаляет из них указанные специальные символы.
- Если список символов не указан, используется список по умолчанию, содержащий символ `#`.
- Функция использует регулярное выражение для удаления символов.

**Примеры**:
```python
>>> remove_special_characters("Hello#World!", chars=['#', '!'])
'HelloWorld'
>>> remove_special_characters(['Hello#', 'World!'], chars=['#', '!'])
['Hello', 'World']
```

### `normalize_sku`

**Назначение**: Нормализует артикул (SKU), удаляя определенные ключевые слова на иврите и любые не буквенно-цифровые символы, кроме дефисов.

**Параметры**:
- `input_str` (str): Входная строка, содержащая артикул.

**Возвращает**:
- `str`: Нормализованная строка артикула.

**Как работает функция**:
- Функция принимает строку, содержащую артикул, и выполняет следующие шаги:
    1. Удаляет ключевые слова на иврите "מקט" и "מק''ט" (независимо от регистра).
    2. Удаляет все символы, не являющиеся буквенно-цифровыми, за исключением дефисов.

**Примеры**:
```python
>>> normalize_sku("מקט: 303235-A")
'303235-A'
>>> normalize_sku("מק''ט: 12345-B")
'12345-B'
>>> normalize_sku("Some text מקט: 123-456-789 other text")
'Some text 123-456-789 other text'