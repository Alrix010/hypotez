# Модуль `ai_string_utils`

## Обзор

Этот модуль предоставляет функции для работы со строками, 
предназначенные для:

1.  **Подготовка текстовых данных для обучения моделей**: 
    - Экранирование кавычек (`"`) символом обратной косой черты (`\\`).
    - Удаление повторяющихся пробельных символов.
    - Удаление начальных и конечных пробелов.
2.  **Нормализация ответов от языковых моделей**: 
    - Удаление обрамляющих блоков кода Markdown (например, ````html`, ````python`).

## Подробнее

Модуль состоит из двух основных групп функций:

1.  **Функции для подготовки данных для обучения**: 
    - `string_for_train()`: очистка и форматирование строк для обучения.
2.  **Функции для нормализации ответов ИИ**: 
    - `normalize_answer()`: удаление обрамляющих блоков кода из ответов моделей.

## Классы

### `class CodeAssistant`

**Описание**: Класс для взаимодействия с ассистентами программиста.

**Наследует**: Нет

**Атрибуты**:

-   `role` (str): Роль ассистента, например, "code_checker".
-   `lang` (str): Язык программирования, например, "python".
-   `model` (List[str]): Список используемых языковых моделей, например, ["gemini"].

**Методы**:

-   `process_files()`: Обработка файлов с использованием ассистента.

## Функции

### `string_for_train`

**Назначение**: Очищает и форматирует данные для обучения. Удаляет повторяющиеся пробелы, экранирует двойные кавычки (`"`) символом обратной косой черты (`\\`) и заменяет множественные пробельные символы одним пробелом.

**Параметры**:

-   `data` (Union[str, List[str]]): Входные данные. Могут быть строкой или списком строк.

**Возвращает**:

-   `str`: Очищенная и объединенная строка (если на входе был список), готовая для использования в обучении. Возвращает пустую строку, если тип входных данных не строка и не список строк.

**Вызывает исключения**:

-   `None`: Функция не генерирует исключений.

**Пример**:

```python
>>> string_for_train('   Это  строка   с "кавычками"   и    пробелами. ')
'Это строка с \\"кавычками\\" и пробелами.'
>>> string_for_train(['Первая строка.', '   Вторая "строка"   с пробелами.'])
'Первая строка. Вторая \\"строка\\" с пробелами.'
>>> string_for_train(None)
''
>>> string_for_train(123)
''
```

**Как работает функция**:

-   Функция проверяет тип данных.
-   Если данные - строка, она экранирует кавычки, удаляет `\n` и нормализует пробелы.
-   Если данные - список, она обрабатывает каждый элемент списка, нормализует пробелы и объединяет элементы в одну строку.
-   В случае некорректного типа данных возвращается пустая строка.

### `normalize_answer`

**Назначение**: Нормализует текстовый ответ, удаляя обрамляющие блоки кода markdown.

**Параметры**:

-   `text` (str): Исходная строка текста, потенциально содержащая обрамляющие блоки кода.

**Возвращает**:

-   `str`: Нормализованная строка без начального и конечного блоков кода, либо исходная строка, если блоки не найдены.

**Вызывает исключения**:

-   `None`: Функция не генерирует исключений.

**Примеры**:

```python
>>> normalize_answer("```html\n<p>Пример</p>\n```")
'<p>Пример</p>\n'
>>> normalize_answer("```markdown\n# Заголовок\nТекст.\n```")
'# Заголовок\nТекст.\n'
>>> normalize_answer("```\nПросто текст\n```")
'Просто текст\n'
>>> normalize_answer("Обычный текст без блоков.")
'Обычный текст без блоков.'
>>> normalize_answer("```Неполный блок")
'```Неполный блок'
>>> normalize_answer("Блок в конце```")
'Блок в конце```'
>>> normalize_answer("```md Текст```") # Пример с пробелом после md
'Текст'
```

**Как работает функция**:

-   Проверяет, начинается ли строка `text` одним из префиксов из списка `_NORMALIZER_PREFIXES` (например, `'```html\n'`, `'```markdown'`, `'```'`) и заканчивается ли она суффиксом `_NORMALIZER_SUFFIX` (`'```'`).
-   Если оба условия выполняются, удаляет соответствующий префикс и суффикс.
-   В противном случае возвращает исходную строку без изменений.