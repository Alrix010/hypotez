# Модуль для работы с CSV-файлами

## Обзор

Модуль `src.utils.csv` предоставляет набор функций для работы с CSV-файлами. 
Он позволяет сохранять данные в формате CSV, читать данные из CSV-файла, 
преобразовывать CSV-файлы в JSON, а также считывать CSV-файлы в виде словаря или списка словарей.

## Подробней

Модуль `src.utils.csv`  предназначен для взаимодействия с CSV-файлами.
Он обеспечивает удобный способ сохранения и чтения данных, 
а также преобразования форматов файлов (CSV в JSON). 

## Классы

В этом модуле нет классов.

## Функции

### `save_csv_file`

**Назначение**: Функция сохраняет список словарей в CSV-файл.

**Параметры**:
- `data` (List[Dict[str, str]]): Список словарей для сохранения.
- `file_path` (Union[str, Path]): Путь к CSV-файлу.
- `mode` (str): Режим открытия файла ('a' для добавления, 'w' для перезаписи). По умолчанию 'a'.
- `exc_info` (bool): Включать информацию об отслеживании стека в журналах.

**Возвращает**:
- `bool`: True, если сохранение прошло успешно, иначе False.

**Вызывает исключения**:
- `TypeError`: Если входные данные не являются списком словарей.
- `ValueError`: Если входные данные пусты.

**Как работает функция**:
- Функция проверяет тип входных данных.
- Создает директорию, если ее не существует.
- Открывает CSV-файл в указанном режиме.
- Использует `csv.DictWriter` для записи данных в файл.
- Если режим записи 'w' или файл не существует, то добавляет заголовок в файл.
- Записывает строки данных в файл.
- Возвращает `True`, если сохранение прошло успешно.
- В случае ошибки записывает ошибку в лог и возвращает `False`.

**Примеры**:

```python
from src.utils.csv import save_csv_file
from pathlib import Path

data = [
    {'name': 'John Doe', 'age': 30},
    {'name': 'Jane Doe', 'age': 25},
]

# Сохранение в файл с перезаписью
save_csv_file(data, 'data.csv', mode='w')

# Сохранение в файл с добавлением
save_csv_file(data, Path('data/users.csv'), mode='a')
```


### `read_csv_file`

**Назначение**: Функция считывает содержимое CSV-файла в виде списка словарей.

**Параметры**:
- `file_path` (Union[str, Path]): Путь к CSV-файлу.
- `exc_info` (bool): Включать информацию об отслеживании стека в журналах.

**Возвращает**:
- `List[Dict[str, str]] | None`: Список словарей или None, если считывание не удалось.

**Вызывает исключения**:
- `FileNotFoundError`: Если файл не найден.

**Как работает функция**:
- Открывает CSV-файл для чтения.
- Использует `csv.DictReader` для чтения данных в виде списка словарей.
- Возвращает список словарей, если считывание прошло успешно.
- В случае ошибки записывает ошибку в лог и возвращает `None`.

**Примеры**:

```python
from src.utils.csv import read_csv_file
from pathlib import Path

# Чтение из файла
data = read_csv_file('data.csv')

# Чтение из файла по пути
data = read_csv_file(Path('data/users.csv'))
```


### `read_csv_as_json`

**Назначение**: Функция конвертирует CSV-файл в JSON и сохраняет его.

**Параметры**:
- `csv_file_path` (Union[str, Path]): Путь к CSV-файлу.
- `json_file_path` (Union[str, Path]): Путь к файлу для сохранения JSON.
- `exc_info` (bool): Включать информацию об отслеживании стека в журналах.

**Возвращает**:
- `bool`: True, если преобразование прошло успешно, иначе False.

**Как работает функция**:
- Считывает CSV-файл в виде списка словарей.
- Открывает файл для записи в JSON-формате.
- Использует `json.dump` для сохранения данных в формате JSON.
- Возвращает `True`, если преобразование прошло успешно.
- В случае ошибки записывает ошибку в лог и возвращает `False`.

**Примеры**:

```python
from src.utils.csv import read_csv_as_json
from pathlib import Path

# Преобразование CSV в JSON
read_csv_as_json('data.csv', 'data.json')

# Преобразование CSV в JSON с указанием пути
read_csv_as_json(Path('data/users.csv'), Path('data/users.json'))
```


### `read_csv_as_dict`

**Назначение**: Функция преобразует содержимое CSV-файла в словарь.

**Параметры**:
- `csv_file` (Union[str, Path]): Путь к CSV-файлу.

**Возвращает**:
- `dict | None`: Словарь, представляющий содержимое CSV-файла, или None, если считывание не удалось.

**Как работает функция**:
- Открывает CSV-файл для чтения.
- Использует `csv.DictReader` для чтения данных в виде списка словарей.
- Создает словарь с ключом 'data', содержащим список словарей, полученных из CSV.
- Возвращает созданный словарь.
- В случае ошибки записывает ошибку в лог и возвращает `None`.

**Примеры**:

```python
from src.utils.csv import read_csv_as_dict
from pathlib import Path

# Чтение CSV в словарь
data = read_csv_as_dict('data.csv')

# Чтение CSV в словарь по пути
data = read_csv_as_dict(Path('data/users.csv'))
```


### `read_csv_as_ns`

**Назначение**: Функция считывает данные CSV-файла в список словарей с помощью Pandas.

**Параметры**:
- `file_path` (Union[str, Path]): Путь к CSV-файлу.

**Возвращает**:
- `List[dict]`: Список словарей, представляющих содержимое CSV-файла.

**Вызывает исключения**:
- `FileNotFoundError`: Если файл не найден.

**Как работает функция**:
- Использует `pandas.read_csv` для считывания данных в DataFrame.
- Преобразует DataFrame в список словарей с помощью `df.to_dict(orient='records')`.
- Возвращает список словарей.
- В случае ошибки записывает ошибку в лог и возвращает пустой список.

**Примеры**:

```python
from src.utils.csv import read_csv_as_ns
from pathlib import Path

# Чтение CSV с помощью Pandas
data = read_csv_as_ns('data.csv')

# Чтение CSV по пути с помощью Pandas
data = read_csv_as_ns(Path('data/users.csv'))
```

## Параметры класса

В этом модуле нет классов, поэтому нет параметров класса.