# Модуль `src.utils.convertors.tts`

## Обзор

Модуль `src.utils.convertors.tts` предоставляет функции для обработки речи: 
распознавание речи из аудиофайла и преобразование текста в речь.

## Подробности

Данный модуль используется для преобразования текста в речь и распознавания речи из аудиофайлов.
Он использует библиотеки `speech_recognition`, `pydub` и `gtts` для выполнения этих задач. 
Модуль также использует модуль `src.logger` для записи информации и ошибок в журнал.

## Функции

### `speech_recognizer`

**Назначение**: Функция скачивает аудиофайл и распознает речь в нем. 

**Параметры**:

- `audio_url` (str, optional): URL аудиофайла для скачивания. По умолчанию `None`.
- `audio_file_path` (Path, optional): Локальный путь к аудиофайлу. По умолчанию `None`.
- `language` (str): Код языка для распознавания (например, 'ru-RU'). По умолчанию 'ru-RU'.

**Возвращает**:

- `str`: Распознанный текст из аудио или сообщение об ошибке.

**Вызывает исключения**:

- `Exception`: Если возникает ошибка при скачивании, преобразовании или распознавании аудио.

**Как работает функция**:

1. Скачивает аудиофайл по `audio_url` или использует предоставленный локальный файл по `audio_file_path`.
2. Преобразует аудиофайл из формата OGG в WAV с помощью `pydub`.
3. Использует `speech_recognition` для распознавания речи в аудиофайле.
4. Возвращает распознанный текст или сообщение об ошибке, если распознавание не удалось.

**Примеры**:

```python
recognized_text = speech_recognizer(audio_url='https://example.com/audio.ogg')
print(recognized_text)  # Output: "Привет"

recognized_text = speech_recognizer(audio_file_path=Path('/path/to/audio.ogg'))
print(recognized_text)  # Output: "Привет"
```

### `text2speech`

**Назначение**: Функция преобразует текст в речь и сохраняет его в виде аудиофайла.

**Параметры**:

- `text` (str): Текст, который нужно преобразовать в речь.
- `lang` (str, optional): Код языка для речи (например, 'ru'). По умолчанию 'ru'.

**Возвращает**:

- `str`: Путь к сгенерированному аудиофайлу.

**Вызывает исключения**:

- `Exception`: Если возникает ошибка при преобразовании текста в речь.

**Как работает функция**:

1. Использует `gtts` для создания аудиофайла из текста.
2. Сохраняет аудиофайл в формате MP3.
3. Преобразует аудиофайл из MP3 в WAV с помощью `pydub`.
4. Возвращает путь к сгенерированному аудиофайлу в формате WAV.

**Примеры**:

```python
audio_path = await text2speech('Привет', lang='ru')
print(audio_path)  # Output: "/tmp/response.mp3"
```

## Дополнительные сведения

Модуль `src.utils.convertors.tts` обеспечивает удобные функции для работы с речью, позволяя вам скачивать аудиофайлы, распознавать речь и создавать аудиофайлы из текста. 
В случае ошибок модуль `src.logger` записывает информацию и ошибки в журнал для последующего анализа.