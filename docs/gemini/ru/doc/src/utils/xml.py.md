# Модуль для работы с XML
## Обзор

Модуль предоставляет функции для очистки и сохранения XML-данных. Он включает в себя функциональность для удаления пустых секций CDATA, удаления лишних пробелов и сохранения XML в файл с форматированием.

## Подробнее

Этот модуль предназначен для обработки XML-данных, приведения их к чистому и читаемому виду, а также сохранения в файл. Он использует библиотеки `xml.etree.ElementTree` и `xml.dom.minidom` для парсинга и форматирования XML.

## Классы

В данном модуле классы отсутствуют.

## Функции

### `clean_empty_cdata`

**Назначение**: Очищает пустые секции CDATA и удаляет ненужные пробелы в XML-строке.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.

**Возвращает**:
- `str`: Очищенный и отформатированный XML-контент.

**Как работает функция**:
1. Преобразует XML-строку в дерево элементов с помощью `ET.fromstring()`.
2. Определяет внутреннюю рекурсивную функцию `remove_empty_elements(element)`, которая проходит по всем дочерним элементам и удаляет пустые элементы (элементы без текста, атрибутов и дочерних элементов).
3. Вызывает `remove_empty_elements(root)` для удаления пустых элементов, начиная с корневого элемента.
4. Преобразует очищенное дерево элементов обратно в XML-строку с помощью `ET.tostring()`.
5. Использует регулярное выражение `re.sub(r">\s+<", "><", cleaned_xml)` для удаления лишних пробелов между тегами.
6. Возвращает очищенную XML-строку.

**Внутренние функции**:

#### `remove_empty_elements`

**Назначение**: Рекурсивно удаляет пустые элементы из XML-дерева.

**Параметры**:
- `element`: Текущий XML-элемент для проверки.

**Как работает функция**:
1. Проходит по всем дочерним элементам текущего элемента.
2. Рекурсивно вызывает саму себя для каждого дочернего элемента.
3. Проверяет, является ли текущий элемент пустым (нет текста после удаления пробелов, нет атрибутов и нет дочерних элементов).
4. Если элемент пустой, удаляет его из родительского элемента.

**Примеры**:
```python
xml_data = "<root><item>Value</item><empty></empty></root>"
cleaned_xml = clean_empty_cdata(xml_data)
print(cleaned_xml) # Вывод: <root><item>Value</item></root>
```

### `save_xml`

**Назначение**: Сохраняет очищенные XML-данные из строки в файл с отступами.

**Параметры**:
- `xml_string` (str): XML-контент в виде строки.
- `file_path` (str): Путь к выходному файлу.

**Возвращает**:
- `None`

**Как работает функция**:
1. Очищает XML-строку от пустых элементов с помощью функции `clean_empty_cdata(xml_string)`.
2. Парсит очищенную XML-строку в дерево элементов с помощью `ET.fromstring()`.
3. Преобразует дерево элементов в строку с помощью `ET.tostring()`.
4. Использует `minidom.parseString()` для парсинга XML-строки и форматирования с отступами.
5. Открывает файл по указанному пути в режиме записи с кодировкой UTF-8.
6. Записывает отформатированный XML-контент в файл с помощью `file.write(pretty_xml)`.

**Примеры**:
```python
xml_data = "<root><item>Value</item><item attr=\"test\">Another</item></root>"
save_xml(xml_data, "output.xml")
```

## Примеры

В конце модуля представлен пример использования функций `clean_empty_cdata` и `save_xml`, который демонстрирует создание XML-данных, их очистку и сохранение в файл.
```python
xml_data = """<root><item>Value</item><item attr="test">Another</item></root>"""
save_xml(xml_data, "output.xml")
```