# Модуль для обучения модели для AliExpress

## Обзор

Модуль предназначен для обучения моделей на данных, связанных с AliExpress. Он использует OpenAI и Google Gemini для обработки заголовков товаров и генерации ответов на основе предоставленных данных.

## Подробней

Модуль выполняет следующие шаги:
1. Рекурсивно получает список файлов `product_titles.txt` из указанной директории в Google Drive.
2. Считывает системную инструкцию из файла `system_instruction.txt`.
3. Инициализирует модели OpenAI и Google Gemini с использованием этой инструкции.
4. Для каждого файла с заголовками товаров:
   - Считывает содержимое файла.
   - Отправляет запрос в OpenAI и Google Gemini.
   - Обрабатывает полученные ответы.
   - <далее, если есть>

## Классы

В данном коде классы отсутствуют.

## Функции

### `recursively_get_filenames`

**Назначение**: Получает список всех файлов с указанным расширением в заданной директории и её поддиректориях.

**Параметры**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.file`.

**Возвращает**:
- Отсутствует, так как это функция из внешнего модуля `src.utils.file`.

**Вызывает исключения**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.file`.

**Как работает функция**:
- Функция рекурсивно обходит все поддиректории, начиная с указанной, и собирает полные пути ко всем файлам, имеющим заданное расширение.

**Примеры**:
```python
from src.utils.file import recursively_get_filenames
from pathlib import Path

# Пример использования:
#Предположим, что структура директории следующая:
#   - google_drive
#       - aliexpress
#           - campaigns
#               - file1.txt
#               - subfolder
#                   - file2.txt
#                   - file3.product_titles.txt

#files = recursively_get_filenames(Path('google_drive/aliexpress/campaigns'), 'product_titles.txt')
#print(files) # Output: ['google_drive/aliexpress/campaigns/subfolder/file3.product_titles.txt']
```

### `read_text_file`

**Назначение**: Считывает содержимое текстового файла.

**Параметры**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.file`.

**Возвращает**:
- Отсутствует, так как это функция из внешнего модуля `src.utils.file`.

**Вызывает исключения**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.file`.

**Как работает функция**:
- Функция открывает файл по указанному пути и возвращает его содержимое в виде строки.

**Примеры**:
```python
from src.utils.file import read_text_file
from pathlib import Path

# file_path = Path('system_instruction.txt')
# content = read_text_file(file_path)
# print(content)  # Вывод: Содержимое файла system_instruction.txt
```

### `csv2json_csv2dict`

**Назначение**: Преобразует CSV-файл в JSON-формат или словарь.

**Параметры**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.convertors`.

**Возвращает**:
- Отсутствует, так как это функция из внешнего модуля `src.utils.convertors`.

**Вызывает исключения**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.convertors`.

**Как работает функция**:
- Функция принимает путь к CSV-файлу и преобразует его содержимое либо в JSON-строку, либо в словарь Python.

**Примеры**:
```python
from src.utils.convertors import csv2json_csv2dict
from pathlib import Path

# csv_file_path = Path('data.csv')
# data = csv2json_csv2dict(csv_file_path)
# print(data)  # Вывод: Преобразованные данные из CSV-файла
```

### `pprint`

**Назначение**: Выводит данные в удобочитаемом формате.

**Параметры**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.printer`.

**Возвращает**:
- Отсутствует, так как это функция из внешнего модуля `src.utils.printer`.

**Вызывает исключения**:
- Отсутствуют, так как это функция из внешнего модуля `src.utils.printer`.

**Как работает функция**:
- Функция принимает данные любого типа и выводит их в консоль в формате, удобном для чтения. Для словарей и списков используется отступы и переводы строк.

**Примеры**:
```python
from src.utils.printer import pprint

data = {"name": "Alice", "age": 30}
# pprint(data) # Вывод: {'name': 'Alice', 'age': 30}
```

### OpenAIModel.ask

**Назначение**: Отправляет запрос в OpenAI.

**Параметры**:
- Отсутствуют, так как это метод класса `OpenAIModel`.

**Возвращает**:
- Отсутствует, так как это метод класса `OpenAIModel`.

**Вызывает исключения**:
- Отсутствуют, так как это метод класса `OpenAIModel`.

**Как работает функция**:
- Метод отправляет запрос в OpenAI и возвращает ответ модели.

### GoogleGenerativeAi.ask

**Назначение**: Отправляет запрос в Google Gemini.

**Параметры**:
- Отсутствуют, так как это метод класса `GoogleGenerativeAi`.

**Возвращает**:
- Отсутствует, так как это метод класса `GoogleGenerativeAi`.

**Вызывает исключения**:
- Отсутствуют, так как это метод класса `GoogleGenerativeAi`.

**Как работает функция**:
- Метод отправляет запрос в Google Gemini и возвращает ответ модели.

## Переменные

- `product_titles_files (list)`: Список файлов с заголовками товаров, полученных рекурсивно из директории `aliexpress` в Google Drive.
- `system_instruction_path (Path)`: Путь к файлу с системной инструкцией для моделей.
- `system_instruction (str)`: Содержимое файла с системной инструкцией.
- `openai (OpenAIModel)`: Инстанс класса `OpenAIModel`, инициализированный с системной инструкцией.
- `gemini (GoogleGenerativeAi)`: Инстанс класса `GoogleGenerativeAi`, инициализированный с системной инструкцией.
- `file (str)`: Переменная цикла, представляющая текущий файл с заголовками товаров.
- `product_titles (str)`: Содержимое текущего файла с заголовками товаров.
- `response_openai (str)`: Ответ, полученный от модели OpenAI.
- `response_gemini (str)`: Ответ, полученный от модели Google Gemini.