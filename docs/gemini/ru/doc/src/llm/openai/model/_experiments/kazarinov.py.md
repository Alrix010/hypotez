# Модуль для экспериментов с OpenAI API (kazarinov.py)

## Обзор

Модуль предназначен для экспериментов с моделью OpenAI API, включая настройку системных инструкций и ведение диалога с пользователем через консоль. Он содержит класс `OpenAIChat`, который инициализирует модель OpenAI с заданным API-ключом и системными инструкциями, а также функцию `chat` для интерактивного общения с моделью.

## Подробнее

Модуль предоставляет возможность инициализировать OpenAI модель с заданным API-ключом и системными инструкциями. Он также включает функцию `chat`, которая позволяет пользователю взаимодействовать с моделью через консоль. Взаимодействие включает в себя ввод API-ключа, отправку запросов и получение ответов от модели. Системные инструкции загружаются из файла `system_instruction.txt`, что позволяет настраивать поведение модели.

## Классы

### `OpenAIChat`

**Описание**: Класс для взаимодействия с моделью OpenAI Chat API.

**Атрибуты**:
- `api_key` (str): API-ключ для доступа к OpenAI.
- `system_instruction` (str): Системная инструкция для модели.
- `messages` (List[dict]): Список сообщений для поддержания контекста диалога.

**Методы**:
- `__init__(api_key: str, system_instruction: str = None)`: Инициализирует экземпляр класса `OpenAIChat`.
- `ask(prompt: str) -> str`: Отправляет вопрос в модель OpenAI и возвращает ответ.

#### `__init__`

```python
def __init__(self, api_key: str, system_instruction: str = None):
    """Инициализирует экземпляр класса OpenAIChat.

    Args:
        api_key (str): API-ключ для доступа к OpenAI.
        system_instruction (str, optional): Системная инструкция для модели. По умолчанию None.

    """
```

**Как работает функция**:

- Функция инициализирует OpenAI API с использованием переданного `api_key`.
- Загружает системную инструкцию, если она предоставлена, и добавляет ее в список сообщений.
- Инициализирует список `messages` для хранения контекста диалога.

#### `ask`

```python
def ask(self, prompt: str) -> str:
    """Отправляет вопрос в модель OpenAI и получение ответа

    Args:
        prompt (str): Вопрос пользователя.

    Returns:
        str: Ответ от модели OpenAI.

    Raises:
        Exception: Если происходит ошибка при обращении к OpenAI API.

    """
```

**Как работает функция**:

- Функция принимает вопрос от пользователя, добавляет его в список сообщений и отправляет запрос в OpenAI API.
- После получения ответа добавляет его в список сообщений для сохранения контекста.
- В случае ошибки логирует её и возвращает сообщение об ошибке.

## Функции

### `chat`

```python
def chat():
    """Организует интерактивный чат с моделью OpenAI."""
```

**Как работает функция**:

- Функция запрашивает у пользователя OpenAI API-ключ.
- Инициализирует класс `OpenAIChat` с использованием введенного ключа и системной инструкции.
- Организует цикл, в котором пользователь может вводить вопросы и получать ответы от модели OpenAI до тех пор, пока не введет команду `exit`.

**Примеры**:

```python
# Пример использования функции chat
chat()
```

### `__name__ == "__main__"`

```python
if __name__ == "__main__":
    chat()
```

**Как работает**:

- Этот блок кода проверяет, является ли текущий скрипт главным запускаемым файлом.
- Если да, то вызывается функция `chat()`, чтобы запустить интерактивный чат с моделью OpenAI.