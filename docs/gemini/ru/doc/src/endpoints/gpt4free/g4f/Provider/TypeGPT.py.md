# Модуль `TypeGPT`

## Обзор

Модуль `TypeGPT` предоставляет класс `TypeGPT`, который является подклассом `OpenaiTemplate` и предназначен для взаимодействия с сервисом TypeGPT (chat.typegpt.net). Этот класс содержит настройки и методы для работы с API TypeGPT, включая заголовки запросов, URL, список поддерживаемых моделей и алиасы моделей.

## Подробнее

Модуль определяет класс `TypeGPT`, который наследует `OpenaiTemplate` и специализируется на взаимодействии с API сервиса TypeGPT. Он содержит атрибуты, определяющие URL, заголовки, список моделей и алиасы для моделей, используемых в сервисе.
Этот код позволяет абстрагироваться от конкретной реализации API TypeGPT и предоставляет удобный интерфейс для взаимодействия с ним.

## Классы

### `TypeGPT`

**Описание**: Класс `TypeGPT` предназначен для взаимодействия с сервисом TypeGPT. Он наследует `OpenaiTemplate` и предоставляет методы и атрибуты для работы с API TypeGPT.

**Наследует**:
- `OpenaiTemplate`: Класс, предоставляющий базовый функционал для работы с OpenAI-подобными API.

**Атрибуты**:
- `label` (str): Метка провайдера, в данном случае "TypeGpt".
- `url` (str): URL сервиса TypeGPT ("https://chat.typegpt.net").
- `api_base` (str): Базовый URL API TypeGPT ("https://chat.typegpt.net/api/openai/v1").
- `working` (bool): Флаг, указывающий на работоспособность провайдера (True).
- `headers` (dict): Словарь заголовков HTTP-запросов, необходимых для взаимодействия с API TypeGPT.
- `default_model` (str): Модель, используемая по умолчанию ('gpt-4o-mini-2024-07-18').
- `default_vision_model` (str): Модель для обработки изображений по умолчанию, совпадает с `default_model`.
- `vision_models` (list): Список моделей, поддерживающих обработку изображений.
- `fallback_models` (list): Список моделей для переключения в случае проблем с основными моделями.
- `image_models` (list): Список моделей, генерирующих изображения.
- `model_aliases` (dict): Словарь алиасов для моделей, позволяющий использовать короткие имена для обращения к моделям.

**Принцип работы**:

Класс `TypeGPT` определяет все необходимые параметры для взаимодействия с API TypeGPT. Заголовки запросов, URL, список моделей и алиасы определены как атрибуты класса. Это позволяет легко конфигурировать и использовать API TypeGPT в различных сценариях.

**Методы**:

### `get_models`

```python
    @classmethod
    def get_models(cls, **kwargs):
        """
        Получает список доступных моделей из API TypeGPT.

        Args:
            **kwargs: Дополнительные аргументы (не используются).

        Returns:
            list: Список доступных моделей.

        Примеры:
            >>> TypeGPT.get_models()
            ['gpt-4o-mini-2024-07-18', 'gpt-3.5-turbo', ...]
        """
```

**Назначение**: Метод `get_models` получает список доступных моделей из API TypeGPT.

**Параметры**:
- `cls`: Ссылка на класс `TypeGPT`.
- `**kwargs`: Дополнительные аргументы (не используются).

**Возвращает**:
- `list`: Список доступных моделей.

**Как работает функция**:
1. Проверяется, был ли уже получен список моделей (атрибут `cls.models`).
2. Если список моделей пуст, выполняется GET-запрос к эндпоинту `/api/config` для получения конфигурации.
3. Из полученной конфигурации извлекается строка `customModels`, которая разделяется на список моделей.
4. Фильтрация списка моделей, чтобы извлечь только те, которые начинаются с "+" и не входят в `image_models`.
5. К каждой модели применяется разделение по символу "@" и извлекается первая часть (имя модели).
6. Список моделей сохраняется в атрибуте `cls.models` для дальнейшего использования.

**Примеры**:

```python
>>> TypeGPT.get_models()
['gpt-4o-mini-2024-07-18', 'gpt-3.5-turbo', ...]
```
## Параметры класса
- `label` (str): Метка провайдера, в данном случае "TypeGpt".
- `url` (str): URL сервиса TypeGPT ("https://chat.typegpt.net").
- `api_base` (str): Базовый URL API TypeGPT ("https://chat.typegpt.net/api/openai/v1").
- `working` (bool): Флаг, указывающий на работоспособность провайдера (True).
- `headers` (dict): Словарь заголовков HTTP-запросов, необходимых для взаимодействия с API TypeGPT.
- `default_model` (str): Модель, используемая по умолчанию ('gpt-4o-mini-2024-07-18').
- `default_vision_model` (str): Модель для обработки изображений по умолчанию, совпадает с `default_model`.
- `vision_models` (list): Список моделей, поддерживающих обработку изображений.
- `fallback_models` (list): Список моделей для переключения в случае проблем с основными моделями.
- `image_models` (list): Список моделей, генерирующих изображения.
- `model_aliases` (dict): Словарь алиасов для моделей, позволяющий использовать короткие имена для обращения к моделям.