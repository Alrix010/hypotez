# Документация модуля `website.py`

## Обзор

Модуль отвечает за настройку веб-сайта и маршрутизацию запросов в приложении Flask. Он определяет классы и функции для рендеринга шаблонов HTML, перенаправления пользователей и обработки различных URL-адресов.
Основное назначение - обработка логики маршрутизации и отображение веб-страниц, связанных с чатом, настройками и фоновыми изображениями.

## Подробней

Данный модуль содержит класс `Website`, который инициализирует Flask-приложение и определяет маршруты для различных страниц веб-сайта. Он использует `render_template` для отображения HTML-шаблонов и `redirect` для перенаправления пользователей между страницами.

## Классы

### `Website`

**Описание**: Класс для управления маршрутами веб-сайта и рендеринга шаблонов.

**Атрибуты**:

-   `app`: Flask-приложение, связанное с данным веб-сайтом.
-   `routes` (dict): Словарь, содержащий маршруты и соответствующие им функции и методы HTTP.

**Методы**:

-   `__init__(self, app)`: Инициализирует класс `Website`, сохраняя ссылку на Flask-приложение и определяя маршруты.
-   `_chat(self, conversation_id)`: Отображает страницу чата для указанного `conversation_id`. Если `conversation_id` равен "share", генерирует новый UUID.
-   `_share_id(self, share_id, conversation_id: str = "")`: Отображает страницу чата для общего доступа с указанным `share_id` и `conversation_id`. Если `conversation_id` не указан, генерирует новый UUID.
-   `_index(self)`: Отображает главную страницу чата, генерируя новый UUID для `conversation_id`.
-   `_settings(self)`: Отображает страницу настроек, генерируя новый UUID для `conversation_id`.
-   `_background(self)`: Отображает страницу с фоном.

### `__init__`

```python
def __init__(self, app) -> None:
    """Инициализирует класс Website.

    Args:
        app: Flask-приложение.
    """
```

**Назначение**: Инициализация экземпляра класса `Website`.

**Параметры**:

-   `app`: Flask-приложение, которое будет связано с данным экземпляром класса.

**Как работает функция**:
Функция сохраняет ссылку на Flask-приложение в атрибуте `self.app` и определяет маршруты веб-сайта в атрибуте `self.routes`.

### `_chat`

```python
def _chat(self, conversation_id):
    """Отображает страницу чата.

    Args:
        conversation_id: Идентификатор разговора.
    """
```

**Назначение**: Отображение страницы чата на основе переданного идентификатора разговора.

**Параметры**:

-   `conversation_id`: Идентификатор разговора, который используется для отображения чата.

**Как работает функция**:

Функция проверяет, равен ли `conversation_id` значению "share". Если да, то генерируется новый UUID для идентификатора разговора. Затем функция использует `render_template` для отображения HTML-шаблона `index.html` с переданным `conversation_id`.

**Примеры**:

```python
# Пример вызова функции _chat с conversation_id
website._chat("12345")

# Пример вызова функции _chat с conversation_id равным "share"
website._chat("share")
```

### `_share_id`

```python
def _share_id(self, share_id, conversation_id: str = ""):
    """Отображает страницу общего доступа к чату.

    Args:
        share_id: Идентификатор общего доступа.
        conversation_id (str, optional): Идентификатор разговора. По умолчанию "".
    """
```

**Назначение**: Отображение страницы общего доступа к чату с указанными идентификаторами.

**Параметры**:

-   `share_id`: Идентификатор общего доступа.
-   `conversation_id` (str, optional): Идентификатор разговора. Если не указан, генерируется новый UUID. По умолчанию пустая строка `""`.

**Как работает функция**:

Функция извлекает URL-адрес общего доступа из переменной окружения `G4F_SHARE_URL`. Если `conversation_id` не передан, то генерируется новый UUID. Затем функция использует `render_template` для отображения HTML-шаблона `index.html` с переданными `share_url`, `share_id` и `conversation_id`.

**Примеры**:

```python
# Пример вызова функции _share_id с share_id и conversation_id
website._share_id("share123", "conversation456")

# Пример вызова функции _share_id только с share_id
website._share_id("share123")
```

### `_index`

```python
def _index(self):
    """Отображает главную страницу чата."""
```

**Назначение**: Отображение главной страницы чата.

**Как работает функция**:

Функция генерирует новый UUID для идентификатора разговора и использует `render_template` для отображения HTML-шаблона `index.html` с этим идентификатором.

**Примеры**:

```python
# Пример вызова функции _index
website._index()
```

### `_settings`

```python
def _settings(self):
    """Отображает страницу настроек."""
```

**Назначение**: Отображение страницы настроек.

**Как работает функция**:

Функция генерирует новый UUID для идентификатора разговора и использует `render_template` для отображения HTML-шаблона `index.html` с этим идентификатором.

**Примеры**:

```python
# Пример вызова функции _settings
website._settings()
```

### `_background`

```python
 def _background(self):
    """Отображает страницу с фоном."""
```

**Назначение**: Отображение страницы с фоном.

**Как работает функция**:

Функция использует `render_template` для отображения HTML-шаблона `background.html`.

**Примеры**:

```python
# Пример вызова функции _background
website._background()
```