# Модуль GizAI - Провайдер для GPT4Free

## Обзор

Этот модуль предоставляет класс `GizAI`, который реализует асинхронный генератор для работы с моделью GizAI от GPT4Free. 

## Подробнее

`GizAI` - это класс, который наследует от `AsyncGeneratorProvider` и `ProviderModelMixin`. Он предоставляет возможность создавать асинхронные генераторы для получения ответов от модели GizAI от GPT4Free. Класс использует API GizAI для отправки запросов и получения ответов от модели.

## Классы

### `GizAI`

**Описание**: Класс `GizAI` предоставляет асинхронный генератор для работы с моделью GizAI от GPT4Free.

**Наследует**: 
- `AsyncGeneratorProvider`: Базовый класс для асинхронных генераторов.
- `ProviderModelMixin`:  Предоставляет поддержку управления моделями. 

**Атрибуты**:
- `url`: URL-адрес сайта GizAI.
- `api_endpoint`: URL-адрес API для отправки запросов.
- `working`: Флаг, указывающий, работает ли провайдер. 
- `supports_stream`: Флаг, указывающий, поддерживает ли провайдер потоковую передачу данных.
- `supports_system_message`: Флаг, указывающий, поддерживает ли провайдер системные сообщения.
- `supports_message_history`: Флаг, указывающий, поддерживает ли провайдер историю сообщений.
- `default_model`: Модель по умолчанию.
- `models`: Список поддерживаемых моделей.
- `model_aliases`: Словарь для преобразования псевдонимов моделей в реальные имена.

**Методы**:
- `get_model(model: str) -> str`: Возвращает модель, соответствующую указанному имени или псевдониму.
- `create_async_generator(model: str, messages: Messages, proxy: str = None, **kwargs) -> AsyncResult`:  Создает асинхронный генератор для получения ответов от модели.

#### Методы класса

##### `get_model`

**Назначение**:  Возвращает модель, соответствующую указанному имени или псевдониму.

**Параметры**:
- `model` (str): Имя или псевдоним модели.

**Возвращает**:
- `str`: Модель, соответствующая указанному имени или псевдониму.

**Как работает функция**:
- Сначала метод проверяет, есть ли `model` в списке `models`.
- Если модель найдена, метод возвращает ее имя.
- Если модель не найдена, метод проверяет, есть ли она в словаре `model_aliases`.
- Если псевдоним модели найден в `model_aliases`, метод возвращает соответствующее имя модели.
- В противном случае, метод возвращает `default_model`.

**Примеры**:
```python
>>> GizAI.get_model("gemini-1.5-flash")
'chat-gemini-flash'

>>> GizAI.get_model("chat-gemini-flash")
'chat-gemini-flash'

>>> GizAI.get_model("invalid_model")
'chat-gemini-flash' 
```

##### `create_async_generator`

**Назначение**: Создает асинхронный генератор для получения ответов от модели.

**Параметры**:
- `model` (str): Имя или псевдоним модели.
- `messages` (Messages): Список сообщений.
- `proxy` (str, optional): Прокси-сервер. По умолчанию None.

**Возвращает**:
- `AsyncResult`: Асинхронный результат, который представляет собой генератор ответов.

**Как работает функция**:
- Метод сначала получает реальное имя модели с помощью `get_model`.
- Затем метод создает заголовки запроса.
- Метод создает данные для отправки API GizAI, которые включают:
    - `model`: Имя модели.
    - `input`: Список сообщений, преобразованных в формат GizAI.
    - `noStream`: Флаг, который указывает, что потоковая передача не используется.
- Метод отправляет POST-запрос на API GizAI с помощью `ClientSession`.
- Если ответ от API имеет код состояния 201, метод извлекает результат и преобразует его в строку.
- Метод возвращает асинхронный генератор, который постепенно возвращает ответы от модели.
- Если ответ от API имеет статус, отличный от 201, метод выбрасывает исключение.

**Примеры**:
```python
>>> messages = [
...     {"role": "system", "content": "Ты - помощник по программированию."},
...     {"role": "user", "content": "Напиши функцию на Python, которая выводит 'Hello, World!'."}
... ]
>>> async for response in GizAI.create_async_generator("chat-gemini-flash", messages):
...     print(response)
...
Hello, world!
```