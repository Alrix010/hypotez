# Модуль Qwen_Qwen_2_72B
## Обзор

Модуль предоставляет асинхронный генератор для взаимодействия с моделью Qwen Qwen-2.72B через API HF Space. Он поддерживает потоковую передачу данных и системные сообщения, но не поддерживает историю сообщений.

## Подробней

Этот модуль позволяет использовать модель Qwen Qwen-2.72B для генерации текста на основе предоставленных сообщений. Он отправляет запросы к API HF Space и обрабатывает потоковые ответы для получения сгенерированного текста. Модуль предназначен для асинхронной работы, что позволяет эффективно использовать ресурсы при взаимодействии с API.

## Классы

### `Qwen_Qwen_2_72B`

**Описание**: Класс, предоставляющий функциональность для взаимодействия с моделью Qwen Qwen-2.72B.

**Наследует**:

- `AsyncGeneratorProvider`: Обеспечивает базовую функциональность для асинхронных генераторов.
- `ProviderModelMixin`: Предоставляет общие методы для работы с моделями.

**Атрибуты**:

- `label` (str): Метка провайдера (Qwen Qwen-2.72B).
- `url` (str): URL HF Space.
- `api_endpoint` (str): URL API для присоединения к очереди.
- `working` (bool): Указывает, работает ли провайдер (True).
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных (True).
- `supports_system_message` (bool): Указывает, поддерживает ли провайдер системные сообщения (True).
- `supports_message_history` (bool): Указывает, поддерживает ли провайдер историю сообщений (False).
- `default_model` (str): Модель по умолчанию (qwen-qwen2-72b-instruct).
- `model_aliases` (dict): Псевдонимы моделей.
- `models` (list): Список моделей.

**Методы**:

- `create_async_generator`: Создает асинхронный генератор для получения ответов от модели.

## Методы класса

### `create_async_generator`

```python
@classmethod
async def create_async_generator(
    cls,
    model: str,
    messages: Messages,
    proxy: str = None,
    **kwargs
) -> AsyncResult:
    """Создает асинхронный генератор для получения ответов от модели.

    Args:
        model (str): Название модели.
        messages (Messages): Список сообщений для отправки модели.
        proxy (str, optional): Прокси-сервер для использования. По умолчанию None.
        **kwargs: Дополнительные параметры.

    Returns:
        AsyncResult: Асинхронный генератор, выдающий ответы от модели.

    Raises:
        aiohttp.ClientError: При возникновении ошибок при отправке запросов к API.
        json.JSONDecodeError: При ошибках декодирования JSON-ответа.

    Внутренние функции:
        generate_session_hash(): Генерирует уникальный session_hash.
    Как работает функция:
    - Генерирует уникальный `session_hash` для идентификации сессии.
    - Формирует заголовки (`headers_join`, `headers_data`) и полезную нагрузку (`payload_join`) для запросов к API.
    - Отправляет запрос на присоединение к очереди (`cls.api_endpoint`) для получения `event_id`.
    - Отправляет запрос на получение потока данных (`url_data`) и обрабатывает его построчно.
    - Извлекает фрагменты текста из JSON-ответов и выдает их через генератор.
    - Обрабатывает завершение генерации и возвращает оставшуюся часть ответа.
    """
```
#### `generate_session_hash`

```python
def generate_session_hash():
    """Генерирует уникальный session_hash.
   Args:
       Нет

   Returns:
       str: уникальный идентификатор сессии.

    Как работает функция:
    - Генерирует UUID, удаляет дефисы и берет первые 12 символов.
    """
```

**Примеры**:

```python
# Пример использования create_async_generator
# (Предполагается, что у вас есть настроенный список сообщений messages)
# async for fragment in Qwen_Qwen_2_72B.create_async_generator(model="qwen-2-72b", messages=messages):
#     print(fragment, end="")
```

## Параметры класса

- `label` (str): Метка провайдера (Qwen Qwen-2.72B).
- `url` (str): URL HF Space.
- `api_endpoint` (str): URL API для присоединения к очереди.
- `working` (bool): Указывает, работает ли провайдер (True).
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных (True).
- `supports_system_message` (bool): Указывает, поддерживает ли провайдер системные сообщения (True).
- `supports_message_history` (bool): Указывает, поддерживает ли провайдер историю сообщений (False).
- `default_model` (str): Модель по умолчанию (qwen-qwen2-72b-instruct).
- `model_aliases` (dict): Псевдонимы моделей.
- `models` (list): Список моделей.