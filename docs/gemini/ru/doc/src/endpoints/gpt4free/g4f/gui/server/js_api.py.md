# Модуль JS API для сервера G4F

## Обзор

Модуль предоставляет класс `JsApi`, который реализует JavaScript API для взаимодействия с веб-интерфейсом сервера G4F (GPT4Free). Он обеспечивает функции для управления разговорами, загрузки изображений, захвата изображений с веб-камеры и управления состоянием выбранного источника ввода.

## Классы

### `class JsApi(Api)`

**Описание**: Класс `JsApi` расширяет базовый класс `Api` и предоставляет функциональность для работы с веб-интерфейсом G4F.

**Наследует**: `Api`

**Атрибуты**:

- `image` (str): Путь к выбранному изображению или `None`, если изображение не выбрано.

**Методы**:

- `get_conversation(self, options: dict, message_id: str = None, scroll: bool = None) -> Iterator:`
    - **Назначение**: Отправляет сообщение в выбранную модель и возвращает генератор, который поставляет куски ответа. 
    - **Параметры**:
        - `options` (dict): Словарь с параметрами модели и конфигурацией запроса.
        - `message_id` (str, optional): Идентификатор сообщения, по умолчанию `None`.
        - `scroll` (bool, optional): Флаг, указывающий, нужно ли прокрутить страницу к новому сообщению, по умолчанию `None`.
    - **Возвращает**:
        - `Iterator`: Генератор, поставляющий куски ответа модели.
    - **Пример**: 
        ```python
        options = {
            'role': 'chatbot', 
            'model': 'gpt-3.5-turbo', 
            'provider': 'openai', 
            'message': 'Привет, как дела?'
        }
        for message in js_api.get_conversation(options):
            print(message) 
        ```
- `choose_image(self) -> None:`
    - **Назначение**: Открывает диалог выбора изображения.
    - **Параметры**: Нет.
    - **Возвращает**: `None`
- `take_picture(self) -> None:`
    - **Назначение**: Захватывает изображение с веб-камеры.
    - **Параметры**: Нет.
    - **Возвращает**: `None`
- `on_image_selection(self, filename: str) -> None:`
    - **Назначение**: Вызывается при выборе изображения в диалоге выбора. Обновляет атрибут `image` и уведомляет веб-интерфейс о выборе.
    - **Параметры**:
        - `filename` (str): Путь к выбранному изображению.
    - **Возвращает**: `None`
- `on_camera(self, filename: str) -> None:`
    - **Назначение**: Вызывается после захвата изображения с веб-камеры. Обновляет атрибут `image` и уведомляет веб-интерфейс о выборе.
    - **Параметры**:
        - `filename` (str): Путь к захваченному изображению.
    - **Возвращает**: `None`
- `set_selected(self, input_id: str = None) -> None:`
    - **Назначение**: Управляет состоянием выбранного источника ввода (изображение, камера).
    - **Параметры**:
        - `input_id` (str, optional): Идентификатор выбранного источника ввода (`image`, `camera`), по умолчанию `None`.
    - **Возвращает**: `None`
- `get_version(self) -> str:`
    - **Назначение**: Возвращает версию API. 
    - **Параметры**: Нет.
    - **Возвращает**: `str`: Версия API.
- `get_models(self) -> List[str]:`
    - **Назначение**: Возвращает список доступных моделей.
    - **Параметры**: Нет.
    - **Возвращает**: `List[str]`: Список доступных моделей.
- `get_providers(self) -> List[str]:`
    - **Назначение**: Возвращает список доступных провайдеров AI-моделей.
    - **Параметры**: Нет.
    - **Возвращает**: `List[str]`: Список доступных провайдеров.
- `get_provider_models(self, provider: str, **kwargs) -> List[str]:`
    - **Назначение**: Возвращает список моделей, доступных для указанного провайдера.
    - **Параметры**:
        - `provider` (str): Имя провайдера.
        - `kwargs` (dict): Дополнительные параметры.
    - **Возвращает**: `List[str]`: Список моделей.

## Примеры использования

- Инициализация `JsApi`:
    ```python
    from hypotez.src.endpoints.gpt4free.g4f.gui.server.js_api import JsApi
    js_api = JsApi()
    ```
- Вызов функции `get_conversation` для отправки сообщения в модель и получения ответа:
    ```python
    options = {'role': 'chatbot', 'model': 'gpt-3.5-turbo', 'provider': 'openai', 'message': 'Привет, как дела?'}
    for message in js_api.get_conversation(options):
        print(message)
    ```
- Выбор изображения:
    ```python
    js_api.choose_image()
    ```
- Захват изображения с камеры:
    ```python
    js_api.take_picture()
    ```
- Установка выбранного источника ввода (изображение):
    ```python
    js_api.set_selected('image')
    ```
- Получение версии API:
    ```python
    version = js_api.get_version()
    print(version) 
    ```
- Получение списка доступных моделей:
    ```python
    models = js_api.get_models()
    print(models) 
    ```
- Получение списка доступных провайдеров:
    ```python
    providers = js_api.get_providers()
    print(providers) 
    ```
- Получение списка моделей для конкретного провайдера:
    ```python
    openai_models = js_api.get_provider_models('openai')
    print(openai_models) 
    ```