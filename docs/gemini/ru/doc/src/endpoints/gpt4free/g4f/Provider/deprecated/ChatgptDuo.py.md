# Модуль ChatgptDuo

## Обзор

Модуль `ChatgptDuo` предоставляет асинхронный интерфейс для взаимодействия с сервисом [chatgptduo.com](https://chatgptduo.com). Он позволяет отправлять запросы к модели GPT-3.5 Turbo и получать ответы, а также информацию об источниках, использованных для формирования ответа. Модуль предназначен для использования в проекте `hypotez` для обеспечения функциональности работы с чат-ботом.

## Подробней

Модуль использует `StreamSession` для асинхронных HTTP-запросов и предоставляет методы для отправки запросов к API `chatgptduo.com` и получения ответов. Он также поддерживает использование прокси-серверов.

## Классы

### `ChatgptDuo`

**Описание**: Класс `ChatgptDuo` является асинхронным провайдером, который обеспечивает взаимодействие с сервисом `chatgptduo.com`.

**Наследует**: `AsyncProvider`

**Атрибуты**:
- `url` (str): URL сервиса `chatgptduo.com`.
- `supports_gpt_35_turbo` (bool): Указывает, что провайдер поддерживает модель GPT-3.5 Turbo.
- `working` (bool): Указывает, работает ли в данный момент провайдер.
- `_sources` (list): Список источников, использованных для формирования ответа.

**Принцип работы**:
Класс использует асинхронные HTTP-запросы для взаимодействия с сервисом `chatgptduo.com`. Он форматирует запросы, отправляет их и обрабатывает ответы, извлекая из них необходимую информацию.

**Методы**:
- `create_async`: Асинхронный метод для отправки запроса к сервису и получения ответа.
- `get_sources`: Метод для получения списка источников, использованных для формирования ответа.

## Методы класса

### `create_async`

```python
    @classmethod
    async def create_async(
        cls,
        model: str,
        messages: Messages,
        proxy: str = None,
        timeout: int = 120,
        **kwargs
    ) -> str:
        """
        Отправляет асинхронный запрос к сервису chatgptduo.com и возвращает ответ.

        Args:
            cls (ChatgptDuo): Класс ChatgptDuo.
            model (str): Используемая модель (например, GPT-3.5 Turbo).
            messages (Messages): Список сообщений для отправки.
            proxy (str, optional): Адрес прокси-сервера. По умолчанию `None`.
            timeout (int, optional): Время ожидания ответа в секундах. По умолчанию 120.
            **kwargs: Дополнительные параметры.

        Returns:
            str: Ответ от сервиса chatgptduo.com.

        Raises:
            Exception: Если возникает ошибка при выполнении запроса.

        Как работает функция:
        - Создается асинхронная сессия с использованием StreamSession, при необходимости настраивается прокси и таймаут.
        - Форматируется запрос из списка сообщений.
        - Отправляется POST-запрос к сервису chatgptduo.com с данными запроса.
        - Обрабатывается ответ, извлекается текст ответа и информация об использованных источниках.

        Примеры:
            >>> messages = [{"role": "user", "content": "Hello, how are you?"}]
            >>> ChatgptDuo.create_async(model="gpt-3.5-turbo", messages=messages)
            "I am doing well, thank you for asking!"
        """
        ...
```

### `get_sources`

```python
    @classmethod
    def get_sources(cls):
        """
        Возвращает список источников, использованных для формирования ответа.

        Args:
            cls (ChatgptDuo): Класс ChatgptDuo.

        Returns:
            list: Список словарей с информацией об источниках.

        Как работает функция:
        - Возвращает сохраненный список источников `cls._sources`.
        """
        ...
```

## Параметры класса

- `url` (str): URL сервиса `chatgptduo.com`.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5 Turbo.
- `working` (bool): Указывает, работает ли в данный момент провайдер.

## Примеры

**Пример использования `create_async`**:

```python
messages = [{"role": "user", "content": "Как дела?"}]
ChatgptDuo.create_async(model="gpt-3.5-turbo", messages=messages)
```

**Пример использования `get_sources`**:

```python
ChatgptDuo.get_sources()