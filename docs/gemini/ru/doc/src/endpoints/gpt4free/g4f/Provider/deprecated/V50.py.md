# Модуль `V50`

## Обзор

Модуль `V50` предоставляет класс `V50`, который является устаревшим провайдером для работы с языковой моделью GPT-3.5 Turbo через API `https://p5.v50.ltd`.

## Подробней

Этот модуль является частью набора провайдеров `gpt4free` и предоставляет способ взаимодействия с API `https://p5.v50.ltd` для получения ответов от языковой модели. Он определяет параметры подключения, заголовки запросов и полезную нагрузку, необходимую для успешного взаимодействия с API. Модуль также обрабатывает ответ API и возвращает результат.

## Классы

### `V50(AbstractProvider)`

**Описание**:
Класс `V50` предоставляет методы для взаимодействия с API `https://p5.v50.ltd`. Он поддерживает модель GPT-3.5 Turbo и не требует аутентификации.
**Наследует**:
`AbstractProvider` - абстрактный класс, определяющий интерфейс для провайдеров.

**Атрибуты**:
- `url` (str): URL API `https://p5.v50.ltd`.
- `supports_gpt_35_turbo` (bool): Указывает, поддерживает ли провайдер модель GPT-3.5 Turbo (значение `True`).
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных (значение `False`).
- `needs_auth` (bool): Указывает, требуется ли аутентификация для работы с провайдером (значение `False`).
- `working` (bool): Указывает, работает ли провайдер в данный момент (значение `False`).

**Принцип работы**:
Класс `V50` использует метод `create_completion` для отправки запроса к API и получения ответа. Он формирует необходимый payload с учетом переданных сообщений и параметров, отправляет POST-запрос и обрабатывает полученный ответ.

### `create_completion`

```python
    @staticmethod
    def create_completion(
        model: str,
        messages: list[dict[str, str]],
        stream: bool, **kwargs: Any) -> CreateResult:
        """
        Создает запрос к API для получения завершения текста на основе предоставленных сообщений.
        
        Args:
            model (str): Идентификатор используемой модели.
            messages (list[dict[str, str]]): Список сообщений, составляющих контекст разговора.
                Каждое сообщение представлено в виде словаря с ключами 'role' (роль отправителя: 'user' или 'assistant') и 'content' (содержание сообщения).
            stream (bool): Указывает, следует ли использовать потоковую передачу данных (в данном случае всегда `False`).
            **kwargs (Any): Дополнительные параметры запроса, такие как `temperature`, `top_p` и `proxy`.

        Returns:
            CreateResult: Генератор, выдающий части ответа от API.

        Raises:
            Нет явных исключений, но возможны исключения при сетевых запросах.
        """
```

**Параметры**:
- `model` (str): Идентификатор модели, например, "gpt-3.5-turbo".
- `messages` (list[dict[str, str]]): Список сообщений в формате словаря, где каждое сообщение содержит роль (`role`) и контент (`content`).
- `stream` (bool): Флаг, указывающий на использование потоковой передачи (в данном случае всегда `False`).
- `kwargs` (Any): Дополнительные параметры, такие как `temperature` (температура модели), `top_p` (вероятность выбора наиболее вероятных токенов) и `proxy` (прокси-сервер).

**Как работает функция**:
1. Формирует строку `conversation` путем объединения сообщений из списка `messages`, добавляя роль и контент каждого сообщения.
2. Создает словарь `payload`, содержащий параметры запроса, включая `prompt` (сформированная строка разговора), `options`, `systemMessage`, `temperature`, `top_p`, `model` и `user` (случайный UUID).
3. Определяет HTTP-заголовки `headers`, включая `authority`, `accept`, `accept-language`, `content-type`, `origin`, `referer`, `sec-ch-ua-platform`, `sec-fetch-dest`, `sec-fetch-mode`, `sec-fetch-site` и `user-agent`.
4. Выполняет POST-запрос к API (`https://p5.v50.ltd/api/chat-process`) с использованием `payload` и `headers`. Прокси передаются через `kwargs.get('proxy', {})`.
5. Проверяет, содержит ли ответ строку `"https://fk1.v50.ltd"`. Если нет, возвращает текст ответа как генератор.

**Примеры**:

```python
# Пример использования create_completion
model = "gpt-3.5-turbo"
messages = [
    {"role": "user", "content": "Привет!"},
    {"role": "assistant", "content": "Здравствуйте!"}
]
stream = False
kwargs = {"temperature": 0.5, "top_p": 0.5}

result = V50.create_completion(model, messages, stream, **kwargs)
for item in result:
    print(item)
```

## Параметры класса

- `url` (str): URL API `https://p5.v50.ltd`.
- `supports_gpt_35_turbo` (bool): Поддержка модели GPT-3.5 Turbo.
- `supports_stream` (bool): Поддержка потоковой передачи.
- `needs_auth` (bool): Требуется ли аутентификация.
- `working` (bool): Работает ли провайдер.