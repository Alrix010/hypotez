# Модуль GeekGpt

## Обзор

Модуль `GeekGpt` реализует класс `GeekGpt`, который предоставляет доступ к API GeekGPT для генерации текстов. 
Класс `GeekGpt` наследует от базового класса `AbstractProvider` и использует API GeekGPT для выполнения запросов к модели.

## Классы

### `class GeekGpt`

**Описание**: Класс `GeekGpt` реализует интерфейс для работы с API GeekGPT.

**Наследует**: `AbstractProvider`

**Атрибуты**:

- `url (str)`: Базовый URL для API GeekGPT.
- `working (bool)`: Флаг, указывающий на доступность сервиса.
- `supports_message_history (bool)`: Флаг, указывающий на поддержку истории сообщений.
- `supports_stream (bool)`: Флаг, указывающий на поддержку потоковой передачи ответов.
- `supports_gpt_35_turbo (bool)`: Флаг, указывающий на поддержку модели GPT-3.5-turbo.
- `supports_gpt_4 (bool)`: Флаг, указывающий на поддержку модели GPT-4.

**Методы**:

- `create_completion()`: Метод для отправки запроса к API GeekGPT для получения текста.

## Функции

### `create_completion()`

**Назначение**: Функция для отправки запроса к API GeekGPT для получения текста.

**Параметры**:

- `model (str)`: Идентификатор модели GPT (например, "gpt-3.5-turbo" или "gpt-4").
- `messages (Messages)`: Список сообщений для контекста.
- `stream (bool)`: Флаг, указывающий на необходимость потоковой передачи ответа.
- `**kwargs`: Дополнительные параметры для API GeekGPT.

**Возвращает**:

- `CreateResult`: Результат запроса к API GeekGPT.

**Как работает функция**:

1. Функция устанавливает модель GPT, если она не задана по умолчанию.
2. Она формирует JSON-данные для запроса к API GeekGPT, включающие:
    - Список сообщений (`messages`).
    - Идентификатор модели (`model`).
    - Температуру (`temperature`).
    - Штрафы за наличие и частоту слов (`presence_penalty`, `frequency_penalty`).
    - Флаг потоковой передачи (`stream`).
3. Функция создает заголовки запроса к API GeekGPT.
4. Она отправляет POST-запрос к API GeekGPT с JSON-данными и заголовками.
5. Если запрос прошел успешно, функция извлекает ответ в потоковом режиме и возвращает его в виде `CreateResult`.
6. Если во время выполнения запроса или при обработке ответа возникла ошибка, функция поднимает исключение `RuntimeError`.

**Примеры**:

```python
# Создание экземпляра класса GeekGpt
geek_gpt = GeekGpt()

# Создание запроса к API GeekGPT
response = geek_gpt.create_completion(model='gpt-3.5-turbo', messages=[{'role': 'user', 'content': 'Привет!'}], stream=True)

# Обработка ответа в потоковом режиме
for chunk in response:
    print(chunk)
```
```markdown