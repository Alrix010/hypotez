# Модуль для запуска gpt4free из командной строки
=================================================

Модуль предоставляет интерфейс командной строки (CLI) для запуска API и GUI gpt4free.
Он включает функции для определения аргументов командной строки и запуска соответствующих режимов работы gpt4free.

## Оглавление
- [Обзор](#обзор)
- [Функции](#функции)
    - [get_api_parser](#get_api_parser)
    - [main](#main)
    - [run_api_args](#run_api_args)

## Обзор

Модуль `cli.py` является точкой входа для запуска gpt4free из командной строки.
Он определяет аргументы командной строки для настройки API и GUI,
а также предоставляет функции для запуска API и GUI с использованием указанных аргументов.

## Функции

### `get_api_parser`

```python
def get_api_parser() -> ArgumentParser:
    """
    Создает и возвращает парсер аргументов командной строки для API gpt4free.

    Returns:
        ArgumentParser: Парсер аргументов командной строки.
    """
```

**Назначение**:

Функция `get_api_parser` создает парсер аргументов командной строки,
специфичных для API gpt4free. Этот парсер позволяет пользователю настраивать различные параметры API,
такие как адрес привязки, порт, режим отладки, выбор модели и провайдера, использование прокси, количество рабочих процессов и другие параметры.

**Как работает функция**:

Функция создает экземпляр класса `ArgumentParser` с описанием "Run the API and GUI".
Затем она добавляет различные аргументы с помощью метода `add_argument`.
Каждый аргумент имеет имя, значение по умолчанию (если применимо), описание и, в некоторых случаях, допустимые значения (`choices`).
Функция возвращает настроенный парсер аргументов.

### `main`

```python
def main():
    """
    Главная функция модуля, обрабатывает аргументы командной строки и запускает соответствующий режим gpt4free.
    """
```

**Назначение**:

Функция `main` является основной точкой входа в модуль.
Она создает парсер аргументов командной строки, обрабатывает аргументы и запускает соответствующий режим работы gpt4free (API или GUI) на основе указанных аргументов.

**Как работает функция**:

1.  Создается главный парсер аргументов с помощью `argparse.ArgumentParser`.
2.  Создаются подпарсеры для режимов "api" и "gui" с помощью `parser.add_subparsers`.
    Каждый подпарсер использует соответствующие парсеры аргументов (`get_api_parser` и `gui_parser`).
3.  Аргументы командной строки разбираются с помощью `parser.parse_args()`.
4.  В зависимости от значения `args.mode` запускается соответствующая функция (`run_api_args` для "api" или `run_gui_args` для "gui").
5.  Если `args.mode` не указан, выводится справка и программа завершается с кодом ошибки 1.

### `run_api_args`

```python
def run_api_args(args):
    """
    Запускает API gpt4free с использованием указанных аргументов командной строки.

    Args:
        args: Объект, содержащий аргументы командной строки.
    """
```

**Назначение**:

Функция `run_api_args` запускает API gpt4free с использованием аргументов командной строки, переданных в объекте `args`.
Она настраивает параметры API, такие как игнорирование файлов cookie, список игнорируемых провайдеров, ключ API, модель, провайдер, прокси,
а также параметры запуска, такие как адрес привязки, порт, режим отладки, количество рабочих процессов и другие параметры.

**Как работает функция**:

1.  Импортируются классы `AppConfig` и `run_api` из модуля `g4f.api`.
2.  Настраивается конфигурация API с помощью `AppConfig.set_config` на основе аргументов командной строки.
3.  Если указаны браузеры для cookie (`args.cookie_browsers`),
    то список браузеров в `g4f.cookies.browsers` обновляется на основе выбранных браузеров.
4.  Запускается API с помощью `run_api` с указанными параметрами запуска.

```