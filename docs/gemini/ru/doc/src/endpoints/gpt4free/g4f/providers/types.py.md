# Модуль `types.py`

## Обзор

Модуль содержит базовые классы для реализации провайдеров, используемых для взаимодействия с различными сервисами, такими как GPT-4 Free. Он определяет абстрактные классы `BaseProvider` и `BaseRetryProvider`, а также класс `Streaming` для обработки потоковых данных.

## Подробней

Этот модуль определяет интерфейсы и базовую функциональность для провайдеров, которые используются для доступа к различным API. Он предоставляет абстрактные методы, которые должны быть реализованы в подклассах, чтобы обеспечить конкретную логику взаимодействия с каждым провайдером. Также модуль содержит класс `Streaming` для работы с потоковыми данными.

## Классы

### `BaseProvider`

**Описание**:
Абстрактный базовый класс для провайдера. Определяет основные атрибуты и методы, которые должны быть реализованы в подклассах.

**Атрибуты**:
- `url` (str): URL провайдера.
- `working` (bool): Указывает, работает ли провайдер в данный момент.
- `needs_auth` (bool): Указывает, требуется ли аутентификация для использования провайдера.
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных.
- `supports_message_history` (bool): Указывает, поддерживает ли провайдер историю сообщений.
- `supports_system_message` (bool): Указывает, поддерживает ли провайдер системные сообщения.
- `params` (str): Параметры провайдера.

**Методы**:

#### `get_create_function`

```python
def get_create_function() -> callable:
    """
    Получает функцию создания для провайдера.

    Returns:
        callable: Функция создания.

    Raises:
        NotImplementedError: Если метод не реализован в подклассе.
    """
    ...
```

**Назначение**:
Получает функцию создания для провайдера.

**Возвращает**:
- `callable`: Функция создания.

**Вызывает исключения**:
- `NotImplementedError`: Если метод не реализован в подклассе.

**Как работает функция**:
Функция является абстрактным методом и должна быть реализована в подклассах для возвращения функции, используемой для создания запросов к API провайдера.

**Примеры**:
Так как метод абстрактный, примеры его вызова могут быть предоставлены только в классах-наследниках.

#### `get_async_create_function`

```python
def get_async_create_function() -> callable:
    """
    Получает асинхронную функцию создания для провайдера.

    Returns:
        callable: Асинхронная функция создания.

    Raises:
        NotImplementedError: Если метод не реализован в подклассе.
    """
    ...
```

**Назначение**:
Получает асинхронную функцию создания для провайдера.

**Возвращает**:
- `callable`: Асинхронная функция создания.

**Вызывает исключения**:
- `NotImplementedError`: Если метод не реализован в подклассе.

**Как работает функция**:
Функция является абстрактным методом и должна быть реализована в подклассах для возвращения асинхронной функции, используемой для создания запросов к API провайдера.

**Примеры**:
Так как метод абстрактный, примеры его вызова могут быть предоставлены только в классах-наследниках.

#### `get_dict`

```python
@classmethod
def get_dict(cls) -> Dict[str, str]:
    """
    Получает словарь, представляющий провайдера.

    Returns:
        Dict[str, str]: Словарь с деталями провайдера.
    """
    ...
```

**Назначение**:
Получает словарь, представляющий провайдера.

**Возвращает**:
- `Dict[str, str]`: Словарь с деталями провайдера, включающий имя, URL и метку (если есть).

**Как работает функция**:
Функция создает и возвращает словарь, содержащий имя класса, URL и метку (если она определена).

**Примеры**:
```python
class ExampleProvider(BaseProvider):
    url = "https://example.com"
    label = "Example"

    def get_create_function() -> callable:
        pass

    def get_async_create_function() -> callable:
        pass
    
    params = ''

provider_dict = ExampleProvider.get_dict()
print(provider_dict)
# Expected output: {'name': 'ExampleProvider', 'url': 'https://example.com', 'label': 'Example'}
```

### `BaseRetryProvider`

**Описание**:
Базовый класс для провайдера, который реализует логику повторных попыток. Наследуется от `BaseProvider`.

**Наследует**:
- `BaseProvider`: Предоставляет базовую функциональность провайдера.

**Атрибуты**:
- `__name__` (str): Имя провайдера, по умолчанию "RetryProvider".
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу данных (всегда `True`).
- `last_provider` (Type[BaseProvider]): Последний использованный провайдер.

### `Streaming`

**Описание**:
Класс для представления потоковых данных.

**Атрибуты**:
- `data` (str): Данные потока.

**Методы**:

#### `__init__`

```python
def __init__(self, data: str) -> None:
    """
    Инициализирует экземпляр класса Streaming.

    Args:
        data (str): Данные потока.
    """
    ...
```

**Назначение**:
Инициализирует экземпляр класса `Streaming`.

**Параметры**:
- `data` (str): Данные потока.

**Как работает функция**:
Функция инициализирует атрибут `data` экземпляра класса `Streaming` переданными данными.

**Примеры**:
```python
streaming_data = Streaming("Some data")
print(streaming_data.data)
# Expected output: Some data
```

#### `__str__`

```python
def __str__(self) -> str:
    """
    Возвращает строковое представление данных потока.

    Returns:
        str: Данные потока.
    """
    ...
```

**Назначение**:
Возвращает строковое представление данных потока.

**Возвращает**:
- `str`: Данные потока.

**Как работает функция**:
Функция возвращает значение атрибута `data` экземпляра класса `Streaming`.

**Примеры**:
```python
streaming_data = Streaming("Some data")
print(str(streaming_data))
# Expected output: Some data