# Модуль для создания изображений с помощью GPT-4Free

## Обзор

Этот модуль предоставляет класс `CreateImagesProvider`, который позволяет создавать изображения на основе текстовых подсказок в контексте общения с  GPT-4Free API.

## Подробнее

Этот модуль является "оберткой" для существующего провайдера, который может обрабатывать  текстовые запросы. Класс `CreateImagesProvider` расширяет функциональность этого провайдера, добавляя возможность генерировать изображения на основе подсказок, embedded в сообщениях.

## Классы

### `CreateImagesProvider`

**Описание**: Класс `CreateImagesProvider`  расширяет функциональность  существующего провайдера, добавляя возможность создавать изображения на основе подсказок в сообщениях.

**Наследует**: `BaseProvider`

**Атрибуты**:
- `provider` (ProviderType): Базовый провайдер для обработки текстовых запросов.
- `create_images` (callable): Функция для синхронного создания изображений.
- `create_images_async` (callable): Функция для асинхронного создания изображений.
- `system_message` (str): Системное сообщение, которое объясняет, как создавать изображения.
- `include_placeholder` (bool): Флаг, который определяет, нужно ли включать placeholder изображений в вывод.
- `__name__` (str): Имя провайдера.
- `url` (str): URL провайдера.
- `working` (bool): Указывает, работает ли провайдер.
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу.

**Методы**:
- `create_completion(model: str, messages: Messages, stream: bool = False, **kwargs) -> CreateResult` :  Создает результат завершения, обрабатывая подсказки для создания изображений, найденные в сообщениях.

    **Параметры**:
    - `model` (str): Модель, которую нужно использовать для создания.
    - `messages` (Messages): Сообщения для обработки, которые могут содержать подсказки для создания изображений.
    - `stream` (bool, optional): Указывает, нужно ли передавать результаты потоком. По умолчанию False.
    - `**kwargs`: Дополнительные именованные аргументы для провайдера.

    **Возвращает**:
    - `CreateResult`:  Возвращает куски обработанных сообщений, включая данные изображения, если применимо.

    **Описание**:
    - Этот метод обрабатывает сообщения для обнаружения подсказок создания изображений. При обнаружении такой подсказки он вызывает синхронную функцию создания изображений и включает полученное изображение в вывод.

- `create_async(model: str, messages: Messages, **kwargs) -> str`:  Асинхронно создает ответ, обрабатывая подсказки для создания изображений, найденные в сообщениях.

    **Параметры**:
    - `model` (str): Модель, которую нужно использовать для создания.
    - `messages` (Messages): Сообщения для обработки, которые могут содержать подсказки для создания изображений.
    - `**kwargs`: Дополнительные именованные аргументы для провайдера.

    **Возвращает**:
    - `str`: Обработанная строка ответа, включая асинхронно сгенерированные данные изображения, если применимо.

    **Описание**:
    - Этот метод обрабатывает сообщения для обнаружения подсказок создания изображений. При обнаружении такой подсказки он вызывает асинхронную функцию создания изображений и включает полученное изображение в вывод.

## Функции

### `system_message`

**Описание**: Это системное сообщение, которое объясняет, как создавать изображения.

**Примеры**:

```python
# Создание инстанса драйвера (пример с Chrome)
driver = Driver(Chrome)
```
```python
# Выполнение локатора для элемента на странице
result = driver.execute_locator(close_banner)
```

## Примеры

**Пример использования**:

```python
from ..providers.response import ImageResponse
```

```python
# Обработка сообщений
for chunk in self.provider.create_completion(model, messages, stream, **kwargs):
    # Проверка типа чанка
    if isinstance(chunk, ImageResponse):
        # Обработка ответа изображения
        yield chunk
```

```python
# Поиск подсказок для создания изображений в тексте
match = re.search(r'<img data-prompt="(.*?)">', buffer)
```

```python
# Обработка найденной подсказки
if match:
    # Извлечение подсказки
    placeholder, prompt = match.group(0), match.group(1)
```
```python
# Создание изображения
yield from self.create_images(prompt)