# Документация модуля types.py

## Обзор

Модуль `types.py` определяет типы данных, используемые в клиенте g4f, включая типы для работы с провайдерами изображений, прокси и итераторами ответов. Он также содержит класс `Client`, предназначенный для инициализации и управления прокси-серверами.

## Подробнее

Этот модуль важен для обеспечения типовой безопасности и предсказуемости при работе с различными компонентами библиотеки g4f, особенно при взаимодействии с разными провайдерами и обработке сетевых запросов через прокси.

## Типы

### `ImageProvider`

```python
ImageProvider = Union[BaseProvider, object]
```

**Описание**: Тип, представляющий провайдера изображений. Может быть экземпляром класса `BaseProvider` или любым другим объектом.

### `Proxies`

```python
Proxies = Union[dict, str]
```

**Описание**: Тип, представляющий прокси-серверы. Может быть словарем или строкой.

### `IterResponse`

```python
IterResponse = Iterator[Union[ChatCompletion, ChatCompletionChunk]]
```

**Описание**: Тип, представляющий итератор для последовательного получения ответов чат-завершения или их фрагментов.

### `AsyncIterResponse`

```python
AsyncIterResponse = AsyncIterator[Union[ChatCompletion, ChatCompletionChunk]]
```

**Описание**: Тип, представляющий асинхронный итератор для последовательного получения ответов чат-завершения или их фрагментов.

## Классы

### `Client`

**Описание**: Класс `Client` предназначен для управления API-ключом и прокси-серверами.

**Атрибуты**:

-   `api_key` (str, optional): API-ключ для доступа к сервисам. По умолчанию `None`.
-   `proxies` (Proxies, optional): Прокси-серверы для использования. Может быть словарем или строкой. По умолчанию `None`.
-   `proxy` (str | None): Активный прокси-сервер, полученный из `proxies` или переменной окружения.

**Методы**:

-   `get_proxy()`: Возвращает прокси-сервер для использования.

#### Принцип работы:

Класс `Client` инициализируется с API-ключом и настройками прокси. Метод `get_proxy` определяет, какой прокси-сервер использовать, проверяя сначала переданные прокси, затем переменную окружения `G4F_PROXY`.

## Методы класса

### `get_proxy`

```python
def get_proxy(self) -> Union[str, None]:
    """
    Функция определяет и возвращает прокси-сервер для использования.

    Args:
        self (Client): Экземпляр класса `Client`.

    Returns:
        str | None: Строка с адресом прокси-сервера или `None`, если прокси не задан.

    Как работает функция:
    - Функция проверяет, является ли атрибут `self.proxies` строкой. Если да, то функция возвращает его.
    - Если `self.proxies` равен `None`, функция пытается получить значение переменной окружения `G4F_PROXY`.
    - Если `self.proxies` является словарем, функция ищет ключи "all" или "https" и возвращает соответствующее значение.
    - Если ни одно из условий не выполнено, функция возвращает `None`.
    """
    ...
```

**Примеры**:

```python
# Пример 1: Использование прокси из строки
client = Client(proxies="http://proxy.example.com")
proxy = client.get_proxy()
print(proxy)  # Вывод: http://proxy.example.com

# Пример 2: Использование прокси из переменной окружения
import os
os.environ["G4F_PROXY"] = "http://env_proxy.example.com"
client = Client()
proxy = client.get_proxy()
print(proxy)  # Вывод: http://env_proxy.example.com

# Пример 3: Использование прокси из словаря
client = Client(proxies={"https": "http://https_proxy.example.com"})
proxy = client.get_proxy()
print(proxy)  # Вывод: http://https_proxy.example.com