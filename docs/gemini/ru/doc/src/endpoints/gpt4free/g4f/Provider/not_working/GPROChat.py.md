# Модуль GPROChat

## Обзор

Модуль `GPROChat` реализует асинхронный генератор ответов с использованием сервиса `gprochat.com`. 

## Подробнее

Модуль `GPROChat` предоставляет функциональность для взаимодействия с API сервиса `gprochat.com` для получения ответов от языковой модели. Он наследует два класса:

- `AsyncGeneratorProvider`: Обеспечивает асинхронную генерацию ответов.
- `ProviderModelMixin`: Предоставляет методы для работы с моделями.

## Классы

### `class GPROChat`

**Описание**: Класс `GPROChat` реализует асинхронный генератор ответов с использованием API `gprochat.com`.

**Наследует**:

- `AsyncGeneratorProvider`: Обеспечивает асинхронную генерацию ответов.
- `ProviderModelMixin`: Предоставляет методы для работы с моделями.

**Атрибуты**:

- `url (str)`: Базовый URL сервиса `gprochat.com`.
- `api_endpoint (str)`: URL для отправки запросов к API `gprochat.com`.
- `working (bool)`: Флаг, указывающий на работоспособность провайдера.
- `supports_stream (bool)`: Флаг, указывающий на поддержку потоковой передачи ответов.
- `supports_message_history (bool)`: Флаг, указывающий на поддержку истории сообщений.
- `default_model (str)`: Имя модели по умолчанию.

**Методы**:

- `generate_signature(timestamp: int, message: str) -> str`: Генерирует подпись для запроса к API `gprochat.com`.
- `create_async_generator(model: str, messages: Messages, proxy: str = None, **kwargs) -> AsyncResult`: Создает асинхронный генератор ответов.

#### `generate_signature(timestamp: int, message: str) -> str`:

**Назначение**: Генерирует подпись для запроса к API `gprochat.com`, используя секретный ключ и временную метку.

**Параметры**:

- `timestamp (int)`: Временная метка в миллисекундах.
- `message (str)`: Сообщение, которое будет использоваться для генерации подписи.

**Возвращает**:

- `str`: Подпись для запроса.

**Как работает функция**:

- Извлекает секретный ключ `secret_key` из кода.
- Формирует строку `hash_input`, используя временную метку, сообщение и секретный ключ.
- Вычисляет хэш-сумму SHA256 от `hash_input`.
- Преобразует хэш-сумму в шестнадцатеричный формат.
- Возвращает полученную шестнадцатеричную строку.

#### `create_async_generator(model: str, messages: Messages, proxy: str = None, **kwargs) -> AsyncResult`:

**Назначение**: Создает асинхронный генератор ответов для модели `gprochat.com`.

**Параметры**:

- `model (str)`: Имя модели.
- `messages (Messages)`: Список сообщений для контекста диалога.
- `proxy (str)`: Прокси-сервер для доступа к API.

**Возвращает**:

- `AsyncResult`: Асинхронный генератор ответов.

**Как работает функция**:

- Извлекает модель из списка моделей.
- Формирует временную метку в миллисекундах.
- Формирует строку запроса `prompt` из списка сообщений.
- Генерирует подпись `sign` для запроса.
- Создает заголовки запроса `headers`.
- Создает данные для запроса `data`.
- Открывает асинхронную сессию `ClientSession` с заданными заголовками.
- Отправляет POST-запрос к API `gprochat.com` с данными и прокси.
- Обрабатывает ответ, читая данные по частям.
- Выдает полученные части текста в виде генератора.