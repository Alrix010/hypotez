# Модуль для перевода README-файлов

## Обзор

Этот модуль предназначен для перевода README-файлов на другие языки, в частности, на немецкий. Он использует асинхронные функции и библиотеку `g4f` для взаимодействия с AI-моделями, такими как OpenAI, для выполнения перевода. Модуль также обрабатывает определенные блоки и элементы в README, чтобы обеспечить корректный перевод и сохранение форматирования.

## Подробнее

Модуль выполняет перевод README-файла на указанный язык, используя AI-модели. Он разделяет файл на части, переводит каждую часть, а затем собирает переведенные части обратно. Некоторые блоки и элементы могут быть исключены из перевода или обработаны особым образом.

## Функции

### `read_text`

```python
def read_text(text) -> str:
    """Извлекает текст из markdown-документа, удаляя блоки кода.

    Args:
        text (str): Markdown-документ в виде строки.

    Returns:
        str: Текст из markdown-документа без блоков кода.

    Как работает функция:
    -----------------------
    Функция принимает на вход markdown-документ в виде строки. Она разделяет текст на строки и ищет начало и конец блоков кода,
    определяемых символами '```'. Затем извлекает текст между этими блоками и возвращает его.

    Пример:
    -------
    >>> text = "Some text\\n```\\nCode block\\n```\\nMore text"
    >>> read_text(text)
    'Code block'
    """
```

### `translate`

```python
async def translate(text) -> str:
    """Переводит текст с использованием AI-модели.

    Args:
        text (str): Текст для перевода.

    Returns:
        str: Переведенный текст.

    Как работает функция:
    -----------------------
    Функция принимает на вход текст, который необходимо перевести.
    Она добавляет к тексту prompt с инструкцией перевода на определенный язык, используя асинхронный
    вызов `provider.create_async` для взаимодействия с AI-моделью.
    Если в тексте присутствует "[!Note]", добавляется инструкция о сохранении этого элемента.
    Затем извлекает переведенный текст с помощью функции `read_text` и возвращает его.

    Пример:
    -------
    >>> text = "This is a test."
    >>> translated_text = await translate(text)
    >>> print(translated_text)
    'Это тест.'
    """
```

### `translate_part`

```python
async def translate_part(part: str, i: int) -> str:
    """Переводит часть текста, обрабатывая блокировку и разрешение перевода определенных элементов.

    Args:
        part (str): Часть текста для перевода.
        i (int): Индекс части текста.

    Returns:
        str: Переведенная часть текста.

    Как работает функция:
    -----------------------
    Функция принимает на вход часть текста и её индекс.
    Она проверяет, содержит ли часть текста какие-либо элементы из списка блокировки (`blocklist`).
    Если такие элементы найдены, функция переводит только первую строку и элементы из списка разрешения (`allowlist`).
    В противном случае функция переводит всю часть текста целиком.

    Пример:
    -------
    >>> part = "## Title\\nSome text"
    >>> translated_part = await translate_part(part, 1)
    >>> print(translated_part)
    '## Заголовок\\nКакой-то текст'
    """
```

### `translate_readme`

```python
async def translate_readme(readme: str) -> str:
    """Переводит весь README-файл, разделяя его на части.

    Args:
        readme (str): Содержимое README-файла.

    Returns:
        str: Переведенное содержимое README-файла.

    Как работает функция:
    -----------------------
    Функция принимает на вход содержимое README-файла.
    Она разделяет файл на части по разделителю '## ' и асинхронно переводит каждую часть с помощью функции `translate_part`.
    Затем собирает переведенные части обратно в единый текст.

    Пример:
    -------
    >>> readme = "## Title\\nSome text\\n## Another title\\nMore text"
    >>> translated_readme = await translate_readme(readme)
    >>> print(translated_readme)
    '## Заголовок\\nКакой-то текст\\n\\n## Другой заголовок\\nБольше текста'
    """