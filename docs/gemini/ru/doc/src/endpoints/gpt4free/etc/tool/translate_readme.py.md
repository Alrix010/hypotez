# Модуль для перевода файла README.md

## Обзор

Этот модуль предназначен для перевода файла README.md на определенный язык, используя модель GPT-4 от OpenAI. 

## Подробней

Модуль принимает файл README.md как входные данные и переводит его на выбранный язык, сохраняя переведенный текст в новый файл с суффиксом, соответствующим языку. 

### Процесс перевода

1. **Чтение файла:** Модуль считывает содержимое файла README.md.

2. **Разделение на части:** Содержимое README.md делится на части по заголовкам второго уровня (##). 

3. **Перевод:** Каждая часть текста переводится отдельно с использованием модели GPT-4, которая принимает текст и переводя его на выбранный язык.

4. **Обработка блоков:** Некоторые блоки, например, Copyright, Providers and Models, не переводятся. 

5. **Объединение:** Переведенные части текста объединяются в единый текст.

6. **Сохранение:** Переведенный текст сохраняется в новый файл с суффиксом, соответствующим языку.

## Функции

### `read_text(text)`

**Назначение:** Извлечение текста из части README.md, исключая код.

**Параметры:**

- `text` (str): Часть текста README.md.

**Возвращает:**

- `str`: Текст без кода, который заключен в тройные кавычки.

**Пример:**

```python
text = "```python\nprint('Hello world')\n```\nThis is a text"
read_text(text)  # Возвращает "This is a text"
```

### `translate(text)`

**Назначение:** Перевод текста с использованием модели GPT-4.

**Параметры:**

- `text` (str): Текст для перевода.

**Возвращает:**

- `str`: Переведенный текст.

**Пример:**

```python
text = "This is a text to translate"
translate(text)  # Возвращает перевод текста
```

### `translate_part(part, i)`

**Назначение:** Перевод части README.md, с учетом особенностей блоков.

**Параметры:**

- `part` (str): Часть текста README.md.
- `i` (int): Номер части.

**Возвращает:**

- `str`: Переведенная часть текста.

**Пример:**

```python
part = "## Chapter 1\nThis is a text to translate"
i = 0
translate_part(part, i)  # Возвращает переведенную часть текста
```

### `translate_readme(readme)`

**Назначение:** Перевод всего файла README.md.

**Параметры:**

- `readme` (str): Содержимое файла README.md.

**Возвращает:**

- `str`: Переведенное содержимое файла README.md.

**Пример:**

```python
readme = "## Chapter 1\nThis is a text to translate"
translate_readme(readme)  # Возвращает переведенный текст
```

## Примеры

### Перевод файла README.md

```python
# Чтение файла README.md
with open("README.md", "r") as fp:
    readme = fp.read()

# Перевод файла
readme = asyncio.run(translate_readme(readme))

# Сохранение переведенного файла
file = f"README-{iso}.md"
with open(file, "w") as fp:
    fp.write(readme)

print(f'"{file}" saved')
```

## Параметры

- `iso` (str): Код языка, на который нужно перевести файл.
- `language` (str): Название языка для перевода.
- `translate_prompt` (str): Промп для модели GPT-4.
- `keep_note` (str): Строка, которую необходимо сохранить при переводе.
- `blocklist` (list): Список заголовков, которые не должны переводиться.
- `allowlist` (list): Список заголовков, которые могут переводиться.

## Ограничения

- Перевод выполняется асинхронно с использованием asyncio, что может привести к некоторым задержкам.
- Модель GPT-4 не гарантирует идеального перевода и может содержать ошибки.
- В настоящее время поддерживается только перевод Markdown-файлов.