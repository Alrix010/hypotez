# Модуль для получения информации о моделях Vercel AI SDK

## Обзор

Модуль предназначен для получения информации о моделях, доступных через Vercel AI SDK. Он извлекает данные о моделях с веб-сайта Vercel, преобразует их в удобный формат и предоставляет возможность печати информации о провайдерах моделей и их конвертации.

## Подробнее

Этот модуль выполняет следующие задачи:

1.  Получает HTML-код главной страницы Vercel AI SDK.
2.  Извлекает пути к JavaScript-файлам, содержащим информацию о моделях.
3.  Загружает содержимое JavaScript-файлов.
4.  Извлекает информацию о моделях с использованием регулярных выражений.
5.  Преобразует информацию о моделях в формат, удобный для дальнейшего использования.
6.  Предоставляет функции для печати информации о провайдерах моделей и их конвертации в нужный формат.

Модуль использует библиотеки `quickjs`, `curl_cffi` и `re` для выполнения этих задач.

## Функции

### `get_model_info`

```python
def get_model_info() -> dict[str, Any]:
    """
    Получает информацию о моделях с сайта Vercel AI SDK.

    Args:
        None

    Returns:
        dict[str, Any]: Словарь, содержащий информацию о моделях. Ключи - имена моделей, значения - параметры моделей. Возвращает пустой словарь, если не удается получить информацию.

    Как работает функция:
    - Отправляет GET-запрос на сайт sdk.vercel.ai.
    - Извлекает из HTML-кода пути к JavaScript-файлам, содержащим информацию о моделях.
    - Загружает содержимое JavaScript-файлов.
    - Извлекает информацию о моделях, используя регулярные выражения.
    - Преобразует извлеченную информацию в JSON-формат с использованием библиотеки quickjs.
    - Возвращает словарь с информацией о моделях.

    Примеры:
    >>> get_model_info()
    {'model1': {'id': 'model1_id', 'parameters': {...}}, 'model2': {'id': 'model2_id', 'parameters': {...}}, ...}
    """
    ...
```

### `convert_model_info`

```python
def convert_model_info(models: dict[str, Any]) -> dict[str, Any]:
    """
    Преобразует информацию о моделях в формат, удобный для использования.

    Args:
        models (dict[str, Any]): Словарь с информацией о моделях, полученный из `get_model_info`.

    Returns:
        dict[str, Any]: Словарь, содержащий преобразованную информацию о моделях. Ключи - имена моделей, значения - словари с `id` и `default_params`.

    Как работает функция:
    - Итерируется по словарю `models`.
    - Для каждой модели извлекает `id` и параметры (`parameters`).
    - Параметры преобразуются в словарь `default_params` с помощью функции `params_to_default_params`.
    - Создает новый словарь `model_info`, где ключами являются имена моделей, а значениями - словари с `id` и `default_params`.
    - Возвращает словарь `model_info`.

    Примеры:
    >>> models = {'model1': {'id': 'model1_id', 'parameters': {...}}, 'model2': {'id': 'model2_id', 'parameters': {...}}}
    >>> convert_model_info(models)
    {'model1': {'id': 'model1_id', 'default_params': {...}}, 'model2': {'id': 'model2_id', 'default_params': {...}}}
    """
    ...
```

### `params_to_default_params`

```python
def params_to_default_params(parameters: dict[str, Any]):
    """
    Извлекает значения по умолчанию из параметров модели.

    Args:
        parameters (dict[str, Any]): Словарь с параметрами модели.

    Returns:
        dict[str, Any]: Словарь, содержащий значения параметров по умолчанию.

    Как работает функция:
    - Итерируется по словарю `parameters`.
    - Для каждого параметра извлекает значение по ключу `"value"`.
    - Если ключ параметра `"maximumLength"`, он переименовывается в `"maxTokens"`.
    - Создает новый словарь `defaults`, где ключами являются имена параметров, а значениями - их значения по умолчанию.
    - Возвращает словарь `defaults`.

    Примеры:
    >>> parameters = {'param1': {'value': 'value1'}, 'maximumLength': {'value': 100}}
    >>> params_to_default_params(parameters)
    {'param1': 'value1', 'maxTokens': 100}
    """
    ...
```

### `get_model_names`

```python
def get_model_names(model_info: dict[str, Any]):
    """
    Получает список имен моделей из информации о моделях.

    Args:
        model_info (dict[str, Any]): Словарь с информацией о моделях, полученный из `convert_model_info`.

    Returns:
        list[str]: Список имен моделей, отсортированный в алфавитном порядке, исключая "openai:gpt-4" и "openai:gpt-3.5-turbo".

    Как работает функция:
    - Извлекает имена моделей из словаря `model_info` с помощью метода `keys()`.
    - Фильтрует список имен, исключая "openai:gpt-4" и "openai:gpt-3.5-turbo".
    - Сортирует отфильтрованный список имен в алфавитном порядке.
    - Возвращает отсортированный список имен моделей.

    Примеры:
    >>> model_info = {'model1': {'id': 'model1_id', 'default_params': {...}}, 'openai:gpt-4': {'id': 'gpt4_id', 'default_params': {...}}}
    >>> get_model_names(model_info)
    ['model1']
    """
    ...
```

### `print_providers`

```python
def print_providers(model_names: list[str]):
    """
    Печатает строки для определения моделей с указанием провайдера и базового провайдера.

    Args:
        model_names (list[str]): Список имен моделей.

    Returns:
        None

    Как работает функция:
    - Итерируется по списку имен моделей.
    - Для каждого имени модели разделяет строку на части, используя разделители `:` и `/`.
    - Извлекает базового провайдера из первой части разделенной строки.
    - Формирует имя переменной из последней части разделенной строки, заменяя символы `-` на `_` и удаляя символы `.`.
    - Печатает строку, определяющую модель с указанием имени, базового провайдера и провайдера Vercel.

    Примеры:
    >>> model_names = ['anthropic:claude-instant-v1', 'google:palm/text-bison']
    >>> print_providers(model_names)
    claude_instant_v1 = Model(name="anthropic:claude-instant-v1", base_provider="anthropic", best_provider=Vercel,)
    text_bison = Model(name="google:palm/text-bison", base_provider="google", best_provider=Vercel,)
    """
    ...
```

### `print_convert`

```python
def print_convert(model_names: list[str]):
    """
    Печатает строки для конвертации моделей.

    Args:
        model_names (list[str]): Список имен моделей.

    Returns:
        None

    Как работает функция:
    - Итерируется по списку имен моделей.
    - Для каждого имени модели разделяет строку на части, используя разделители `:` и `/`.
    - Извлекает ключ модели из последней части разделенной строки.
    - Формирует имя переменной из последней части разделенной строки, заменяя символы `-` на `_` и удаляя символы `.`.
    - Печатает строку, определяющую соответствие между ключом модели и именем переменной.

    Примеры:
    >>> model_names = ['anthropic:claude-instant-v1', 'google:palm/text-bison']
    >>> print_convert(model_names)
            "claude-instant-v1": claude_instant_v1,
            "text-bison": text_bison,
    """
    ...
```

### `main`

```python
def main():
    """
    Основная функция, которая выполняет получение, преобразование и печать информации о моделях.

    Args:
        None

    Returns:
        None

    Как работает функция:
    - Вызывает функцию `get_model_info` для получения информации о моделях.
    - Вызывает функцию `convert_model_info` для преобразования информации о моделях.
    - Печатает преобразованную информацию о моделях в формате JSON с отступами.
    - Вызывает функцию `get_model_names` для получения списка имен моделей.
    - Вызывает функцию `print_providers` для печати информации о провайдерах моделей.
    - Вызывает функцию `print_convert` для печати информации о конвертации моделей.

    Примеры:
    >>> main()
    {
      "model1": {
        "id": "model1_id",
        "default_params": {
          ...
        }
      },
      "model2": {
        "id": "model2_id",
        "default_params": {
          ...
        }
      }
    }
    ------------------------------------------------------------------------------------------------------------------------
    model1 = Model(name="model1", base_provider="provider1", best_provider=Vercel,)
    model2 = Model(name="model2", base_provider="provider2", best_provider=Vercel,)
    ------------------------------------------------------------------------------------------------------------------------
            "model1": model1,
            "model2": model2,
    """
    ...
```