# Модуль для получения и преобразования информации о моделях Vercel AI SDK

## Обзор

Модуль предназначен для извлечения информации о моделях из Vercel AI SDK, преобразования этой информации в удобный формат и генерации кода для использования этих моделей. Он использует библиотеки `quickjs`, `curl_cffi` и `re` для выполнения HTTP-запросов, обработки HTML и JavaScript, а также для работы с регулярными выражениями.

## Подробнее

Модуль выполняет следующие задачи:

1.  Получение информации о моделях с сайта Vercel AI SDK.
2.  Извлечение путей к JavaScript-файлам, содержащим информацию о моделях.
3.  Загрузка содержимого JavaScript-файлов.
4.  Извлечение информации о моделях с использованием регулярных выражений.
5.  Преобразование информации о моделях в формат, пригодный для использования в коде.
6.  Генерация Python-кода для определения моделей и их параметров.

Этот код используется для автоматического получения актуальной информации о моделях, поддерживаемых Vercel AI SDK, и для упрощения интеграции этих моделей в другие проекты.

## Функции

### `get_model_info`

```python
def get_model_info() -> dict[str, Any]:
    """Функция извлекает информацию о моделях с сайта Vercel AI SDK.

    Returns:
        dict[str, Any]: Словарь, содержащий информацию о моделях. Возвращает пустой словарь, если информация не найдена.

    Как работает функция:
    - Отправляет GET-запрос к `https://sdk.vercel.ai`.
    - Извлекает пути к JavaScript-файлам, содержащим информацию о моделях, используя регулярные выражения.
    - Загружает содержимое этих файлов.
    - Извлекает информацию о моделях из JavaScript-кода с использованием регулярных выражений и библиотеки `quickjs`.
    - Возвращает словарь с информацией о моделях.
    """
```

### `convert_model_info`

```python
def convert_model_info(models: dict[str, Any]) -> dict[str, Any]:
    """Преобразует информацию о моделях в более удобный формат.

    Args:
        models (dict[str, Any]): Словарь с информацией о моделях, полученный из `get_model_info`.

    Returns:
        dict[str, Any]: Преобразованный словарь с информацией о моделях, где ключами являются имена моделей,
                       а значениями - словари, содержащие `id` и `default_params`.

    Как работает функция:
    - Итерируется по словарю `models`.
    - Для каждой модели извлекает параметры и преобразует их в словарь `default_params` с помощью функции `params_to_default_params`.
    - Создает новый словарь `model_info`, где ключами являются имена моделей, а значениями - словари, содержащие `id` и `default_params`.
    - Возвращает преобразованный словарь.
    """
```

### `params_to_default_params`

```python
def params_to_default_params(parameters: dict[str, Any]):
    """Преобразует параметры модели в словарь параметров по умолчанию.

    Args:
        parameters (dict[str, Any]): Словарь параметров модели.

    Returns:
        dict[str, Any]: Словарь параметров по умолчанию.

    Как работает функция:
    - Итерируется по словарю `parameters`.
    - Если ключ равен `"maximumLength"`, заменяет его на `"maxTokens"`.
    - Извлекает значение параметра и добавляет его в словарь `defaults`.
    - Возвращает словарь `defaults`.
    """
```

### `get_model_names`

```python
def get_model_names(model_info: dict[str, Any]):
    """Извлекает имена моделей из словаря информации о моделях.

    Args:
        model_info (dict[str, Any]): Словарь с информацией о моделях, полученный из `convert_model_info`.

    Returns:
        list[str]: Список имен моделей, отсортированный в алфавитном порядке.

    Как работает функция:
    - Извлекает имена моделей из словаря `model_info`.
    - Исключает модели `"openai:gpt-4"` и `"openai:gpt-3.5-turbo"`.
    - Сортирует список имен моделей в алфавитном порядке.
    - Возвращает список имен моделей.
    """
```

### `print_providers`

```python
def print_providers(model_names: list[str]):
    """Печатает Python-код для определения моделей.

    Args:
        model_names (list[str]): Список имен моделей, полученный из `get_model_names`.

    Как работает функция:
    - Итерируется по списку имен моделей.
    - Для каждого имени модели извлекает имя базового провайдера и имя переменной.
    - Генерирует строку Python-кода для определения модели с использованием класса `Model`.
    - Печатает строку кода.
    """
```

### `print_convert`

```python
def print_convert(model_names: list[str]):
    """Печатает Python-код для создания словаря соответствия между именами моделей и переменными.

    Args:
        model_names (list[str]): Список имен моделей, полученный из `get_model_names`.

    Как работает функция:
    - Итерируется по списку имен моделей.
    - Для каждого имени модели извлекает ключ и имя переменной.
    - Генерирует строку Python-кода для добавления элемента в словарь соответствия.
    - Печатает строку кода.
    """
```

### `main`

```python
def main():
    """Основная функция модуля.

    Как работает функция:
    - Вызывает функцию `get_model_info` для получения информации о моделях.
    - Вызывает функцию `convert_model_info` для преобразования информации о моделях.
    - Выводит преобразованную информацию о моделях в формате JSON.
    - Вызывает функцию `get_model_names` для получения списка имен моделей.
    - Вызывает функцию `print_providers` для генерации Python-кода для определения моделей.
    - Вызывает функцию `print_convert` для генерации Python-кода для создания словаря соответствия.
    """