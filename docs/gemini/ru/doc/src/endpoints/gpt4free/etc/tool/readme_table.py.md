# Модуль для генерации таблиц в Markdown для документации g4f

## Обзор

Модуль предназначен для автоматического создания таблиц в формате Markdown, отображающих информацию о провайдерах и моделях, поддерживаемых библиотекой `g4f`. Это упрощает поддержку актуальной документации о доступных сервисах и их возможностях.

## Подробнее

Модуль содержит функции для сбора информации о провайдерах (с разделением на бесплатные и требующие аутентификацию), моделях и моделях для генерации изображений. Данные собираются и форматируются в виде строк Markdown, которые затем записываются в файл `docs/providers.md`.

## Функции

### `test_async`

**Назначение**: Асинхронно проверяет работоспособность указанного провайдера.

**Параметры**:

-   `provider` (`ProviderType`): Провайдер для проверки.

**Возвращает**:

-   `bool`: `True`, если провайдер работает и возвращает ответ, иначе `False`.

**Как работает функция**:

1.  Проверяет, активен ли провайдер (`provider.working`). Если нет, возвращает `False`.
2.  Формирует сообщение для отправки провайдеру.
3.  Асинхронно отправляет запрос к провайдеру с использованием `ChatCompletion.create_async` и устанавливает таймаут ожидания в 30 секунд.
4.  Обрабатывает возможные исключения и логирует их с помощью `debug.logging`.
5.  Возвращает `True`, если получен ответ от провайдера, иначе `False`.

**Примеры**:

```python
import asyncio
from g4f import providers

async def main():
    result = await test_async(providers.Ails)
    print(result)

asyncio.run(main())
```

### `test_async_list`

**Назначение**: Проверяет список провайдеров асинхронно и возвращает список результатов.

**Параметры**:

-   `providers` (`list[ProviderType]`): Список провайдеров для проверки.

**Возвращает**:

-   `list`: Список логических значений, где каждый элемент соответствует результату проверки соответствующего провайдера.

**Как работает функция**:

1.  Итерируется по списку провайдеров.
2.  Для каждого провайдера вызывает функцию `test_async` и добавляет результат в список `responses`.
3.  Возвращает список `responses`.

**Примеры**:

```python
import asyncio
from g4f import providers

provider_list = [providers.Ails, providers.Aichat]

results = test_async_list(provider_list)
print(results)
```

### `print_providers`

**Назначение**: Формирует Markdown-таблицу со списком провайдеров, их статусом и поддерживаемыми функциями.

**Возвращает**:

-   `list[str]`: Список строк, представляющих Markdown-таблицу.

**Как работает функция**:

1.  Получает список работающих провайдеров.
2.  Получает список результатов проверок работоспособности провайдеров с помощью `test_async_list`.
3.  Разделяет провайдеров на две категории: "Free" (бесплатные) и "Auth" (требующие аутентификацию).
4.  Формирует строки Markdown для каждой категории и каждого провайдера, включая информацию о веб-сайте, статусе, поддержке потоковой передачи, системных сообщений и истории сообщений.
5.  Если провайдер поддерживает модели, добавляет информацию о доступных моделях и моделях для генерации изображений.
6.  Возвращает список строк, представляющих Markdown-таблицу.

**Примеры**:

```python
lines = print_providers()
print("\\n".join(lines))
```

### `print_models`

**Назначение**: Формирует Markdown-таблицу со списком моделей, их базовыми провайдерами и веб-сайтами.

**Возвращает**:

-   `list[str]`: Список строк, представляющих Markdown-таблицу.

**Как работает функция**:

1.  Определяет соответствие между базовыми провайдерами и их именами, а также URL-адресами.
2.  Итерируется по списку моделей и извлекает информацию о каждой модели, такую как имя, базовый провайдер и лучший провайдер.
3.  Формирует строки Markdown для каждой модели, включая информацию о базовом провайдере, провайдере и веб-сайте.
4.  Возвращает список строк, представляющих Markdown-таблицу.

**Примеры**:

```python
lines = print_models()
print("\\n".join(lines))
```

### `print_image_models`

**Назначение**: Формирует Markdown-таблицу со списком провайдеров, поддерживающих модели для генерации изображений, и их возможностями.

**Возвращает**:

-   `list[str]`: Список строк, представляющих Markdown-таблицу.

**Как работает функция**:

1.  Итерируется по списку провайдеров, у которых есть атрибуты `image_models` или `vision_models`.
2.  Извлекает информацию о каждом провайдере, такую как URL-адрес, имя и список моделей для генерации изображений.
3.  Формирует строки Markdown для каждого провайдера, включая информацию о поддержке моделей для генерации изображений и моделей для анализа изображений.
4.  Возвращает список строк, представляющих Markdown-таблицу.

**Примеры**:

```python
lines = print_image_models()
print("\\n".join(lines))
```

## Параметры класса

Отсутствуют, так как в модуле нет классов.

## Примеры

Пример использования модуля для записи Markdown-таблиц в файл:

```python
if __name__ == "__main__":
    with open("docs/providers.md", "w") as f:
        f.write("\\n".join(print_providers()))
        f.write(f"\\n{\'-\' * 50} \\n")
        f.write("\\n".join(print_image_models()))