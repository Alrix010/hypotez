# Модуль `web_search.py`

## Обзор

Модуль `web_search.py` содержит набор юнит-тестов для проверки функциональности веб-поиска в контексте работы с  GPT4Free API.

## Тесты

### `TestIterListProvider`

**Описание**: 
Класс  `TestIterListProvider` представляет собой набор юнит-тестов для проверки работы веб-поиска  в API.

**Атрибуты**: 
- `has_requirements` (bool): Флаг, указывающий на наличие необходимых зависимостей для выполнения тестов.

**Методы**:

#### `test_search`

**Назначение**: Проверяет корректность работы веб-поиска с использованием инструмента `search_tool`.

**Параметры**: 
- `None`

**Возвращает**: 
- `None`

**Вызывает исключения**: 
- `DuckDuckGoSearchException`: В случае возникновения ошибки при работе с DuckDuckGo.

**Пример**:

```python
>>> # Вызов тестового метода
>>> test_search()
```

**Принцип работы**: 
- В методе создается клиент `AsyncClient` с использованием `YieldProviderMock`.
- Создается список `tool_calls` с описанием инструмента `search_tool`, который в качестве аргумента принимает запрос для веб-поиска.
- Выполняется асинхронный запрос `client.chat.completions.create` с заданными параметрами.
- Проверяется, что в ответе присутствует строка `Using the provided web search results`.
- В случае возникновения ошибки `DuckDuckGoSearchException` выполнение теста прерывается.

#### `test_search2`

**Назначение**: 
Проверяет корректность работы веб-поиска с использованием инструмента `search_tool`  с минимальным набором параметров. 

**Параметры**: 
- `None`

**Возвращает**: 
- `None`

**Вызывает исключения**: 
- `DuckDuckGoSearchException`: В случае возникновения ошибки при работе с DuckDuckGo.

**Пример**:

```python
>>> # Вызов тестового метода
>>> test_search2()
```

**Принцип работы**: 
- Метод похож на `test_search`, но использует более простой список `tool_calls` без дополнительный параметров.
- Проверяется, что в ответе присутствует строка `Using the provided web search results`.
- В случае возникновения ошибки `DuckDuckGoSearchException` выполнение теста прерывается.

#### `test_search3`

**Назначение**: 
Проверяет корректность работы веб-поиска с использованием инструмента `search_tool`  с заданными параметрами в JSON-формате.

**Параметры**: 
- `None`

**Возвращает**: 
- `None`

**Вызывает исключения**: 
- `DuckDuckGoSearchException`: В случае возникновения ошибки при работе с DuckDuckGo.

**Пример**:

```python
>>> # Вызов тестового метода
>>> test_search3()
```

**Принцип работы**: 
- Метод похож на `test_search`, но использует JSON-формат для передачи аргументов в инструмент `search_tool`.
- Проверяется, что в ответе присутствует строка `Using the provided web search results`.
- В случае возникновения ошибки `DuckDuckGoSearchException` выполнение теста прерывается.

## Использование

Тесты в модуле `web_search.py` запускаются с помощью фреймворка `unittest`.  

## Дополнительные сведения

- В модуле используются библиотеки `duckduckgo_search`, `bs4` и `g4f`.
- Тесты проверяют корректность работы веб-поиска при взаимодействии с GPT4Free API.