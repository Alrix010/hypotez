# Модуль тестирования процесса мышления

## Обзор

Модуль содержит юнит-тесты для класса `ThinkingProcessor`, который используется для обработки фрагментов текста, содержащих маркеры начала и окончания "размышления" (`<think>` и `</think>`).
Тесты проверяют корректность обработки различных сценариев, включая отсутствие маркеров, наличие только начала или конца, а также одновременное наличие начала и конца маркеров.

## Подробней

Этот файл содержит юнит-тесты для модуля обработки текста с использованием маркеров `<think>` и `</think>`.
Тесты проверяют различные сценарии использования `ThinkingProcessor.process_thinking_chunk`, включая:
- Обработку обычного текста без маркеров.
- Обработку текста с маркером начала `<think>`.
- Обработку текста с маркером конца `</think>`.
- Обработку текста с обоими маркерами `<think>` и `</think>`.
- Обработку текста во время "размышления".
- Обработку текста с маркерами и текстом до и после них.

## Классы

### `TestThinkingProcessor`

**Описание**: Класс, содержащий юнит-тесты для `ThinkingProcessor`.

**Наследует**: `unittest.TestCase`

**Атрибуты**:
- Нет

**Методы**:
- `test_non_thinking_chunk`: Тест для обработки фрагмента текста без маркеров "размышления".
- `test_thinking_start`: Тест для обработки фрагмента текста с маркером начала "размышления".
- `test_thinking_end`: Тест для обработки фрагмента текста с маркером конца "размышления".
- `test_thinking_start_and_end`: Тест для обработки фрагмента текста с маркерами начала и конца "размышления".
- `test_ongoing_thinking`: Тест для обработки фрагмента текста во время "размышления".
- `test_chunk_with_text_after_think`: Тест для обработки фрагмента текста с маркерами и текстом до и после них.

## Методы класса

### `test_non_thinking_chunk`

```python
def test_non_thinking_chunk(self):
    """
    Тест для обработки фрагмента текста без маркеров "размышления".

    Args:
        self: Объект класса TestThinkingProcessor.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, не содержащий маркеров `<think>` и `</think>`.

**Как работает функция**:
1. Определяется входной фрагмент текста `chunk` без маркеров.
2. Определяются ожидаемые значения времени `expected_time` (0) и результата `expected_result` (список, содержащий исходный фрагмент).
3. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом.
4. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_non_thinking_chunk()
```

### `test_thinking_start`

```python
def test_thinking_start(self):
    """
    Тест для обработки фрагмента текста с маркером начала "размышления".

    Args:
        self: Объект класса TestThinkingProcessor.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, начинающийся с маркера `<think>`.

**Как работает функция**:
1. Определяется входной фрагмент текста `chunk` с маркером начала `<think>`.
2. Определяются ожидаемые значения времени `expected_time` (текущее время) и результата `expected_result` (список, содержащий текст до маркера, объект `Reasoning` с информацией о начале "размышления" и текст после маркера).
3. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом.
4. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_thinking_start()
```

### `test_thinking_end`

```python
def test_thinking_end(self):
    """
    Тест для обработки фрагмента текста с маркером конца "размышления".

    Args:
        self: Объект класса TestThinkingProcessor.
        start_time (float): Время начала обработки фрагмента.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, заканчивающийся маркером `</think>`.

**Как работает функция**:
1. Определяется время начала `start_time`.
2. Определяется входной фрагмент текста `chunk` с маркером конца `</think>`.
3. Определяются ожидаемые значения времени `expected_time` (0) и результата `expected_result` (список, содержащий текст до маркера, объект `Reasoning` с информацией об окончании "размышления" и текст после маркера).
4. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом и временем начала.
5. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_thinking_end()
```

### `test_thinking_start_and_end`

```python
def test_thinking_start_and_end(self):
    """
    Тест для обработки фрагмента текста с маркерами начала и конца "размышления".

    Args:
        self: Объект класса TestThinkingProcessor.
        start_time (float): Время начала обработки фрагмента.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, содержащий маркеры `<think>` и `</think>`.

**Как работает функция**:
1. Определяется время начала `start_time`.
2. Определяется входной фрагмент текста `chunk` с маркерами `<think>` и `</think>`.
3. Определяются ожидаемые значения времени `expected_time` (0) и результата `expected_result` (список, содержащий объект `Reasoning` с информацией о начале "размышления", текст между маркерами, объект `Reasoning` с информацией об окончании "размышления" и текст после маркера).
4. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом и временем начала.
5. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_thinking_start_and_end()
```

### `test_ongoing_thinking`

```python
def test_ongoing_thinking(self):
    """
    Тест для обработки фрагмента текста во время "размышления".

    Args:
        self: Объект класса TestThinkingProcessor.
        start_time (float): Время начала обработки фрагмента.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, когда "размышление" уже началось.

**Как работает функция**:
1. Определяется время начала `start_time`.
2. Определяется входной фрагмент текста `chunk` во время "размышления".
3. Определяются ожидаемые значения времени `expected_time` (время начала) и результата `expected_result` (список, содержащий объект `Reasoning` с текущим текстом).
4. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом и временем начала.
5. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_ongoing_thinking()
```

### `test_chunk_with_text_after_think`

```python
def test_chunk_with_text_after_think(self):
    """
    Тест для обработки фрагмента текста с маркерами и текстом до и после них.

    Args:
        self: Объект класса TestThinkingProcessor.

    Returns:
        None

    Raises:
        AssertionError: Если фактический результат не соответствует ожидаемому.
    """
```

**Назначение**: Проверяет, что функция `ThinkingProcessor.process_thinking_chunk` корректно обрабатывает текст, содержащий маркеры `<think>` и `</think>`, а также текст до и после них.

**Как работает функция**:
1. Определяется входной фрагмент текста `chunk` с маркерами `<think>` и `</think>` и текстом до и после них.
2. Определяются ожидаемые значения времени `expected_time` (0) и результата `expected_result` (список, содержащий текст до маркера, объект `Reasoning` с информацией о начале "размышления", текст между маркерами, объект `Reasoning` с информацией об окончании "размышления" и текст после маркера).
3. Вызывается функция `ThinkingProcessor.process_thinking_chunk` с входным фрагментом.
4. Проверяется, что возвращенные значения времени и результата соответствуют ожидаемым.

**Примеры**:

```python
test_case = TestThinkingProcessor()
test_case.test_chunk_with_text_after_think()
```