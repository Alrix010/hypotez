# Модуль для асинхронного тестирования g4f

## Обзор

Этот модуль предназначен для асинхронного тестирования различных провайдеров g4f (GPT4Free). Он использует `asyncio` для параллельного запуска тестов и измеряет время выполнения каждого провайдера. Модуль позволяет проверить работоспособность провайдеров и выявить возможные ошибки.

## Подробней

Модуль выполняет асинхронные тесты для каждого провайдера, полученного из `testing._providers`. Он измеряет время выполнения каждого запроса и выводит результаты в консоль. Это позволяет быстро оценить производительность и стабильность различных провайдеров g4f.

## Функции

### `create_async`

```python
async def create_async(provider):
    """Асинхронно создает запрос к провайдеру и выводит результат или ошибку.

    Args:
        provider: Провайдер для выполнения запроса.

    Raises:
        Exception: Если во время запроса к провайдеру возникает ошибка.
    """
```

**Назначение**: Асинхронно отправляет запрос к указанному провайдеру и выводит полученный ответ или информацию об ошибке.

**Параметры**:
- `provider`: Провайдер, который будет использоваться для создания асинхронного запроса.

**Возвращает**:
- `None`: Функция ничего не возвращает явно, но выводит результат или ошибку в консоль.

**Вызывает исключения**:
- `Exception`: В случае возникновения ошибки при создании или обработке асинхронного запроса.

**Как работает функция**:

1.  Пытается выполнить асинхронный запрос к провайдеру с использованием `log_time_async` для измерения времени выполнения.
2.  В качестве модели используется `g4f.models.default.name` и отправляется сообщение `"Hello, are you GPT 3.5?"`.
3.  Выводит результат в формате `"{provider.__name__}: response"`.
4.  В случае возникновения исключения выводит имя провайдера, имя класса исключения и сообщение об ошибке.

**Примеры**:

```python
# Пример вызова функции create_async с объектом provider
await create_async(provider_instance)
```

### `run_async`

```python
async def run_async():
  """Запускает асинхронные тесты для всех работающих провайдеров.

  """
```

**Назначение**: Запускает асинхронные тесты для каждого провайдера, полученного из `get_providers()`, который помечен как работающий (`provider.working`).

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`: Функция ничего не возвращает явно.

**Как работает функция**:

1.  Формирует список асинхронных задач, вызывая `create_async` для каждого работающего провайдера.
2.  Использует `asyncio.gather` для параллельного выполнения всех задач.

**Примеры**:

```python
# Пример вызова функции run_async
await run_async()
```

## Основной блок

```python
print("Total:", asyncio.run(log_time_async(run_async)))
```

**Назначение**: Запускает основную функцию `run_async` асинхронно и выводит общее время выполнения.

**Как работает**:

1.  Вызывает `log_time_async` для измерения времени выполнения функции `run_async`.
2.  Использует `asyncio.run` для запуска асинхронной функции в синхронном контексте.
3.  Выводит общее время выполнения в формате `"Total: время_выполнения"`.