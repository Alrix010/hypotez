# Документация для модуля `test_async.py`

## Обзор

Модуль `test_async.py` предназначен для асинхронного тестирования различных провайдеров, определенных в проекте `hypotez`. Он использует библиотеку `g4f` для взаимодействия с этими провайдерами и проверяет их работоспособность в асинхронном режиме. Модуль содержит функции для создания асинхронных запросов к провайдерам и измерения времени их выполнения.

## Подробней

Этот модуль играет важную роль в тестировании и оценке производительности различных провайдеров, используемых в проекте `hypotez`. Он позволяет убедиться, что провайдеры работают корректно и эффективно в асинхронной среде. Модуль использует `asyncio` для параллельного выполнения запросов к провайдерам, что позволяет сократить общее время тестирования. Расположение файла в структуре проекта указывает на его роль как части тестового набора для функциональности `gpt4free`.

## Функции

### `create_async`

```python
async def create_async(provider):
    """
    Функция для асинхронного создания запроса к провайдеру и измерения времени его выполнения.

    Args:
        provider: Провайдер, к которому будет отправлен запрос.

    Returns:
        None

    Raises:
        Exception: Если при выполнении запроса к провайдеру возникла ошибка.

    Принцип работы:
    - Измеряет время выполнения запроса к провайдеру с помощью функции `log_time_async`.
    - Отправляет запрос к провайдеру с использованием модели `g4f.models.default.name` и сообщением `"Hello, are you GPT 3.5?"`.
    - Выводит в консоль имя провайдера и полученный ответ.
    - В случае возникновения ошибки выводит в консоль имя провайдера, имя класса ошибки и сообщение об ошибке.
    """
```

### `run_async`

```python
async def run_async():
    """
    Функция для запуска асинхронных запросов ко всем доступным провайдерам.

    Args:
        None

    Returns:
        None

    Принцип работы:
    - Формирует список асинхронных задач, каждая из которых вызывает функцию `create_async` для одного из провайдеров.
    - Использует `asyncio.gather` для параллельного выполнения всех задач.
    - Выполняет запросы только к тем провайдерам, у которых атрибут `working` имеет значение `True`.
    """
```

## Запуск модуля

```python
print("Total:", asyncio.run(log_time_async(run_async)))
```

- Запускает асинхронную функцию `run_async` и измеряет время ее выполнения с помощью функции `log_time_async`.
- Выводит в консоль общее время выполнения всех асинхронных запросов.