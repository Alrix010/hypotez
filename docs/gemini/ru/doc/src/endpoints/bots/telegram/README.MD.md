# Модуль Telegram-бота

## Обзор

Этот модуль содержит код Telegram-бота, который выполняет несколько задач, связанных с обработкой команд, обработкой голосовых сообщений и взаимодействием с пользователями в Telegram. 

## Подробнее

**Основные функции и команды бота:**

- **Инициализация бота:** Бот инициализируется с помощью токена, который используется для аутентификации бота с API Telegram.
- **Команды:**
    - `/start`: Отправляет приветственное сообщение пользователю.
    - `/help`: Предоставляет список доступных команд.
    - `/sendpdf`: Отправляет файл PDF пользователю.
- **Обработка сообщений:** Бот обрабатывает входящие текстовые сообщения, голосовые сообщения и файлы документов.
    - Для голосовых сообщений бот транскрибирует аудио (в настоящее время это заполнитель функции).
    - Для файлов документов бот считывает содержимое текстового документа.
- **Обработка голосовых сообщений:** Бот загружает файл голосового сообщения, сохраняет его локально и пытается транскрибировать его с помощью сервиса распознавания речи (в настоящее время это заполнитель функции).
- **Обработка документов:** Бот загружает файл документа, сохраняет его локально и считывает содержимое текстового документа.
- **Обработка текстовых сообщений:** Бот просто возвращает текст, полученный от пользователя.

**Основные модули и библиотеки:**

- `python-telegram-bot`: Основная библиотека для создания Telegram-ботов.
- `pathlib`: Для работы с путями к файлам.
- `tempfile`: Для создания временных файлов.
- `asyncio`: Для асинхронного выполнения задач.
- `requests`: Для загрузки файлов.
- `src.utils.convertors.tts`: Для распознавания речи и преобразования текста в речь.
- `src.utils.file`: Для чтения текстовых файлов.

## Классы

### `TelegramBot`

**Описание**: Класс TelegramBot представляет собой основной класс бота. Он содержит методы для обработки команд, сообщений, голосовых записей и документов.

**Атрибуты**:

- `token (str)`: Токен, используемый для аутентификации бота с API Telegram.
- `updater (Updater)`: Объект `Updater` из библиотеки `python-telegram-bot` для управления обновлениями.
- `dispatcher (Dispatcher)`: Объект `Dispatcher` из библиотеки `python-telegram-bot` для регистрации обработчиков.

**Методы**:

- `__init__(self, token: str)`: Инициализирует бота с помощью токена и регистрирует обработчики.
- `register_handlers(self)`: Регистрирует обработчики команд и сообщений.
- `start(self, update: Update, context: CallbackContext)`: Обрабатывает команду `/start`.
- `help_command(self, update: Update, context: CallbackContext)`: Обрабатывает команду `/help`.
- `send_pdf(self, pdf_file: str | Path)`: Обрабатывает команду `/sendpdf` для отправки файла PDF.
- `handle_voice(self, update: Update, context: CallbackContext)`: Обрабатывает голосовые сообщения и транскрибирует аудио.
- `transcribe_voice(self, file_path: Path) -> str`: Транскрибирует голосовые сообщения (заполнитель функции).
- `handle_document(self, update: Update, context: CallbackContext) -> str`: Обрабатывает файлы документов и считывает их содержимое.
- `handle_message(self, update: Update, context: CallbackContext) -> str`: Обрабатывает текстовые сообщения и возвращает полученный текст.

## Основная функция

### `main()`

**Назначение**: Инициализирует бота, регистрирует обработчики команд и сообщений, а затем запускает бота с помощью `run_polling()`.


**Пример:**

```python
from src.endpoints.bots.telegram import TelegramBot

# Инициализация бота с помощью токена
bot = TelegramBot('YOUR_TELEGRAM_BOT_TOKEN')

# Запуск бота
bot.main()