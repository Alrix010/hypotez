# Модуль поиска фильмов и сериалов на Кинопоиске

## Обзор

Этот модуль предоставляет функцию `search_query`, которая позволяет осуществлять поиск фильмов и сериалов на Кинопоиске по заданному поисковому запросу. Функция использует Google Search для получения результатов, а затем анализирует их с помощью библиотеки BeautifulSoup.

## Как работает модуль

Модуль выполняет следующие действия:

1. **Формирует поисковый запрос:**
    - Используется формат `site:www.kinopoisk.ru/{type_movie} {query}`, где `type_movie` - тип контента (сериал или фильм), а `query` - поисковый запрос.
2. **Использует Google Search:**
    - Отправляет HTTP-запрос к Google Search с использованием библиотеки `requests`.
    - Устанавливает заголовки запроса, включая `User-Agent`, для имитации браузера.
3. **Анализирует результаты:**
    - Парсит HTML-код страницы результатов с помощью библиотеки BeautifulSoup.
    - Ищет блоки результатов поиска (`div` с классом `g`).
4. **Извлекает данные:**
    - Для каждого блока результата извлекает ссылку, заголовок и описание.
    - Проверяет, содержит ли ссылка на Кинопоиск ID фильма или сериала.
    - Возвращает словарь с данными о найденном фильме или сериале.
5. **Возвращает результат:**
    - Если найден фильм или сериал, возвращает словарь с информацией о нем.
    - Если ничего не найдено, возвращает `None`.


## Функции

### `search_query(query, type_movie='series')`

**Назначение**: Функция осуществляет поиск фильма или сериала на Кинопоиске по заданному поисковому запросу.

**Параметры**:

- `query` (str): Поисковый запрос.
- `type_movie` (str, optional): Тип контента (сериал или фильм). По умолчанию `'series'`.

**Возвращает**:

- `dict | None`: Словарь с информацией о найденном фильме или сериале, если он найден. `None`, если ничего не найдено.

**Вызывает исключения**:

- `Exception`: Если возникает ошибка при отправке запроса к Google Search или парсинге результатов.

**Как работает функция**:

1. Формирует поисковый запрос, добавляя префикс `site:www.kinopoisk.ru/{type_movie}` к поисковому запросу.
2. Отправляет HTTP-запрос к Google Search с помощью `requests.get`.
3. Парсит HTML-код страницы результатов с помощью BeautifulSoup.
4. Ищет блоки результатов поиска (`div` с классом `g`).
5. Для каждого блока результата извлекает ссылку, заголовок и описание.
6. Проверяет, содержит ли ссылка на Кинопоиск ID фильма или сериала.
7. Если найден фильм или сериал, возвращает словарь с данными о нем.
8. Если ничего не найдено, возвращает `None`.

**Примеры**:

```python
>>> search_query('теория большого взрыва')
{'link': 'https://w2.kpfr.wiki/series/450409', 'title': 'Теория большого взрыва', 'description': 'Американский ситком о компании молодых людей, живущих в Пасадене, Калифорния ...'}

>>> search_query('между нами девочками', type_movie='movie')
{'link': 'https://w2.kpfr.wiki/movie/99884', 'title': 'Между нами девочками', 'description': 'Две подруги,  ...'}

>>> search_query('не существующий фильм')
None
```