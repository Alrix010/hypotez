# Модуль для управления рекламными кампаниями на Facebook (Sergey)

## Обзор

Модуль содержит функции и классы для автоматизации управления рекламными кампаниями на Facebook, разработанными для Сергея. Он использует API Facebook, Selenium для управления веб-браузером, а также модули для работы с файлами, датой и временем.

## Подробности

Модуль использует веб-драйвер (Chrome) для авторизации на Facebook и управления интерфейсом. Он работает с JSON-файлами, содержащими списки целевых групп, рекламные кампании и другую информацию, необходимую для управления рекламными кампаниями.

## Классы

### `FacebookPromoter`

**Описание**: Класс для работы с рекламным аккаунтом на Facebook. 

**Атрибуты**:

- `d (Driver)`: Экземпляр веб-драйвера.
- `promoter (str)`: Имя рекламодателя.

**Методы**:

- `run_campaigns(campaigns: list | str, group_file_paths: list, group_categories_to_adv: list, language: str, currency: str, no_video: bool = False)`: Запускает рекламные кампании.

**Принцип работы**:

- Использует веб-драйвер для авторизации на Facebook.
- Четко определяет и использует локаторы для взаимодействия с элементами интерфейса Facebook.
- Запускает рекламные кампании в соответствии с указанными параметрами, используя файлы с группами и категориями.

## Функции

### `run_campaign`

**Назначение**: Запускает рекламную кампанию.

**Параметры**:

- `d (Driver)`: Экземпляр драйвера.
- `promoter_name (str)`: Имя рекламодателя.
- `campaigns (list)`: Список кампаний.
- `group_file_paths (list)`: Пути к файлам с группами.
- `language (str)`: Язык рекламной кампании.
- `currency (str)`: Валюта рекламной кампании.

**Как работает функция**:

- Создает экземпляр класса `FacebookPromoter`.
- Запускает рекламные кампании с помощью метода `run_campaigns`.
- Использует предоставленные параметры, такие как имя рекламодателя, список кампаний, пути к файлам с группами, язык и валюта.

**Примеры**:

```python
# Запуск кампании для Сергея
run_campaign(
    d, 
    'kazarinov', 
    ['kazarinov_ru'], 
    group_file_paths=file_paths_ru, 
    language='RU', 
    currency='ILS'
)
```


### `campaign_cycle`

**Назначение**: Цикл для управления запуском кампаний.

**Параметры**:

- `d (Driver)`: Экземпляр драйвера.

**Как работает функция**:

- Создает список языковых пар (language:currency) для управления кампаниями.
- Итерирует по каждой языковой паре.
- Для каждой языковой пары определяет пути к файлам с группами на основе языка.
- Запускает кампании с помощью `run_campaign` для определенных языков и валют.
- Выполняет запуск кампаний как для Сергея, так и для Aliexpress.

**Примеры**:

```python
# Запуск цикла кампаний
campaign_cycle(d)
```

### `main`

**Назначение**: Основная функция для запуска рекламных кампаний.

**Как работает функция**:

- Создает экземпляр веб-драйвера (Chrome).
- Загружает страницу Facebook.
- Входит в цикл, который:
    - Проверяет время и прекращает работу на ночь.
    - Выполняет цикл запуска кампаний (`campaign_cycle`).
    - Логирует информацию и устанавливает случайную задержку.

**Примеры**:

```python
# Запуск рекламных кампаний
main()
```

## Параметры

- `group_file_paths_ru`: Список путей к файлам с группами для русскоязычных кампаний.
- `adv_file_paths_ru`: Список путей к файлам с рекламными объявлениями для русскоязычных кампаний.
- `group_file_paths_he`: Список путей к файлам с группами для ивритоязычных кампаний.
- `adv_file_paths_he`: Список путей к файлам с рекламными объявлениями для ивритоязычных кампаний.
- `group_categories_to_adv`: Список категорий целевых групп, которые будут включены в рекламные кампании.

## Примеры

```python
from src.webdriver.driver import Driver, Chrome
from src.endpoints.advertisement.facebook import FacebookPromoter
from src.endpoints.advertisement.facebook.start_sergey import run_campaign, campaign_cycle

# Создание инстанса драйвера (пример с Chrome)
driver = Driver(Chrome)
d = driver.driver 

# Список кампаний
campaigns = ['kazarinov_ru', 'kazarinov_tips_ru']

# Пути к файлам с группами
group_file_paths = ["sergey_pages.json"]

# Запуск рекламной кампании
run_campaign(
    d, 
    'kazarinov', 
    campaigns, 
    group_file_paths=group_file_paths, 
    language='RU', 
    currency='ILS'
)

# Запуск цикла рекламных кампаний
campaign_cycle(d)
```

## Внутренние функции

- `run_campaign`
- `campaign_cycle`
- `main`

## Дополнительные сведения

- В модуле используются модули `header`, `random`, `time`, `copy`, `pathlib`, `gs`, `get_directory_names`, `get_filenames`, `Driver`, `Chrome`, `FacebookPromoter`, `logger`, `interval`.
- Модуль использует API Facebook для управления рекламными кампаниями.
- Модуль использует Selenium для управления веб-браузером.
- Модуль использует модули для работы с файлами, датой и временем.
- Модуль использует логгирование для отслеживания работы программы.
- Модуль включает в себя обработку исключений для предотвращения сбоев программы.

## Изменения

- Добавлен новый модуль для управления рекламными кампаниями на Facebook.
- Обновлена документация.