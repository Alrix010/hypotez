# Модуль для отправки событий в Facebook

## Обзор

Модуль `post_event` предназначен для автоматизации процесса публикации информации о мероприятиях в группах Facebook. Он считывает данные о мероприятиях из JSON-файлов, расположенных в Google Drive, и использует веб-драйвер для публикации этих мероприятий в указанные группы Facebook.

## Подробней

Модуль предназначен для автоматизации маркетинга в Facebook. Он позволяет загружать информацию о событиях (например, скидках или акциях) из JSON файлов и публиковать их в различных группах Facebook.  Это полезно для автоматизированного продвижения товаров и услуг.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
```

**Назначение**:
Функция предназначена для обработки и отправки информации о мероприятиях в Facebook. Она выполняет следующие шаги:

1.  **Инициализация драйвера**: Создает инстанс драйвера Chrome для управления браузером.
2.  **Получение списка директорий с мероприятиями**: Извлекает список директорий, содержащих данные о мероприятиях, из Google Drive. Используется функция `get_directory_names` из модуля `src.utils.file` для получения списка директорий в указанном пути `gs.path.google_drive / 'aliexpress' / 'events'`.
3.  **Получение списка файлов с группами**: Получает список файлов, содержащих информацию о группах Facebook, из Google Drive. Используется функция `get_filenames` из модуля `src.utils.file` для получения списка файлов в директории `gs.path.google_drive / 'facebook' / 'groups'`.
4.  **Инициализация промоутера Facebook**: Создает инстанс класса `FacebookPromoter` для управления процессом публикации мероприятий в Facebook. В качестве параметров передаются драйвер Chrome и список файлов с информацией о группах.
5.  **Перебор файлов мероприятий**: Для каждого файла мероприятия выполняется загрузка данных о мероприятии из JSON-файла и отправка данных в группы Facebook. Используется функция `j_loads_ns` из модуля `src.utils.jjson` для загрузки данных из JSON-файла. Затем вызывается метод `process_groups` класса `FacebookPromoter` для отправки мероприятия в указанные группы.

**Параметры**:
Функция не принимает параметров.

**Возвращает**:
Функция не возвращает значения.

**Вызывает исключения**:

*   `FileNotFoundError`: Если JSON-файл с информацией о мероприятии отсутствует.

**Как работает функция**:

Функция выполняет следующие действия:

1.  Создает экземпляр драйвера Chrome для управления браузером.
2.  Получает список директорий с информацией о мероприятиях из Google Drive.
3.  Получает список файлов с информацией о группах Facebook из Google Drive.
4.  Создает экземпляр класса `FacebookPromoter` для управления публикацией мероприятий.
5.  Перебирает каждый файл мероприятия, загружает данные и отправляет их в соответствующие группы Facebook.

**Примеры**:

```python
# Пример вызова функции post_events
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
    groups_ns = j_loads_ns( gs.path.google_drive / 'facebook' / 'groups' / 'my_managed_groups.json')
    d = Driver(Chrome)
    for group_url, group in vars(groups_ns).items():
        group.group_url = group_url
        pprint(group.group_url)
        d.get_url(get_event_url(group.group_url))
        post_event(d,event)
```

**Назначение**:

Функция `post_to_my_group` предназначена для публикации мероприятия в конкретной группе Facebook.

1.  **Загрузка информации о группах**: Загружает информацию о группах из JSON-файла, расположенного в Google Drive. Используется функция `j_loads_ns` из модуля `src.utils.jjson`.
2.  **Инициализация драйвера Chrome**: Создает инстанс драйвера Chrome для управления браузером.
3.  **Перебор групп**: Перебирает все группы, информация о которых была загружена из JSON-файла. Для каждой группы выполняет следующие действия:
    *   Присваивает URL группы атрибуту `group_url`.
    *   Выводит URL группы в консоль с помощью функции `pprint`.
    *   Открывает страницу группы в браузере с помощью метода `get_url` драйвера Chrome. URL формируется с использованием функции `get_event_url`.
    *   Публикует информацию о мероприятии в группе с помощью функции `post_event`.

**Параметры**:

*   `event`: Данные о мероприятии, которые необходимо опубликовать.

**Возвращает**:

Функция не возвращает значения.

**Как работает функция**:

1.  Загружает информацию о группах Facebook из JSON-файла.
2.  Создает экземпляр драйвера Chrome.
3.  Перебирает группы и для каждой группы:
    *   Открывает страницу группы в браузере.
    *   Публикует информацию о мероприятии в группе.

**Примеры**:

```python
# Пример вызова функции post_to_my_group
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)
```

## Пример использования

В основной части модуля (`if __name__ == "__main__":`) происходит следующее:

1.  Загрузка данных о мероприятии из JSON-файла.
2.  Вызов функции `post_events()` для публикации мероприятий в Facebook.