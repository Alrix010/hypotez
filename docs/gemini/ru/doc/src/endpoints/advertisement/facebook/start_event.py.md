# Модуль для отправки мероприятий в группы фейсбук
===============================================================

Модуль содержит код для автоматической отправки мероприятий в группы Facebook. 
Он использует вебдрайвер для взаимодействия с Facebook и предоставляет функции для 
загрузки списка групп, отправки мероприятий и управления процессом.

## Обзор

Данный модуль реализует логику отправки мероприятий в группы Facebook. 
Он взаимодействует с Facebook через вебдрайвер, используя предварительно загруженные 
списки групп из файлов JSON.  

## Подробнее

Модуль использует вебдрайвер для взаимодействия с Facebook. 
Он открывает веб-страницы Facebook, выполняет действия по 
входу в аккаунт,  поиск и выбор групп, и отправку мероприятий в группы. 
Логирование используется для отслеживания прогресса и ошибок. 
## Классы

### `FacebookPromoter`
**Описание**: Класс `FacebookPromoter`  реализует логику автоматической отправки 
мероприятий в группы Facebook. 
**Наследует**: 
**Атрибуты**:
- `d (Driver)`: Экземпляр вебдрайвера, используемый для взаимодействия с Facebook.
- `group_file_paths (list[str])`: Список путей к файлам JSON, содержащим списки групп Facebook. 
- `no_video (bool)`: Флаг, указывающий, следует ли включать видео в публикацию. 

**Принцип работы**:
- Класс `FacebookPromoter` инициализируется с вебдрайвером, списком путей к файлам 
с группами, и флагом `no_video`.
- Метод `run_events` обрабатывает отправку мероприятий в группы. 
- Он циклически проходит по каждому файлу с группами,  
- заходит в каждую группу, 
- публикует мероприятие. 
- Процесс повторяется до тех пор, пока все группы не обработаны.
-  В случае неудачи выполнение продолжается с 
следующей группы.
- В случае успешного завершения, процесс останавливается.

**Методы**: 
- `run_events(events_names:list, group_file_paths:list)`: 
Запускает процесс отправки мероприятий в группы.
**Параметры**:
- `events_names (list)`: Список названий мероприятий для публикации. 
- `group_file_paths (list)`: Список путей к файлам JSON, содержащим списки групп Facebook. 

**Примеры**: 
```python
# Создание инстанса `FacebookPromoter` с вебдрайвером и списком файлов с группами
promoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)

# Запуск процесса отправки мероприятий в группы
promoter.run_events(events_names = events_names, group_file_paths = filenames) 

```

## Функции

### `start_event`

**Назначение**: 
Функция `start_event` запускает процесс отправки мероприятий в 
группы Facebook. 
**Параметры**: 
- `events_names (list)`: Список названий мероприятий для публикации.
- `group_file_paths (list)`: Список путей к файлам JSON, содержащим 
списки групп Facebook.
**Возвращает**: 
- `None`

**Как работает функция**:
- Функция `start_event` инициализирует экземпляр 
класса `FacebookPromoter`.
- Затем она запускает метод `run_events` 
для отправки мероприятий. 
- После завершения отправки, 
функция выводит сообщение о том, что кампания 
была прервана.

**Примеры**: 
```python
# Запуск процесса отправки мероприятий в группы
start_event(events_names=events_names, group_file_paths=filenames)
```

## Параметры

- `filenames (list[str])`: Список путей к файлам JSON, 
содержащим списки групп Facebook. 
- `excluded_filenames (list[str])`: Список путей к файлам JSON, 
которые следует исключить из процесса отправки.
- `events_names (list)`: Список названий мероприятий 
для публикации. 
- `d (Driver)`: Экземпляр вебдрайвера, используемый для 
взаимодействия с Facebook.
- `no_video (bool)`: Флаг, указывающий, следует ли включать 
видео в публикацию. 
- `promoter (FacebookPromoter)`: Экземпляр класса 
`FacebookPromoter`, который используется для отправки 
мероприятий. 
- `time (int)`: Количество секунд, которое нужно 
ждать между попытками отправки 
мероприятий.

## Примеры
```python
# Создание инстанса драйвера (пример с Chrome)
driver = Driver(Chrome)

# Загрузка списка групп из файлов JSON
filenames:list[str] = [ "my_managed_groups.json",
                        "usa.json",
                        "he_il.json",
                        "ru_il.json",
                        "katia_homepage.json",
                        
                        "ru_usd.json",
                        "ger_en_eur.json",            
                        ]

# Список файлов, которые нужно исключить 
excluded_filenames:list[str] = ["my_managed_groups.json",]

# Список названий мероприятий для публикации 
events_names:list = ["choice_day_01_10"]

# Создание экземпляра класса `FacebookPromoter`
promoter:FacebookPromoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)

# Запуск процесса отправки мероприятий в группы
try:
    while True:
        # Вывод сообщения в лог о начале работы
        logger.debug(f"waikig up {time.strftime(\'%H:%M:%S\')}",None,False)
        # Запуск процесса отправки
        promoter.run_events(events_names = events_names, group_file_paths = filenames)
        # Вывод сообщения в лог об окончании работы
        logger.debug(f"going to sleep at {time.strftime(\'%H:%M:%S\')}",None,False)
        # Ожидание 2 часов
        time.sleep(7200)
except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")