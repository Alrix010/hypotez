# Модуль для отправки мероприятий в группы Facebook

## Обзор

Модуль предназначен для автоматической отправки информации о мероприятиях в различные группы Facebook. Он использует веб-драйвер для взаимодействия с Facebook и модуль `FacebookPromoter` для управления процессом публикации.

## Подробнее

Модуль выполняет следующие основные функции:

1.  Инициализация веб-драйвера (в данном случае, Chrome) для автоматизации действий в браузере.

2.  Загрузка списка групп Facebook из JSON-файлов.

3.  Запуск цикла, в котором происходит отправка мероприятий в выбранные группы.

4.  Ожидание заданное время перед повторной отправкой мероприятий.

5.  Обработка прерывания с клавиатуры для завершения работы скрипта.

## Классы

В данном модуле напрямую не определены классы, но используется класс `FacebookPromoter` из модуля `src.endpoints.advertisement.facebook`, который выполняет основную логику отправки мероприятий.

## Функции

В данном модуле нет отдельных функций, однако основная логика организована в цикле `while True`, который использует методы класса `FacebookPromoter`.

## Переменные

-   `filenames` (list[str]): Список имен файлов, содержащих информацию о группах Facebook.
-   `excluded_filenames` (list[str]): Список имен файлов, которые следует исключить из обработки. В данном случае исключен файл `my_managed_groups.json`.
-   `events_names` (list[str]): Список имен мероприятий для публикации. В данном случае указано одно мероприятие `choice_day_01_10`.
-   `promoter` (FacebookPromoter): Экземпляр класса `FacebookPromoter`, используемый для запуска и управления процессом публикации мероприятий в Facebook.

## Методы класса FacebookPromoter

-   `__init__(driver, group_file_paths, no_video)`: Конструктор класса, инициализирует драйвер, пути к файлам с группами и флаг `no_video`.
-   `run_events(events_names, group_file_paths)`: Запускает процесс публикации мероприятий в группах.

## Цикл `while True`

Цикл предназначен для периодического запуска процесса публикации мероприятий.

**Как работает цикл:**

1.  Логирует время начала работы (`logger.debug(f"waikig up {time.strftime('%H:%M:%S')}",None,False)`).
2.  Вызывает метод `run_events` объекта `promoter` для отправки мероприятий в группы Facebook (`promoter.run_events(events_names = events_names, group_file_paths = filenames)`).
3.  Логирует время окончания работы (`logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}",None,False)`).
4.  Приостанавливает выполнение скрипта на 7200 секунд (2 часа) (`time.sleep(7200)`).
5.  Повторяет шаги 1-4 до тех пор, пока не будет прерван вручную.

## Обработка исключений

В блоке `try...except` обрабатывается исключение `KeyboardInterrupt`, которое возникает при прерывании выполнения скрипта с клавиатуры (например, нажатием Ctrl+C).

```python
except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")
```

При возникновении исключения `KeyboardInterrupt` в лог выводится сообщение о прерывании продвижения кампании.

## Примеры

Пример запуска скрипта:

```python
python src/endpoints/advertisement/facebook/start_event.py
```

Пример прерывания скрипта:

Нажать `Ctrl+C` в терминале, где запущен скрипт.