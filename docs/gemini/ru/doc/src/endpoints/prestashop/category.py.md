# Модуль `category`

## Обзор

Модуль `category` предназначен для управления категориями товаров в PrestaShop. Он содержит класс `PrestaCategory`, который предоставляет методы для получения информации о родительских категориях.

## Подробней

Модуль упрощает взаимодействие с API PrestaShop для получения данных о категориях товаров, в частности, для построения дерева категорий путем получения списка родительских категорий для заданной категории.

## Классы

### `PrestaCategory`

**Описание**: Класс `PrestaCategory` предназначен для управления категориями в PrestaShop. Он наследует функциональность класса `PrestaShop` и расширяет её методами для работы с категориями.

**Наследует**:
- `PrestaShop`

**Атрибуты**:
- Нет специфических атрибутов, кроме тех, что наследуются от `PrestaShop`.

**Методы**:
- `get_parent_categories_list()`: Получает список родительских категорий для заданной категории.

#### `__init__`

```python
def __init__(self, api_key: str, api_domain: str, *args, **kwargs) -> None
```

**Назначение**: Инициализирует объект `PrestaCategory`.

**Параметры**:
- `api_key` (str): Ключ API для доступа к PrestaShop.
- `api_domain` (str): Доменное имя PrestaShop.
- `*args`: Произвольные позиционные аргументы, передаваемые в конструктор родительского класса `PrestaShop`.
- `**kwargs`: Произвольные именованные аргументы, передаваемые в конструктор родительского класса `PrestaShop`.

**Возвращает**:
- `None`

**Пример**:

```python
category = PrestaCategory(api_key='your_api_key', api_domain='your_domain')
```

#### `get_parent_categories_list`

```python
def get_parent_categories_list(self, id_category: str | int, parent_categories_list: Optional[List[int | str]] = None) -> List[int | str]
```

**Назначение**: Получает список родительских категорий для заданной категории. Функция рекурсивно обращается к API PrestaShop для получения родительской категории и добавляет её в список, пока не достигнет корневой категории (с `id_parent <= 2`).

**Параметры**:
- `id_category` (str | int): ID категории, для которой нужно получить родительские категории.
- `parent_categories_list` (Optional[List[int | str]], optional): Список родительских категорий. Используется для рекурсивного накопления списка. По умолчанию `None`.

**Возвращает**:
- `List[int | str]`: Список ID родительских категорий.

**Вызывает исключения**:
- `ValueError`: Если отсутствует ID категории.
- `Exception`: Если возникает ошибка при получении данных о категории.

**Как работает функция**:
1. Проверяет, передан ли `id_category`. Если нет, то логирует ошибку и возвращает текущий список родительских категорий (если он есть) или пустой список.
2. Вызывает метод `get` родительского класса (`PrestaShop`) для получения полной информации о категории из API PrestaShop.
3. Извлекает `id_parent` из полученных данных о категории.
4. Добавляет `id_parent` в список `parent_categories_list`.
5. Если `id_parent` меньше или равен 2 (корневая категория), то возвращает список `parent_categories_list`.
6. Иначе рекурсивно вызывает саму себя (`get_parent_categories_list`) с `id_parent` в качестве аргумента, продолжая построение списка родительских категорий.

**Пример**:

```python
category = PrestaCategory(api_key='your_api_key', api_domain='your_domain')
parent_categories = category.get_parent_categories_list(id_category='10')
print(parent_categories)
# Вывод: [2, 10]