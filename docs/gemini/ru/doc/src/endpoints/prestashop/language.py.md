# Модуль `language`

## Обзор

Модуль `language.py` предоставляет интерфейс для взаимодействия с сущностью `language` в CMS `Prestashop` через API Prestashop. Он содержит класс `PrestaLanguage`, который позволяет получать информацию о языках, а также добавлять и удалять языки в магазине PrestaShop.

## Подробней

Модуль предназначен для упрощения работы с языками в PrestaShop, предоставляя удобные методы для выполнения основных операций, таких как получение списка языков, добавление нового языка, удаление существующего и получение детальной информации о конкретном языке. Он использует API Prestashop для взаимодействия с CMS и обеспечивает обработку ошибок и логирование.

## Классы

### `PrestaLanguage`

**Описание**: Класс `PrestaLanguage` предназначен для управления языками в магазине PrestaShop. Он наследует класс `PrestaShop` и предоставляет методы для выполнения операций с языками, такими как добавление, удаление и обновление информации о языках.

**Наследует**:

- `PrestaShop`: класс для взаимодействия с API PrestaShop.

**Атрибуты**:

- Отсутствуют явно определенные атрибуты, но используются атрибуты родительского класса `PrestaShop`, такие как `API_DOMAIN` и `API_KEY`.

**Методы**:

- `__init__`: Конструктор класса.
- `get_lang_name_by_index`: Извлекает ISO код языка из магазина `Prestashop` по его индексу.
- `get_languages_schema`:  Извлекает словарь актуальных языков для данного магазина.

## Методы класса

### `__init__`

```python
def __init__(self, *args, **kwargs):
    """
    Args:
        *args: Произвольные аргументы.
        **kwargs: Произвольные именованные аргументы.

    Note:
        Важно помнить, что у каждого магазина своя нумерация языков.
        Я определяю языки в своих базах в таком порядке:
        `en` - 1;
        `he` - 2;
        `ru` - 3.
    """
```

**Назначение**: Инициализирует экземпляр класса `PrestaLanguage`.

**Параметры**:

- `*args`: Произвольные аргументы.
- `**kwargs`: Произвольные именованные аргументы.

**Как работает функция**:
- Функция является конструктором класса `PrestaLanguage`. Она принимает произвольные аргументы и именованные аргументы, которые могут быть использованы для инициализации экземпляра класса. В docstring содержится важное примечание о нумерации языков в PrestaShop.

### `get_lang_name_by_index`

```python
def get_lang_name_by_index(self, lang_index: int | str) -> str:
    """
    Функция извлекает ISO код азыка из магазина `Prestashop`

    Args:
        lang_index: Индекс языка в таблице PrestaShop.

    Returns:
        Имя языка ISO по его индексу в таблице PrestaShop.
    """
```

**Назначение**: Извлекает ISO код языка из магазина `Prestashop` по его индексу.

**Параметры**:

- `lang_index` (int | str): Индекс языка в таблице PrestaShop.

**Возвращает**:

- `str`: Имя языка ISO по его индексу в таблице PrestaShop.

**Вызывает исключения**:

- `Exception`: Если происходит ошибка при получении языка по индексу.

**Как работает функция**:

- Функция пытается получить имя языка по его индексу, вызывая метод `get` родительского класса `PrestaShop`.
- В случае возникновения ошибки, она логируется с использованием `logger.error`, и возвращается пустая строка.

**Примеры**:

```python
prestalanguage = PrestaLanguage(API_DOMAIN="your_api_domain", API_KEY="your_api_key")
language_name = prestalanguage.get_lang_name_by_index(1)
print(language_name)
```

### `get_languages_schema`

```python
def get_languages_schema(self) -> Optional[dict]:
    """Функция извлекает словарь актуальных языков дла данного магазина.

    Returns:
        Language schema or `None` on failure.

    Examples:
        # Возвращаемый словарь:
        {
            "languages": {
                    "language": [
                                    {
                                    "attrs": {
                                        "id": "1"
                                    },
                                    "value": ""
                                    },
                                    {
                                    "attrs": {
                                        "id": "2"
                                    },
                                    "value": ""
                                    },
                                    {
                                    "attrs": {
                                        "id": "3"
                                    },
                                    "value": ""
                                    }
                                ]
            }
        }
    """
```

**Назначение**: Извлекает словарь актуальных языков для данного магазина.

**Возвращает**:

- `Optional[dict]`: Language schema или `None` в случае неудачи.

**Вызывает исключения**:

- `Exception`: Если происходит ошибка при получении schema языков.

**Как работает функция**:

- Функция вызывает метод `_exec` с параметром `'languages'`, чтобы получить схему языков из API Prestashop.
- В случае возникновения ошибки, она логируется с использованием `logger.error`, и возвращается `None`.

**Примеры**:

```python
prestalanguage = PrestaLanguage(API_DOMAIN="your_api_domain", API_KEY="your_api_key")
languages_schema = prestalanguage.get_languages_schema()
print(languages_schema)
```

## Другие функции

### `main`

```python
async def main():
    """
    Example:
        >>> asyncio.run(main())
    """
```

**Назначение**: Пример асинхронной функции для демонстрации использования класса `PrestaLanguage`.

**Как работает функция**:

- Функция создает экземпляр класса `PrestaLanguage`.
- Затем она вызывает метод `get_languages_schema()` для получения схемы языков.
- Результат выводится с использованием `print`.