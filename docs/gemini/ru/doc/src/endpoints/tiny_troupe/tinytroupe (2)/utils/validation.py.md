# –ú–æ–¥—É–ª—å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ Tiny Troupe
## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `validation.py` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ Tiny Troupe. –û–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–æ–ª–µ–π –≤ —Å–ª–æ–≤–∞—Ä—è—Ö –∏ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–æ–∫ –æ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–ª—É–±–∏–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Å–ª–æ–≤–∞—Ä–µ–π.

## –ü–æ–¥—Ä–æ–±–Ω–µ–π

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –æ—à–∏–±–∫–∏ –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –≤—Ö–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥—É–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –¥—Ä—É–≥–∏—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –§—É–Ω–∫—Ü–∏–∏

### `check_valid_fields`

```python
def check_valid_fields(obj: dict, valid_fields: list) -> None:
    """
    Checks whether the fields in the specified dict are valid, according to the list of valid fields. If not, raises a ValueError.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è—é—Ç—Å—è –ª–∏ –ø–æ–ª—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Å–ª–æ–≤–∞—Ä–µ –¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `obj` (dict): –°–ª–æ–≤–∞—Ä—å, –ø–æ–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.
- `valid_fields` (list): –°–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `None`: –§—É–Ω–∫—Ü–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.

**–í—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è**:
- `ValueError`: –ï—Å–ª–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ–µ –ø–æ–ª–µ.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º —Å–ª–æ–≤–∞—Ä–µ `obj` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –∫–∞–∂–¥—ã–π –∫–ª—é—á –≤ —Å–ø–∏—Å–∫–µ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π `valid_fields`. –ï—Å–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–æ–ª–µ–π, —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `ValueError` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ, —É–∫–∞–∑—ã–≤–∞—é—â–∏–º –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –∫–ª—é—á –∏ —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∫–ª—é—á–µ–π.

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
valid_fields = ['name', 'age', 'city']
obj1 = {'name': 'John', 'age': 30, 'city': 'New York'}
check_valid_fields(obj1, valid_fields)  # –ù–µ –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

obj2 = {'name': 'John', 'age': 30, 'country': 'USA'}
# check_valid_fields(obj2, valid_fields)  # –í—ã–∑–æ–≤–µ—Ç ValueError: Invalid key country in dictionary. Valid keys are: ['name', 'age', 'city']
```

### `sanitize_raw_string`

```python
def sanitize_raw_string(value: str) -> str:
    """
    Sanitizes the specified string by: 
      - removing any invalid characters.
      - ensuring it is not longer than the maximum Python string length.
    
    This is for an abundance of caution with security, to avoid any potential issues with the string.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—á–∏—â–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É, —É–¥–∞–ª—è—è –≤—Å–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è, —á—Ç–æ–±—ã –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ –¥–ª–∏–Ω–Ω–µ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ Python.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `value` (str): –°—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `str`: –û—á–∏—â–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤**:
   - –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ UTF-8, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.
   - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —Ñ–æ—Ä–º–µ NFC –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏**:
   - –û–±—Ä–µ–∑–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ Python (`sys.maxsize`).

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
string1 = "–ü—Ä–∏–≤—ñ—Ç, —Å–≤—ñ—Ç!üòä"
sanitized_string1 = sanitize_raw_string(string1)
print(sanitized_string1)  # –í—ã–≤–æ–¥: –ü—Ä–∏–≤—ñ—Ç, —Å–≤—ñ—Ç!üòä

string2 = "Invalid\x00character"
sanitized_string2 = sanitize_raw_string(string2)
print(sanitized_string2)  # –í—ã–≤–æ–¥: Invalidcharacter
```

### `sanitize_dict`

```python
def sanitize_dict(value: dict) -> dict:
    """
    Sanitizes the specified dictionary by:
      - removing any invalid characters.
      - ensuring that the dictionary is not too deeply nested.
    """
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—á–∏—â–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å, —É–¥–∞–ª—è—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è, —á—Ç–æ–±—ã —Å–ª–æ–≤–∞—Ä—å –Ω–µ –±—ã–ª —Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫–æ –≤–ª–æ–∂–µ–Ω.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `value` (dict): –°–ª–æ–≤–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—Å—Ç–∏—Ç—å.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `dict`: –û—á–∏—â–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è**:
1. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**:
   - –ü–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ª–æ–≤–∞—Ä—è.
   - –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π, –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `sanitize_raw_string` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç—Ä–æ–∫–∏.
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–ª–æ–≤–∞—Ä–µ –æ—á–∏—â–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.

2. **–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–µ–≥–ª—É–±–æ–∫–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**:
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å. <–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –º–æ–¥–µ–ª–∏ gemini: –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∫–æ–¥ –Ω–µ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–ª—É–±–∏–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Å–ª–æ–≤–∞—Ä—è. –ù–∞–ø–∏—à–∏ —á—Ç–æ —ç—Ç–æ–≥–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ –∫–æ–¥–µ>

**–ü—Ä–∏–º–µ—Ä—ã**:

```python
dict1 = {'name': 'John Doe', 'city': 'New York', 'description': "Some invalid\x00character"}
sanitized_dict1 = sanitize_dict(dict1)
print(sanitized_dict1)
# –í—ã–≤–æ–¥: {'name': 'John Doe', 'city': 'New York', 'description': 'Some invalidcharacter'}

dict2 = {'name': 'Jane Smith', 'address': {'street': '123 Main St', 'city': 'Los Angeles'}}
sanitized_dict2 = sanitize_dict(dict2)
print(sanitized_dict2)
# –í—ã–≤–æ–¥: {'name': 'Jane Smith', 'address': {'street': '123 Main St', 'city': 'Los Angeles'}}