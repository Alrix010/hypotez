# Модуль конфигурации `tinytroupe`

## Обзор

Модуль предоставляет функции для чтения, обработки и логирования конфигурационных данных приложения `tinytroupe`. Он обеспечивает загрузку значений конфигурации из файлов `config.ini` (сначала из файла по умолчанию, затем из пользовательского файла, если он существует), а также функции для логирования конфигурации и запуска системы логирования.

## Подробнее

Этот модуль предназначен для упрощения управления конфигурацией приложения. Он позволяет загружать параметры конфигурации из файлов, при этом пользовательские настройки переопределяют значения по умолчанию. Также модуль предоставляет функции для удобного просмотра текущей конфигурации и инициализации системы логирования.

## Функции

### `read_config_file`

```python
def read_config_file(use_cache: bool = True, verbose: bool = True) -> configparser.ConfigParser:
    """
    Читает конфигурационный файл, используя кэш при необходимости.

    Args:
        use_cache (bool, optional): Использовать ли кэшированную конфигурацию, если она существует. По умолчанию `True`.
        verbose (bool, optional): Выводить ли отладочную информацию в консоль. По умолчанию `True`.

    Returns:
        configparser.ConfigParser: Объект конфигурации `configparser.ConfigParser`.

    Raises:
        ValueError: Если не удается найти файл конфигурации по умолчанию.
    
    Example:
        >>> config = read_config_file()
        >>> type(config)
        <class 'configparser.ConfigParser'>
    """
    ...
```

**Назначение**:
Функция считывает конфигурационные файлы и возвращает объект `configparser.ConfigParser`, содержащий параметры конфигурации.

**Параметры**:
- `use_cache` (bool, optional): Определяет, следует ли использовать кэшированную версию конфигурации, если она доступна. Если `True` и кэш существует, функция вернет кэшированную конфигурацию. По умолчанию `True`.
- `verbose` (bool, optional): Определяет, следует ли выводить отладочную информацию в консоль. Если `True`, функция будет выводить сообщения о поиске и загрузке конфигурационных файлов. По умолчанию `True`.

**Возвращает**:
- `configparser.ConfigParser`: Объект конфигурации, содержащий параметры, считанные из конфигурационных файлов.

**Вызывает исключения**:
- `ValueError`: Если не удается найти файл конфигурации по умолчанию.

**Как работает функция**:

1.  Проверяет, нужно ли использовать кэш и существует ли уже кэшированная конфигурация (`_config`). Если оба условия истинны, функция возвращает кэшированную конфигурацию.
2.  Если кэш не используется или не существует, функция создает новый объект `configparser.ConfigParser`.
3.  Определяет путь к файлу конфигурации по умолчанию (`config.ini`), который находится в родительском каталоге текущего файла.
4.  Если файл конфигурации по умолчанию существует, функция считывает его содержимое и сохраняет конфигурацию в кэш (`_config`).
5.  Определяет путь к пользовательскому файлу конфигурации (`config.ini`), который находится в текущей рабочей директории.
6.  Если пользовательский файл конфигурации существует, функция считывает его содержимое, переопределяя значения из файла конфигурации по умолчанию.
7.  Если пользовательский файл конфигурации не найден, функция выводит сообщение об этом (если `verbose` установлен в `True`) и указывает, что будут использоваться только значения по умолчанию.
8.  Возвращает объект конфигурации.

### `pretty_print_config`

```python
def pretty_print_config(config: configparser.ConfigParser) -> None:
    """
    Выводит текущую конфигурацию в консоль в удобочитаемом формате.

    Args:
        config (configparser.ConfigParser): Объект конфигурации для вывода.
    
    Example:
        >>> config = read_config_file()
        >>> pretty_print_config(config)
        =================================
        Current TinyTroupe configuration 
        =================================
        [Section1]
        key1 = value1
    """
    ...
```

**Назначение**:
Функция выводит текущую конфигурацию в консоль в удобочитаемом формате.

**Параметры**:
- `config` (configparser.ConfigParser): Объект конфигурации, который нужно вывести.

**Возвращает**:
- `None`

**Как работает функция**:

1.  Выводит заголовок, указывающий на текущую конфигурацию TinyTroupe.
2.  Перебирает все секции в объекте конфигурации.
3.  Для каждой секции выводит ее имя в квадратных скобках.
4.  Перебирает все элементы в текущей секции и выводит каждую пару "ключ = значение".

### `start_logger`

```python
def start_logger(config: configparser.ConfigParser) -> None:
    """
    Инициализирует и настраивает систему логирования.

    Args:
        config (configparser.ConfigParser): Объект конфигурации, содержащий параметры логирования.
    
    Example:
        >>> config = read_config_file()
        >>> start_logger(config)
    """
    ...
```

**Назначение**:
Функция инициализирует и настраивает систему логирования для приложения.

**Параметры**:
- `config` (configparser.ConfigParser): Объект конфигурации, содержащий параметры логирования, такие как уровень логирования.

**Возвращает**:
- `None`

**Как работает функция**:

1.  Создает объект логгера с именем "tinytroupe".
2.  Определяет уровень логирования из конфигурации, используя секцию `'Logging'` и ключ `'LOGLEVEL'`. Если ключ не найден, используется уровень `'INFO'` по умолчанию.
3.  Устанавливает уровень логирования для логгера.
4.  Создает обработчик консольного вывода (`logging.StreamHandler`) и устанавливает для него уровень логирования.
5.  Создает форматтер логов, определяющий формат записи сообщений.
6.  Добавляет форматтер к обработчику консольного вывода.
7.  Добавляет обработчик консольного вывода к логгеру.

## Переменные

- `_config`: Глобальная переменная, используемая для хранения кэшированной конфигурации.

```python
_config: configparser.ConfigParser | None