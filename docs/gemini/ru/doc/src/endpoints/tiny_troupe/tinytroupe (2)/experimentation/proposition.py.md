# Модуль `proposition`

## Обзор

Этот модуль определяет класс `Proposition`, который используется для проверки истинности или ложности утверждения (пропозиции) о поведении агентов или состоянии среды в симуляции. Пропозиция задается текстовым утверждением о целевом объекте, который может быть средой `TinyWorld` или агентом `TinyPerson` (или несколькими из них).

## Детали

### Класс `Proposition`

**Описание**: Класс для представления и проверки пропозиций о симуляции агентов.

**Наследует**: Не наследует от других классов.

**Атрибуты**:

- `targets` (list): Список целевых объектов (может быть `TinyWorld` или `TinyPerson`).
- `claim` (str): Текстовое утверждение пропозиции.
- `first_n` (int): Количество первых взаимодействий для включения в контекст.
- `last_n` (int): Количество последних (самых новых) взаимодействий для включения в контекст.
- `value` (bool): Истинность или ложность пропозиции.
- `justification` (str): Обоснование истинности или ложности пропозиции.
- `confidence` (float): Уверенность в оценке пропозиции.
- `raw_llm_response` (str): Необработанный ответ от LLM-модели.

**Методы**:

- `__init__(target, claim:str, first_n:int=None, last_n:int=None)`: Инициализирует объект `Proposition`.
- `__call__(additional_context=None)`: Проверяет пропозицию с дополнительным контекстом.
- `check(additional_context="No additional context available.")`: Проверяет пропозицию с дополнительным контекстом.

**Принцип работы**:

- Класс `Proposition` инициализируется с заданием цели, утверждения, а также опциональных параметров `first_n` и `last_n`, которые определяют количество взаимодействий, включаемых в контекст для проверки пропозиции.
- Метод `check()` формирует контекст для проверки пропозиции, который включает в себя информацию о траекториях взаимодействий целевых объектов (агентов или среды).
- Контекст, утверждение и дополнительный контекст передаются LLM-модели для оценки истинности или ложности пропозиции.
- Метод `check()` устанавливает значение атрибутов `value`, `justification`, `confidence` и `raw_llm_response` на основе ответа LLM-модели.

**Примеры**:

```python
# Создание пропозиции о том, что агент "Alice" сказал "Привет"
alice = TinyPerson(name="Alice")
proposition = Proposition(alice, "Agent 'Alice' said 'Hello'.")

# Проверка пропозиции
result = proposition.check()

# Вывод результата
print(f"Proposition is {result}")
print(f"Justification: {proposition.justification}")
print(f"Confidence: {proposition.confidence}")
```

## Функции

### `check_proposition(target, claim:str, additional_context="No additional context available.", first_n:int=None, last_n:int=None)`

**Назначение**: Проверяет истинность пропозиции о целевых объектах.

**Параметры**:

- `target` (TinyWorld, TinyPerson, list): Целевой объект (среда или агент) или список целей.
- `claim` (str): Текстовое утверждение пропозиции.
- `additional_context` (str): Дополнительный контекст, предоставляемый LLM-модели.
- `first_n` (int): Количество первых взаимодействий для включения в контекст.
- `last_n` (int): Количество последних взаимодействий для включения в контекст.

**Возвращает**:

- `bool`: Истинность или ложность пропозиции.

**Принцип работы**:

- Создает объект `Proposition` и вызывает метод `check()`.

**Примеры**:

```python
# Проверка пропозиции о том, что агент "Alice" сказал "Привет"
alice = TinyPerson(name="Alice")
result = check_proposition(alice, "Agent 'Alice' said 'Hello'.")

# Вывод результата
print(f"Proposition is {result}")
```