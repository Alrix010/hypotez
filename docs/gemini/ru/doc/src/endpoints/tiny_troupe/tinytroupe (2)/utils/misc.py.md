# Модуль `misc`

## Обзор

Модуль содержит набор вспомогательных функций, используемых в проекте `hypotez`, в частности, для работы с агентами и мирами (TinyPerson, TinyWorld). Он предоставляет инструменты для получения имен объектов, создания хешей и генерации уникальных идентификаторов.

## Подробней

Этот модуль содержит функции, которые облегчают обработку и идентификацию агентов и миров в контексте проекта `hypotez`. Функции, такие как `name_or_empty`, позволяют безопасно извлекать имена объектов, учитывая возможность их отсутствия. Функция `custom_hash` предоставляет детерминированный способ создания хешей объектов, что полезно для сравнения и идентификации. Функции `fresh_id` и `reset_fresh_id` управляют генерацией уникальных идентификаторов, что важно для создания новых объектов в системе.

## Функции

### `name_or_empty`

**Назначение**: Возвращает имя указанного агента или мира, или пустую строку, если агент равен `None`.

**Параметры**:
- `named_entity` (AgentOrWorld): Агент или мир, имя которого нужно получить.

**Возвращает**:
- `str`: Имя агента или мира, или пустая строка, если `named_entity` равен `None`.

**Как работает функция**:
Функция проверяет, является ли переданный объект `named_entity` равным `None`. Если да, возвращается пустая строка. В противном случае возвращается атрибут `name` объекта `named_entity`.

**Примеры**:

```python
from typing import Union, NamedTuple

class TinyPerson(NamedTuple):
    name: str
    age: int

class TinyWorld(NamedTuple):
    name: str
    size: int

AgentOrWorld = Union[TinyPerson, TinyWorld]

person = TinyPerson(name='Alice', age=30)
world = TinyWorld(name='Wonderland', size=100)
none_entity = None

print(f"Имя человека: {name_or_empty(person)}")
print(f"Имя мира: {name_or_empty(world)}")
print(f"Имя отсутствующего объекта: {name_or_empty(none_entity)}")
```

### `custom_hash`

**Назначение**: Возвращает хеш для указанного объекта.

**Параметры**:
- `obj` (any): Объект, для которого нужно создать хеш.

**Возвращает**:
- `str`: Шестнадцатеричное представление SHA256 хеша объекта.

**Как работает функция**:
Функция преобразует переданный объект в строку, кодирует её в байты, а затем вычисляет SHA256 хеш этой строки. Результат возвращается в виде шестнадцатеричной строки. Этот метод обеспечивает детерминированное хеширование, что означает, что для одного и того же объекта всегда будет возвращаться один и тот же хеш.

**Примеры**:

```python
print(f"Хеш строки 'test': {custom_hash('test')}")
print(f"Хеш числа 123: {custom_hash(123)}")
```

### `fresh_id`

**Назначение**: Возвращает уникальный идентификатор для нового объекта.

**Возвращает**:
- `int`: Уникальный идентификатор.

**Как работает функция**:
Функция использует глобальный счетчик `_fresh_id_counter` для генерации уникальных идентификаторов. При каждом вызове счетчик увеличивается на единицу, и его текущее значение возвращается.

**Примеры**:

```python
print(f"Первый ID: {fresh_id()}")
print(f"Второй ID: {fresh_id()}")
```

### `reset_fresh_id`

**Назначение**: Сбрасывает счетчик уникальных идентификаторов.

**Как работает функция**:
Функция сбрасывает глобальный счетчик `_fresh_id_counter` в 0. Это полезно для тестирования, когда необходимо повторно использовать одинаковые идентификаторы.

**Примеры**:

```python
print(f"Текущий ID: {fresh_id()}")
reset_fresh_id()
print(f"ID после сброса: {fresh_id()}")