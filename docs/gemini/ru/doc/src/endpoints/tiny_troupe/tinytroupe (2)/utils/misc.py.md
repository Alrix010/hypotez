# Модуль misc

## Обзор

Модуль `misc` содержит различные вспомогательные функции для работы с агентами и средой, такие как:

- `name_or_empty(named_entity: AgentOrWorld)`: Возвращает имя агента или среды, или пустую строку, если агент не задан.
- `custom_hash(obj)`: Возвращает хэш для указанного объекта. Объект сначала преобразуется в строку, чтобы сделать его хэшируемым. Этот метод детерминированный, в отличие от встроенной функции `hash()`.
- `fresh_id()`: Возвращает новый ID для нового объекта. Это полезно для генерации уникальных ID для объектов.
- `reset_fresh_id()`: Сбрасывает счетчик новых ID. Это полезно для целей тестирования.


## Функции

### `name_or_empty`

**Назначение**: Возвращает имя агента или среды, или пустую строку, если агент не задан.

**Параметры**:

- `named_entity (AgentOrWorld)`: Агент или среда.

**Возвращает**:

- `str`: Имя агента или среды, или пустая строка, если агент не задан.

**Как работает функция**:

Функция `name_or_empty` проверяет, является ли переданный объект `named_entity` равным `None`. 
Если объект не равен `None`, то функция возвращает его имя (`named_entity.name`).
В противном случае функция возвращает пустую строку (`""`).

**Примеры**:

```python
>>> name_or_empty(None)
''
>>> from hypotez.src.endpoints.tiny_troupe.tinytroupe (2).agents.agent import TinyPerson
>>> agent = TinyPerson(name='Alice')
>>> name_or_empty(agent)
'Alice'
```

### `custom_hash`

**Назначение**: Возвращает хэш для указанного объекта. Объект сначала преобразуется в строку, чтобы сделать его хэшируемым. Этот метод детерминированный, в отличие от встроенной функции `hash()`.

**Параметры**:

- `obj`: Объект, для которого нужно получить хэш.

**Возвращает**:

- `str`: Хэш объекта в шестнадцатеричном виде.

**Как работает функция**:

Функция `custom_hash` преобразует объект `obj` в строку (`str(obj)`) и кодирует ее в байты (`encode()`). 
Затем функция использует функцию `sha256()` из модуля `hashlib` для вычисления хэша. 
Хэш возвращается в шестнадцатеричном виде с помощью метода `hexdigest()`.

**Примеры**:

```python
>>> custom_hash('Hello world!')
'a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e'
>>> custom_hash({'name': 'Alice', 'age': 30})
'920595d34564c113a7960e075c301b25e2c96d7412506a38223f9b8a83a581b5'
```

### `fresh_id`

**Назначение**: Возвращает новый ID для нового объекта. Это полезно для генерации уникальных ID для объектов.

**Параметры**:

- Нет параметров.

**Возвращает**:

- `int`: Новый ID.

**Как работает функция**:

Функция `fresh_id` использует глобальную переменную `_fresh_id_counter` для генерации новых ID. 
При каждом вызове функции значение счетчика увеличивается на 1, а затем возвращается.

**Примеры**:

```python
>>> fresh_id()
1
>>> fresh_id()
2
>>> fresh_id()
3
```

### `reset_fresh_id`

**Назначение**: Сбрасывает счетчик новых ID. Это полезно для целей тестирования.

**Параметры**:

- Нет параметров.

**Возвращает**:

- Нет возвращаемого значения.

**Как работает функция**:

Функция `reset_fresh_id` сбрасывает глобальную переменную `_fresh_id_counter` до 0.

**Примеры**:

```python
>>> fresh_id()
1
>>> fresh_id()
2
>>> reset_fresh_id()
>>> fresh_id()
1
```