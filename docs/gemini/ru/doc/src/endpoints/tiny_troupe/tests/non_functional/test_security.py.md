# Модуль тестов безопасности `TinyTroupe`

## Обзор

Этот модуль содержит набор тестов безопасности для библиотеки `TinyTroupe`. Тесты проверяют различные аспекты безопасности, включая  правильную конфигурацию API, ограничения длины ответов и кодировку.

## Классы

### `class test_default_llmm_api`

**Описание**: 
Функция-тест, которая проверяет основные характеристики API по умолчанию, используемого библиотекой `TinyTroupe`.
**Наследует**: 
-  `pytest.mark.parametrize` (запускает тест с разными параметрами)

**Атрибуты**:
 - `messages` (`list`): Список сообщений, которые отправляются в API, для имитации диалога с моделью LLM. 
 - `next_message` (`dict`): Ответ от API LLM. 
 - `next_message_str` (`str`): Ответ от API LLM, преобразованный в строку. 

**Методы**:
 - `test_default_llmm_api()`: Тестирует базовые свойства API. Проверяет наличие ключей `content` и `role` в ответе API, а также наличие  непустого текста  в поле `content`.
 

## Функции

### `test_default_llmm_api`

**Назначение**: 
Проверяет основные характеристики API по умолчанию, используемого библиотекой `TinyTroupe`.

**Параметры**:
- **None**

**Возвращает**:
- **None**

**Вызывает исключения**:
- **None**


**Как работает функция**:
- Функция `test_default_llmm_api` создает тестовое сообщение  (`messages`), используя функцию `create_test_system_user_message`.
- Отправляет сообщение в API LLM, используя функцию `client()` из модуля `openai_utils`.
-  Получает ответ от API и сохраняет его в переменную `next_message`.
- Проверяет наличие обязательных ключей `content` и `role` в ответе API.
- Проверяет, что значение `content` не пустое.
- Преобразует ответ из формата `dict` в строку (`next_message_str`).
- Проверяет, что длина `next_message_str`  больше нуля и меньше 2000000 символов.
- Проверяет, что текст можно закодировать в UTF-8 без ошибок.

**Примеры**:

```python
# Тест запускается автоматически framework'ом pytest
test_default_llmm_api()