# Модуль тестирования сценариев рекламы

## Обзор

Этот модуль содержит тесты для проверки сценариев, связанных с рекламой, в рамках проекта `tinytroupe`. Он включает в себя тесты для оценки рекламных объявлений и генерации идей для рекламных кампаний.

## Подробнее

Этот модуль использует фреймворк `pytest` для организации тестов и включает в себя тесты для оценки рекламных объявлений и генерации идей для рекламных кампаний. Он включает в себя тесты для оценки рекламных объявлений и генерации идей для рекламных кампаний.

## Функции

### `test_ad_evaluation_scenario`

```python
def test_ad_evaluation_scenario(setup):
    """
    Функция тестирует сценарий оценки рекламных объявлений.

    Args:
        setup: Фикстура pytest для настройки тестовой среды.

    Raises:
        AssertionError: Если результаты извлечения не соответствуют ожиданиям.

    Как работает функция:
    - Определяет несколько рекламных объявлений (travel_ad_1, travel_ad_2, travel_ad_3, travel_ad_4).
    - Формирует запрос на оценку этих объявлений (eval_request_msg).
    - Создает двух агентов (Oscar the Architect и Lisa the Data Scientist).
    - Изменяет контекст каждого агента, добавляя ситуацию, в которой они планируют посетить Европу.
    - Запрашивает у каждого агента оценку рекламных объявлений.
    - Извлекает результаты выбора агентов и проверяет, что они соответствуют ожиданиям.

    Внутренние функции:
    - Отсутствуют.

    Примеры:
    - Запуск теста с фикстурой setup.
    """
```

### `test_ad_creation_scenario`

```python
def test_ad_creation_scenario(setup, focus_group_world):
    """
    Функция тестирует сценарий создания рекламного объявления для сдачи квартиры.

    Args:
        setup: Фикстура pytest для настройки тестовой среды.
        focus_group_world: Фикстура, представляющая собой группу агентов, обсуждающих задачу.

    Raises:
        AssertionError: Если сгенерированные идеи для рекламы не содержат ключевых слов.

    Как работает функция:
    - Определяет ситуацию для фокус-группы, описывающую задачу создания рекламы для сдачи квартиры.
    - Описывает характеристики квартиры, включая ее особенности и преимущества.
    - Определяет задачу для фокус-группы - обсуждение наилучшего способа рекламы квартиры.
    - Запускает симуляцию обсуждения в фокус-группе.
    - Извлекает результаты обсуждения и проверяет, что они содержат идеи для рекламного объявления.

    Внутренние функции:
    - Отсутствуют.

    Примеры:
    - Запуск теста с фикстурами setup и focus_group_world.
    """
```

### `test_consumer_profiling_scenario`

```python
def test_consumer_profiling_scenario(setup):
    """
    Функция тестирует сценарий профилирования потребителей.

    Args:
        setup: Фикстура pytest для настройки тестовой среды.

    Raises:
        AssertionError: Если файл кэша не был создан.

    Как работает функция:
    - Инициализирует систему контроля для кэширования результатов.
    - Определяет общий контекст для исследования рынка.
    - Создает фабрику потребителей (TinyPersonFactory).
    - Определяет функцию interview_consumer_batch для проведения серии интервью с потребителями.
    - В цикле создает потребителей, запрашивает у них информацию о себе и их мнение о покупке bottled gazpacho.
    - Сохраняет результаты в файл кэша.
    - Проверяет, что файл кэша был создан.
    - Завершает работу системы контроля.

    Внутренние функции:
    - interview_consumer_batch(n): Проводит серию интервью с потребителями.

    Примеры:
    - Запуск теста с фикстурой setup.
    """
```

#### `interview_consumer_batch`

```python
def interview_consumer_batch(n):
    """
    Функция проводит серию интервью с потребителями.

    Args:
        n (int): Количество потребителей для интервьюирования.

    Как работает функция:
        - Итерируется по указанному количеству потребителей.
        - Генерирует персону потребителя (`consumer_factory.generate_person`).
        - Запрашивает у потребителя информацию о себе и его интересах.
        - Запрашивает у потребителя мнение о покупке bottled gazpacho.
        - Добавляет потребителя в список `consumers`.
        - Создает контрольную точку (`control.checkpoint()`).

    """