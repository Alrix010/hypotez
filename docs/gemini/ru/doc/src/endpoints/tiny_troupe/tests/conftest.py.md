# Модуль `conftest.py`

## Обзор

Этот модуль предоставляет глобальные настройки для тестов, определенные в `pytest`.  Модуль `conftest.py` является специальным модулем, который используется для настройки тестовой среды `pytest` в проекте. Он позволяет задать опции для всего тестового набора и управлять некоторыми аспектами выполнения тестов.

## Подробней

- Модуль `conftest.py` расположен в `hypotez/src/endpoints/tiny_troupe/tests/conftest.py`.
- В этом файле определяются глобальные опции для тестовой среды `pytest`:
    - `refresh_cache`: определяет, следует ли обновлять кэш API перед запуском тестов.
    - `use_cache`: определяет, следует ли использовать кэш API во время выполнения тестов.
    - `test_examples`: определяет, следует ли запускать все примеры в дополнение к тестовым случаям.

## Функции

### `pytest_addoption`

**Назначение**: Эта функция добавляет дополнительные опции в парсер командной строки `pytest` для управления настройками тестов.

**Параметры**:
- `parser`: Объект парсера, предоставленный `pytest`.

**Как работает функция**:
- Функция `pytest_addoption` регистрирует три опции командной строки:
    - `--refresh_cache`: обновляет кэш API перед запуском тестов.
    - `--use_cache`: использует кэш API во время выполнения тестов.
    - `--test_examples`: запускает все примеры в дополнение к тестовым случаям.
- Эти опции можно использовать при запуске тестов с помощью `pytest`. Например, `pytest --refresh_cache` обновляет кэш API.

**Примеры**:
```bash
pytest --refresh_cache
pytest --use_cache
pytest --test_examples
```

### `pytest_generate_tests`

**Назначение**: Эта функция предоставляет механизм для генерации дополнительных тестовых случаев в `pytest`.

**Параметры**:
- `metafunc`: Объект, предоставляющий информацию о текущем тестовом случае.

**Как работает функция**:
- Функция `pytest_generate_tests` получает значения глобальных опций из объекта `metafunc.config`, который доступен в `pytest`.
- Затем она выводит информацию о текущем тестовом случае, включая значения опций.

**Примеры**:
```python
# Внутри тестового файла:
def test_some_function(refresh_cache, use_cache, test_examples):
    # Используйте значения глобальных опций 
    # для настройки тестового случая
```

##  Параметры класса

- `refresh_cache`:  глобальная опция, определяющая, следует ли обновлять кэш API перед запуском тестов.
- `use_cache`: глобальная опция, определяющая, следует ли использовать кэш API во время выполнения тестов.
- `test_examples`: глобальная опция, определяющая, следует ли запускать все примеры в дополнение к тестовым случаям.

## Примеры

```bash
# Запуск тестов с использованием кэша API
pytest --use_cache

# Запуск тестов с обновлением кэша API
pytest --refresh_cache

# Запуск тестов с включенными примерами
pytest --test_examples 
```