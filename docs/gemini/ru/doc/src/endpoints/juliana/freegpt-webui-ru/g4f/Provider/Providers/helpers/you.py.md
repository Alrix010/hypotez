# Модуль для взаимодействия с сервисом You.com

## Обзор

Этот модуль предоставляет функции для взаимодействия с сервисом You.com, используя API YouChat. Модуль позволяет отправить запрос на YouChat с помощью библиотеки `curl_cffi` и получить ответ, который содержит токен для дальнейшего использования.

## Подробнее

Этот модуль использует `requests` для отправки HTTP-запросов к API YouChat. Он обрабатывает ответ в формате `json` и извлекает токен, который требуется для использования в дальнейшем. 

## Функции

### `transform`

**Назначение**: Преобразует список сообщений в формат, подходящий для отправки на YouChat.

**Параметры**:

- `messages` (list): Список сообщений в формате, который используется в API YouChat.

**Возвращает**:

- list: Преобразованный список сообщений в формате, подходящем для отправки на YouChat.

**Как работает**:

Функция `transform` принимает список сообщений, которые были получены из API YouChat, и преобразует их в формат, который подходит для отправки на YouChat. 

- Проходит по списку `messages` и собирает вопросы и ответы в отдельные словари.
- Если сообщение от пользователя, функция извлекает вопрос и ответ, если ответ от ассистента, то только ответ. 
- Сохраняет все вопросы и ответы в новый список `result`.
- Возвращает новый список `result` с обработанными данными.

**Примеры**:

```python
>>> messages = [
...     {'role': 'user', 'content': 'Привет'},
...     {'role': 'assistant', 'content': 'Привет!'},
...     {'role': 'user', 'content': 'Как дела?'},
...     {'role': 'assistant', 'content': 'Хорошо!'},
... ]
>>> transform(messages)
[{'question': 'Привет', 'answer': 'Привет!'}, {'question': 'Как дела?', 'answer': 'Хорошо!'}]

```

### `output`

**Назначение**: Выводит токен из ответа YouChat.

**Параметры**:

- `chunk` (bytes): Часть ответа от YouChat.

**Возвращает**:

- None

**Как работает**:

Функция `output` принимает часть ответа от YouChat, которая содержит токен. 

- Проверяет наличие токена в части ответа.
- Если токен найден, функция декодирует часть ответа и преобразует ее в формат `json`.
- Извлекает токен из `json` и выводит его в консоль.

**Примеры**:

```python
>>> chunk = b'data: {"youChatToken": "your_token"}'
>>> output(chunk)
your_token
```

## Параметры

- `config` (dict): Конфигурационные параметры для отправки запроса.
- `messages` (list): Список сообщений для отправки на YouChat.
- `prompt` (str): Текущий вопрос, который отправляется на YouChat.
- `headers` (dict): Заголовки HTTP-запроса.
- `params` (str): Параметры HTTP-запроса.

## Примеры

```python
>>> messages = [
...     {'role': 'user', 'content': 'Привет'},
...     {'role': 'assistant', 'content': 'Привет!'},
... ]
>>> prompt = 'Как дела?'
>>> params = urllib.parse.urlencode({'q': prompt, 'domain': 'youchat', 'chat': transform(messages)})
>>> response = requests.get(f'https://you.com/api/streamingSearch?{params}', headers=headers, content_callback=output, impersonate='safari15_5')
```
```markdown