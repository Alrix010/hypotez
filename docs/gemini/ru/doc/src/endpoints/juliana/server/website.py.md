# Модуль для управления веб-сайтом

## Обзор

Этот модуль содержит класс `Website`, который управляет маршрутами и отображением веб-страниц, включая главную страницу чата, отдельные чаты и статические ресурсы.

## Подробнее

Класс `Website` инициализирует веб-приложение Flask и определяет маршруты для различных URL, связывая их с соответствующими функциями обработки запросов. Модуль обеспечивает отображение HTML-страниц и обслуживание статических файлов, таких как CSS и JavaScript.

## Классы

### `Website`

**Описание**: Управляет маршрутами и отображением веб-страниц.

**Атрибуты**:
- `app`: Экземпляр Flask-приложения.
- `routes`: Словарь, содержащий маршруты и связанные с ними функции и методы.

**Методы**:
- `__init__(self, app)`: Инициализирует класс `Website`, устанавливая Flask-приложение и определяя маршруты.
- `_chat(self, conversation_id)`: Отображает страницу чата для заданного идентификатора беседы.
- `_index(self)`: Отображает главную страницу чата, генерируя уникальный идентификатор беседы.
- `_assets(self, folder: str, file: str)`: Обслуживает статические файлы (например, CSS, JavaScript) из указанной папки.

### `__init__(self, app)`

**Назначение**: Инициализирует класс `Website`, устанавливая Flask-приложение и определяя маршруты.

**Параметры**:
- `app`: Экземпляр Flask-приложения.

**Как работает функция**:
- Принимает экземпляр Flask-приложения.
- Инициализирует атрибут `app` экземпляром Flask-приложения.
- Определяет словарь `routes`, содержащий маршруты веб-приложения и связывает их с соответствующими функциями обработки запросов и методами HTTP.

**Примеры**:
```python
from flask import Flask
app = Flask(__name__)
website = Website(app)
```

### `_chat(self, conversation_id)`

**Назначение**: Отображает страницу чата для заданного идентификатора беседы.

**Параметры**:
- `conversation_id`: Идентификатор беседы.

**Возвращает**:
- Результат отображения шаблона `index.html` с указанным `chat_id` или перенаправление на главную страницу чата.

**Как работает функция**:
- Проверяет, содержит ли `conversation_id` символ '-'. Если нет, перенаправляет на главную страницу чата.
- Отображает шаблон `index.html` с передачей `conversation_id` в качестве параметра `chat_id`.

**Примеры**:
```python
# Пример вызова функции _chat с допустимым conversation_id
website._chat('1234-5678-9012-3456-abcdef123456')
# Пример вызова функции _chat с недопустимым conversation_id
website._chat('1234567890123456abcdef123456')
```

### `_index(self)`

**Назначение**: Отображает главную страницу чата, генерируя уникальный идентификатор беседы.

**Возвращает**:
- Результат отображения шаблона `index.html` с уникальным `chat_id`.

**Как работает функция**:
- Генерирует уникальный идентификатор беседы, используя `urandom` и текущее время.
- Отображает шаблон `index.html` с передачей сгенерированного идентификатора в качестве параметра `chat_id`.

**Примеры**:
```python
# Пример вызова функции _index
website._index()
```

### `_assets(self, folder: str, file: str)`

**Назначение**: Обслуживает статические файлы (например, CSS, JavaScript) из указанной папки.

**Параметры**:
- `folder` (str): Имя папки, содержащей файл.
- `file` (str): Имя файла.

**Возвращает**:
- Статический файл или сообщение об ошибке "File not found" с кодом 404.

**Вызывает исключения**:
- `Exception`: Если файл не найден.

**Как работает функция**:
- Пытается отправить запрошенный статический файл из указанной папки.
- Если файл не найден, возвращает сообщение об ошибке "File not found" с кодом 404.

**Примеры**:
```python
# Пример вызова функции _assets для получения файла style.css из папки css
website._assets('css', 'style.css')
# Пример вызова функции _assets для файла, которого нет
website._assets('img', 'image.png')
```