# Модуль `Supplier`

## Обзор

Модуль содержит базовый класс `Supplier`, предназначенный для работы с поставщиками данных в приложении. Он предоставляет общие методы и атрибуты, которые могут быть использованы или переопределены в конкретных реализациях поставщиков, таких как Amazon, AliExpress и Walmart.

## Подробней

Класс `Supplier` служит основой для создания специализированных классов для каждого поставщика данных. Он инкапсулирует общую логику взаимодействия с сайтом, настройку драйвера, управление сценариями и парсинг данных. Конкретные реализации поставщиков будут наследовать этот класс и добавлять свою специфическую логику.

## Классы

### `Supplier`

**Описание**: Базовый класс для работы с поставщиками данных. Определяет общие свойства и методы, которые могут быть переопределены в конкретных реализациях для работы с различными сайтами и API.

**Атрибуты**:
- `supplier_id` (str): Уникальный идентификатор поставщика.
- `supplier_prefix` (str): Префикс для поставщика, например, `aliexpress` или `amazon`.
- `supplier_settings` (dict): Настройки для поставщика, загруженные из файла конфигурации.
- `locale` (str): Код локализации (например, `en` для английского, `ru` для русского).
- `price_rule` (str): Правило для расчета цены (например, добавление НДС или скидки).
- `related_modules` (module): Модуль, содержащий специфические для поставщика функции.
- `scenario_files` (list[str]): Список файлов сценариев, которые должны быть выполнены.
- `current_scenario` (str): Текущий сценарий выполнения.
- `login_data` (dict): Данные для входа на сайт поставщика (если требуется).
- `locators` (dict): Локаторы для веб-элементов на страницах сайта поставщика.
- `driver` (Driver): Веб-драйвер для взаимодействия с сайтом поставщика.
- `parsing_method` (str): Метод парсинга данных (например, `webdriver`, `api`, `xls`, `csv`).

**Принцип работы**:
Класс `Supplier` предоставляет основу для создания более специфичных классов для каждого поставщика данных. При инициализации загружаются настройки поставщика, конфигурационные файлы и инициализируется веб-драйвер. Методы класса позволяют выполнять вход на сайт поставщика, запускать сценарии и парсить данные.

**Методы**:

- `__init__(supplier_prefix: str, locale: str = 'en', webdriver: str | Driver | bool = 'default', *attrs, **kwargs)`
    **Описание**: Конструктор класса, инициализирует атрибуты на основе префикса поставщика и других параметров.

    **Параметры**:
    - `supplier_prefix` (str): Префикс поставщика.
    - `locale` (str, optional): Код локализации. По умолчанию 'en'.
    - `webdriver` (str | Driver | bool, optional): Веб-драйвер для взаимодействия с сайтом поставщика. По умолчанию 'default'.
    - `*attrs`: Дополнительные атрибуты.
    - `**kwargs`: Дополнительные именованные аргументы.

    **Как работает функция**:
    - Инициализирует префикс поставщика, локаль и веб-драйвер.
    - Загружает настройки поставщика и выполняет необходимые действия для инициализации объекта.

    **Примеры**:
    ```python
    supplier = Supplier(supplier_prefix='aliexpress', locale='ru', webdriver='chrome')
    ```

- `_payload(webdriver: str | Driver | bool, *attrs, **kwargs) -> bool`
    **Описание**: Загружает настройки поставщика, конфигурационные файлы и инициализирует веб-драйвер.

    **Параметры**:
    - `webdriver` (str | Driver | bool): Веб-драйвер для взаимодействия с сайтом поставщика.
    - `*attrs`: Дополнительные атрибуты.
    - `**kwargs`: Дополнительные именованные аргументы.

    **Возвращает**:
    - `bool`: Возвращает `True`, если загрузка конфигурации прошла успешно, иначе `False`.

    **Как работает функция**:
    - Загружает конфигурационные файлы и инициализирует веб-драйвер.
    - Выполняет необходимые действия для подготовки к работе с поставщиком.

    **Примеры**:
    ```python
    supplier._payload(webdriver='firefox')
    ```

- `login() -> bool`
    **Описание**: Выполняет вход на сайт поставщика (если требуется).

    **Возвращает**:
    - `bool`: Возвращает `True`, если вход на сайт выполнен успешно, иначе `False`.

    **Как работает функция**:
    - Выполняет процесс входа на сайт поставщика, используя данные для входа из конфигурации.
    - Если вход не требуется, возвращает `True`.

    **Примеры**:
    ```python
    supplier.login()
    ```

- `run_scenario_files(scenario_files: str | List[str] = None) -> bool`
    **Описание**: Запускает выполнение файлов сценариев.

    **Параметры**:
    - `scenario_files` (str | List[str], optional): Список файлов сценариев, которые должны быть выполнены. По умолчанию `None`.

    **Возвращает**:
    - `bool`: Возвращает `True`, если выполнение сценариев прошло успешно, иначе `False`.

    **Как работает функция**:
    - Запускает сценарии, определенные в указанных файлах.
    - Сценарии определяют действия, которые нужно выполнить (например, сбор данных).

    **Примеры**:
    ```python
    supplier.run_scenario_files(['example_scenario.json'])
    ```

- `run_scenarios(scenarios: dict | list[dict]) -> bool`
    **Описание**: Запускает один или несколько сценариев.

    **Параметры**:
    - `scenarios` (dict | list[dict]): Список сценариев, которые должны быть выполнены.

    **Возвращает**:
    - `bool`: Возвращает `True`, если выполнение сценариев прошло успешно, иначе `False`.

    **Как работает функция**:
    - Запускает заданные сценарии, которые определяют, какие действия нужно выполнить (например, сбор данных).

    **Примеры**:
    ```python
    supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
    ```

## Примеры

```python
# Создаем объект для поставщика 'aliexpress'
supplier = Supplier(supplier_prefix='aliexpress', locale='en', webdriver='chrome')

# Выполняем вход на сайт поставщика
supplier.login()

# Запускаем сценарии из файлов
supplier.run_scenario_files(['example_scenario.json'])

# Или запускаем сценарии по определенным условиям
supplier.run_scenarios([{'action': 'scrape', 'target': 'product_list'}])
```