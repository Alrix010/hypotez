# Модуль сбора товаров со страницы категорий поставщика bangood.co.il

## Обзор

Модуль собирает товары со страницы категорий поставщика `bangood.co.il` через вебдрайвер.

## Подробней

- Модуль собирает список категорий со страниц продавца (`get_list_categories_from_site()`).
- Модуль собирает список товаров со страницы категории (`get_list_products_in_category()`).
- Итерируясь по списку, модуль передает управление в `grab_product_page()`, отсылая функции текущий URL страницы.
- `grab_product_page()` обрабатывает поля товара и передает управление классу `Product`.

## Функции

### `get_list_products_in_category(s)`

**Назначение**: Возвращает список URL товаров со страницы категории. 

**Параметры**:
- `s` (`Supplier`): Объект поставщика.

**Возвращает**:
- `list[str, str, None]`: Список URL товаров или `None`, если товаров не найдено.

**Как работает функция**:

1. Функция получает объект поставщика `s` и получает доступ к вебдрайверу `d`.
2. Функция получает локаторы для элементов страницы категории из объекта `s.locators`.
3. Функция выполняет действие по закрытию всплывающего баннера (если он есть) с помощью вебдрайвера.
4. Функция проверяет, что локаторы для страницы категории доступны, и выводит сообщение об ошибке в случае отсутствия.
5. Функция прокручивает страницу с помощью `d.scroll()`.
6. Функция собирает ссылки на товары с помощью `d.execute_locator()`.
7. Функция проверяет, найдены ли ссылки на товары, и выводит предупреждающее сообщение в случае их отсутствия.
8. Функция выводит в лог сообщение о количестве найденных товаров.
9. Функция возвращает список URL товаров.

**Примеры**:
```python
from src import gs
from src.suppliers import Supplier

# Создаем объект поставщика
supplier = Supplier(site_name='bangood', driver=Driver(Chrome))

# Получаем список URL товаров со страницы категории
products_urls = get_list_products_in_category(supplier)

# Проверяем полученный результат
if products_urls:
    print(f'Найдено {len(products_urls)} товаров')
    for url in products_urls:
        print(url)
else:
    print('Товаров не найдено.')
```

### `get_list_categories_from_site(s)`

**Назначение**: Возвращает список категорий со страницы сайта.

**Параметры**:
- `s` (`Supplier`): Объект поставщика.

**Возвращает**:
- `list[str]`: Список категорий.

**Как работает функция**:

1. Функция получает объект поставщика `s` и получает доступ к вебдрайверу `d`.
2. Функция получает локаторы для элементов страницы сайта из объекта `s.locators`.
3. Функция выполняет действия по закрытию всплывающих баннеров (если они есть) с помощью вебдрайвера.
4. Функция проверяет, что локаторы для страницы сайта доступны, и выводит сообщение об ошибке в случае отсутствия.
5. Функция прокручивает страницу с помощью `d.scroll()`.
6. Функция собирает ссылки на категории с помощью `d.execute_locator()`.
7. Функция проверяет, найдены ли ссылки на категории, и выводит предупреждающее сообщение в случае их отсутствия.
8. Функция выводит в лог сообщение о количестве найденных категорий.
9. Функция возвращает список категорий.

**Примеры**:

```python
from src import gs
from src.suppliers import Supplier

# Создаем объект поставщика
supplier = Supplier(site_name='bangood', driver=Driver(Chrome))

# Получаем список URL товаров со страницы категории
categories_urls = get_list_categories_from_site(supplier)

# Проверяем полученный результат
if categories_urls:
    print(f'Найдено {len(categories_urls)} категорий')
    for url in categories_urls:
        print(url)
else:
    print('Категорий не найдено.')
```

## Внутренние функции

### `grab_product_page(product_url, s, **kwargs)`

**Назначение**: Обрабатывает страницу товара и передает данные классу `Product`.

**Параметры**:
- `product_url` (`str`): URL страницы товара.
- `s` (`Supplier`): Объект поставщика.
- `**kwargs`: Дополнительные параметры.

**Возвращает**:
- `None`: Возвращает `None`, если обработка страницы товара завершена.

**Как работает функция**:

1. Функция получает URL страницы товара `product_url`, объект поставщика `s` и дополнительные параметры.
2. Функция получает доступ к вебдрайверу `d`.
3. Функция проверяет, что URL страницы товара доступен, и выводит сообщение об ошибке в случае отсутствия.
4. Функция загружает страницу товара с помощью `d.load(product_url)`.
5. Функция закрывает всплывающие баннеры (если они есть) с помощью вебдрайвера.
6. Функция получает локаторы для элементов страницы товара из объекта `s.locators`.
7. Функция собирает данные о товаре с помощью `d.execute_locator()`.
8. Функция создает объект `Product` и передает ему собранные данные.
9. Функция выводит в лог сообщение о завершении обработки страницы товара.
10. Функция возвращает `None`.

**Примеры**:
```python
# Создаем объект поставщика
supplier = Supplier(site_name='bangood', driver=Driver(Chrome))

# Указываем URL страницы товара
product_url = 'https://www.bangood.com/product/1234567890'

# Обрабатываем страницу товара
grab_product_page(product_url, supplier)

# После обработки страницы товара объект Product будет доступен
print(supplier.product)