# Модуль сбора товаров со страницы категорий поставщика grandadvance через вебдрайвер

## Обзор

Модуль предназначен для сбора информации о товарах с сайта поставщика grandadvance, используя вебдрайвер для навигации и извлечения данных. Он включает в себя функции для получения списка категорий и товаров, а также для обработки страниц товаров.

## Подробнее

Этот модуль является частью системы для автоматизированного сбора данных о товарах с сайтов поставщиков. Он специализируется на работе с поставщиком grandadvance и предоставляет функциональность для извлечения списка категорий товаров и списка товаров в каждой категории. Собранные данные могут быть использованы для дальнейшей обработки и интеграции с другими системами, например, PrestaShop.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category (s) -> list[str, str, None]:
    """ Returns list of products urls from category page
    Если надо пролистстать - страницы категорий - листаю ??????

    Attrs:
        s - Supplier
    @returns
        list or one of products urls or None
    """
```

**Назначение**: Извлекает список URL-адресов товаров со страницы категории.

**Параметры**:
- `s` (Supplier): Объект поставщика, содержащий необходимые параметры и методы для работы с сайтом поставщика.

**Возвращает**:
- `list[str, str, None]`: Список URL-адресов товаров, найденных на странице категории. Может вернуть `None`, если список товаров не найден.

**Как работает функция**:

1.  **Инициализация**:
    -   Получает драйвер веб-браузера из объекта поставщика `s`.
    -   Извлекает локаторы для элементов категории из `s.locators['category']`.

2.  **Обработка баннеров**:
    -   Выполняет локатор для закрытия баннера, если такой присутствует (`s.locators['product']['close_banner']`). Это делается для того, чтобы баннер не мешал сбору ссылок на товары.

3.  **Проверка наличия локаторов**:
    -   Проверяет, что локаторы для категории существуют. Если локаторы отсутствуют, функция логирует ошибку и завершает работу.

4.  **Прокрутка страницы**:
    -   Выполняет прокрутку страницы для загрузки всех товаров (если применимо).

5.  **Извлечение ссылок на товары**:
    -   Использует локатор `l['product_links']` для извлечения ссылок на товары со страницы категории. Результат сохраняется в `list_products_in_category`.

6.  **Обработка отсутствия ссылок**:
    -   Если ссылки на товары не найдены, функция логирует предупреждение и возвращает `None`.

7.  **Преобразование результата в список**:
    -   Преобразует результат в список, если он является строкой.

8.  **Логирование количества найденных товаров**:
    -   Логирует количество найденных ссылок на товары.

9.  **Возврат списка ссылок**:
    -   Возвращает список URL-адресов товаров.

**Примеры**:

Предположим, у нас есть объект `supplier`, представляющий поставщика.

```python
from src.suppliers.suppliers_list.grandadvance.scenario import get_list_products_in_category
from src.webdirver import Driver, Chrome

# Создание инстанса драйвера (пример с Chrome)
driver = Driver(Chrome)

class Supplier:
    def __init__(self, driver, locators):
        self.driver = driver
        self.locators = locators

# Пример локаторов
locators = {
    'category': {
        'product_links': {
            'by': 'CSS_SELECTOR',
            'selector': '.product-item a',
            'attribute': 'href'
        }
    },
    'product': {
        'close_banner': {
            'by': 'XPATH',
            'selector': '//button[@class="close-btn"]',
            'event': 'click()'
        }
    }
}

# Создаем инстанс поставщика
supplier = Supplier(driver, locators)

# Получаем список товаров
product_list = get_list_products_in_category(supplier)

if product_list:
    print(f"Найдено {len(product_list)} товаров.")
    for product_url in product_list:
        print(product_url)
else:
    print("Список товаров не найден.")

```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    ...
```

**Назначение**: Предназначена для получения списка категорий товаров с сайта поставщика.

**Параметры**:

*   `s`: Параметр, представляющий поставщика, вероятно, содержащий информацию о драйвере веб-браузера и локаторах элементов на сайте поставщика.

**Возвращает**:

Функция в текущем виде не имеет реализации (стоит `...`), поэтому о возвращаемом значении ничего не известно.

**Как работает функция**:

В текущем виде функция не имеет реализации. В будущем она должна выполнять следующие шаги:

1.  Инициализация:
    *   Получает драйвер веб-браузера из объекта поставщика `s`.
    *   Извлекает локаторы для элементов категорий из `s.locators['categories']`.
2.  Извлечение списка категорий:
    *   Использует локаторы для извлечения ссылок на категории.
3.  Обработка списка категорий:
    *   Преобразует список категорий, если это необходимо.
4.  Логирование количества найденных категорий:
    *   Логирует количество найденных категорий.
5.  Возврат списка категорий:
    *   Возвращает список URL-адресов категорий.