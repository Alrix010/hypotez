# Модуль scenario.py для поставщика kualastyle

## Обзор

Модуль `scenario.py` предназначен для сбора информации о товарах с сайта поставщика kualastyle.il. Он выполняет следующие задачи:

-   Собирает список категорий товаров с сайта.
-   Собирает ссылки на товары в каждой категории.
-   Передает URL страниц товаров в функцию `grab_product_page()` для дальнейшей обработки и извлечения информации о товарах.

## Подробней

Этот модуль является частью системы сбора данных о товарах у различных поставщиков. Для каждого поставщика создается свой сценарий обработки данных, учитывающий особенности структуры сайта и представления информации.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category(s: Supplier) -> list[str, str, None]:
    """Returns list of products urls from category page
    Если надо пролистстать - страницы категорий - листаю ??????

    Attrs:
        s - Supplier
    @returns
        list or one of products urls or None
    """
```

**Назначение**: Извлекает список URL-адресов товаров со страницы категории.

**Параметры**:

-   `s` (Supplier): Объект поставщика, содержащий информацию о текущем сценарии, локаторы элементов на странице и инстанс веб-драйвера.

**Возвращает**:

-   `list[str, str, None]`: Список URL-адресов товаров, найденных на странице категории. Может вернуть `None`, если список товаров не найден.

**Как работает функция**:

1.  Инициализирует драйвер и локаторы из объекта поставщика (`s`).
2.  Ожидает 1 секунду, чтобы убедиться, что страница загрузилась.
3.  Выполняет локатор для закрытия баннера (если такой локатор определен).
4.  Выполняет прокрутку страницы.
5.  Извлекает ссылки на товары, используя локатор `product_links`.
6.  Проверяет, найдены ли ссылки на товары. Если нет, записывает предупреждение в лог.
7.  Проверяет, изменился ли текущий URL. Если URL не изменился, вызывает функцию `paginator` для перехода на следующую страницу.
8.  Объединяет все собранные ссылки на товары в один список.
9.  Записывает в лог количество найденных товаров в текущей категории.

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...)  # Предполагается, что объект Supplier инициализирован ранее
product_list = get_list_products_in_category(supplier)
if product_list:
    print(f"Найдено {len(product_list)} товаров в категории")
else:
    print("Товары в категории не найдены")
```

### `paginator`

```python
def paginator(d: Driver, locator: dict, list_products_in_category: list):
    """Листалка"""
```

**Назначение**: Осуществляет навигацию по страницам категорий, если это необходимо для загрузки всех товаров.

**Параметры**:

-   `d` (Driver): Инстанс веб-драйвера.
-   `locator` (dict): Словарь с локаторами элементов на странице.
-   `list_products_in_category` (list): Список URL товаров в текущей категории.

**Возвращает**:

-   `True`, если переход на следующую страницу был успешен.
-   `None`, если переход не удался или больше нет страниц для пагинации.

**Как работает функция**:

1.  Пытается выполнить локатор для кнопки пагинации (`<-`).
2.  Проверяет, был ли получен ответ и не является ли он пустым списком.
3.  Если ответ не получен или является пустым списком, возвращает `None`.
4.  В случае успешного перехода возвращает `True`.

**Примеры**:

```python
# Пример вызова функции
driver = Driver(...)
locators = {...}
product_list = []
paginator(driver, locators, product_list)
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    """сборщик актуальных категорий с сайта"""
```

**Назначение**: Собирает список актуальных категорий с сайта поставщика.

**Параметры**:

-   `s`: Объект поставщика.

**Как работает функция**:

-   Функция должна собирать актуальные категории с сайта. Детали реализации не предоставлены в данном коде.

**Примеры**:

```python
# Пример вызова функции
supplier = Supplier(...)
get_list_categories_from_site(supplier)