# Модуль для сбора данных с сайта Ivory
## Обзор

Модуль `graber.py` предназначен для сбора информации о товарах с сайта `ivory.co.il`. Он наследует функциональность основного класса `Graber` и переопределяет методы для обработки специфичных полей данных, если это необходимо. Модуль использует веб-драйвер для взаимодействия с сайтом и сбора данных.

## Подробнее

Этот модуль является частью системы, предназначенной для сбора и обработки данных о товарах от различных поставщиков. Он специализируется на сборе данных с сайта `ivory.co.il`. Модуль наследует базовый класс `Graber` и использует его для выполнения стандартных операций. Если для какого-либо поля требуется нестандартная обработка, модуль переопределяет соответствующий метод.

Перед отправкой запроса к веб-драйверу можно выполнить предварительные действия с помощью декоратора. Декоратор по умолчанию находится в родительском классе. Для того чтобы декоратор сработал, необходимо передать значение в `Context.locator`. Если требуется реализовать свой декоратор, необходимо раскомментировать строки с декоратором и переопределить его поведение.

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с сайта `ivory.co.il`. Он наследует функциональность основного класса `Graber` и переопределяет методы для обработки специфичных полей данных, если это необходимо.

**Наследует**:
- `Graber` (обозначенный как `Grbr`) из `src.suppliers.graber`.

**Атрибуты**:
- `supplier_prefix` (str): Префикс поставщика, который используется для идентификации поставщика.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `Graber`.

### `__init__`

```python
def __init__(self, driver: Optional['Driver'] = None, lang_index: Optional[int] = None):
    """Инициализация класса сбора полей товара."""
```

**Назначение**: Инициализация экземпляра класса `Graber` для сбора данных о товарах с сайта `ivory.co.il`.

**Параметры**:
- `driver` (Optional['Driver'], optional): Экземпляр веб-драйвера для взаимодействия с сайтом. По умолчанию `None`.
- `lang_index` (Optional[int], optional): Индекс языка, который используется на сайте. По умолчанию `None`.

**Как работает функция**:
- Функция инициализирует атрибут `supplier_prefix` значением `'ivory'`.
- Вызывает конструктор родительского класса `Graber` (`Grbr`) с указанием префикса поставщика, экземпляра веб-драйвера и индекса языка.
- Устанавливает значение `Config.locator_for_decorator` в `None`, что отключает выполнение декоратора `@close_pop_up`.

**Примеры**:

```python
# Создание экземпляра класса Graber без указания драйвера и индекса языка
graber = Graber()

# Создание экземпляра класса Graber с указанием драйвера и индекса языка
from src.webdriver.driver import Driver, Chrome
driver = Driver(Chrome)
graber = Graber(driver=driver, lang_index=1)
```
```

### Декораторы
В коде определенны заготовки для декоратора `close_pop_up`. Они нужны для закрытия всплывающих окон.

### `close_pop_up`
```python
def close_pop_up(value: Any = None) -> Callable:
    """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

    Args:
        value (Any): Дополнительное значение для декоратора.

    Returns:
        Callable: Декоратор, оборачивающий функцию.
    """
```
**Назначение**: Функция создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.
**Параметры**:
- `value` (Any): Дополнительное значение для декоратора.
**Возвращает**:
- `Callable`: Декоратор, оборачивающий функцию.

Как работает функция:

Внутренняя функция `decorator` принимает функцию `func` в качестве аргумента и возвращает функцию `wrapper`.
Внутри функции `wrapper` вызывается метод `execute_locator` драйвера для закрытия всплывающего окна.
Затем вызывается основная функция `func`.
Если при выполнении локатора возникает исключение, оно логируется в отладочный журнал.

Внутренние функции:
`decorator`
`wrapper`

### `decorator`
```python
def decorator(func: Callable) -> Callable:
    """Декоратор, оборачивающий функцию.

    Args:
        func (Callable): Функция, которую необходимо обернуть.

    Returns:
        Callable: Обернутая функция.
    """
```
**Назначение**: Декоратор, оборачивающий функцию.
**Параметры**:
- `func` (Callable): Функция, которую необходимо обернуть.
**Возвращает**:
- `Callable`: Обернутая функция.

Как работает функция:

Внутренняя функция `wrapper` вызывается при вызове обернутой функции.
Внутри функции `wrapper` вызывается метод `execute_locator` драйвера для закрытия всплывающего окна.
Затем вызывается основная функция `func`.
Если при выполнении локатора возникает исключение, оно логируется в отладочный журнал.

Внутренние функции:
`wrapper`
### `wrapper`
```python
async def wrapper(*args, **kwargs):
    """Обертка для выполнения основной логики функции после закрытия всплывающего окна.

    Args:
        *args: Позиционные аргументы, передаваемые в основную функцию.
        **kwargs: Именованные аргументы, передаваемые в основную функцию.

    Returns:
        Any: Результат выполнения основной функции.

    Raises:
        ExecuteLocatorException: Если возникает ошибка при выполнении локатора для закрытия всплывающего окна.
    """
```
**Назначение**: Обертка для выполнения основной логики функции после закрытия всплывающего окна.
**Параметры**:
- `*args`: Позиционные аргументы, передаваемые в основную функцию.
- `**kwargs`: Именованные аргументы, передаваемые в основную функцию.
**Возвращает**:
- `Any`: Результат выполнения основной функции.

Как работает функция:

Внутри функции `wrapper` вызывается метод `execute_locator` драйвера для закрытия всплывающего окна.
Затем вызывается основная функция `func`.
Если при выполнении локатора возникает исключение, оно логируется в отладочный журнал.

**Примеры**:

```python
# Пример использования декоратора
@close_pop_up()
async def my_function():
    # Основная логика функции
    pass
```
```