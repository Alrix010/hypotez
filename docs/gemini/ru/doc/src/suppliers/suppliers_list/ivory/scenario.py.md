# Модуль сбора товаров со страницы категорий поставщика hb.co.il через вебдрайвер

## Обзор

Модуль предназначен для сбора информации о товарах с сайта поставщика hb.co.il, используя веб-драйвер. Он включает в себя функции для извлечения списка категорий, товаров внутри категорий и дальнейшей обработки информации о товарах.

## Подробней

Этот модуль является частью системы сбора данных о товарах от различных поставщиков. Он специализируется на сборе данных с сайта hb.co.il.  Модуль выполняет следующие основные задачи:
- Сбор списка категорий товаров с сайта поставщика.
- Сбор списка товаров, представленных в каждой категории.
- Передача URL страниц товаров для дальнейшей обработки и извлечения информации о товаре.
  Модуль использует веб-драйвер для взаимодействия с сайтом и извлечения необходимых данных.
  Этот модуль можно рассматривать как компонент, специфичный для поставщика hb.co.il, который интегрируется в общую систему сбора данных о товарах.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category (s: Supplier) -> list[str, str, None]:
    """ Функция извлекает список URL товаров со страницы категории
    Если надо пролистстать - страницы категорий - листаю ??????

    Args:
        s (Supplier): Объект поставщика, содержащий необходимую информацию (драйвер, локаторы).

    Returns:
        list[str, str, None]: Список URL товаров в категории или None.
    """
```

**Назначение**: Функция `get_list_products_in_category` извлекает список URL товаров со страницы категории поставщика. Если требуется, осуществляет пролистывание страниц категорий.

**Параметры**:
- `s` (Supplier): Объект поставщика, содержащий информацию о драйвере и локаторах элементов на странице.

**Возвращает**:
- `list[str, str, None]`: Список URL товаров в категории. Возвращает `None`, если список товаров не найден.

**Как работает функция**:
1.  Инициализирует драйвер и локаторы из объекта поставщика.
2.  Выполняет ожидание в течение 1 секунды.
3.  Закрывает баннер, если он появляется на странице категории.
4.  Выполняет скроллинг страницы.
5.  Извлекает список URL товаров, используя локатор `product_links`.
6.  Если список товаров не найден, записывает предупреждение в лог и возвращает `None`.
7.  Организует пагинацию, если необходимо, для перелистывания страниц с товарами.
8.  Записывает отладочную информацию в лог о количестве найденных товаров в категории.
9.  Возвращает список URL товаров.

**Внутренние функции**:
- Внутри этой функции вызывается функция `paginator(d:Driver, locator: dict, list_products_in_category: list)`.

**Примеры**:
```python
# Пример вызова функции
supplier = Supplier(...)  # Предполагается, что объект Supplier уже создан и настроен
product_list = get_list_products_in_category(supplier)
if product_list:
    print(f"Найдено {len(product_list)} товаров")
else:
    print("Товары не найдены")
```

### `paginator`

```python
def paginator(d:Driver, locator: dict, list_products_in_category: list):
    """ Листалка """
    ...
```

**Назначение**: Функция `paginator` отвечает за перелистывание страниц в категории товаров.

**Параметры**:
- `d` (Driver): Объект драйвера веб-браузера.
- `locator` (dict): Словарь с локаторами элементов на странице.
- `list_products_in_category` (list): Список товаров в текущей категории.

**Возвращает**:
- `True`: Если перелистывание выполнено успешно.
- `None`: Если не удалось выполнить перелистывание.

**Как работает функция**:
1.  Функция пытается выполнить клик на элемент пагинации, используя локатор `locator['pagination']['<-']`.
2.  Если элемент не найден или список элементов пуст, функция возвращает `None`.
3.  В противном случае, функция возвращает `True`, указывая на успешное выполнение перелистывания.

**Примеры**:
```python
# Пример вызова функции
driver = Driver(...)
locators = {...}
products = []
result = paginator(driver, locators, products)
if result:
    print("Страница перелистнута")
else:
    print("Перелистывание не удалось")
```

### `get_list_categories_from_site`

```python
def get_list_categories_from_site(s):
    """ сборщик актуальных категорий с сайта """
    ...
```

**Назначение**: Функция `get_list_categories_from_site` собирает актуальный список категорий с сайта.

**Параметры**:
- `s`: Объект поставщика, содержащий информацию, необходимую для сбора категорий.

**Возвращает**:
-  `list[str]`:  Список URL категорий товаров. Возвращает `None`, если список категорий не найден.

**Как работает функция**:

   1.  Функция извлекает и возвращает список актуальных категорий с сайта поставщика.
   2.  Подробности работы функции не предоставлены в данном коде (`...`).
      Логика сбора категорий зависит от структуры сайта поставщика.
   3.  Для реализации необходимо добавить код, который будет взаимодействовать с сайтом поставщика через веб-драйвер,
      извлекать URL категорий и возвращать их в виде списка.

**Примеры**:
```python
# Пример вызова функции
supplier = Supplier(...)  # Предполагается, что объект Supplier уже создан и настроен
categories_list = get_list_categories_from_site(supplier)
if categories_list:
    print(f"Найдено {len(categories_list)} категорий")
else:
    print("Категории не найдены")