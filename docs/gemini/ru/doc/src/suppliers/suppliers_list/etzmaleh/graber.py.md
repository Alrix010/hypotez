# Модуль для сбора данных о товарах с Etzmaleh (graber.py)

## Обзор

Модуль содержит класс `Graber`, предназначенный для сбора информации о товарах с веб-сайта Etzmaleh. Он наследуется от базового класса `src.suppliers.graber.Graber` и предоставляет методы для обработки различных полей товара на странице. В случае необходимости нестандартной обработки поля, метод может быть переопределен.

## Подробней

Этот модуль является частью системы сбора данных о товарах с различных поставщиков для проекта `hypotez`. Он специализируется на сборе данных с веб-сайта Etzmaleh.
Для каждого поля страницы товара сделана функция обработки поля в родительском `Graber`. Если нужна нестандартная обработка, можно перегрузить метод здесь, в этом классе.
Перед отправкой запроса к вебдрайверу можно совершить предварительные действия через декоратор.
Декоратор по умолчанию находится в родительском классе. Для того, чтобы декоратор сработал надо передать значение
в `Context.locator`.
Вы также можете реализовать свой собственный декоратор, раскомментировав соответствующие строки кода

## Классы

### `Graber`

**Описание**: Класс `Graber` предназначен для сбора данных о товарах с веб-сайта Etzmaleh. Он наследуется от базового класса `Graber` (Grbr) из модуля `src.suppliers.graber`.

**Наследует**:
- `Graber` (as `Grbr`) из модуля `src.suppliers.graber`.

**Атрибуты**:
- `supplier_prefix` (str): Префикс поставщика, устанавливается как `'etzmaleh'`.
- `driver` (Optional['Driver']): Экземпляр веб-драйвера для управления браузером.
- `lang_index` (Optional[int]): Индекс языка (не используется в текущей версии).

**Методы**:
- `__init__(self, driver: Optional['Driver'] = None, lang_index: Optional[int] = None)`: Инициализирует экземпляр класса `Graber`.

### `Config`

**Описание**: Класс `Config` предназначен для хранения глобальных настроек.

**Атрибуты**:
- `locator_for_decorator` (None): Локатор для декоратора.

## Методы класса

### `__init__`

```python
def __init__(self, driver: Optional['Driver'] = None, lang_index: Optional[int] = None) -> None:
    """Инициализация класса сбора полей товара.

    Args:
        driver (Optional['Driver'], optional): Экземпляр веб-драйвера для управления браузером. По умолчанию None.
        lang_index (Optional[int], optional): Индекс языка (не используется в текущей версии). По умолчанию None.
    """
```

**Назначение**: Инициализирует экземпляр класса `Graber`, устанавливает префикс поставщика и вызывает конструктор родительского класса. Также устанавливает глобальные настройки через `Config`.

**Параметры**:
- `driver` (Optional['Driver'], optional): Экземпляр веб-драйвера для управления браузером. По умолчанию `None`.
- `lang_index` (Optional[int], optional): Индекс языка (не используется в текущей версии). По умолчанию `None`.

**Как работает функция**:
1. Устанавливает атрибут `supplier_prefix` равным `'etzmaleh'`.
2. Вызывает конструктор родительского класса `Grbr` с установленным префиксом поставщика, драйвером и индексом языка.
3. Устанавливает значение `Config.locator_for_decorator` в `None`. Если будет установлено значение - оно выполнится в декораторе `@close_pop_up`.

**Примеры**:

```python
from src.webdriver.driver import Driver, Chrome
from src.suppliers.suppliers_list.etzmaleh.graber import Graber

# Пример инициализации класса Graber без указания драйвера и индекса языка
graber_instance = Graber()

# Пример инициализации класса Graber с указанием драйвера и индекса языка
driver_instance = Driver(Chrome)
graber_instance_with_driver = Graber(driver=driver_instance, lang_index=1)
```

### `close_pop_up` (Декоратор)

```python
# def close_pop_up(value: Any = None) -> Callable:
#     """Создает декоратор для закрытия всплывающих окон перед выполнением основной логики функции.

#     Args:
#         value (Any): Дополнительное значение для декоратора.

#     Returns:
#         Callable: Декоратор, оборачивающий функцию.
#     """
```

**Назначение**: Декоратор предназначен для закрытия всплывающих окон перед выполнением основной логики функции.

**Параметры**:
- `value` (Any): Дополнительное значение для декоратора. По умолчанию None.

**Как работает декоратор**:
1. Пытается выполнить локатор для закрытия всплывающего окна.
2. В случае ошибки выполнения локатора, логирует отладочное сообщение.
3. Вызывает и возвращает результат выполнения основной функции.

**Примеры**:

```python
# from src.webdriver.driver import Driver, Chrome
# from src.suppliers.suppliers_list.etzmaleh.graber import Graber
#
# # Пример использования декоратора close_pop_up
# driver_instance = Driver(Chrome)
# graber_instance = Graber(driver=driver_instance)
#
# # Определение функции, к которой будет применен декоратор
# @Graber.close_pop_up()
# async def some_function():
#     print("Основная функция")
#
# # Вызов функции
# # await some_function()
```