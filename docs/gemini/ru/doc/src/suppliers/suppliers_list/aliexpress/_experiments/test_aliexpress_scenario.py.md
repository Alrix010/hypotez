# Модуль для тестирования сценариев AliExpress

## Обзор

Модуль `test_aliexpress_scenario.py` предназначен для тестирования сценариев работы с поставщиком AliExpress. Он содержит функции для запуска поставщика, создания объектов продуктов и выполнения различных операций с ними, таких как проверка наличия в базе данных PrestaShop и добавление в PrestaShop.

## Подробней

Модуль используется для автоматизированного тестирования интеграции с AliExpress. Он позволяет имитировать действия пользователя, такие как запуск поставщика, переход на страницу товара, извлечение информации о товаре и добавление его в базу данных PrestaShop.
Расположение файла в структуре проекта: `hypotez/src/suppliers/suppliers_list/aliexpress/_experiments/test_aliexpress_scenario.py`
Данный модуль, вероятно, находится в стадии экспериментов, так как расположен в директории `_experiments`.

## Функции

### `start_supplier`

```python
def start_supplier(supplier_prefix: str) -> Supplier:
    """
    Инициализирует и возвращает объект поставщика (Supplier).

    Args:
        supplier_prefix (str): Префикс поставщика.

    Returns:
        Supplier: Объект поставщика.
    """
```

**Назначение**: Инициализирует объект `Supplier` с заданным префиксом.

**Параметры**:

-   `supplier_prefix` (str): Префикс поставщика, используемый для инициализации.

**Возвращает**:

-   `Supplier`: Объект поставщика, созданный на основе переданного префикса.

**Как работает функция**:

-   Функция принимает префикс поставщика в качестве аргумента.
-   Создает словарь `params` с ключом `'supplier_prefix'`, содержащим переданный префикс.
-   Использует оператор `**params` для передачи словаря в качестве именованных аргументов конструктору класса `Supplier`.
-   Возвращает созданный объект `Supplier`.

**Примеры**:

```python
supplier = start_supplier('aliexpress')
print(type(supplier)) #  <class 'src.suppliers.Supplier'>
```

### `start_product`

```python
def start_product() -> Product:
    """
    Инициализирует и возвращает объект продукта (Product) с заданными параметрами.

    Args:
        None

    Returns:
        Product: Объект продукта.
    """
```

**Назначение**: Создает и возвращает объект `Product`, используя параметры, специфичные для AliExpress, такие как локаторы веб-элементов и категории продукта.

**Параметры**:

-   Нет явных параметров, функция использует глобальные переменные `s` и `test_scenario`.

**Возвращает**:

-   `Product`: Объект продукта, инициализированный с необходимыми параметрами.

**Как работает функция**:

-   Функция использует глобальную переменную `s`, которая является экземпляром класса `Supplier`.
-   Определяет параметры для инициализации объекта `Product`, включая:
    -   `supplier`: Объект поставщика (`s`).
    -   `webelements_locators`: Локаторы веб-элементов продукта, полученные из `s.locators.get('product')`.
    -   `product_categories`: Категории продукта, полученные из `test_scenario['iPhone 13 & 13 MINI']['presta_categories']`.
-   Создает словарь `params` с этими параметрами.
-   Использует оператор `**params` для передачи словаря в качестве именованных аргументов конструктору класса `Product`.
-   Возвращает созданный объект `Product`.

**Примеры**:

```python
product = start_product()
print(type(product))  # <class 'src.product.Product'>
```

## Переменные

-   `supplier_prefix` (str): Префикс поставщика, используемый для инициализации класса `Supplier`.
-   `s` (Supplier): Объект класса `Supplier`, инициализированный с префиксом `aliexpress`. Используется на протяжении всего кода для работы с поставщиком.
-   `test_scenario` (dict): Словарь, содержащий тестовые данные для iPhone 13 & 13 MINI, включая ID категории на сайте, бренд, URL, активность, состояние, категории PrestaShop и комбинации продуктов.
-   `test_products_list` (list): Список URL-адресов тестовых продуктов.
-   `p` (Product): Объект класса `Product`, созданный с использованием функции `start_product()`.
-   `d`:  Сокращение для `s.driver`, представляет собой драйвер веб-браузера, используемый для взаимодействия с веб-страницами.
-   `_`:  Сокращение для `d.execute_locator`, представляет собой функцию, которая выполняет поиск веб-элементов на странице с использованием заданных локаторов.
-   `f`:  Сокращение для `p.fields`, представляет собой объект, содержащий поля продукта, такие как название, описание, цена и другие атрибуты.
-   `l`:  Сокращение для `p.webelements_locators`, представляет собой локаторы веб-элементов, используемые для поиска элементов на странице продукта.