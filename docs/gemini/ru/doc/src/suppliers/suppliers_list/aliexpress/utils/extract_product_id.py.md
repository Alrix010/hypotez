# Модуль для извлечения идентификаторов товаров с AliExpress
===============================================================

Модуль содержит функции для извлечения идентификаторов товаров (product IDs) из URL-адресов AliExpress или для проверки валидности идентификаторов.

## Обзор

Модуль предоставляет функцию `extract_prod_ids`, которая принимает на вход URL-адрес AliExpress или список URL-адресов и возвращает идентификатор товара или список идентификаторов.
Функция использует регулярное выражение для поиска идентификаторов товара в URL-адресе.

## Подробнее

Модуль `extract_product_id.py` находится в директории `/src/suppliers/aliexpress/utils/`.
Функция `extract_prod_ids` использует внутреннюю функцию `extract_id` для извлечения идентификаторов товаров.

## Функции

### `extract_prod_ids`

**Назначение**:
- Извлекает идентификаторы товаров из списка URL-адресов AliExpress или из отдельных URL-адресов.
- Проверяет валидность идентификаторов товаров, если они предоставлены напрямую.

**Параметры**:

- `urls` (str | list[str]): URL-адрес или список URL-адресов, содержащих идентификаторы товаров, или сами идентификаторы товаров.

**Возвращает**:

- str | list[str] | None: Список извлеченных идентификаторов товаров, один идентификатор товара или `None`, если валидный идентификатор не найден.

**Вызывает исключения**:

- `None`

**Примеры**:

```python
>>> extract_prod_ids("https://www.aliexpress.com/item/123456.html")
'123456'

>>> extract_prod_ids(["https://www.aliexpress.com/item/123456.html", "7891011.html"])
['123456', '7891011']

>>> extract_prod_ids(["https://www.example.com/item/123456.html", "https://www.example.com/item/abcdef.html"])
['123456']

>>> extract_prod_ids("7891011")
'7891011'

>>> extract_prod_ids("https://www.example.com/item/abcdef.html")
None
```

**Как работает функция**:

1. Функция `extract_prod_ids` проверяет тип входного параметра `urls`. 
2. Если `urls` - это список, функция перебирает элементы списка и вызывает для каждого элемента функцию `extract_id`. 
3. Если `urls` - строка, функция вызывает для нее функцию `extract_id`.
4. Функция `extract_id` сначала проверяет, является ли входной параметр `url` валидным идентификатором товара (числовым значением).
5. Если входной параметр `url` не является валидным идентификатором товара, функция `extract_id` использует регулярное выражение `pattern = re.compile(r"(?:item/|/)?(\\d+)\\.html")` для поиска идентификаторов товара в URL-адресе.
6. Если идентификатор товара найден, функция `extract_id` возвращает его.
7. Если валидный идентификатор товара не найден, функция `extract_id` возвращает `None`.


### `extract_id`

**Назначение**:

- Извлекает идентификатор товара из URL-адреса AliExpress или проверяет валидность идентификатора.

**Параметры**:

- `url` (str): URL-адрес AliExpress, содержащий идентификатор товара, или сам идентификатор товара.

**Возвращает**:

- str | None: Извлеченный идентификатор товара, или сам входной параметр, если он является валидным идентификатором, или `None`, если валидный идентификатор не найден.

**Вызывает исключения**:

- `None`

**Примеры**:

```python
>>> extract_id("https://www.aliexpress.com/item/123456.html")
'123456'

>>> extract_id("7891011")
'7891011'

>>> extract_id("https://www.example.com/item/abcdef.html")
None
```

**Как работает функция**:

1. Функция `extract_id` сначала проверяет, является ли входной параметр `url` валидным идентификатором товара (числовым значением). 
2. Если входной параметр `url` не является валидным идентификатором товара, функция `extract_id` использует регулярное выражение `pattern = re.compile(r"(?:item/|/)?(\\d+)\\.html")` для поиска идентификаторов товара в URL-адресе. 
3. Если идентификатор товара найден, функция `extract_id` возвращает его.
4. Если валидный идентификатор товара не найден, функция `extract_id` возвращает `None`.

## Примеры

```python
>>> extract_prod_ids("https://www.aliexpress.com/item/123456.html")
'123456'

>>> extract_prod_ids(["https://www.aliexpress.com/item/123456.html", "7891011.html"])
['123456', '7891011']

>>> extract_prod_ids(["https://www.example.com/item/123456.html", "https://www.example.com/item/abcdef.html"])
['123456']

>>> extract_prod_ids("7891011")
'7891011'

>>> extract_prod_ids("https://www.example.com/item/abcdef.html")
None
```