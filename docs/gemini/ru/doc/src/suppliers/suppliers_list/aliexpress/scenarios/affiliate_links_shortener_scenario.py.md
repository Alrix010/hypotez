# Модуль для сокращения партнерских ссылок AliExpress

## Обзор

Модуль `affiliate_links_shortener_scenario.py` содержит функцию `get_short_affiliate_link`, которая сокращает партнерские ссылки AliExpress через веб-браузер. 

## Подробнее

Функция `get_short_affiliate_link` выполняет сценарий сокращения ссылки на сайте AliExpress. Она вводит полный URL в поле для ввода, нажимает кнопку для получения короткой ссылки, проверяет полученный короткий URL и закрывает ненужные вкладки. 

## Функции

### `get_short_affiliate_link`

**Назначение**: Функция сокращает партнерскую ссылку AliExpress через веб-браузер.

**Параметры**:

- `d (Driver)`: Инстанс WebDriver для управления веб-браузером.
- `url (str)`: Полный URL, который нужно сократить.

**Возвращает**:

- `str`: Сокращенный URL.

**Вызывает исключения**:

- `ValueError`: В случае, если не удается получить сокращенный URL или URL некорректен.

**Как работает функция**:

- Функция выполняет сценарий сокращения ссылки на сайте AliExpress с использованием WebDriver.
- Сначала она вводит полный URL в поле для ввода, нажимает кнопку для получения короткой ссылки и ждет, пока страница обновится.
- Затем функция извлекает короткий URL из элемента на странице.
- Если полученный короткий URL пустой, функция выводит сообщение об ошибке в лог и возвращает пустую строку. 
- В случае, если полученный URL некорректен, функция выводит сообщение об ошибке в лог, закрывает вкладку с неправильным URL, переключается обратно на основную вкладку и возвращает пустую строку.
- Если полученный URL корректен, функция закрывает вкладку с сокращенным URL, переключается обратно на основную вкладку и возвращает короткий URL.

**Примеры**:

```python
# Импорт необходимых модулей
from src.webdriver.driver import Driver
from src.suppliers.aliexpress.scenarios.affiliate_links_shortener_scenario import get_short_affiliate_link

# Создание инстанса драйвера (пример с Chrome)
driver = Driver(Chrome)

# Исходный URL
url = 'https://www.aliexpress.com/item/4000000000000.html'

# Получение сокращенного URL
short_url = get_short_affiliate_link(driver, url)

# Вывод результата
print(f"Исходный URL: {url}")
print(f"Сокращенный URL: {short_url}")