# Модуль управления категориями Aliexpress

Этот модуль предоставляет функциональность для управления категориями на AliExpress. Он позволяет получать URL-адреса товаров, обновлять списки категорий и взаимодействовать с платформой AliExpress для синхронизации категорий.

## Обзор

Модуль содержит различные функции и методы для взаимодействия с категориями товаров на AliExpress, включая получение URL-адресов товаров, обновление категорий в файлах сценариев и управление данными категорий в базе данных.

### Основные функции:
- **Получение URL-адресов товаров**: Собирает URL-адреса товаров со страниц категорий.
- **Синхронизация категорий**: Сравнивает и обновляет категории на сайте с категориями в локальных файлах сценариев.
- **Взаимодействие с базой данных**: Предлагает операции с базой данных для управления категориями.

## Функции

### `get_list_products_in_category(s: Supplier) -> list[str, str]`

Получает список URL-адресов товаров со страницы категории, включая пагинацию.

#### Параметры:
- `s` (`Supplier`): Экземпляр поставщика с драйвером браузера и локаторами.

#### Возвращает:
- Список URL-адресов товаров со страницы категории.

**Как работает функция**:
- Функция `get_list_products_in_category` принимает экземпляр класса `Supplier` в качестве аргумента.
- Внутри функции вызывается `get_prod_urls_from_pagination(s: Supplier)`, которая возвращает список URL товаров со страницы категории с учетом пагинации.

---

### `get_prod_urls_from_pagination(s: Supplier) -> list[str]`

Извлекает URL-адреса товаров со страниц категорий, обрабатывая пагинацию.

#### Параметры:
- `s` (`Supplier`): Экземпляр поставщика с драйвером браузера и локаторами.

#### Возвращает:
- Список URL-адресов товаров.

**Как работает функция**:
- Функция `get_prod_urls_from_pagination` принимает экземпляр класса `Supplier` в качестве аргумента.
-  В цикле перебираются страницы пагинации и извлекаются URL-адреса товаров с каждой страницы.

---

### `update_categories_in_scenario_file(s: Supplier, scenario_filename: str) -> bool`

Сравнивает категории на сайте с категориями в предоставленном файле сценариев и обновляет файл любыми изменениями.

#### Параметры:
- `s` (`Supplier`): Экземпляр поставщика с драйвером браузера и локаторами.
- `scenario_filename` (`str`): Имя файла сценария, который необходимо обновить.

#### Возвращает:
- `True`, если категории были успешно обновлены, `False` в противном случае.

**Как работает функция**:
- Функция `update_categories_in_scenario_file` принимает экземпляр класса `Supplier` и имя файла сценария в качестве аргументов.
- Сравнивает категории на сайте с категориями в файле сценария и обновляет файл сценария, если есть изменения.

---

### `get_list_categories_from_site(s: Supplier, scenario_file: str, brand: str = '') -> list`

Получает список категорий с сайта AliExpress на основе предоставленного файла сценария.

#### Параметры:
- `s` (`Supplier`): Экземпляр поставщика с драйвером браузера и локаторами.
- `scenario_file` (`str`): Файл сценария, содержащий информацию о категориях.
- `brand` (`str`, optional): Фильтр бренда для категорий.

#### Возвращает:
- Список категорий с сайта.

**Как работает функция**:
- Функция `get_list_categories_from_site` принимает экземпляр класса `Supplier`, имя файла сценария и (необязательно) бренд в качестве аргументов.
- Извлекает список категорий с сайта AliExpress на основе предоставленного файла сценария.

---

## Классы

### `DBAdaptor`

Предоставляет методы для взаимодействия с базой данных, позволяя выполнять стандартные операции, такие как `SELECT`, `INSERT`, `UPDATE` и `DELETE` для записей `AliexpressCategory`.

#### Методы:
- `select`: Извлекает записи из таблицы `AliexpressCategory`.
- `insert`: Вставляет новую запись в таблицу `AliexpressCategory`.
- `update`: Обновляет существующую запись в таблице `AliexpressCategory`.
- `delete`: Удаляет запись из таблицы `AliexpressCategory`.

**Как работает класс**:
- Класс `DBAdaptor` предоставляет методы для взаимодействия с базой данных, позволяя выполнять стандартные операции CRUD (Create, Read, Update, Delete) для записей `AliexpressCategory`.

---

## Зависимости

Этот модуль опирается на несколько других модулей для различных функций:

- `src.db.manager_categories.suppliers_categories`: Для управления категориями в базе данных.
- `src.utils.jjson`: Для работы с данными JSON.
- `src.logger`: Для регистрации ошибок и сообщений.
- `requests`: Для выполнения HTTP-запросов для получения данных категорий с сайта AliExpress.

---

## Пример использования

```python
from src.suppliers.suppliers_list.aliexpress.category import get_list_products_in_category, update_categories_in_scenario_file

# Пример использования
supplier_instance = Supplier()
category_urls = get_list_products_in_category(supplier_instance)
update_categories_in_scenario_file(supplier_instance, 'example_scenario.json')
```

---

## Лицензия

Этот модуль лицензирован в соответствии с лицензией MIT.