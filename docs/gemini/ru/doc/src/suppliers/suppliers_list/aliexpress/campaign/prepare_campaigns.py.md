# Модуль `prepare_campaigns`

## Обзор

Модуль `prepare_campaigns` предназначен для обработки кампаний AliExpress, включая:

- Обработку категорий товаров
- Управление данными кампании
- Создание промо-материалов

Модуль предоставляет функции для обработки отдельных категорий товаров в рамках кампании, а также для обработки всей кампании целиком.

## Подробнее

Модуль `prepare_campaigns` используется для автоматизации процесса подготовки кампаний AliExpress. 

Он использует информацию о кампании из Google Drive и обрабатывает ее для различных целей, таких как:

- Создание промо-материалов
- Сбор данных о продажах
- Анализ эффективности кампании

## Функции

### `process_campaign_category`

**Назначение**:  Функция обрабатывает определенную категорию товаров в рамках кампании для заданного языка и валюты.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `category_name` (str): Категория для кампании.
- `language` (str): Язык для кампании.
- `currency` (str): Валюта для кампании.

**Возвращает**:

- `List[str]`: Список наименований товаров в категории.

**Пример**:

```python
>>> titles: List[str] = process_campaign_category("summer_sale", "electronics", "EN", "USD")
>>> print(titles)
['Product 1', 'Product 2']
```

**Как работает функция**:

- Функция `process_campaign_category` использует класс `AliCampaignEditor` для обработки данных о кампании.
- `AliCampaignEditor` извлекает информацию о кампании из Google Drive, обрабатывает ее и формирует список наименований товаров.
- Функция возвращает список наименований товаров в выбранной категории.

### `process_campaign`

**Назначение**: Функция обрабатывает кампанию и управляет ее настройкой и обработкой.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `language` (Optional[str]): Язык для кампании. Если не указан, то обрабатывает для всех языков.
- `currency` (Optional[str]): Валюта для кампании. Если не указана, то обрабатывает для всех валют.
- `campaign_file` (Optional[str]): Необязательный путь к файлу кампании.

**Пример**:

```python
>>> res = process_campaign("summer_sale", "EN", "USD", "campaign_file.json")
```

**Возвращает**:

- `bool`: `True` если кампания обработана, иначе `False`.

**Как работает функция**:

- Функция `process_campaign`  проверяет входные данные и формирует список локалей для обработки.
- Она перебирает каждую локаль и запускает процесс обработки кампании с помощью класса `AliCampaignEditor`.
- `AliCampaignEditor`  обрабатывает данные о кампании для выбранного языка и валюты.

### `process_all_campaigns`

**Назначение**: Функция обрабатывает все кампании в каталоге `campaigns` для заданного языка и валюты.

**Параметры**:

- `language` (Optional[str]): Язык для кампаний.
- `currency` (Optional[str]): Валюта для кампаний.

**Пример**:

```python
>>> process_all_campaigns("EN", "USD")
```

**Как работает функция**:

- Функция  `process_all_campaigns`  сначала определяет список локалей для обработки (если язык или валюта не указаны, то обрабатывает все локали).
- Она перебирает все кампании в каталоге `campaigns` и для каждой кампании запускает обработку с помощью класса `AliCampaignEditor`.
- `AliCampaignEditor`  обрабатывает данные о кампании для выбранного языка и валюты.

### `main_process`

**Назначение**:  Основная функция для обработки кампании.

**Параметры**:

- `campaign_name` (str): Название рекламной кампании.
- `categories` (List[str]): Список категорий для кампании. Если пустой, то обрабатывает кампанию без конкретных категорий.
- `language` (Optional[str]): Язык для кампании.
- `currency` (Optional[str]): Валюта для кампании.

**Пример**:

```python
>>> main_process("summer_sale", ["electronics"], "EN", "USD")
>>> main_process("summer_sale", [], "EN", "USD")
```

**Как работает функция**:

-  Функция  `main_process` определяет список локалей для обработки.
- Если указаны категории, то функция перебирает каждую категорию и запускает обработку с помощью функции  `process_campaign_category`.
- Если категории не указаны, то запускает обработку всей кампании с помощью функции  `process_campaign`.

### `main`

**Назначение**:  Основная функция для разбора аргументов и запуска обработки.

**Пример**:

```python
>>> main()
```

**Как работает функция**:

-  Функция  `main`  инициализирует парсер аргументов и обрабатывает их.
- Если указан флаг `--all`, то запускает функцию  `process_all_campaigns`.
- В противном случае запускает функцию  `main_process` с заданными аргументами.

##  Примеры

### Пример использования модуля

```python
# Обработка одной категории в рамках кампании "summer_sale" для языка EN и валюты USD
titles = process_campaign_category("summer_sale", "electronics", "EN", "USD")

# Обработка всей кампании "summer_sale" для языка EN и валюты USD
result = process_campaign("summer_sale", "EN", "USD")

# Обработка всех кампаний для языка EN и валюты USD
process_all_campaigns("EN", "USD")

# Обработка кампании "summer_sale" с категориями "electronics" и "clothing" для языка EN и валюты USD
main_process("summer_sale", ["electronics", "clothing"], "EN", "USD")
```

##  Дополнительно

- Модуль использует класс `AliCampaignEditor` для обработки данных о кампании.
-  `AliCampaignEditor`  загружает данные из Google Drive и выполняет различные операции с ними, например, формирование промо-материалов и сбор данных о продажах.
-  Модуль использует библиотеки `argparse`, `pathlib`, `typing`, `gs`, `locales`, `pprint`, `get_directory_names`, `j_loads_ns` и `logger`.

```python