# Модуль сбора товаров со страницы категорий поставщика hb.co.il через вебдрайвер

## Обзор

Модуль `hypotez/src/suppliers/suppliers_list/hb/scenario.py`  отвечает за сбор списка товаров со страниц категорий интернет-магазина hb.co.il с использованием вебдрайвера. Он предназначен для работы с поставщиком `hb`, и в нем реализованы специфические логика и шаги для этого поставщика. 

**Основные функциональные блоки:**

- **`get_list_products_in_category(d: Driver, l: 'SimpleNamespace') -> list[str, str, None]`**:  
    - Возвращает список ссылок на товары со страницы категории. 
    - Проверяет наличие пагинации на странице категории и собирает ссылки с всех страниц.
    - Возвращает список ссылок на товары или `None`, если ссылки не найдены. 
- **`paginator(d: Driver, locator: dict, list_products_in_category: list)`**: 
    - Реализует механизм пагинации для сбора ссылок на товары со всех страниц категории. 
- **`build_list_categories_from_site(s)`**:
    - Собирает актуальный список категорий с сайта. 

## Подробности

Данный модуль играет важную роль в процессе сбора информации о товарах с поставщика `hb`. Он обеспечивает:

- **Специфическую обработку категорий**: 
    - Каждая категория на сайте `hb.co.il` может иметь свою структуру,  список товаров и механизм пагинации. 
    - Модуль предоставляет функции, которые учитывают эти особенности, чтобы гарантировать правильный сбор данных. 
- **Автоматизацию процесса сбора**: 
    - Модуль использует вебдрайвер для взаимодействия с сайтом `hb.co.il`, 
    -  автоматически собирая ссылки на товары и страницы категорий.
    -  Это исключает ручную обработку и позволяет сократить время сбора данных.

## Функции

### `get_list_products_in_category` 

**Назначение**: 
- Извлекает ссылки на товары со страницы категории.
- Проверяет наличие пагинации на странице категории и собирает ссылки с всех страниц.

**Параметры**: 

- `d (Driver)`: Экземпляр вебдрайвера, используемый для взаимодействия с сайтом.
- `l ('SimpleNamespace')`: Объект, содержащий локаторы для поиска элементов на странице.

**Возвращает**:
- `list[str, str, None]`: Список ссылок на товары или `None`, если ссылки не найдены.

**Вызывает исключения**: 
- `None`

**Как работает функция**:
- Получает список ссылок на товары со страницы категории с использованием `d.execute_locator(l.product_links)`. 
- Если список ссылок пуст, выводит предупреждение в лог и возвращает `None`. 
- Проверяет наличие кнопки пагинации на странице.
- Если кнопка пагинации присутствует, выполняет пагинацию с помощью функции `paginator`.
- Возвращает список ссылок на товары, собранные с всех страниц категории.

**Примеры**:

```python
# Пример вызова функции с использованием вебдрайвера
from src.webdriver import Driver, Chrome
driver = Driver(Chrome)
# ... код инициализации драйвера ...
list_products = await get_list_products_in_category(driver, category_locators)
# ... дальнейшая обработка списка товаров ...
```

### `paginator`

**Назначение**: 
- Реализует пагинацию на странице категории.
-  Переходит на следующую страницу категории и собирает ссылки на товары.

**Параметры**: 

- `d (Driver)`: Экземпляр вебдрайвера.
- `locator (dict)`: Локаторы для поиска элементов на странице, включая локатор для кнопки пагинации. 
- `list_products_in_category (list)`: Список ссылок на товары.

**Возвращает**:
- `bool`: `True`, если перешел на следующую страницу и добавил ссылки, `False` если пагинация невозможна.

**Вызывает исключения**: 
- `None`

**Как работает функция**:
-  Использует `d.execute_locator(locator.pagination.__dict__[\'<-\'])` для нахождения элемента пагинации. 
-  Если элемент пагинации не найден или список пуст, функция возвращает `False`.
-  Иначе, переходит на следующую страницу категории, обновляет `list_products_in_category` новыми ссылками на товары и возвращает `True`.

**Примеры**:

```python
# Пример вызова функции внутри функции get_list_products_in_category
while d.current_url != d.previous_url:
    if await paginator(d, l, list_products_in_category):
        # ... код обработки списка товаров ...
    else:
        # ... выход из цикла, если пагинация невозможна ...
```

### `build_list_categories_from_site`

**Назначение**: 
- Собирает список категорий с сайта `hb.co.il`.

**Параметры**: 

- `s`: Объект поставщика `hb`.

**Возвращает**:
- `None`

**Вызывает исключения**: 
- `None`

**Как работает функция**:
- Функция реализует логику сбора категорий с сайта `hb.co.il` с использованием вебдрайвера.
-  Подробная реализация не приведена в предоставленном коде.

**Примеры**:

```python
# Пример вызова функции:
build_list_categories_from_site(hb_supplier)