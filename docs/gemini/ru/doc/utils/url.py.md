# Модуль для работы с URL (url.py)

## Обзор

Этот модуль предоставляет набор функций для работы с URL-строками, включая извлечение параметров запроса, проверку на валидность URL и сокращение ссылок.

## Подробней

Модуль `src.utils.string.url` предоставляет утилиты для обработки URL-адресов, что может быть полезно для анализа URL, проверки их корректности и упрощения их представления. В модуле реализованы функции для извлечения параметров из URL, проверки валидности URL и сокращения длинных URL-адресов с помощью сервиса TinyURL.

## Функции

### `extract_url_params`

**Назначение**: Извлекает параметры из строки URL.

```python
def extract_url_params(url: str) -> dict | None:
    """ Извлекает параметры из строки URL.

    Args:
        url (str): Строка URL для парсинга.

    Returns:
        dict | None: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.
    """
    ...
```

**Параметры**:

-   `url` (str): Строка URL для парсинга.

**Возвращает**:

-   `dict | None`: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.

**Как работает функция**:

1.  Использует `urlparse` для разбора URL-строки.
2.  Извлекает строку запроса из разобранного URL (`parsed_url.query`).
3.  Использует `parse_qs` для преобразования строки запроса в словарь, где ключи - имена параметров, а значения - списки значений параметров.
4.  Преобразует значения параметров из списков в строки, если параметр имеет только одно значение.
5.  Если словарь параметров не пуст, возвращает его. В противном случае возвращает `None`.

### `is_url`

**Назначение**: Проверяет, является ли переданный текст валидным URL.

```python
def is_url(text: str) -> bool:
    """ Проверяет, является ли переданный текст валидным URL с использованием библиотеки validators.

    Args:
        text (str): Строка для проверки.

    Returns:
        bool: `True` если строка является валидным URL, иначе `False`.
    """
    ...
```

**Параметры**:

-   `text` (str): Строка для проверки.

**Возвращает**:

-   `bool`: `True`, если строка является валидным URL, `False` в противном случае.

**Как работает функция**:

1.  Использует функцию `validators.url(text)` для проверки, является ли переданная строка валидным URL.
2.  Возвращает результат проверки.

### `url_shortener`

**Назначение**: Сокращает длинный URL с использованием сервиса TinyURL.

```python
def url_shortener(long_url: str) -> str | None:
    """ Сокращает длинный URL с использованием сервиса TinyURL.

    Args:
        long_url (str): Длинный URL для сокращения.

    Returns:
        str | None: Сокращённый URL или `None`, если произошла ошибка.
    """
    ...
```

**Параметры**:

-   `long_url` (str): Длинный URL для сокращения.

**Возвращает**:

-   `str | None`: Сокращенный URL или `None`, если произошла ошибка.

**Как работает функция**:

1.  Формирует URL для обращения к API TinyURL.
2.  Выполняет GET-запрос к API TinyURL, используя `requests.get(url)`.
3.  Если запрос успешен (код ответа 200), возвращает сокращенный URL, полученный из ответа.
4.  В случае ошибки возвращает `None`.

## Переменные модуля

В этом модуле нет явно определенных переменных, кроме констант и переменных, используемых внутри функций.

## Пример использования

```python
from src.utils.string import url

# Пример использования функций модуля
url_string = "https://www.example.com/path?param1=value1&param2=value2"

# Извлечение параметров URL
params = url.extract_url_params(url_string)
if params:
    print(f"Параметры URL: {params}")

# Проверка URL на валидность
is_valid = url.is_url(url_string)
print(f"URL валиден: {is_valid}")

# Сокращение URL
short_url = url.url_shortener(url_string)
if short_url:
    print(f"Сокращенный URL: {short_url}")
```

## Взаимосвязь с другими частями проекта

Этот модуль может использоваться другими модулями проекта `hypotez` для обработки URL-адресов, например, для валидации ссылок, извлечения параметров для анализа или сокращения ссылок для удобства.