# Модуль для работы с датой и временем (date_time.py)

## Обзор

Этот модуль предоставляет функции для проверки, находится ли текущее время в заданном интервале, с возможностью использования таймаута. Он также содержит функциональность для ожидания ввода от пользователя с таймаутом.

## Подробней

Модуль предназначен для решения задач, связанных с проверкой текущего времени и ожиданием пользовательского ввода в течение определенного времени. Это может быть полезно для выполнения задач, которые должны выполняться только в определенное время суток, или для предотвращения зависания программы при ожидании ввода от пользователя.

## Классы

### `TimeoutCheck`

**Описание**: Класс для проверки времени и ожидания ввода с таймаутом.

**Атрибуты**:

-   `result` (bool | None): Результат проверки интервала времени. Изначально `None`.
-   `user_input` (str | None): Ввод пользователя. Изначально `None`.

**Методы**:

-   `interval(self, start: time = time(23, 0), end: time = time(6, 0)) -> bool`: Проверяет, находится ли текущее время в указанном интервале.
-   `interval_with_timeout(self, timeout: int = 5, start: time = time(23, 0), end: time = time(6, 0)) -> bool`: Проверяет, находится ли текущее время в указанном интервале с использованием таймаута.
-   `get_input(self)`: Запрашивает ввод от пользователя.
-   `input_with_timeout(self, timeout: int = 5) -> str | None`: Ожидает ввод от пользователя с таймаутом.

#### `__init__`

**Назначение**: Инициализирует объект `TimeoutCheck`.

**Как работает функция**:
*   Устанавливает атрибуты `result` и `user_input` в значение `None`.

#### `interval`

**Назначение**: Проверяет, находится ли текущее время в указанном интервале.

```python
def interval(self, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
    """ Check if the current time is within the specified interval.
    
    Args:
        start (time): Start of the interval (default is 23:00).
        end (time): End of the interval (default is 06:00).

    Returns:
        bool: True if the current time is within the interval, False otherwise.
    """
    ...
```

**Параметры**:

-   `start` (time): Время начала интервала. По умолчанию 23:00.
-   `end` (time): Время окончания интервала. По умолчанию 06:00.

**Возвращает**:

-   `bool`: `True`, если текущее время находится в интервале, `False` - в противном случае.

**Как работает функция**:

1.  Получает текущее время.
2.  Проверяет, находится ли текущее время в интервале, учитывая возможность пересечения полуночи.
3.  Сохраняет результат проверки в атрибуте `self.result`.

#### `interval_with_timeout`

**Назначение**: Проверяет, находится ли текущее время в указанном интервале с использованием таймаута.

```python
def interval_with_timeout(self, timeout: int = 5, start: time = time(23, 0), end: time = time(6, 0)) -> bool:
    """ Check if the current time is within the specified interval with a timeout.

    Args:
        timeout (int): Time in seconds to wait for the interval check.
        start (time): Start of the interval (default is 23:00).
        end (time): End of the interval (default is 06:00).

    Returns:
        bool: True if the current time is within the interval and response within timeout, False if not or timeout occurs.
    """
    ...
```

**Параметры**:

-   `timeout` (int): Время ожидания проверки интервала в секундах. По умолчанию 5.
-   `start` (time): Время начала интервала. По умолчанию 23:00.
-   `end` (time): Время окончания интервала. По умолчанию 06:00.

**Возвращает**:

-   `bool`: `True`, если текущее время находится в интервале и проверка завершилась до истечения таймаута, `False` - в противном случае.

**Как работает функция**:

1.  Создает новый поток, который выполняет проверку интервала с использованием функции `self.interval`.
2.  Запускает поток и ожидает его завершения в течение заданного времени (`timeout`).
3.  Если поток завершился до истечения таймаута, возвращает сохраненный в `self.result` результат проверки.
4.  Если время вышло, функция принудительно останавливает поток и возвращает `False`

#### `get_input`

**Назначение**: Запрашивает ввод от пользователя.

```python
def get_input(self):
    """ Запрашиваем ввод от пользователя."""
    ...
```

**Как работает функция**:

1.  Запрашивает ввод от пользователя и сохраняет его в атрибуте `self.user_input`.

#### `input_with_timeout`

**Назначение**: Ожидает ввод от пользователя с таймаутом.

```python
def input_with_timeout(self, timeout: int = 5) -> str | None:
    """ Ожидаем ввод с тайм-аутом.

    Args:
        timeout (int): Время ожидания ввода в секундах.

    Returns:
        str | None: Введенные данные или None, если был тайм-аут.
    """
    ...
```

**Параметры**:

-   `timeout` (int): Время ожидания ввода в секундах. По умолчанию 5.

**Возвращает**:

-   `str | None`: Введенные данные или `None`, если произошел таймаут.

**Как работает функция**:

1.  Создает новый поток для выполнения функции `self.get_input`, которая запрашивает ввод от пользователя.
2.  Запускает поток и ожидает его завершения в течение заданного времени (`timeout`).
3.  Если поток завершился до истечения таймаута, возвращает введенные пользователем данные, сохраненные в `self.user_input`.
4.  Если время вышло, функция возвращает `None`.

## Переменные модуля

Отсутствуют.

## Пример использования

```python
from src.utils.date_time import TimeoutCheck
from datetime import time

timeout_check = TimeoutCheck()

# Проверка интервала с таймаутом
if timeout_check.interval_with_timeout(timeout=5, start=time(23, 0), end=time(6, 0)):
    print("Текущее время находится в интервале.")
else:
    print("Текущее время находится вне интервала или произошел таймаут.")

# Ожидание ввода с таймаутом
user_input = timeout_check.input_with_timeout(timeout=10)
if user_input:
    print(f"Вы ввели: {user_input}")
else:
    print("Таймаут ввода.")
```

## Взаимосвязь с другими частями проекта

Этот модуль не имеет явных зависимостей от других модулей проекта `hypotez`. Однако, он может использоваться в любом модуле, где требуется проверка текущего времени или ожидание пользовательского ввода с таймаутом.