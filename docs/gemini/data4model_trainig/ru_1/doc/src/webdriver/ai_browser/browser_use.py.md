# Модуль для работы с токсичными комментаторами на Хабре

## Обзор

Модуль предназначен для автоматического поиска статей на сайте Habr.com по указанному автору, открытия их и генерации токсичных комментариев с использованием языковой модели OpenAI. Основная цель - демонстрация возможностей автоматизации с использованием `langchain_openai` и `browser_use`.

## Подробнее

Модуль содержит асинхронные функции для поиска статей конкретного автора на Хабре, открытия этих статей и генерации токсичных комментариев на русском языке с использованием языковой модели OpenAI. Он использует класс `Agent` из модуля `browser_use` для выполнения задач в браузере и `ChatOpenAI` из `langchain_openai` для генерации текста.

## Классы

### `Driver`

**Описание**: Класс использует `browser_use` и `langchain_openai` для поиска и получения данных с веб-страниц. На данный момент класс не имеет реализации и служит скорее как заготовка.

**Наследует**:
Нет наследования.

**Атрибуты**:
Отсутствуют.

**Методы**:
Отсутствуют.

## Функции

### `habra_toxic_commenter`

```python
async def habra_toxic_commenter(author_username: str, model_name: str = "gpt-4o"):
    """
    Ищет статью на Хабре по указанному автору, открывает её и генерирует токсичный комментарий.

    Args:
        author_username: Имя пользователя на Хабре.
        model_name: Название языковой модели OpenAI для использования.  По умолчанию gpt-4o.

    Returns:
        Строку с результатом работы агента, содержащую название статьи и сгенерированный комментарий.
        Возвращает None, если произошла ошибка.
    """
```

**Назначение**:
Функция ищет статью на Хабре по указанному автору, открывает её и генерирует токсичный комментарий на русском языке, используя указанную языковую модель OpenAI.

**Параметры**:
- `author_username` (str): Имя пользователя на Хабре, статьи которого нужно найти.
- `model_name` (str): Название языковой модели OpenAI для использования. По умолчанию `"gpt-4o"`.

**Возвращает**:
- `str | None`: Строку с результатом работы агента, содержащую название статьи и сгенерированный комментарий. Возвращает `None`, если произошла ошибка.

**Вызывает исключения**:
- `Exception`: Если происходит какая-либо ошибка в процессе выполнения (например, ошибка сети, ошибка при работе с OpenAI).

**Как работает функция**:
1. Инициализирует языковую модель `ChatOpenAI` с указанным именем модели.
2. Формирует задачу для агента, указывая необходимость найти статью указанного автора на Хабре, открыть её и сгенерировать токсичный комментарий на русском языке, а затем опубликовать этот комментарий к статье.
3. Создает экземпляр класса `Agent` с переданной задачей и языковой моделью.
4. Запускает агента для выполнения задачи.
5. Возвращает результат работы агента. В случае возникновения ошибки логирует её и возвращает `None`.

**Примеры**:
```python
import asyncio
from src.webdriver.ai_browser.browser_use import habra_toxic_commenter
async def main():
    author = "ElKornacio"
    result = await habra_toxic_commenter(author_username=author)
    if result:
        print("Результат работы агента:")
        print(result)
    else:
        print("Не удалось получить результат.")

if __name__ == "__main__":
    asyncio.run(main())
```

### `main`

```python
async def main():
    """
    Пример использования функции habra_toxic_commenter.
    """
```

**Назначение**:
Функция является точкой входа для демонстрации работы функции `habra_toxic_commenter`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Как работает функция**:
1. Устанавливает имя пользователя Хабра, статьи которого нужно найти (`author = "ElKornacio"`).
2. Вызывает функцию `habra_toxic_commenter` с указанным именем пользователя.
3. Проверяет, был ли получен результат от функции `habra_toxic_commenter`.
4. Если результат получен, выводит его на экран. В противном случае выводит сообщение о неудаче.

**Примеры**:
```python
import asyncio
from src.webdriver.ai_browser.browser_use import main

if __name__ == "__main__":
    asyncio.run(main())