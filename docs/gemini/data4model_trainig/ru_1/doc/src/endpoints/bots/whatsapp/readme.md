# Документация для разработчика: Автоматизированная отправка сообщений WhatsApp

## Обзор

Этот документ содержит руководство по созданию скрипта на Python для автоматической отправки сообщений WhatsApp. Руководство описывает необходимые компоненты, процесс разработки, возможные проблемы и решения, а также пример кода.

## Подробнее

Руководство предназначено для разработчиков, желающих автоматизировать процесс отправки сообщений WhatsApp. Оно содержит подробные инструкции по установке необходимых библиотек, созданию функций для отправки сообщений, формированию банка сообщений и обработке пользовательского ввода. Также рассматриваются возможные проблемы, возникающие при работе с веб-версией WhatsApp, и предлагаются решения для их устранения.

## Содержание

1.  [Введение](#введение)
2.  [Необходимые компоненты](#необходимые-компоненты)
3.  [Процесс разработки](#процесс-разработки)
    *   [Функция отправки сообщений](#функция-отправки-сообщений-send_whatsapp_message)
    *   [Банк сообщений](#банк-сообщений)
    *   [Пользовательский ввод](#пользовательский-ввод)
    *   [Основной цикл отправки](#основной-цикл-отправки)
4.  [Возможные проблемы и решения](#возможные-проблемы-и-решения)
5.  [Код (пример)](#код-пример)
6.  [Выполнение скрипта](#выполнение-скрипта)

## 1. Введение

### 1.1. Назначение

Документ описывает процесс разработки автоматизированного скрипта на Python, предназначенного для отправки случайных сообщений WhatsApp в течение определенного периода времени.

### 1.2. Целевая аудитория

Руководство предназначено для разработчиков, имеющих базовые знания языка Python и понимание работы с командной строкой.

### 1.3. Предпосылки

Перед использованием данного руководства необходимо наличие установленного Python 3.6+ и менеджера пакетов pip.

## 2. Необходимые компоненты

### 2.1. Библиотеки Python

*   `pywhatkit`: Для взаимодействия с веб-версией WhatsApp и отправки сообщений.
*   `pyautogui`: Для автоматизации действий мыши и клавиатуры.
*   `pynput`: Для контроля клавиатурного ввода.
*   `emoji`: Для добавления эмодзи в сообщения.
*   `random`: Для генерации случайных сообщений и времени.
*   `time`: Для управления задержками и временем выполнения.

### 2.2. Зависимости

Установка указанных библиотек выполняется посредством pip:

```bash
pip install pywhatkit pyautogui pynput emoji
```

### 2.3. Требования к системе

Операционная система с установленным веб-браузером (например, Chrome или Firefox) и возможностью подключения к WhatsApp Web.

## 3. Процесс разработки

### 3.1. Функция отправки сообщений (`send_whatsapp_message`)

**Назначение**: Функция отвечает за отправку сообщений WhatsApp с использованием библиотеки `pywhatkit`.

**Параметры**:

*   `phone_number` (str): Номер телефона получателя (с кодом страны).
*   `message` (str): Текст сообщения.
*   `hour` (int): Час отправки сообщения (0-23).
*   `minutes` (int): Минуты отправки сообщения (0-59).

**Как работает функция**:

1.  Использует `pywhatkit.sendwhatmsg` для инициализации отправки сообщения.
2.  Применяет `time.sleep` для задержки загрузки веб-версии WhatsApp.
3.  Использует `pyautogui` и `pynput` для имитации нажатия клавиши "Enter" для отправки сообщения.
4.  Обрабатывает исключения с помощью блока `try...except` для вывода ошибок.

### 3.2. Банк сообщений

**Назначение**: Создание списка строк (`messages`) для хранения сообщений.

**Как работает**:

1.  Использование `emoji.emojize` для добавления эмодзи.
2.  Применение `random.choice` для случайного выбора сообщения.

### 3.3. Пользовательский ввод

**Назначение**: Получение данных от пользователя для настройки отправки сообщений.

**Как работает**:

1.  Получение количества сообщений (`num_messages`) с помощью функции `input`.
2.  Получение начального часа (`start_hour`) и конечного часа (`end_hour`) диапазона отправки с помощью `input`.

### 3.4. Основной цикл отправки

**Назначение**: Организация цикла отправки сообщений в заданном диапазоне времени.

**Как работает**:

1.  Цикл `while` выполняется, пока счетчик сообщений (`message_count`) не достигнет заданного количества (`num_messages`).
2.  Генерация случайного часа и минут с помощью `random.randint`.
3.  Вызов функции `send_whatsapp_message` с полученными данными.
4.  Увеличение счетчика сообщений.

## 4. Возможные проблемы и решения

*   **4.1. Проблемы с `pywhatkit`:** В случае неудачной автоматической отправки сообщения, использовать `pyautogui` и `pynput` для эмуляции нажатия клавиш и отправки сообщения.
*   **4.2. Подключение к WhatsApp Web:** При первом использовании необходимо подключение к веб-версии WhatsApp через веб-браузер.
*   **4.3. Динамическая задержка:** Скорость загрузки веб-версии WhatsApp может меняться, поэтому для стабильности увеличьте время задержки.
*   **4.4. Зависимость от браузера и версии WhatsApp:** Изменения в браузере или веб-версии WhatsApp могут потребовать корректировки скрипта.

## 5. Код (пример)

```python
# ... (Код ) ...
```

## 6. Выполнение скрипта

*   Сохраните скрипт в файл с расширением `.py`.
*   Выполните скрипт в терминале с помощью команды: `python имя_файла.py`
*   Следуйте инструкциям на экране для ввода необходимых данных.