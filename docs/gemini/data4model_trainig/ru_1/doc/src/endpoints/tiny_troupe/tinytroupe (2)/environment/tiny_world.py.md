# Модуль `tiny_world.py`

## Обзор

Модуль содержит класс `TinyWorld`, который представляет собой базовый класс для моделирования окружения, в котором действуют агенты. Он предоставляет методы для управления агентами, временем, взаимодействиями между агентами и событиями в окружении.

## Подробнее

Класс `TinyWorld` является основой для создания симуляций, в которых агенты (представленные классом `TinyPerson`) взаимодействуют друг с другом и с окружением. Он предоставляет механизмы для добавления и удаления агентов, управления ходом времени, обработки действий агентов и трансляции сообщений.

## Классы

### `TinyWorld`

**Описание**: Базовый класс для моделирования окружения.

**Атрибуты**:
- `all_environments` (dict): Словарь, содержащий все созданные окружения (`name -> environment`).
- `communication_display` (bool): Флаг, определяющий, отображать ли коммуникации в окружении.
- `name` (str): Имя окружения.
- `current_datetime` (datetime): Текущее время в окружении.
- `broadcast_if_no_target` (bool): Флаг, определяющий, транслировать ли действия, если цель не найдена.
- `simulation_id` (Any): Идентификатор симуляции, к которой принадлежит окружение.
- `agents` (list): Список агентов в окружении.
- `name_to_agent` (dict): Словарь, сопоставляющий имена агентов с их экземплярами (`{agent_name: agent, agent_name_2: agent_2, ...}`).
- `_interventions` (list): Список интервенций, применяемых в окружении на каждом шаге симуляции.
- `_displayed_communications_buffer` (list): Буфер отображаемых коммуникаций.
- `_target_display_communications_buffer` (list): Временный буфер целей коммуникаций для упрощения рендеринга.
- `_max_additional_targets_to_display` (int): Максимальное количество дополнительных целей для отображения в коммуникации.
- `console` (Console): Объект консоли для вывода информации.

**Методы**:

- `__init__(self, name: str="A TinyWorld", agents=[], initial_datetime=datetime.now(), interventions=[], broadcast_if_no_target=True, max_additional_targets_to_display=3)`:
    - **Описание**: Инициализирует окружение.
    - **Параметры**:
        - `name` (str, optional): Имя окружения. По умолчанию `"A TinyWorld"`.
        - `agents` (list, optional): Список агентов для добавления в окружение. По умолчанию `[]`.
        - `initial_datetime` (datetime, optional): Начальное время окружения. По умолчанию текущее время.
        - `interventions` (list, optional): Список интервенций для применения. По умолчанию `[]`.
        - `broadcast_if_no_target` (bool, optional): Флаг трансляции действий без цели. По умолчанию `True`.
        - `max_additional_targets_to_display` (int, optional): Максимальное количество отображаемых целей. По умолчанию `3`.
    - **Как работает функция**:
        - Инициализирует атрибуты окружения, добавляет агентов и интервенции.
        - Добавляет окружение в список всех окружений (`TinyWorld.all_environments`).
- `_step(self, timedelta_per_step=None)`:
    - **Описание**: Выполняет один шаг в окружении, заставляя всех агентов действовать и обрабатывая их действия.
    - **Параметры**:
        - `timedelta_per_step` (timedelta, optional): Временной интервал для шага. По умолчанию `None`.
    - **Возвращает**:
        - `dict`: Словарь действий, выполненных агентами на данном шаге.
    - **Как работает функция**:
        - Сначала продвигает время в окружении на заданный интервал `timedelta_per_step`, если он указан.
        - Затем применяет все интервенции, проверяя их предусловия и применяя эффекты.
        - Далее, каждый агент в окружении выполняет свои действия (`agent.act()`), и эти действия обрабатываются методом `_handle_actions`.
        - Возвращает словарь, где ключи - имена агентов, а значения - списки их действий.
- `_advance_datetime(self, timedelta)`:
    - **Описание**: Устанавливает текущее время окружения на указанный `timedelta`.
    - **Параметры**:
        - `timedelta` (timedelta):  Временной интервал.
    - **Как работает функция**:
        - Увеличивает `current_datetime` на заданный `timedelta`, если он не `None`. В противном случае записывает сообщение в лог, что время не было увеличено.
- `run(self, steps: int, timedelta_per_step=None, return_actions=False)`:
    - **Описание**: Запускает симуляцию на заданное количество шагов.
    - **Параметры**:
        - `steps` (int): Количество шагов для запуска симуляции.
        - `timedelta_per_step` (timedelta, optional): Временной интервал между шагами. По умолчанию `None`.
        - `return_actions` (bool, optional): Флаг, определяющий, возвращать ли действия агентов. По умолчанию `False`.
    - **Возвращает**:
        - `list`: Список действий агентов за каждый шаг, если `return_actions` установлен в `True`.
    - **Как работает функция**:
        - Итерируется по заданному количеству шагов (`steps`).
        - На каждом шаге вызывает `_step` для выполнения действий агентов и применения интервенций.
        - Если `return_actions` равен `True`, собирает действия агентов в список `agents_actions_over_time` и возвращает его.
- `skip(self, steps: int, timedelta_per_step=None)`:
    - **Описание**: Пропускает заданное количество шагов в симуляции, не выполняя никаких действий.
    - **Параметры**:
        - `steps` (int): Количество шагов для пропуска.
        - `timedelta_per_step` (timedelta, optional): Временной интервал между шагами. По умолчанию `None`.
    - **Как работает функция**:
        - Просто продвигает время в окружении на `steps * timedelta_per_step` без выполнения каких-либо действий агентов или интервенций.
- `run_minutes(self, minutes: int)`:
    - **Описание**: Запускает окружение на заданное количество минут.
    - **Параметры**:
        - `minutes` (int): Количество минут для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=minutes` и `timedelta_per_step=timedelta(minutes=1)`.
- `skip_minutes(self, minutes: int)`:
    - **Описание**: Пропускает заданное количество минут в окружении.
    - **Параметры**:
        - `minutes` (int): Количество минут для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=minutes` и `timedelta_per_step=timedelta(minutes=1)`.
- `run_hours(self, hours: int)`:
    - **Описание**: Запускает окружение на заданное количество часов.
    - **Параметры**:
        - `hours` (int): Количество часов для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=hours` и `timedelta_per_step=timedelta(hours=1)`.
- `skip_hours(self, hours: int)`:
    - **Описание**: Пропускает заданное количество часов в окружении.
    - **Параметры**:
        - `hours` (int): Количество часов для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=hours` и `timedelta_per_step=timedelta(hours=1)`.
- `run_days(self, days: int)`:
    - **Описание**: Запускает окружение на заданное количество дней.
    - **Параметры**:
        - `days` (int): Количество дней для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=days` и `timedelta_per_step=timedelta(days=1)`.
- `skip_days(self, days: int)`:
    - **Описание**: Пропускает заданное количество дней в окружении.
    - **Параметры**:
        - `days` (int): Количество дней для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=days` и `timedelta_per_step=timedelta(days=1)`.
- `run_weeks(self, weeks: int)`:
    - **Описание**: Запускает окружение на заданное количество недель.
    - **Параметры**:
        - `weeks` (int): Количество недель для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=weeks` и `timedelta_per_step=timedelta(weeks=1)`.
- `skip_weeks(self, weeks: int)`:
    - **Описание**: Пропускает заданное количество недель в окружении.
    - **Параметры**:
        - `weeks` (int): Количество недель для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=weeks` и `timedelta_per_step=timedelta(weeks=1)`.
- `run_months(self, months: int)`:
    - **Описание**: Запускает окружение на заданное количество месяцев.
    - **Параметры**:
        - `months` (int): Количество месяцев для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=months` и `timedelta_per_step=timedelta(weeks=4)`.
- `skip_months(self, months: int)`:
    - **Описание**: Пропускает заданное количество месяцев в окружении.
    - **Параметры**:
        - `months` (int): Количество месяцев для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=months` и `timedelta_per_step=timedelta(weeks=4)`.
- `run_years(self, years: int)`:
    - **Описание**: Запускает окружение на заданное количество лет.
    - **Параметры**:
        - `years` (int): Количество лет для запуска.
    - **Как работает функция**:
        - Вызывает метод `run` с параметрами `steps=years` и `timedelta_per_step=timedelta(days=365)`.
- `skip_years(self, years: int)`:
    - **Описание**: Пропускает заданное количество лет в окружении.
    - **Параметры**:
        - `years` (int): Количество лет для пропуска.
    - **Как работает функция**:
        - Вызывает метод `skip` с параметрами `steps=years` и `timedelta_per_step=timedelta(days=365)`.
- `add_agents(self, agents: list)`:
    - **Описание**: Добавляет список агентов в окружение.
    - **Параметры**:
        - `agents` (list): Список агентов для добавления.
    - **Возвращает**:
        - `self`: Возвращает сам объект окружения для возможности chaining.
    - **Как работает функция**:
        - Итерируется по списку агентов и добавляет каждого агента с помощью метода `add_agent`.
- `add_agent(self, agent: TinyPerson)`:
    - **Описание**: Добавляет агента в окружение.
    - **Параметры**:
        - `agent` (TinyPerson): Агент для добавления.
    - **Raises**:
        - `ValueError`: Если имя агента не уникально в окружении.
    - **Возвращает**:
        - `self`: Возвращает сам объект окружения для возможности chaining.
    - **Как работает функция**:
        - Проверяет, что агента еще нет в списке агентов окружения.
        - Проверяет уникальность имени агента в окружении. Если имя уже существует, выбрасывает исключение `ValueError`.
        - Устанавливает окружение агента (`agent.environment = self`).
        - Добавляет агента в список агентов окружения (`self.agents`) и в словарь `self.name_to_agent`.
- `remove_agent(self, agent: TinyPerson)`:
    - **Описание**: Удаляет агента из окружения.
    - **Параметры**:
        - `agent` (TinyPerson): Агент для удаления.
    - **Возвращает**:
        - `self`: Возвращает сам объект окружения для возможности chaining.
    - **Как работает функция**:
        - Удаляет агента из списка `self.agents` и из словаря `self.name_to_agent`.
- `remove_all_agents(self)`:
    - **Описание**: Удаляет всех агентов из окружения.
    - **Возвращает**:
        - `self`: Возвращает сам объект окружения для возможности chaining.
    - **Как работает функция**:
        - Очищает списки `self.agents` и `self.name_to_agent`.
- `get_agent_by_name(self, name: str) -> TinyPerson`:
    - **Описание**: Возвращает агента по имени.
    - **Параметры**:
        - `name` (str): Имя агента.
    - **Возвращает**:
        - `TinyPerson`: Агент с указанным именем или `None`, если агент не найден.
    - **Как работает функция**:
        - Ищет агента в словаре `self.name_to_agent` по имени и возвращает его. Если агент не найден, возвращает `None`.
- `add_intervention(self, intervention)`:
    - **Описание**: Добавляет интервенцию в окружение.
    - **Параметры**:
        - `intervention`: Интервенция для добавления.
    - **Как работает функция**:
        - Добавляет интервенцию в список `self._interventions`.
- `_handle_actions(self, source: TinyPerson, actions: list)`:
    - **Описание**: Обрабатывает действия, инициированные агентами.
    - **Параметры**:
        - `source` (TinyPerson): Агент, инициировавший действия.
        - `actions` (list): Список действий в формате JSON.
    - **Как работает функция**:
        - Итерируется по списку действий.
        - Определяет тип действия (`action_type`) и извлекает содержимое (`content`) и цель (`target`) действия.
        - Вызывает соответствующие обработчики действий (`_handle_reach_out`, `_handle_talk`) в зависимости от типа действия.
- `_handle_reach_out(self, source_agent: TinyPerson, content: str, target: str)`:
    - **Описание**: Обрабатывает действие `REACH_OUT`.
    - **Параметры**:
        - `source_agent` (TinyPerson): Агент, инициировавший действие.
        - `content` (str): Содержимое сообщения.
        - `target` (str): Цель сообщения.
    - **Как работает функция**:
        - Получает целевого агента по имени.
        - Если целевой агент найден, делает агентов доступными друг для друга и вызывает метод `socialize` для обоих агентов.
- `_handle_talk(self, source_agent: TinyPerson, content: str, target: str)`:
    - **Описание**: Обрабатывает действие `TALK`.
    - **Параметры**:
        - `source_agent` (TinyPerson): Агент, инициировавший действие.
        - `content` (str): Содержимое сообщения.
        - `target` (str, optional): Цель сообщения.
    - **Как работает функция**:
        - Получает целевого агента по имени.
        - Если целевой агент найден, вызывает метод `listen` для целевого агента.
        - Если целевой агент не найден и `self.broadcast_if_no_target` равен `True`, вызывает метод `broadcast` для трансляции сообщения всем агентам.
- `broadcast(self, speech: str, source: AgentOrWorld=None)`:
    - **Описание**: Транслирует сообщение всем агентам в окружении.
    - **Параметры**:
        - `speech` (str): Содержимое сообщения.
        - `source` (AgentOrWorld, optional): Агент или окружение, инициировавшее сообщение. По умолчанию `None`.
    - **Как работает функция**:
        - Итерируется по списку агентов и вызывает метод `listen` для каждого агента, кроме источника сообщения.
- `broadcast_thought(self, thought: str, source: AgentOrWorld=None)`:
    - **Описание**: Транслирует мысль всем агентам в окружении.
    - **Параметры**:
        - `thought` (str): Содержимое мысли.
        - `source` (AgentOrWorld, optional): Агент или окружение, инициировавшее мысль. По умолчанию `None`.
    - **Как работает функция**:
        - Итерируется по списку агентов и вызывает метод `think` для каждого агента.
- `broadcast_internal_goal(self, internal_goal: str)`:
    - **Описание**: Транслирует внутреннюю цель всем агентам в окружении.
    - **Параметры**:
        - `internal_goal` (str): Содержимое внутренней цели.
    - **Как работает функция**:
        - Итерируется по списку агентов и вызывает метод `internalize_goal` для каждого агента.
- `broadcast_context_change(self, context:list)`:
    - **Описание**: Транслирует изменение контекста всем агентам в окружении.
    - **Параметры**:
        - `context` (list): Содержимое изменения контекста.
    - **Как работает функция**:
        - Итерируется по списку агентов и вызывает метод `change_context` для каждого агента.
- `make_everyone_accessible(self)`:
    - **Описание**: Делает всех агентов в окружении доступными друг для друга.
    - **Как работает функция**:
        - Итерируется по всем парам агентов и вызывает метод `make_agent_accessible` для каждого агента, чтобы сделать его доступным для другого агента.
- `_display_step_communication(self, cur_step, total_steps, timedelta_per_step=None)`:
    - **Описание**: Отображает текущий шаг симуляции и сохраняет его в буфере.
    - **Параметры**:
        - `cur_step` (int): Текущий шаг симуляции.
        - `total_steps` (int): Общее количество шагов симуляции.
        - `timedelta_per_step` (timedelta, optional): Временной интервал между шагами. По умолчанию `None`.
    - **Как работает функция**:
        - Форматирует сообщение о текущем шаге с использованием метода `_pretty_step`.
        - Вызывает метод `_push_and_display_latest_communication` для добавления сообщения в буфер и отображения.
- `_display_intervention_communication(self, intervention)`:
    - **Описание**: Отображает коммуникацию об интервенции и сохраняет ее в буфере.
    - **Параметры**:
        - `intervention`: Объект интервенции.
    - **Как работает функция**:
        - Форматирует сообщение об интервенции с использованием метода `_pretty_intervention`.
        - Вызывает метод `_push_and_display_latest_communication` для добавления сообщения в буфер и отображения.
- `_push_and_display_latest_communication(self, communication)`:
    - **Описание**: Добавляет последнюю коммуникацию в буфер и отображает ее.
    - **Параметры**:
        - `communication` (dict): Словарь с информацией о коммуникации.
    - **Как работает функция**:
        - Проверяет, повторяется ли текущая коммуникация с предыдущей, чтобы упростить отображение.
        - Добавляет коммуникацию в буфер `self._displayed_communications_buffer`.
        - Вызывает метод `_display` для отображения коммуникации.
- `pop_and_display_latest_communications(self)`:
    - **Описание**: Извлекает последние коммуникации из буфера и отображает их.
    - **Возвращает**:
        - `list`: Список коммуникаций.
    - **Как работает функция**:
        - Извлекает все коммуникации из буфера `self._displayed_communications_buffer`.
        - Очищает буфер.
        - Вызывает метод `_display` для каждой коммуникации.
- `_display(self, communication:dict)`:
    - **Описание**: Отображает коммуникацию.
    - **Параметры**:
        - `communication` (dict): Словарь с информацией о коммуникации.
    - **Как работает функция**:
        - Извлекает содержимое (`content`) и тип (`kind`) коммуникации.
        - Если содержимое не `None`, отображает его с использованием `self.console.rule` для шагов и `self.console.print` для остальных типов.
- `clear_communications_buffer(self)`:
    - **Описание**: Очищает буфер коммуникаций.
    - **Как работает функция**:
        - Очищает список `self._displayed_communications_buffer`.
- `__repr__(self)`:
    - **Описание**: Возвращает строковое представление объекта `TinyWorld`.
    - **Возвращает**:
        - `str`: Строковое представление объекта.
    - **Как работает функция**:
        - Возвращает строку в формате "TinyWorld(name='имя_окружения')".
- `_pretty_step(self, cur_step, total_steps, timedelta_per_step=None)`:
    - **Описание**: Форматирует сообщение о шаге симуляции.
    - **Параметры**:
        - `cur_step` (int): Текущий шаг.
        - `total_steps` (int): Общее количество шагов.
        - `timedelta_per_step` (timedelta, optional): Временной интервал между шагами. По умолчанию `None`.
    - **Возвращает**:
        - `str`: Отформатированное сообщение о шаге.
    - **Как работает функция**:
        - Форматирует строку с именем окружения, текущим шагом и общим количеством шагов.
        - Добавляет информацию о времени, если указан `timedelta_per_step`.
- `_pretty_intervention(self, intervention)`:
    - **Описание**: Форматирует сообщение об интервенции.
    - **Параметры**:
        - `intervention`: Объект интервенции.
    - **Возвращает**:
        - `str`: Отформатированное сообщение об интервенции.
    - **Как работает функция**:
        - Форматирует строку с именем интервенции и обоснованием предусловия.
- `pp_current_interactions(self, simplified=True, skip_system=True)`:
    - **Описание**: Выводит текущие сообщения агентов в этом окружении.
    - **Параметры**:
        - `simplified` (bool, optional): Упрощенный вывод. По умолчанию `True`.
        - `skip_system` (bool, optional): Пропускать системные сообщения. По умолчанию `True`.
    - **Как работает функция**:
        - Вызывает метод `pretty_current_interactions` и выводит результат в консоль.
- `pretty_current_interactions(self, simplified=True, skip_system=True, max_content_length=default["max_content_display_length"], first_n=None, last_n=None, include_omission_info:bool=True)`:
    - **Описание**: Возвращает строку с текущими сообщениями агентов в этом окружении.
    - **Параметры**:
        - `simplified` (bool, optional): Упрощенный вывод. По умолчанию `True`.
        - `skip_system` (bool, optional): Пропускать системные сообщения. По умолчанию `True`.
        - `max_content_length` (int, optional): Максимальная длина содержимого сообщения. По умолчанию значение из `default["max_content_display_length"]`.
        - `first_n` (int, optional): Первые N сообщений. По умолчанию `None`.
        - `last_n` (int, optional): Последние N сообщений. По умолчанию `None`.
        - `include_omission_info` (bool, optional): Включать информацию о пропущенных сообщениях. По умолчанию `True`.
    - **Возвращает**:
        - `str`: Отформатированная строка с сообщениями агентов.
    - **Как работает функция**:
        - Формирует строку с историей сообщений каждого агента, используя метод `pretty_current_interactions` класса `TinyPerson`.
- `encode_complete_state(self) -> dict`:
    - **Описание**: Кодирует полное состояние окружения в словарь.
    - **Возвращает**:
        - `dict`: Словарь, содержащий полное состояние окружения.
    -  **Как работает функция**:
       - Создает копию словаря `__dict__` объекта окружения.
       - Удаляет из копии ключи `console`, `agents`, `name_to_agent`, `current_datetime` и `_interventions`.
       - Создает глубокую копию полученного словаря.
       - Кодирует состояние каждого агента, вызывая метод `encode_complete_state` для каждого агента.
       - Кодирует текущую дату и время в формат ISO.
       - Возвращает словарь с закодированным состоянием окружения.
- `decode_complete_state(self, state:dict)`:
    - **Описание**: Декодирует полное состояние окружения из словаря.
    - **Параметры**:
        - `state` (dict): Словарь, содержащий закодированное состояние окружения.
    - **Возвращает**:
        - `Self`: Окружение, декодированное из словаря.
    - **Как работает функция**:
        - Создает глубокую копию словаря `state`.
        - Удаляет всех агентов из окружения, вызывая метод `remove_all_agents`.
        - Восстанавливает состояние каждого агента, вызывая метод `decode_complete_state` для каждого агента и добавляя его в окружение.
        - Восстанавливает текущую дату и время из формата ISO.
        - Обновляет словарь `__dict__` объекта окружения значениями из словаря `state`.
        - Возвращает объект окружения.

**Статические методы**:

- `add_environment(environment)`:
    - **Описание**: Добавляет окружение в список всех окружений.
    - **Параметры**:
        - `environment`: Окружение для добавления.
    - **Raises**:
        - `ValueError`: Если имя окружения не уникально.
    -  **Как работает функция**:
       - Проверяет, существует ли уже окружение с таким же именем в словаре `TinyWorld.all_environments`. Если да, выбрасывает исключение `ValueError`.
       - Если имя уникально, добавляет окружение в словарь `TinyWorld.all_environments`.
- `set_simulation_for_free_environments(simulation)`:
    - **Описание**: Устанавливает симуляцию для свободных окружений.
    - **Параметры**:
        - `simulation`: Симуляция для установки.
    - **Как работает функция**:
        - Итерируется по всем окружениям в списке `TinyWorld.all_environments`.
        - Если `simulation_id` окружения равен `None`, добавляет окружение в симуляцию.
- `get_environment_by_name(name: str)`:
    - **Описание**: Возвращает окружение по имени.
    - **Параметры**:
        - `name` (str): Имя окружения.
    - **Возвращает**:
        - `TinyWorld`: Окружение с указанным именем или `None`, если окружение не найдено.
    - **Как работает функция**:
        - Ищет окружение в словаре `TinyWorld.all_environments` по имени и возвращает его. Если окружение не найдено, возвращает `None`.
- `clear_environments()`:
    - **Описание**: Очищает список всех окружений.
    - **Как работает функция**:
        - Очищает словарь `TinyWorld.all_environments`.

## Параметры класса
   - `all_environments` (dict): Cловарь, содержащий все созданные окружения (`name -> environment`).
   - `communication_display` (bool): Флаг, определяющий, отображать ли коммуникации в окружении.
   - `name` (str): Имя окружения.
   - `current_datetime` (datetime): Текущее время в окружении.
   - `broadcast_if_no_target` (bool): Флаг, определяющий, транслировать ли действия, если цель не найдена.
   - `simulation_id` (Any): Идентификатор симуляции, к которой принадлежит окружение.
   - `agents` (list): Список агентов в окружении.
   - `name_to_agent` (dict): Cловарь, сопоставляющий имена агентов с их экземплярами (`{agent_name: agent, agent_name_2: agent_2, ...}`).
   - `_interventions` (list): Список интервенций, применяемых в окружении на каждом шаге симуляции.
   - `_displayed_communications_buffer` (list): Буфер отображаемых коммуникаций.
   - `_target_display_communications_buffer` (list): Временный буфер целей коммуникаций для упрощения рендеринга.
   - `_max_additional_targets_to_display` (int): Максимальное количество дополнительных целей для отображения в коммуникации.
   - `console` (Console): Объект консоли для вывода информации.
   
## Примеры

### Создание и запуск окружения

```python
from datetime import datetime, timedelta
from tinytroupe.environment.tiny_world import TinyWorld
from tinytroupe.agent.tiny_person import TinyPerson

# Создание агентов
agent1 = TinyPerson(name="Alice")
agent2 = TinyPerson(name="Bob")

# Создание окружения
world = TinyWorld(name="MyWorld", agents=[agent1, agent2], initial_datetime=datetime.now())

# Запуск симуляции на 10 шагов с интервалом в 1 минуту
world.run(steps=10, timedelta_per_step=timedelta(minutes=1))

# Вывод текущих взаимодействий агентов
world.pp_current_interactions()
```

### Добавление и удаление агентов

```python
from tinytroupe.environment.tiny_world import TinyWorld
from tinytroupe.agent.tiny_person import TinyPerson

# Создание окружения
world = TinyWorld(name="MyWorld")

# Создание агентов
agent1 = TinyPerson(name="Alice")
agent2 = TinyPerson(name="Bob")

# Добавление агентов в окружение
world.add_agents([agent1, agent2])

# Удаление агента из окружения
world.remove_agent(agent1)
```

### Получение агента по имени

```python
from tinytroupe.environment.tiny_world import TinyWorld
from tinytroupe.agent.tiny_person import TinyPerson

# Создание агентов
agent1 = TinyPerson(name="Alice")
agent2 = TinyPerson(name="Bob")

# Создание окружения
world = TinyWorld(name="MyWorld", agents=[agent1, agent2])

# Получение агента по имени
alice = world.get_agent_by_name("Alice")

if alice:
    print(f"Agent found: {alice.name}")
else:
    print("Agent not found")