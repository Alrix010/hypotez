# Модуль для управления веб-сайтом

## Обзор

Модуль `website.py` отвечает за маршрутизацию и обработку запросов, связанных с веб-интерфейсом. Он использует Flask для определения маршрутов и рендеринга шаблонов, а также для предоставления статических ресурсов.

## Подробнее

Модуль определяет класс `Website`, который инициализирует Flask-приложение и настраивает маршруты для различных страниц и ресурсов, таких как главная страница, страница чата и статические файлы (assets). Основная цель - организация структуры веб-сайта и обработка HTTP-запросов для взаимодействия с пользователем.

## Классы

### `Website`

**Описание**: Класс `Website` управляет маршрутами и рендерингом веб-страниц.

**Атрибуты**:

- `app`: Flask-приложение, используемое для маршрутизации и рендеринга.
- `routes` (dict): Словарь, определяющий маршруты веб-сайта и соответствующие им функции и методы HTTP.

**Методы**:

- `__init__(self, app)`: Инициализирует экземпляр класса `Website`, сохраняя Flask-приложение и настраивая маршруты.
- `_chat(self, conversation_id)`: Обрабатывает запросы к странице чата с указанным `conversation_id`.
- `_index(self)`: Обрабатывает запросы к главной странице, генерируя уникальный `chat_id` и отображая шаблон `index.html`.
- `_assets(self, folder: str, file: str)`: Обрабатывает запросы к статическим файлам (assets), таким как CSS, JavaScript и изображения.

**Принцип работы**:

Класс `Website` инициализируется Flask-приложением и определяет набор маршрутов в словаре `routes`. Каждый маршрут связан с определенной функцией класса, которая обрабатывает запрос и возвращает ответ. Например, маршрут `/chat/<conversation_id>` связан с методом `_chat`, который отображает страницу чата с указанным идентификатором. Маршрут `/assets/<folder>/<file>` связан с методом `_assets`, который возвращает статический файл из указанной папки.

## Методы класса

### `__init__(self, app)`

**Назначение**: Инициализирует экземпляр класса `Website`, сохраняя Flask-приложение и настраивая маршруты.

**Параметры**:

- `app`: Flask-приложение, используемое для маршрутизации и рендеринга.

**Возвращает**:

- `None`

### `_chat(self, conversation_id)`

**Назначение**: Обрабатывает запросы к странице чата с указанным `conversation_id`.

**Параметры**:

- `conversation_id` (str): Идентификатор чата.

**Возвращает**:

- `render_template`: Отображает шаблон `index.html` с указанным `chat_id`.
- `redirect`: Перенаправляет на `/chat`, если `conversation_id` не содержит `-`.

**Как работает функция**:

Проверяет, содержит ли `conversation_id` символ `-`. Если нет, перенаправляет на главную страницу чата (`/chat`). В противном случае, отображает шаблон `index.html` с переданным `conversation_id`.

**Примеры**:

```python
# Пример вызова с корректным conversation_id
website._chat('1234-5678-90ab-cdef-1234567890ab')

# Пример вызова с некорректным conversation_id
website._chat('1234567890ab')
```

### `_index(self)`

**Назначение**: Обрабатывает запросы к главной странице, генерируя уникальный `chat_id` и отображая шаблон `index.html`.

**Возвращает**:

- `render_template`: Отображает шаблон `index.html` с сгенерированным `chat_id`.

**Как работает функция**:

Генерирует уникальный `chat_id`, используя `urandom` и `time`, затем отображает шаблон `index.html` с сгенерированным `chat_id`.

**Примеры**:

```python
# Пример вызова
website._index()
```

### `_assets(self, folder: str, file: str)`

**Назначение**: Обрабатывает запросы к статическим файлам (assets), таким как CSS, JavaScript и изображения.

**Параметры**:

- `folder` (str): Папка, в которой находится файл.
- `file` (str): Имя файла.

**Возвращает**:

- `send_file`: Отправляет запрошенный файл.
- `tuple[str, int]`: Возвращает "File not found" и код 404, если файл не найден.

**Как работает функция**:

Пытается отправить запрошенный файл из указанной папки. Если файл не найден, возвращает сообщение об ошибке "File not found" и код 404.

**Примеры**:

```python
# Пример вызова с существующим файлом
website._assets('css', 'style.css')

# Пример вызова с несуществующим файлом
website._assets('images', 'nonexistent.png')
```

## Параметры класса

- `app`: Flask-приложение, используемое для маршрутизации и рендеринга.
- `routes` (dict): Словарь, определяющий маршруты веб-сайта и соответствующие им функции и методы HTTP.
- `conversation_id` (str): Идентификатор чата.
- `folder` (str): Папка, в которой находится файл.
- `file` (str): Имя файла.