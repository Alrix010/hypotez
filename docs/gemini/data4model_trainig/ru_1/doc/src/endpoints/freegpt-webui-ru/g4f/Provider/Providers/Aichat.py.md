# Модуль Aichat.py

## Обзор

Модуль `Aichat.py` предоставляет возможность взаимодействия с моделью GPT-3.5-turbo через API `chat-gpt.org`. Он содержит функцию `_create_completion`, которая формирует запрос к API и возвращает ответ. Модуль предназначен для использования в проекте `hypotez` для предоставления доступа к языковым моделям.

## Подробней

Модуль определяет параметры для доступа к API `chat-gpt.org`, включая URL, поддерживаемую модель, поддержку потоковой передачи и необходимость аутентификации. Функция `_create_completion` формирует запрос на основе предоставленных сообщений и параметров, отправляет его на API и возвращает сгенерированный текст. Также в коде создается строка `params`, которая собирает информацию о типах данных аргументов функции `_create_completion` для отображения поддерживаемых параметров.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """
    Создает завершение текста на основе предоставленных сообщений, используя API chat-gpt.org.

    Args:
        model (str): Имя используемой модели.
        messages (list): Список сообщений, используемых для создания завершения. Каждое сообщение должно содержать ключи 'role' и 'content'.
        stream (bool): Определяет, использовать ли потоковую передачу.
        **kwargs: Дополнительные параметры.

    Returns:
        Generator[str, None, None]: Генератор, возвращающий сгенерированный текст.

    Raises:
        requests.exceptions.RequestException: Если возникает ошибка при отправке запроса к API.

    Как работает функция:
    - Функция принимает модель, список сообщений и другие параметры.
    - Формирует строку `base` из списка сообщений, объединяя роль и содержимое каждого сообщения.
    - Определяет заголовки запроса, включая `authority`, `accept`, `content-type` и другие.
    - Формирует JSON-данные для отправки в запросе, включая сообщение, температуру, штрафы за присутствие и частоту, а также `top_p`.
    - Отправляет POST-запрос к API `chat-gpt.org/api/text` с указанными заголовками и JSON-данными.
    - Получает ответ от API и извлекает сгенерированный текст из поля `message`.
    - Возвращает сгенерированный текст с использованием `yield`.

    Примеры:
        >>> messages = [{"role": "user", "content": "Hello, how are you?"}]
        >>> for response in _create_completion(model="gpt-3.5-turbo", messages=messages, stream=False):
        ...     print(response)
        I am doing well, thank you for asking. How can I assist you today?
    """
    ...
```

## Параметры

- `url` (str): URL для доступа к API `chat-gpt.org`.
- `model` (list): Список поддерживаемых моделей (в данном случае `gpt-3.5-turbo`).
- `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу (в данном случае `False`).
- `needs_auth` (bool): Указывает, требуется ли аутентификация для доступа к API (в данном случае `False`).