# Модуль для логирования времени выполнения

## Обзор

Модуль предоставляет функции для измерения времени выполнения различных методов (асинхронных, генераторов и обычных) и добавления информации о времени выполнения к результатам этих методов.

## Подробней

Этот модуль содержит три функции: `log_time_async`, `log_time_yield` и `log_time`. Они предназначены для измерения времени выполнения других функций и добавления информации о времени выполнения к возвращаемому результату. Этот модуль полезен для профилирования кода и выявления узких мест в производительности.

## Функции

### `log_time_async`

**Назначение**: Измеряет время выполнения асинхронного метода и добавляет информацию о времени выполнения к результату.

```python
async def log_time_async(method: callable, **kwargs):
    """
    Args:
        method (callable): Асинхронный метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в метод.

    Returns:
        str: Результат выполнения метода с добавленной информацией о времени выполнения в секундах.
    """
```

**Параметры**:

- `method` (callable): Асинхронный метод, время выполнения которого необходимо измерить.
- `**kwargs`: Произвольные именованные аргументы, которые передаются в метод.

**Возвращает**:

- `str`: Результат выполнения метода с добавленной информацией о времени выполнения в секундах.

**Как работает функция**:

1. Записывает время начала выполнения метода.
2. Вызывает асинхронный метод `method` с переданными аргументами `kwargs` и ожидает его завершения.
3. Записывает время окончания выполнения метода.
4. Вычисляет время выполнения в секундах.
5. Если результат выполнения метода не пустой, добавляет информацию о времени выполнения к результату и возвращает объединенную строку. В противном случае возвращает только информацию о времени выполнения.

**Примеры**:

```python
async def my_async_method(param: str) -> str:
    """Пример асинхронного метода."""
    await asyncio.sleep(1)  # Имитация асинхронной операции
    return f"Result: {param}"

async def main():
    result = await log_time_async(my_async_method, param="test")
    print(result)  # Вывод: Result: test 1.01 secs (время может отличаться)

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```

### `log_time_yield`

**Назначение**: Измеряет время выполнения метода-генератора и добавляет информацию о времени выполнения к результату.

```python
def log_time_yield(method: callable, **kwargs):
    """
    Args:
        method (callable): Метод-генератор, время выполнения которого необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в метод-генератор.

    Yields:
        str: Результат выполнения метода-генератора с добавленной информацией о времени выполнения в секундах.
    """
```

**Параметры**:

- `method` (callable): Метод-генератор, время выполнения которого необходимо измерить.
- `**kwargs`: Произвольные именованные аргументы, которые передаются в метод-генератор.

**Возвращает**:

- `str`: Результат выполнения метода-генератора с добавленной информацией о времени выполнения в секундах.

**Как работает функция**:

1. Записывает время начала выполнения метода-генератора.
2. Вызывает метод-генератор `method` с переданными аргументами `kwargs` и итерируется по его результатам с использованием `yield from`.
3. Записывает время окончания выполнения метода-генератора.
4. Вычисляет время выполнения в секундах.
5. Добавляет информацию о времени выполнения к результату и возвращает его.

**Примеры**:

```python
def my_generator_method(param: int):
    """Пример метода-генератора."""
    for i in range(param):
        yield f"Step {i}"

def main():
    generator = log_time_yield(my_generator_method, param=3)
    for result in generator:
        print(result)
    # Вывод:
    # Step 0
    # Step 1
    # Step 2
    #  0.0 secs (время может отличаться)

if __name__ == "__main__":
    main()
```

### `log_time`

**Назначение**: Измеряет время выполнения обычного метода и добавляет информацию о времени выполнения к результату.

```python
def log_time(method: callable, **kwargs):
    """
    Args:
        method (callable): Метод, время выполнения которого необходимо измерить.
        **kwargs: Произвольные именованные аргументы, которые передаются в метод.

    Returns:
        str: Результат выполнения метода с добавленной информацией о времени выполнения в секундах.
    """
```

**Параметры**:

- `method` (callable): Метод, время выполнения которого необходимо измерить.
- `**kwargs`: Произвольные именованные аргументы, которые передаются в метод.

**Возвращает**:

- `str`: Результат выполнения метода с добавленной информацией о времени выполнения в секундах.

**Как работает функция**:

1. Записывает время начала выполнения метода.
2. Вызывает метод `method` с переданными аргументами `kwargs`.
3. Записывает время окончания выполнения метода.
4. Вычисляет время выполнения в секундах.
5. Если результат выполнения метода не пустой, добавляет информацию о времени выполнения к результату и возвращает объединенную строку. В противном случае возвращает только информацию о времени выполнения.

**Примеры**:

```python
def my_method(param: str) -> str:
    """Пример обычного метода."""
    return f"Result: {param}"

def main():
    result = log_time(my_method, param="test")
    print(result)  # Вывод: Result: test 0.0 secs (время может отличаться)

if __name__ == "__main__":
    main()