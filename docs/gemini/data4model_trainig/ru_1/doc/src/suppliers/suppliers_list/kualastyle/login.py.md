# Модуль для авторизации поставщика Kualastyle

## Обзор

Модуль `login.py` предназначен для автоматизации процесса авторизации на сайте поставщика Kualastyle. Он содержит функции для открытия сайта, закрытия всплывающих окон и выполнения входа в систему. Модуль использует веб-драйвер для взаимодействия с веб-страницами и выполняет необходимые действия для успешной авторизации.

## Подробней

Этот модуль является частью проекта `hypotez` и отвечает за автоматизацию процесса авторизации на сайте поставщика Kualastyle. Он использует веб-драйвер для открытия сайта, закрытия всплывающих окон и выполнения входа в систему. Модуль содержит функции `login` и `close_pop_up`, которые выполняют основные шаги авторизации.

## Функции

### `login`

**Назначение**: Выполняет вход на сайт поставщика.

```python
def login(s) -> bool:
    """ Функция логин. 
   @param
        s - Supplier
    @returns
        True if login else False

   """
    close_pop_up(s)
    return True
```

**Параметры**:

-   `s`: Объект поставщика (`Supplier`), содержащий информацию о драйвере и локаторах элементов.

**Возвращает**:

-   `bool`: `True`, если вход выполнен успешно, иначе `False`. В текущей реализации всегда возвращает `True` после попытки закрытия всплывающего окна.

**Как работает функция**:

1.  Вызывает функцию `close_pop_up` для закрытия всплывающего окна на сайте.
2.  Возвращает `True`, указывая на успешное завершение процесса входа (независимо от фактического результата).

**Примеры**:

```python
from src.suppliers.suppliers_list.kualastyle.login import login
from unittest.mock import MagicMock

# Создаем мок-объект поставщика
supplier_mock = MagicMock()

# Вызываем функцию login с мок-объектом поставщика
result = login(supplier_mock)

# Проверяем, что функция вернула True
print(result)
```

### `close_pop_up`

**Назначение**: Закрывает всплывающее окно на сайте Kualastyle.

```python
def close_pop_up(s) -> bool:
    """ Функция логин
   @param
        s - Supplier
    @returns
        True if login else False

   """
    _d = s.driver
    _l : dict = s.locators['close_pop_up_locator']
    
    _d.get_url('https://www.kualastyle.com')
    _d.window_focus(_d)
    _d.wait(5)
    #_d.page_refresh()
    try:
        _d.execute_locator(_l)
    except Exception as e:
        logger.warning(f"Не закрыл попап")
    
    ...
```

**Параметры**:

-   `s`: Объект поставщика (`Supplier`), содержащий информацию о драйвере и локаторах элементов.

**Возвращает**:

-   `bool`: `True`, если закрытие всплывающего окна выполнено успешно, иначе `False`. В текущей реализации функция не возвращает `False` явно, но может генерировать исключение.

**Как работает функция**:

1.  Извлекает драйвер (`_d`) и локатор (`_l`) для закрытия всплывающего окна из объекта поставщика `s`.
2.  Открывает сайт `https://www.kualastyle.com` с использованием драйвера.
3.  Переключает фокус на текущее окно.
4.  Ожидает 5 секунд для загрузки страницы.
5.  Пытается выполнить действие по локатору для закрытия всплывающего окна.
6.  В случае ошибки при закрытии всплывающего окна, логирует предупреждение.

**Примеры**:

```python
from src.suppliers.suppliers_list.kualastyle.login import close_pop_up
from unittest.mock import MagicMock

# Создаем мок-объект поставщика
supplier_mock = MagicMock()
supplier_mock.driver = MagicMock()
supplier_mock.locators = {'close_pop_up_locator': {'by': 'XPATH', 'selector': '//button[@id="closeXButton"]'}}

# Вызываем функцию close_pop_up с мок-объектом поставщика
result = close_pop_up(supplier_mock)