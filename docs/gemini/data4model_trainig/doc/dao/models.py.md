# Модуль моделей базы данных

## Обзор

Модуль `src.endpoints.bots.telegram.digital_market.bot.dao.models` определяет модели базы данных, используемые в Telegram-боте для цифрового магазина.

## Подробней

Модуль использует SQLAlchemy для определения таблиц базы данных и их полей.

## Классы

### `User`

**Описание**: Модель данных для представления пользователя.

**Наследует**:

*   `Base` из модуля `bot.dao.database`.

**Атрибуты**:

*   `telegram_id` (int): Telegram ID пользователя (BigInteger, уникальный, обязательный).
*   `username` (str | None): Имя пользователя (Text, может быть `None`).
*   `first_name` (str | None): Имя пользователя (Text, может быть `None`).
*   `last_name` (str | None): Фамилия пользователя (Text, может быть `None`).
*   `purchases` (List['Purchase']): Список покупок пользователя (связь с таблицей `Purchase`).

### `Category`

**Описание**: Модель данных для представления категории товара.

**Наследует**:

*   `Base` из модуля `bot.dao.database`.

**Атрибуты**:

*   `category_name` (str): Название категории (Text, обязательный).
*   `products` (List["Product"]): Список товаров в категории (связь с таблицей `Product`).

**Специфические особенности**:

*   Имя таблицы определяется как `"categories"` (множественное число от имени класса в нижнем регистре).

### `Product`

**Описание**: Модель данных для представления товара.

**Наследует**:

*   `Base` из модуля `bot.dao.database`.

**Атрибуты**:

*   `name` (str): Название товара (Text).
*   `description` (str): Описание товара (Text).
*   `price` (int): Цена товара.
*   `file_id` (str | None): ID файла товара (Text, может быть `None`).
*   `category_id` (int): ID категории товара (ForeignKey, связь с таблицей `categories`).
*   `hidden_content` (str): Скрытый контент товара (Text).
*   `category` (Category): Категория товара (связь с таблицей `Category`).
*   `purchases` (List['Purchase']): Список покупок товара (связь с таблицей `Purchase`).

### `Purchase`

**Описание**: Модель данных для представления покупки.

**Наследует**:

*   `Base` из модуля `bot.dao.database`.

**Атрибуты**:

*   `user_id` (int): ID пользователя, совершившего покупку (ForeignKey, связь с таблицей `users`).
*   `product_id` (int): ID товара, который был куплен (ForeignKey, связь с таблицей `products`).
*   `price` (int): Цена товара на момент покупки.
*   `payment_type` (str): Тип платежа.
*   `payment_id` (str): ID платежа (уникальный).
*   `user` (User): Пользователь, совершивший покупку (связь с таблицей `User`).
*   `product` (Product): Товар, который был куплен (связь с таблицей `Product`).

## Связи между таблицами

*   `User` <-> `Purchase`: Отношение "один ко многим" (один пользователь может совершить много покупок).
*   `Category` <-> `Product`: Отношение "один ко многим" (одна категория может содержать много товаров).
*   `Product` <-> `Purchase`: Отношение "один ко многим" (один товар может быть куплен много раз).