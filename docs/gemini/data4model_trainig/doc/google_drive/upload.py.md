## \\file /src/endpoints/bots/google_drive/upload.py

# Модуль для загрузки файлов на Google Drive

Этот модуль предназначен для загрузки файлов на Google Drive с использованием API Google Drive.

## Обзор

Модуль предоставляет функцию `upload`, которая позволяет загружать файлы на Google Drive, поддерживая как обычные папки, так и Team Drives.

## Функции

### `upload`

```python
def upload(filename: str, update, context, parent_folder: str = None) -> None:
```

**Назначение**: Загружает файл на Google Drive.

**Параметры**:

*   `filename` (str): Путь к файлу, который нужно загрузить.
*   `update`: Объект обновления Telegram.
*   `context`: Контекст Telegram-бота.
*   `parent_folder` (str, optional): Имя родительской папки на Google Drive. По умолчанию `None`.

**Возвращает**:

*   `None`

**Как работает функция**:

1.  Инициализирует аутентификацию Google Drive API.
2.  Загружает учетные данные пользователя из файла.
3.  Авторизует пользователя, используя сохраненные учетные данные или запрашивая новый токен.
4.  Создает объект `GoogleDrive`.
5.  Проверяет, существует ли файл по указанному пути.
6.  Определяет, является ли родительская папка Team Drive или обычной папкой.
7.  Если родительская папка не указана и не является Team Drive, пытается найти папку с указанным именем в корне Google Drive. Если папка не найдена, создает ее.
8.  Создает объект файла Google Drive с указанным именем и родительской папкой.
9.  Загружает файл на Google Drive.
10. Устанавливает права доступа к файлу (публичный доступ на чтение).
11. Возвращает ссылку на загруженный файл.