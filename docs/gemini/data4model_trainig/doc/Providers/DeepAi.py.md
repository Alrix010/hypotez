# Модуль провайдера DeepAi

## Обзор

Модуль `src.endpoints.freegpt-webui-ru/g4f/Provider/Providers/DeepAi.py` предоставляет реализацию провайдера DeepAi для взаимодействия с языковой моделью.

## Подробней

Модуль содержит функции для создания завершений (completions) с использованием API DeepAI.

## Переменные

*   `url` (str): URL API DeepAI (значение: `'https://deepai.org'` ).
*   `model` (list): Список поддерживаемых моделей (значение: `['gpt-3.5-turbo']`).
*   `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу (значение: `True`).
*   `needs_auth` (bool): Указывает, требует ли провайдер аутентификацию (значение: `False`).

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
```

**Назначение**: Функция для создания завершения (completion).

**Параметры**:

*   `model` (str): Имя модели.
*   `messages` (list): Список сообщений.
*   `stream` (bool): Указывает, использовать ли потоковую передачу.
*   `**kwargs`: Дополнительные аргументы.

**Как работает функция**:

1.  Определяет функцию `md5` для вычисления MD5 хеша.
2.  Определяет функцию `get_api_key` для получения ключа API.
3.  Устанавливает User-Agent.
4.  Формирует заголовки для HTTP-запроса, включая API-ключ.
5.  Формирует данные для отправки в API, включая стиль чата и историю чата.
6.  Выполняет POST-запрос к API DeepAI.
7.  Итерируется по частям ответа и возвращает их.

### `md5` (внутренняя функция)

```python
def md5(text: str) -> str:
```

**Назначение**: Вычисляет MD5 хеш строки.

**Параметры**:

*   `text` (str): Строка для хеширования.

**Возвращает**:

*   `str`: MD5 хеш строки.

**Как работает функция**:

1.  Вычисляет MD5 хеш строки и возвращает его в шестнадцатеричном формате.

### `get_api_key` (внутренняя функция)

```python
def get_api_key(user_agent: str) -> str:
```

**Назначение**: Получает ключ API.

**Параметры**:

*   `user_agent` (str): User-Agent.

**Возвращает**:

*   `str`: Ключ API.

**Как работает функция**:

1.  Генерирует случайную часть ключа.
2.  Вычисляет MD5 хеш User-Agent и случайной части ключа.
3.  Формирует ключ API, объединяя префикс, случайную часть и хеш.