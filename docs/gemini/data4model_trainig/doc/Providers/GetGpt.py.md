# Модуль провайдера GetGpt

## Обзор

Модуль `src.endpoints.freegpt-webui-ru/g4f/Provider/Providers/GetGpt.py` предоставляет реализацию провайдера GetGpt для взаимодействия с языковой моделью.

## Подробней

Модуль содержит функции для создания завершений (completions) с использованием API GetGpt.

## Переменные

*   `url` (str): URL API GetGpt (значение: `'https://chat.getgpt.world/'`).
*   `model` (list): Список поддерживаемых моделей (значение: `['gpt-3.5-turbo']`).
*   `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу (значение: `True`).
*   `needs_auth` (bool): Указывает, требует ли провайдер аутентификацию (значение: `False`).

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
```

**Назначение**: Функция для создания завершения (completion).

**Параметры**:

*   `model` (str): Имя модели.
*   `messages` (list): Список сообщений.
*   `stream` (bool): Указывает, использовать ли потоковую передачу.
*   `**kwargs`: Дополнительные аргументы.

**Как работает функция**:

1.  Определяет функцию `encrypt` для шифрования данных.
2.  Определяет функцию `pad_data` для добавления отступов к данным.
3.  Формирует заголовки для HTTP-запроса.
4.  Формирует данные в формате JSON для отправки в API, включая сообщения, параметры и UUID.
5.  Шифрует данные с использованием функции `encrypt`.
6.  Выполняет POST-запрос к API GetGpt.
7.  Итерируется по частям ответа и возвращает их.

### `encrypt` (внутренняя функция)

```python
def encrypt(e):
```

**Назначение**: Шифрует данные с использованием AES в режиме CBC.

**Параметры**:

*   `e`: Данные для шифрования.

**Возвращает**:

*   Зашифрованные данные в шестнадцатеричном формате.

**Как работает функция**:

1.  Генерирует случайные ключи `t` и `n`.
2.  Шифрует данные с использованием AES в режиме CBC.
3.  Возвращает зашифрованные данные в шестнадцатеричном формате.

### `pad_data` (внутренняя функция)

```python
def pad_data(data: bytes) -> bytes:
```

**Назначение**: Добавляет отступы к данным, чтобы их длина была кратна размеру блока AES.

**Параметры**:

*   `data` (bytes): Данные для добавления отступов.

**Возвращает**:

*   Данные с добавленными отступами.

**Как работает функция**:

1.  Определяет размер блока AES.
2.  Вычисляет количество байтов, необходимых для дополнения данных до кратной длины блока.
3.  Добавляет отступы к данным.