# Модуль провайдера Ails

## Обзор

Модуль `src.endpoints.freegpt-webui-ru/g4f/Provider/Providers/Ails.py` предоставляет реализацию провайдера Ails для взаимодействия с языковыми моделями.

## Подробней

Модуль содержит функции для создания завершений (completions) с использованием API Ails.

## Переменные

*   `url` (str): URL API Ails (значение: `'https://ai.ls'` ).
*   `model` (str): Модель, используемая провайдером (значение: `'gpt-3.5-turbo'` ).
*   `supports_stream` (bool): Указывает, поддерживает ли провайдер потоковую передачу (значение: `True`).
*   `needs_auth` (bool): Указывает, требует ли провайдер аутентификацию (значение: `False`).

## Классы

### `Utils`

**Описание**: Класс, предоставляющий утилитные функции.

**Методы**:

*   `hash(json_data: Dict[str, str]) -> sha256`: Вычисляет хеш JSON-данных.
*   `format_timestamp(timestamp: int) -> str`: Форматирует временную метку.

## Методы класса `Utils`

### `hash`

```python
def hash(json_data: Dict[str, str]) -> sha256:
```

**Назначение**: Вычисляет хеш JSON-данных.

**Параметры**:

*   `json_data` (Dict[str, str]): JSON-данные для хеширования.

**Возвращает**:

*   `sha256`: SHA-256 хеш данных.

**Как работает функция**:

1.  Формирует строку на основе значений ключей `t` и `m` в `json_data`.
2.  Добавляет секретный ключ и длину сообщения к строке.
3.  Вычисляет SHA-256 хеш строки.

### `format_timestamp`

```python
def format_timestamp(timestamp: int) -> str:
```

**Назначение**: Форматирует временную метку.

**Параметры**:

*   `timestamp` (int): Временная метка.

**Возвращает**:

*   `str`: Отформатированная временная метка.

**Как работает функция**:

1.  Извлекает последнюю цифру из временной метки.
2.  Корректирует последнюю цифру.
3.  Возвращает отформатированную временную метку в виде строки.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, temperature: float = 0.6, stream: bool = False, **kwargs):
```

**Назначение**: Функция для создания завершения (completion).

**Параметры**:

*   `model` (str): Имя модели.
*   `messages` (list): Список сообщений.
*   `temperature` (float, optional): Температура. Defaults to 0.6.
*   `stream` (bool, optional): Указывает, использовать ли потоковую передачу. Defaults to `False`.
*   `**kwargs`: Дополнительные аргументы.

**Как работает функция**:

1.  Определяет заголовки для HTTP-запроса.
2.  Формирует параметры для запроса к API.
3.  Формирует данные в формате JSON, включая модель, температуру, поток и сообщения.
4.  Выполняет POST-запрос к API Ails.
5.  Итерируется по токенам в ответе и возвращает их.