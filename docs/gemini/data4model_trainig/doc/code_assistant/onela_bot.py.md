# Модуль `onela_bot`

## Обзор

Модуль `onela_bot` предназначен для взаимодействия с моделью ассистента программиста через чат Telegram.

## Подробней

Модуль содержит класс `OnelaBot`, который наследует класс `TelegramBot` и используется для обработки текстовых сообщений и документов, отправленных через Telegram. Он использует модель Google Gemini для генерации ответов на запросы пользователей.

## Классы

### `OnelaBot`

**Описание**: Класс для взаимодействия с моделью ассистента программиста через чат Telegram.

**Наследует**: `TelegramBot`

**Атрибуты**:

*   `model` (GoogleGenerativeAi): Объект GoogleGenerativeAi, используемый для взаимодействия с моделью Gemini.

**Методы**:

*   `__init__()`: Инициализирует объект `OnelaBot`.
*   `handle_message()`: Обрабатывает текстовые сообщения.
*   `handle_document()`: Обрабатывает загруженные документы.

### `__init__`

```python
def __init__(self) -> None:
    """
    Инициализация объекта OnelaBot.
    """
    ...
```

**Назначение**: Инициализирует объект `OnelaBot`.

**Как работает функция**:

1.  Инициализирует модель Google Gemini для генерации ответов.
2.  Вызывает конструктор родительского класса `TelegramBot` с токеном бота.

### `handle_message`

```python
async def handle_message(self, update: Update, context: CallbackContext) -> None:
    """
    Обработка текстовых сообщений.

    Args:
        update (Update): Данные обновления Telegram.
        context (CallbackContext): Контекст выполнения.
    """
    ...
```

**Назначение**: Обрабатывает текстовые сообщения, полученные от пользователя.

**Параметры**:

*   `update` (Update): Данные обновления Telegram.
*   `context` (CallbackContext): Контекст выполнения.

**Как работает функция**:

1.  Извлекает текст сообщения из объекта `update`.
2.  Получает ответ от модели Gemini с помощью метода `self.model.chat(q)`.
3.  Отправляет ответ пользователю.
4.  В случае ошибки логирует ошибку.

### `handle_document`

```python
async def handle_document(self, update: Update, context: CallbackContext) -> None:
    """
    Обработка загруженных документов.

    Args:
        update (Update): Данные обновления Telegram.
        context (CallbackContext): Контекст выполнения.
    """
    ...
```

**Назначение**: Обрабатывает загруженные документы.

**Параметры**:

*   `update` (Update): Данные обновления Telegram.
*   `context` (CallbackContext): Контекст выполнения.

**Как работает функция**:

1.  Получает информацию о загруженном файле из объекта `update`.
2.  Сохраняет файл локально.
3.  Отправляет пользователю информацию о загруженном файле.
4.  В случае ошибки логирует ошибку.

## Запуск

В блоке `if __name__ == '__main__':` создается экземпляр класса `OnelaBot` и запускается обработка входящих сообщений с использованием `bot.application.run_polling()`.
```python
if __name__ == '__main__':
    bot = OnelaBot()
    asyncio.run(bot.application.run_polling())
```

## Зависимости

*   `telegram`: Для работы с Telegram Bot API.
*   `src.llm.openai`: Для взаимодействия с моделью OpenAI.
*   `src.llm.gemini`: Для взаимодействия с моделью Gemini.
*   `src.endpoints.bots.telegram`: Для базовой функциональности телеграм-бота.
*   `src.logger.logger`: Для логирования информации о процессе выполнения скрипта.

## Замечания

Код содержит заглушки `...` в блоках обработки исключений, что указывает на необходимость добавления более детальной обработки ошибок.
```python
...
```
Данный код указывает на то, что в модуле есть еще не реализованная функциональность.