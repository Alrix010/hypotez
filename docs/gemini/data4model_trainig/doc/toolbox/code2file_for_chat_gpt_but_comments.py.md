# Модуль для чтения и обработки файлов с сохранением комментариев

## Обзор

Модуль `code2file_for_chat_gpt_but_comments.py` предназначен для рекурсивного чтения текстовых и бинарных файлов в указанной директории и сохранения их содержимого в один файл. В отличие от `code2file_for_chat_gpt.py`, этот скрипт сохраняет все комментарии и docstrings. Также, скрипт удаляет файлы и директории, имена которых начинаются с `_` или содержат символ `*`.

## Подробнее

Модуль предоставляет функциональность для чтения и обработки различных типов файлов (текстовые, JSON, CSV, XML, Excel, Jupyter Notebook, YAML, TeX, INI, RDF, TOML и SQLite базы данных). Он также включает функцию для рекурсивного удаления содержимого директорий. Это полезно для сбора данных из различных источников и форматов в единый файл для дальнейшей обработки.

## Функции

### `delete_directory_contents`

```python
def delete_directory_contents(directory: Path) -> None:
    """Рекурсивно удаляет все содержимое указанной директории.

    Args:
        directory (Path): Путь к директории, содержимое которой нужно удалить.

    Returns:
        None

    Пример:
        >>> delete_directory_contents(Path('../tmp/chat_gpt/aliexpress'))
    """
    ...
```

**Назначение**:
Функция `delete_directory_contents` рекурсивно удаляет все файлы и поддиректории внутри указанной директории.

**Параметры**:
- `directory` (Path): Объект `Path`, представляющий путь к директории, содержимое которой нужно удалить.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Как работает функция**:
1. Итерируется по всем элементам (файлам и поддиректориям) внутри указанной директории.
2. Если элемент является директорией, рекурсивно вызывает `delete_directory_contents` для этой директории, а затем пытается удалить саму директорию.
3. Если элемент является файлом, пытается удалить файл.
4. Логирует успешные удаления файлов и директорий, а также ошибки при удалении.

**Примеры**:

```python
>>> delete_directory_contents(Path('../tmp/chat_gpt/aliexpress'))
```

### `read_text_files`

```python
def read_text_files(
    directory: str, output_file: str
) -> None:
    """ Читает все указанные текстовые и данные файлы в каталоге и сохраняет объединенный текст в один файл,
    одновременно удаляя файлы и директории, которые начинаются с `_` или содержат `(` и `)`.

    Args:
        directory (str): Каталог для поиска файлов.
        output_file (str): Файл, в который будет сохранен объединенный текст.

    Returns:
        None

    Пример:
        >>> read_text_files('src', 'output.txt')
    """
    ...
```

**Назначение**:
Функция `read_text_files` читает все файлы в указанной директории, обрабатывает их содержимое в зависимости от типа файла и сохраняет объединенный текст в один файл. Функция также удаляет файлы и директории, имена которых начинаются с `_` или содержат символ `*`.

**Параметры**:
- `directory` (str): Путь к директории, в которой нужно искать файлы.
- `output_file` (str): Путь к файлу, в который будет сохранено объединенное содержимое.

**Возвращает**:
- `None`: Функция ничего не возвращает.

**Как работает функция**:
1. Создает выходной файл, если он не существует.
2. Рекурсивно обходит указанную директорию, начиная с корневой директории.
3. Для каждой директории, если имя начинается с `_` или содержит `*`, удаляет ее содержимое и саму директорию.
4. Для каждого файла, если имя начинается с `_` или содержит `(` и `)`, пытается удалить файл.
5. В противном случае, обрабатывает содержимое файла в зависимости от расширения файла.
   - Для текстовых файлов (`.py`, `.txt`, `.css`, `.js`, `.dot`, `.mer`, `.md`, `.ps1`): читает содержимое и записывает в выходной файл.
   - Для JSON-файлов: читает содержимое, преобразует в строку JSON с отступами и записывает в выходной файл.
   - Для CSV-файлов: читает содержимое, преобразует в строку, объединяя строки и столбцы, и записывает в выходной файл.
   - Для XML-файлов: читает содержимое, преобразует в строку XML и записывает в выходной файл.
   - Для Excel-файлов (`.xls`, `.xlsx`): читает содержимое, преобразует каждый лист в строку и записывает в выходной файл.
   - Для Jupyter Notebook-файлов (`.ipynb`): читает содержимое, преобразует в строку JSON с отступами и записывает в выходной файл.
   - Для YAML-файлов (`.yaml`, `.yml`): читает содержимое, преобразует в строку YAML и записывает в выходной файл.
   - Для TeX-файлов (`.tex`): читает содержимое и записывает в выходной файл.
   - Для INI-файлов (`.ini`): читает содержимое и записывает в выходной файл.
   - Для RDF-файлов (`.rdf`): читает содержимое и записывает в выходной файл.
   - Для TOML-файлов (`.toml`): читает содержимое и записывает в выходной файл.
   - Для SQLite-файлов (`.sqlite`, `.db`): подключается к базе данных, извлекает имена таблиц и их содержимое, и записывает в выходной файл.
6. В случае возникновения ошибок при обработке файлов, записывает информацию об ошибке в лог.

**Примеры**:

```python
>>> read_text_files('src', 'output.txt')
```

## Параметры модуля

- `MODE` (str): Указывает режим работы модуля (в данном случае \'development\').

## Примеры использования

В конце модуля приведен пример использования функции `read_text_files`:

```python
if __name__ == "__main__":
    # Указываем каталог для поиска и файл для сохранения вывода
    directory_to_search = "../src/suppliers/kazarinov/react"
    output_file_path = Path("../data/kazarinov_react.txt")

    # Создаем директорию, если она не существует
    output_file_path.parent.mkdir(parents=True, exist_ok=True)

    # Создаем файл, если его не существует
    output_file_path.touch(exist_ok=True)

    read_text_files(directory_to_search, output_file_path)
```

Этот код выполняет следующие действия:

1. Определяет каталог для поиска файлов (`directory_to_search`) и путь к выходному файлу (`output_file_path`).
2. Создает директорию для выходного файла, если она не существует.
3. Создает выходной файл, если он не существует.
4. Вызывает функцию `read_text_files` для чтения файлов из указанного каталога, обработки их содержимого и сохранения объединенного содержимого в выходной файл.