# Модуль для чтения и объединения текстовых файлов

## Обзор

Модуль `code2file_for_chat_gpt_but_comments.py` предназначен для рекурсивного чтения текстовых и данных файлов в указанном каталоге, объединения их содержимого в один файл и удаления файлов и директорий, соответствующих определенным критериям (например, начинающихся с `_` или содержащих `(` и `)`).

## Подробнее

Этот код используется для обработки и объединения содержимого различных файлов в проекте, что может быть полезно, например, для подготовки данных для анализа или обучения моделей машинного обучения. Модуль включает функции для чтения и обработки различных типов файлов, таких как текстовые файлы, JSON, CSV, XML, Excel, Jupyter Notebooks, YAML, TeX, INI, RDF, TOML и SQLite базы данных. Также осуществляется удаление директорий и файлов, имена которых начинаются с символа подчеркивания `_` или содержат символы `(` и `)`.

## Функции

### `delete_directory_contents`

**Назначение**: Рекурсивно удаляет все содержимое указанной директории.

**Параметры**:

- `directory` (Path): Путь к директории, содержимое которой необходимо удалить.

**Возвращает**:

- `None`

**Как работает функция**:

Функция `delete_directory_contents` принимает путь к директории и рекурсивно удаляет все файлы и поддиректории внутри нее. Сначала она перебирает все элементы в директории. Если элемент является директорией, функция рекурсивно вызывает саму себя для удаления содержимого этой поддиректории, а затем пытается удалить саму директорию. Если элемент является файлом, функция пытается удалить его. В случае возникновения ошибок при удалении файла или директории, информация об ошибке логируется с использованием `logger.error`.

**Примеры**:

```python
from pathlib import Path
directory_path = Path('../tmp/chat_gpt/test')
delete_directory_contents(directory_path)
```

### `read_text_files`

**Назначение**: Читает все указанные текстовые и данные файлы в каталоге и сохраняет объединенный текст в один файл, одновременно удаляя файлы и директории, которые начинаются с `_` или содержат `(` и `)`.

**Параметры**:

- `directory` (str): Каталог для поиска файлов.
- `output_file` (str): Файл, в который будет сохранен объединенный текст.

**Возвращает**:

- `None`

**Как работает функция**:

Функция `read_text_files` выполняет следующие действия:

1.  **Инициализация**:

    *   Создает объект `Path` для выходного файла.
    *   Создает выходной файл, если он не существует.
2.  **Обход директории**:

    *   Использует `os.walk` для рекурсивного обхода указанной директории.
    *   Параметр `topdown=False` указывает, что обход начинается с поддиректорий.
3.  **Удаление файлов и директорий**:

    *   Для каждой директории проверяет, начинается ли её имя с `"_"` или содержит ли символ `"*"`.\
    *   Если условие выполняется, вызывает функцию `delete_directory_contents` для удаления содержимого директории.
    *   Для каждого файла проверяет, начинается ли его имя с `"_"` или содержит ли символы `"("` и `")"`.\
    *   Если условие выполняется, пытается удалить файл.
4.  **Обработка файлов**:

    *   Если файл не подлежит удалению, функция проверяет его расширение.
    *   В зависимости от расширения файла, функция выполняет соответствующие действия для чтения и обработки содержимого файла:
        *   `.py`, `.txt`, `.css`, `.js`, `.dot`, `.mer`, `.md`, `.ps1`: Читает содержимое файла как текст и записывает в выходной файл.
        *   `.json`: Читает содержимое файла как JSON, преобразует в строку с отступами и записывает в выходной файл.
        *   `.csv`: Читает содержимое файла как CSV, преобразует в строку, объединяя строки и столбцы, и записывает в выходной файл.
        *   `.xml`: Читает содержимое файла как XML, преобразует в строку и записывает в выходной файл.
        *   `.xls`, `.xlsx`: Читает содержимое файла как Excel, преобразует каждую таблицу в строку и записывает в выходной файл.
        *   `.ipynb`: Читает содержимое файла как Jupyter Notebook, преобразует в строку с отступами и записывает в выходной файл.
        *   `.yaml`, `.yml`: Читает содержимое файла как YAML, преобразует в строку и записывает в выходной файл.
        *   `.tex`, `.ini`, `.rdf`, `.toml`: Читает содержимое файла как текст и записывает в выходной файл.
        *   `.sqlite`, `.db`: Подключается к базе данных SQLite, извлекает имена таблиц и их содержимое, преобразует в строку и записывает в выходной файл.
5.  **Обработка ошибок**:

    *   В случае возникновения ошибок при обработке файла, информация об ошибке логируется с использованием `logger.error`.

**Примеры**:

```python
directory_to_search = "src"
output_file_path = "output.txt"
read_text_files(directory_to_search, output_file_path)
```

```python
directory_to_search = "../src/suppliers/kazarinov/react"
output_file_path = "../data/kazarinov_react.txt"
read_text_files(directory_to_search, output_file_path)
```