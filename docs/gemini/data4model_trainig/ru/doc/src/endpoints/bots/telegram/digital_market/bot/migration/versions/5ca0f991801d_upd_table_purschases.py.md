# Модуль обновления таблицы покупок

## Обзор

Модуль содержит функции для обновления таблицы `purchases` в базе данных с использованием Alembic. Он добавляет столбец `payment_type` и уникальное ограничение на столбец `payment_id`.

## Подробнее

Этот модуль предназначен для управления изменениями схемы базы данных в проекте `hypotez`. Он использует Alembic для определения операций обновления (`upgrade`) и отката (`downgrade`) схемы. В данном случае, модуль добавляет информацию о типе платежа в таблицу покупок и создает уникальный индекс для идентификатора платежа.

## Функции

### `upgrade`

**Назначение**: Обновляет схему базы данных, добавляя столбец `payment_type` в таблицу `purchases` и создавая уникальное ограничение для `payment_id`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют.

**Как работает функция**:
Функция `upgrade` использует `alembic.op` для выполнения двух основных операций:
1. Добавляет столбец `payment_type` типа `String` в таблицу `purchases`, устанавливая ограничение `nullable=False`.
2. Создает уникальное ограничение для столбца `payment_id` в таблице `purchases`.

**Примеры**:
```python
# Пример вызова функции upgrade (обычно вызывается Alembic)
upgrade()
```

### `downgrade`

**Назначение**: Откатывает изменения, внесенные функцией `upgrade`, удаляя столбец `payment_type` и уникальное ограничение для `payment_id` из таблицы `purchases`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- `None`

**Вызывает исключения**:
- Отсутствуют.

**Как работает функция**:
Функция `downgrade` использует `alembic.op` для выполнения операций, обратных тем, что были выполнены в `upgrade`:
1. Удаляет уникальное ограничение из таблицы `purchases`.
2. Удаляет столбец `payment_type` из таблицы `purchases`.

**Примеры**:
```python
# Пример вызова функции downgrade (обычно вызывается Alembic)
downgrade()