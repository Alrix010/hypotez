# Модуль `VoiGpt`

## Обзор

Модуль `VoiGpt` предоставляет класс `VoiGpt`, который является провайдером для взаимодействия с сервисом VoiGpt.com. Он позволяет отправлять сообщения и получать ответы от модели, указанной пользователем. Модуль требует наличия CSRF токена/cookie, полученного с сайта voigpt.com.

## Подробнее

Этот модуль интегрируется с VoiGpt.com для предоставления доступа к языковой модели GPT-3.5 Turbo. Для работы с модулем необходимо получить CSRF токен с сайта VoiGpt.com и передать его в качестве параметра `access_token`.

## Классы

### `VoiGpt(AbstractProvider)`

**Описание**:
Класс `VoiGpt` является провайдером для VoiGpt.com. Он позволяет отправлять сообщения и получать ответы от модели.

**Наследует**:
`AbstractProvider` - абстрактный класс, определяющий интерфейс для провайдеров.

**Атрибуты**:
- `url` (str): URL сайта VoiGpt.com.
- `working` (bool): Флаг, указывающий, работает ли провайдер. По умолчанию `False`.
- `supports_gpt_35_turbo` (bool): Флаг, указывающий, поддерживает ли провайдер модель GPT-3.5 Turbo. По умолчанию `True`.
- `supports_message_history` (bool): Флаг, указывающий, поддерживает ли провайдер историю сообщений. По умолчанию `True`.
- `supports_stream` (bool): Флаг, указывающий, поддерживает ли провайдер потоковую передачу данных. По умолчанию `False`.
- `_access_token` (str): Приватный атрибут для хранения CSRF токена.

**Параметры**:
- `model` (str): Модель для использования.
- `messages` (Messages): Сообщения для отправки.
- `stream` (bool): Флаг, указывающий, использовать ли потоковую передачу.
- `proxy` (str): Прокси для использования.
- `access_token` (str): CSRF токен для доступа к VoiGpt.com.
- `**kwargs`: Дополнительные именованные аргументы.

**Принцип работы**:

1.  Класс инициализируется с параметрами, необходимыми для взаимодействия с VoiGpt.com.
2.  Если `access_token` не предоставлен, класс пытается получить его, выполняя GET-запрос к VoiGpt.com.
3.  Метод `create_completion` отправляет POST-запрос к VoiGpt.com с сообщениями пользователя и необходимыми заголовками.
4.  Ответ от VoiGpt.com возвращается в виде генератора, который выдает текст ответа.

**Методы**:

- `create_completion()`: Отправляет запрос на создание завершения и возвращает результат.

## Методы класса

### `create_completion()`

```python
@classmethod
def create_completion(
    cls,
    model: str,
    messages: Messages,
    stream: bool,
    proxy: str = None,
    access_token: str = None,
    **kwargs
) -> CreateResult:
    """
    Создает запрос на завершение и возвращает результат.

    Args:
        cls (VoiGpt): Класс VoiGpt.
        model (str): Модель для использования. Если не указана, используется "gpt-3.5-turbo".
        messages (Messages): Список сообщений для отправки.
        stream (bool): Флаг, указывающий, использовать ли потоковую передачу.
        proxy (str, optional): Прокси для использования. По умолчанию `None`.
        access_token (str, optional): CSRF токен для доступа к VoiGpt.com. По умолчанию `None`.
        **kwargs: Дополнительные именованные аргументы.

    Returns:
        CreateResult: Объект, содержащий результат запроса.

    Raises:
        RuntimeError: Если ответ от VoiGpt.com не может быть обработан.

    Как работает функция:
    1. Если `model` не указана, устанавливается значение по умолчанию "gpt-3.5-turbo".
    2. Если `access_token` не предоставлен, функция пытается получить его, выполняя GET-запрос к VoiGpt.com.
    3. Формируются заголовки запроса, включая CSRF токен.
    4. Формируется полезная нагрузка (payload) с сообщениями пользователя.
    5. Отправляется POST-запрос к VoiGpt.com с заголовками и полезной нагрузкой.
    6. Ответ от VoiGpt.com обрабатывается и возвращается в виде генератора.
    """
```

## Параметры класса

- `model` (str): Модель для использования. Если не указана, используется "gpt-3.5-turbo".
- `messages` (Messages): Список сообщений для отправки.
- `stream` (bool): Флаг, указывающий, использовать ли потоковую передачу.
- `proxy` (str, optional): Прокси для использования. По умолчанию `None`.
- `access_token` (str, optional): CSRF токен для доступа к VoiGpt.com. По умолчанию `None`.

**Примеры**:

```python
# Пример использования create_completion
access_token = "ваш_access_token"  # Замените на реальный access token
messages = [{"role": "user", "content": "Привет, как дела?"}]
model = "gpt-3.5-turbo"

# Вызов функции create_completion
result = VoiGpt.create_completion(model=model, messages=messages, stream=False, access_token=access_token)

# Вывод результата
for item in result:
    print(item)