# Модуль `post_event`

## Обзор

Модуль предназначен для автоматизации процесса публикации информации о мероприятиях в Facebook. Он включает в себя функции для сбора данных о мероприятиях, загрузки деталей из JSON-файлов и отправки этих данных в указанные группы Facebook.

## Подробней

Этот модуль является частью системы автоматизации маркетинга в Facebook. Он использует данные о мероприятиях, хранящиеся в Google Drive, для создания и публикации постов в группах Facebook. Основная цель модуля - упростить и автоматизировать процесс информирования целевой аудитории о предстоящих мероприятиях.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
    ...
```

**Назначение**: Обрабатывает и отправляет информацию о мероприятиях в Facebook.

**Как работает функция**:
1.  Инициализирует веб-драйвер Chrome.
2.  Получает список директорий с данными о мероприятиях из Google Drive (`aliexpress/events`).
3.  Получает список файлов с информацией о группах Facebook (`facebook/groups`).
4.  Создает экземпляр класса `FacebookPromoter` для управления публикациями.
5.  Для каждого файла мероприятия загружает данные из JSON-файла и отправляет их в соответствующие группы Facebook.

**Примеры**:

```python
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
```

**Назначение**:  Функция для отправки информации о мероприятии в указанные группы Facebook.

**Параметры**:

*   `event` (dict):  Словарь, содержащий информацию о мероприятии.

**Как работает функция**:

1.  Загружает информацию о группах из JSON-файла `my_managed_groups.json`.
2.  Инициализирует веб-драйвер Chrome.
3.  Перебирает группы, указанные в файле конфигурации.
4.  Формирует URL для публикации мероприятия в группе.
5.  Вызывает функцию `post_event` для фактической публикации.

**Примеры**:

```python
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)
```

## Переменные

В модуле используются следующие переменные:

*   `events_dirs` (list): Список директорий, содержащих данные о мероприятиях.
*   `group_file_paths` (list): Список путей к файлам с информацией о группах Facebook.
*   `promoter` (FacebookPromoter): Экземпляр класса `FacebookPromoter`, используемый для публикации мероприятий.
*   `event` (dict): Словарь с данными о мероприятии.
*    `d` (Driver): Драйвер для управления браузером

## Параметры класса

В классе используются следующие параметры:

*  `event_file` (str): Имя файла, содержащего данные о мероприятии.
*  `events` (list): Список мероприятий для публикации.
*  `group_file_paths` (list): Список путей к файлам с информацией о группах Facebook.
*   `is_event` (bool): Логическое значение, указывающее, является ли публикуемый контент мероприятием.

## Как работает модуль:

1.  **Сбор данных о мероприятиях**: Функция `post_events` получает список директорий, представляющих собой отдельные мероприятия, из указанной папки в Google Drive.
2.  **Загрузка информации о группах**: Функция `post_events` также загружает список файлов, содержащих информацию о группах Facebook, в которые будет опубликована информация о мероприятиях.
3.  **Инициализация `FacebookPromoter`**: Создается экземпляр класса `FacebookPromoter`, который отвечает за фактическую публикацию информации в Facebook.
4.  **Публикация мероприятий**: Для каждого мероприятия загружается JSON-файл, содержащий подробную информацию о мероприятии, и вызывается метод `process_groups` класса `FacebookPromoter` для публикации информации в выбранных группах.
5.  **Альтернативный метод публикации**: Функция `post_to_my_group` предоставляет альтернативный способ публикации мероприятий, при котором информация о группах загружается непосредственно из файла `my_managed_groups.json`.
6.  **Использование веб-драйвера**: Для автоматизации действий в браузере используется веб-драйвер Chrome.